[1mdiff --git a/.env b/.env[m
[1mindex 4d33dc4..5dd6960 100644[m
[1m--- a/.env[m
[1m+++ b/.env[m
[36m@@ -3,7 +3,10 @@[m [mCLERK_SECRET_KEY=sk_test_pVNe2s1PVwZzsPmpkZaZy8Di3CJHtaeJWT7xoCBEWM[m
 NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/[m
 NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/[m
 MONGODB_URI=mongodb+srv://archist:1&Bigcyri@cluster0.61na4.mongodb.net/?retryWrites=true&w=majority[m
[31m-NEXT_PUBLIC_EMAIL_USER=hi.cyril@gmail.com legion.athenienne@gmail.com puissancedamour@yahoo.fr prof@gmail.com[m
[32m+[m[32mNEXT_PUBLIC_EMAIL_ADMIN=hi.cyril@gmail.com puissancedamour@yahoo.fr[m
[32m+[m[32mEMAIL_USER_CYR=hi.cyril@gmail.com[m
[32m+[m[32mEMAIL_USER_MAM=puissancedamour@yahoo.fr[m
[32m+[m[32mNEXT_PUBLIC_EMAIL_USER=hi.cyril@gmail.com puissancedamour@yahoo.fr[m
 EMAIL_PASS=tdev imub pooc uess[m
 [m
 [m
[1mdiff --git a/.gitignore b/.gitignore[m
[1mindex 2d9e654..fb3bd4a 100644[m
[1m--- a/.gitignore[m
[1m+++ b/.gitignore[m
[36m@@ -13,8 +13,6 @@[m [m_/compresse_imgs/log[m
 #public/**.jpeg[m
 #public/**.png[m
 #public/images[m
[31m-public/images/*.*[m
[31m-!public/images/*.webp[m
 #public/img_[m
 #---[m
 public/**.jpeg[m
[1mdiff --git a/app/AfterFooter.js b/app/AfterFooter.js[m
[1mindex 74dee98..75b762f 100644[m
[1m--- a/app/AfterFooter.js[m
[1m+++ b/app/AfterFooter.js[m
[36m@@ -5,7 +5,7 @@[m [mexport default function AfterFooter() {[m
         <div id="modal">[m
             <span className="close"></span>[m
             <div className="modal___header">[m
[31m-                [m
[32m+[m
             </div>[m
             <div className="modal___main">[m
 [m
[1mdiff --git a/app/Client.js b/app/Client.js[m
[1mdeleted file mode 100644[m
[1mindex c2c50b9..0000000[m
[1m--- a/app/Client.js[m
[1m+++ /dev/null[m
[36m@@ -1,64 +0,0 @@[m
[31m-"use client"[m
[31m-[m
[31m-import { useEffect, useContext } from 'react'[m
[31m-import { usePathname } from 'next/navigation'[m
[31m-[m
[31m-import AuthContext from "../stores/authContext.js"[m
[31m-import {AdminContextProvider} from '../stores/adminContext.js'[m
[31m-[m
[31m-import Header from "./Header";[m
[31m-import Nav from "./Nav";[m
[31m-import Footer from "./Footer";[m
[31m-[m
[31m-export default function ClientIsHome({children}) {[m
[31m-[m
[31m-    const pathname = usePathname()[m
[31m-    , {isAdmin} = useContext(AuthContext)[m
[31m-[m
[31m-    useEffect(() => {[m
[31m-        console.log(isAdmin);[m
[31m-    [m
[31m-    }, [isAdmin])[m
[31m-    useEffect(() => {[m
[31m-        console.log(' re-render causé par:', {[m
[31m-            pathname,[m
[31m-            isAdmin[m
[31m-        })[m
[31m-    }, [pathname, isAdmin])[m
[31m-    [m
[31m-[m
[31m-[m
[31m-    const isAdminPath = pathname?.indexOf('admin') !== -1[m
[31m-    [m
[31m-    console.log(isAdminPath);[m
[31m-    console.log(isAdmin);[m
[31m-        [m
[31m-    if (!isAdminPath){[m
[31m-        return <>[m
[31m-            {console.log("okok je suis dans clienthome")}[m
[31m-            [m
[31m-            {((pathname && pathname?.indexOf('admin') == -1) || (!isAdmin && pathname?.indexOf('admin') != -1)) && <>[m
[31m-                <Header />[m
[31m-    [m
[31m-                <Nav />[m
[31m-            </>}[m
[31m-            {pathname?.indexOf('admin') == -1 && <>{children} <Footer /></>}[m
[31m-            [m
[31m-            [m
[31m-        </>[m
[31m-        [m
[31m-    }else{[m
[31m-    [m
[31m-        if (!ClerkLoaded) return <NotConnectedPage />[m
[31m-[m
[31m-        if (!isAdmin) return <AccessDenied />[m
[31m-        [m
[31m-        return (<>[m
[31m-                <HeaderAdmin />[m
[31m-                {children}[m
[31m-        </>)[m
[31m-[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-}[m
[1mdiff --git a/app/HeaderAdmin.jsx b/app/HeaderAdmin.jsx[m
[1mindex 2cb349a..1b6d6ad 100644[m
[1m--- a/app/HeaderAdmin.jsx[m
[1m+++ b/app/HeaderAdmin.jsx[m
[36m@@ -2,7 +2,6 @@[m [mimport {useContext, useEffect} from 'react'[m
 import { usePathname } from 'next/navigation'[m
 import Link from "next/link";[m
 import AdminContext from "../stores/adminContext.js"[m
[31m-import DesignHeader from "./_/Admin/DesignHeader.jsx"[m
 [m
 export default function HeaderAdmin() {[m
 [m
[36m@@ -24,7 +23,6 @@[m [mexport default function HeaderAdmin() {[m
   [m
   return ([m
     <header>[m
[31m-      <DesignHeader />[m
       <menu className="mainMenu">[m
         <li>[m
           <Link [m
[1mdiff --git a/app/_/Admin/DesignHeader.jsx b/app/_/Admin/DesignHeader.jsx[m
[1mdeleted file mode 100644[m
[1mindex 4702954..0000000[m
[1m--- a/app/_/Admin/DesignHeader.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,7 +0,0 @@[m
[31m-[m
[31m-export default function DesignHeader() {[m
[31m-  [m
[31m-    return (<>[m
[31m-    </>)[m
[31m-  }[m
[31m-  [m
\ No newline at end of file[m
[1mdiff --git a/app/_/Carousel.jsx b/app/_/Carousel.jsx[m
[1mindex 64a8e74..c36f5ea 100644[m
[1m--- a/app/_/Carousel.jsx[m
[1m+++ b/app/_/Carousel.jsx[m
[36m@@ -153,7 +153,6 @@[m [mconst Carousel = memo(function Carousel({page="home",diapos: initialDiapos, titr[m
                     {JSON.stringify(models?.schemaDiapo?.paths)} */}[m
                     {/* {JSON.stringify(memoizedDiapos[0]['identifiant_$_hidden'])} */}[m
                     {[m
[31m-                        // console.log("DANS carousel.jsx, J'AI UN PROBLEME AVEC LE COMPOSANT EditMongoForm, QUI N'ARRETE PAS DE SE RERENDRE INDÉFINIMENT. JE L'AI MIS EN COMMENTAIRE POUR L'INSTANT")[m
                         createPortal([m
                             <EditMongoForm [m
                                 hiddens={{identifiant: page+"_0"}}[m
[1mdiff --git a/app/_/Cart/CartTotal.js b/app/_/Cart/CartTotal.js[m
[1mindex 1cce538..a998fce 100644[m
[1m--- a/app/_/Cart/CartTotal.js[m
[1m+++ b/app/_/Cart/CartTotal.js[m
[36m@@ -1,6 +1,6 @@[m
 import React, { useEffect } from 'react'[m
[31m-import GooglePayButton from "@google-pay/button-react";[m
[31m-import { PayPalButtons, PayPalScriptProvider } from '@paypal/react-paypal-js';[m
[32m+[m[32m// import GooglePayButton from "@google-pay/button-react";[m
[32m+[m[32m// import { PayPalButtons, PayPalScriptProvider } from '@paypal/react-paypal-js';[m
 import Features2 from './Features2';[m
 // import { useSelector } from 'react-redux';[m
 // import CartAdditonalFeatures from './CartAdditonalFeatures';[m
[36m@@ -98,7 +98,7 @@[m [mconst CartTotal = (props) => {[m
             */}[m
 [m
             <div className='paypalHold'>[m
[31m-                <PayPalScriptProvider>[m
[32m+[m[32m                {/* <PayPalScriptProvider>[m
                     <PayPalButtons aria-label='BUY WITH PAYPAL' createOrder={(data, actions) => {[m
                         return actions.order.create({[m
                             purchase_units: [[m
[36m@@ -112,7 +112,7 @@[m [mconst CartTotal = (props) => {[m
                     }}>[m
 [m
                     </PayPalButtons>[m
[31m-                </PayPalScriptProvider>[m
[32m+[m[32m                </PayPalScriptProvider> */}[m
             </div>[m
 [m
             {cartLen > 1 ? <div className='mobDisappear'>[m
[1mdiff --git a/app/_/Cart/_/CartRecap.jsx b/app/_/Cart/_/CartRecap.jsx[m
[1mindex 26cc01a..ee59bdf 100644[m
[1m--- a/app/_/Cart/_/CartRecap.jsx[m
[1m+++ b/app/_/Cart/_/CartRecap.jsx[m
[36m@@ -2,8 +2,8 @@[m [mimport {useState,useEffect,useContext} from 'react'[m
 import Image from "next/image"[m
 // import * as CartLS from "../../../../utils/favorisManager.js"[m
 import * as Ecommerce_articles from "../../../../assets/datas/articles.js"[m
[31m-import CartPaypal from './CartPaypal';[m
[31m-import CartGoogle from './CartGoogle';[m
[32m+[m[32m// import CartPaypal from './CartPaypal';[m
[32m+[m[32m// import CartGoogle from './CartGoogle';[m
 import AuthContext from "../../../../stores/authContext.js"[m
 [m
 export default function CartRecap() {[m
[36m@@ -20,7 +20,7 @@[m [mexport default function CartRecap() {[m
         , ls = CartLS.getAllFavoris()[m
         , cartArray = Object.keys(ls)[m
         , len = cartArray.length[m
[31m-[m
[32m+[m[41m        [m
 [m
         [m
         if(!len)[m
[36m@@ -41,8 +41,8 @@[m [mexport default function CartRecap() {[m
                         <p>Vous avez {len} produit{len!=1 && "s"} ({totalProducts}) dans le panier.</p>[m
                         <span title="Montant total">{totalAmount}</span>[m
                     </div>[m
[31m-                    <CartPaypal connected={userConnectedDatas} />[m
[31m-                    <CartGoogle connected={userConnectedDatas} />[m
[32m+[m[32m                    {/* <CartPaypal connected={userConnectedDatas} /> */}[m
[32m+[m[32m                    {/* <CartGoogle connected={userConnectedDatas} /> */}[m
                 </section>[m
                 <ul>[m
                     {!cartArray [m
[36m@@ -61,7 +61,7 @@[m [mexport default function CartRecap() {[m
                                     width={200}                                    height={200}[m
                                 />[m
                                 <span className="prix">{article.prix} </span>[m
[31m-                                <p>{article.fr}</p>[m
[32m+[m[32m                                <p dangerouslySetInnerHTML={{__html:article.fr}}></p>[m
                                 <input data-key={item} defaultValue={ls[item]} onChange={e=>{handleQty(e,ls)}} className="qty" type="number" min="1" max="99" title={"Choisir une quantité entre 1 et 99"} />[m
                                 <button data-key={item} onClick={(e)=>{CartLS.deleteArticle(e.target.dataset.key);e.target.parentNode.remove();}}>⌫</button>[m
                             </li>[m
[36m@@ -74,6 +74,7 @@[m [mexport default function CartRecap() {[m
     }[m
     [m
     useEffect(() => { [m
[32m+[m[41m        [m
         start()[m
         [m
     }, [])[m
[1mdiff --git a/app/_/Gmap_plus.jsx b/app/_/Gmap_plus.jsx[m
[1mdeleted file mode 100644[m
[1mindex bff3523..0000000[m
[1m--- a/app/_/Gmap_plus.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,132 +0,0 @@[m
[31m-import React from 'react'[m
[31m-import { Wrapper, Status } from "@googlemaps/react-wrapper"[m
[31m-[m
[31m-import {deepCompareEqualsForMaps,useDeepCompareEffectForMaps,useDeepCompareMemoize} from './Gmap/hooks.js'[m
[31m-[m
[31m-export default function Gmap({ [m
[31m-    initialCenter = { lat: 5.748560, lng: -3.983372 }, // Default initial center[m
[31m-    initialZoom = 13, // Default initial zoom[m
[31m-    onCoordinatesClick // Add prop for callback[m
[31m-}) {[m
[31m-    const render = (status) => {[m
[31m-        return <h1>{status}</h1>[m
[31m-    }[m
[31m-    , [center, setCenter] = React.useState(initialCenter) // Use prop for initial center[m
[31m-    , [zoom, setZoom] = React.useState(initialZoom) // Use prop for initial zoom[m
[31m-    , [markerPosition, setMarkerPosition] = React.useState(null); // State for single marker[m
[31m-[m
[31m-    const handleMapClick = (e) => {[m
[31m-        const clickedCoords = e.latLng.toJSON();[m
[31m-        console.log("Map clicked at:", clickedCoords);[m
[31m-        setMarkerPosition(clickedCoords); // Update marker position on click[m
[31m-        // Call the callback prop if it exists[m
[31m-        if (onCoordinatesClick) {[m
[31m-            onCoordinatesClick(clickedCoords);[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    const onIdle = (m) => {[m
[31m-        console.log("onIdle")[m
[31m-        setZoom(m.getZoom())[m
[31m-        setCenter(m.getCenter().toJSON())[m
[31m-    }[m
[31m-    , ref = React.useRef(null)[m
[31m-    // , refMap = React.useRef(null)[m
[31m-    , [map, setMap] = React.useState()[m
[31m-[m
[31m-[m
[31m-    React.useEffect(() => {[m
[31m-        if (ref.current && !map) {[m
[31m-            setMap(new window.google.maps.Map(ref.current, {}))[m
[31m-        }[m
[31m-    }, [ref, map])[m
[31m-    [m
[31m-    return <Wrapper [m
[31m-        apiKey={"AIzaSyA91x3_pmeeoc1bwFWvj2dehOCBuH0VKcU"} [m
[31m-        render={render}[m
[31m-    >[m
[31m-        <Map [m
[31m-            center={center} [m
[31m-            zoom={zoom} [m
[31m-            onClick={handleMapClick} [m
[31m-            onIdle={onIdle} [m
[31m-        >[m
[31m-            {markerPosition && <Marker position={markerPosition} />} [m
[31m-        </Map>[m
[31m-    </Wrapper>[m
[31m-}[m
[31m-[m
[31m-const Map = ({[m
[31m-    onClick,[m
[31m-    onIdle,[m
[31m-    children,[m
[31m-    style,[m
[31m-    ...options[m
[31m-}) => {[m
[31m-    const ref = React.useRef(null);[m
[31m-    const [map, setMap] = React.useState()[m
[31m-[m
[31m-    React.useEffect(() => {[m
[31m-        if (map) {[m
[31m-            ["click", "idle"].forEach((eventName) =>[m
[31m-                // google.maps.event.clearListeners(map, eventName)[m
[31m-                {}[m
[31m-            );[m
[31m-            if (onClick) {[m
[31m-                map.addListener("click", onClick)[m
[31m-            }[m
[31m-        [m
[31m-            if (onIdle) {[m
[31m-                map.addListener("idle", () => onIdle(map))[m
[31m-            }[m
[31m-        }[m
[31m-    }, [map, onClick, onIdle])[m
[31m-[m
[31m-    useDeepCompareEffectForMaps(() => {[m
[31m-        if (map) {[m
[31m-          map.setOptions(options);[m
[31m-        }[m
[31m-      }, [map, options]);[m
[31m-[m
[31m-    React.useEffect(() => {[m
[31m-        if (ref.current && !map) {[m
[31m-            setMap(new window.google.maps.Map(ref.current, {}))[m
[31m-        }[m
[31m-    }, [ref, map])[m
[31m-[m
[31m-    return <>[m
[31m-        <div id="map" ref={ref}  style={style} />[m
[31m-        {React.Children.map(children, (child) => {[m
[31m-        if (React.isValidElement(child)) {[m
[31m-            // set the map prop on the child component[m
[31m-            // @ts-ignore[m
[31m-            return React.cloneElement(child, { map })[m
[31m-        }[m
[31m-        })}[m
[31m-    </>[m
[31m-}[m
[31m-[m
[31m-const Marker = (options) => {[m
[31m-    const [marker, setMarker] = React.useState();[m
[31m-[m
[31m-    React.useEffect(() => {[m
[31m-        if (!marker) {[m
[31m-            const newMarker = new window.google.maps.Marker();[m
[31m-            setMarker(newMarker);[m
[31m-        }[m
[31m-[m
[31m-        // Configurer le marqueur lorsqu'il est créé ou lorsque les options changent[m
[31m-        if (marker) {[m
[31m-            marker.setOptions(options);[m
[31m-        }[m
[31m-[m
[31m-        // Nettoyer le marqueur lors du démontage[m
[31m-        return () => {[m
[31m-            if (marker) {[m
[31m-                marker.setMap(null);[m
[31m-            }[m
[31m-        };[m
[31m-    }, [marker, options]);[m
[31m-[m
[31m-    return null;[m
[31m-};[m
\ No newline at end of file[m
[1mdiff --git a/app/_/Hgroup.jsx b/app/_/Hgroup.jsx[m
[1mindex fcbcde9..b4e3026 100644[m
[1m--- a/app/_/Hgroup.jsx[m
[1m+++ b/app/_/Hgroup.jsx[m
[36m@@ -34,6 +34,8 @@[m [mexport default function Hgroup() {[m
             break;[m
             case "bolobi":setImageContextuelMenu([bolobi])[m
             break;[m
[32m+[m[32m            case "blog-bolobi"://setImageContextuelMenu([bolobi])[m
[32m+[m[32m            break;[m
             default: setImageContextuelMenu([accueil])[m
         }[m
         setTimeout(handleTimeout, 5000)[m
[36m@@ -60,7 +62,8 @@[m [mexport default function Hgroup() {[m
                         // fill="layout"[m
                     />[m
                     <span>[m
[31m-                        SANCTUAIRE Notre Dame du ROSAIRE de Bolobi[m
[32m+[m[32m                        <span>SANCTUAIRE</span> <span>Notre Dame du ROSAIRE</span> <span>de Bolobi</span>[m
[32m+[m[32m                        <br/><span>Abidjan, Côte d'ivoire</span>[m
                         {/* <strong>Évangélisation</strong>, <strong>Prière</strong> et{" "}[m
                         <strong>Assistance spirituelle</strong> */}[m
                     </span>[m
[1mdiff --git a/app/_/LogSignIn.jsx b/app/_/LogSignIn.jsx[m
[1mindex d8365ea..b92824a 100644[m
[1m--- a/app/_/LogSignIn.jsx[m
[1m+++ b/app/_/LogSignIn.jsx[m
[36m@@ -1,59 +1,30 @@[m
 import {useState,useEffect,useContext} from 'react'[m
 import Link from "next/link";[m
[31m-import { SignInButton, SignUpButton, UserProfile, UserButton, useAuth, isLoaded, useUser, SignedIn, SignedOut, useClerk } from "@clerk/nextjs"[m
[32m+[m[32mimport { SignInButton, SignUpButton, UserProfile, UserButton, useAuth, useUser, SignedIn, SignedOut, useClerk } from "@clerk/nextjs"[m
 [m
 import AuthContext from "../../stores/authContext.js"[m
 [m
 export default function LogSignIn() {[m
 [m
     const [isCartPage, setIsCartPage] = useState()[m
[31m-    , {setIsAdmin,role,setRole} = useContext(AuthContext)[m
[32m+[m[32m    , {setIsAdmin} = useContext(AuthContext)[m
     // , { isLoaded, userId, sessionId, getToken } = useAuth()[m
     , { isSignedIn, user } = useUser()[m
     , { signOut } = useClerk();[m
 [m
     useEffect(() => {[m
         console.log(user?.primaryEmailAddress?.emailAddress)[m
[31m-        console.log(process.env.NEXT_PUBLIC_EMAIL_USER)[m
[31m-        console.log(process.env.NEXT_PUBLIC_EMAIL_USER.indexOf(user?.primaryEmailAddress?.emailAddress))[m
[31m-[m
[31m-        [m
         if(!isSignedIn)[m
             setIsAdmin(false)[m
[31m-        if(process.env.NEXT_PUBLIC_EMAIL_USER.indexOf(user?.primaryEmailAddress?.emailAddress) !== -1[m
[32m+[m[32m        if(process.env.NEXT_PUBLIC_EMAIL_ADMIN.indexOf(user?.primaryEmailAddress?.emailAddress) !== -1[m
         // if(user?.primaryEmailAddress?.emailAddress == "hi.cyril@gmail.com"[m
             // || true [m
[31m-        ){[m
[31m-            const prev_email = user?.primaryEmailAddress?.emailAddress.substring(0,user?.primaryEmailAddress?.emailAddress.indexOf("@"))[m
[31m-            let myRole = ""[m
[31m-            console.log(user?.primaryEmailAddress?.emailAddress);[m
[31m-            console.log(prev_email);[m
[31m-            [m
[32m+[m[32m        )[m
             setIsAdmin(true)[m
[31m-            switch(prev_email){[m
[31m-                case"hi.cyril":case"legion.athenienne": myRole = "admin"[m
[31m-                break;[m
[31m-                case"puissancedamour": myRole = "editeur"[m
[31m-                break;[m
[31m-                case"prof": myRole = "enseignant"[m
[31m-                break;[m
[31m-            }[m
[31m-            console.log(myRole);[m
[31m-            console.log(role);[m
[31m-            setRole(myRole)[m
[31m-            console.log(role);[m
[31m-            [m
[31m-        }[m
     }, [user])[m
     [m
     [m
     useEffect(() => { [m
[31m-[m
[31m-//EASY DEV PURPOSE[m
[31m-// setIsAdmin(true);[m
[31m-[m
[31m-[m
[31m-        [m
         (()=>{setIsCartPage(document.querySelector('#__next>main.cart'))})()[m
         console.log("TRY TO USE CLERK NPM PACKAGE SOLUTION FOR LOGIN SERVICES")[m
         // alert("TRY TO USE CLERK NPM PACKAGE SOLUTION FOR LOGIN SERVICES")[m
[36m@@ -65,7 +36,6 @@[m [mexport default function LogSignIn() {[m
             ➕[m
         </a> */}[m
 [m
[31m-[m
         <SignedOut>[m
             <SignInButton title="Se conncecter/S'incrire">&nbsp;</SignInButton>[m
         </SignedOut>[m
[1mdiff --git a/app/_/MapLeaflet.jsx b/app/_/MapLeaflet.jsx[m
[1mindex de5ed8a..e6472ad 100644[m
[1m--- a/app/_/MapLeaflet.jsx[m
[1m+++ b/app/_/MapLeaflet.jsx[m
[36m@@ -18,8 +18,8 @@[m [mlet DefaultIcon = L.icon({[m
 [m
 L.Marker.prototype.options.icon = DefaultIcon[m
 [m
[31m-export default function MapLeaflet(position=[51.505, -0.09]) {[m
[31m-    // const position = [51.505, -0.09][m
[32m+[m[32mexport default function MapLeaflet() {[m
[32m+[m[32m    const position = [51.505, -0.09][m
     const [isMounted, setIsMounted] = useState(false)[m
 [m
     useEffect(() => {[m
[1mdiff --git a/app/_/MapLeaflet_Gemini.jsx b/app/_/MapLeaflet_Gemini.jsx[m
[1mdeleted file mode 100644[m
[1mindex 389c246..0000000[m
[1m--- a/app/_/MapLeaflet_Gemini.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,104 +0,0 @@[m
[31m-'use client'[m
[31m-[m
[31m-import L from 'leaflet'[m
[31m-import { MapContainer, Marker, Popup, TileLayer, useMapEvents } from 'react-leaflet'[m
[31m-import 'leaflet/dist/leaflet.css'[m
[31m-import { useEffect, useState, useRef } from 'react'[m
[31m-[m
[31m-// Correction du problème d'icône Leaflet[m
[31m-import icon from 'leaflet/dist/images/marker-icon.png'[m
[31m-import iconShadow from 'leaflet/dist/images/marker-shadow.png'[m
[31m-[m
[31m-let DefaultIcon = L.icon({[m
[31m-    iconUrl: icon.src,[m
[31m-    shadowUrl: iconShadow.src,[m
[31m-    iconSize: [25, 41],[m
[31m-    iconAnchor: [12, 41][m
[31m-})[m
[31m-[m
[31m-L.Marker.prototype.options.icon = DefaultIcon[m
[31m-[m
[31m-// Component to handle map events[m
[31m-function MapEvents({ onMapClick, setMarkerPosition }) {[m
[31m-  useMapEvents({[m
[31m-    click(e) {[m
[31m-      const { lat, lng } = e.latlng;[m
[31m-      console.log(`Map clicked at: ${lat}, ${lng}`);[m
[31m-      setMarkerPosition([lat, lng]); // Update local marker state[m
[31m-      if (onMapClick) {[m
[31m-        onMapClick(e.latlng); // Call the callback prop with latlng object[m
[31m-      }[m
[31m-    },[m
[31m-  });[m
[31m-  return null; // This component doesn't render anything itself[m
[31m-}[m
[31m-[m
[31m-export default function MapLeaflet({ initialPosition = [51.505, -0.09], onMapClick }) { [m
[31m-    const [isMounted, setIsMounted] = useState(false);[m
[31m-    const [markerPosition, setMarkerPosition] = useState(initialPosition); [m
[31m-    const [mapCenter, setMapCenter] = useState(initialPosition); [m
[31m-    const mapRef = useRef(null);[m
[31m-[m
[31m-    useEffect(() => {[m
[31m-        setIsMounted(true);[m
[31m-        return () => {[m
[31m-            if (mapRef.current) {[m
[31m-                try {[m
[31m-                  mapRef.current.off(); // Remove all event listeners[m
[31m-                  mapRef.current.remove(); // Destroy the map instance[m
[31m-                  console.log("Leaflet map instance cleaned up.");[m
[31m-                } catch (error) {[m
[31m-                  console.error("Error cleaning up Leaflet map:", error);[m
[31m-                }[m
[31m-                mapRef.current = null; // Clear the ref[m
[31m-            }[m
[31m-        };[m
[31m-    }, []);[m
[31m-[m
[31m-    useEffect(() => {[m
[31m-        if ([m
[31m-            Array.isArray(initialPosition) && initialPosition.length === 2 &&[m
[31m-            (initialPosition[0] !== markerPosition[0] || initialPosition[1] !== markerPosition[1])[m
[31m-        ) {[m
[31m-            console.log("Updating marker position from prop:", initialPosition);[m
[31m-            setMarkerPosition(initialPosition);[m
[31m-            setMapCenter(initialPosition); [m
[31m-        }[m
[31m-    }, [initialPosition]); [m
[31m-[m
[31m-    if (!isMounted) {[m
[31m-        return <div style={{ height: '400px', width: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', background: '#eee' }}>Loading map...</div>; [m
[31m-    }[m
[31m-[m
[31m-    const isValidPosition = pos => [m
[31m-        Array.isArray(pos) && pos.length === 2 && !isNaN(pos[0]) && !isNaN(pos[1]);[m
[31m-[m
[31m-    const currentCenter = isValidPosition(mapCenter) ? mapCenter : [0, 0]; [m
[31m-    const currentMarkerPos = isValidPosition(markerPosition) ? markerPosition : null; [m
[31m-[m
[31m-    return ([m
[31m-        <div style={{ height: "400px", width: "100%" }}>[m
[31m-            <MapContainer [m
[31m-                whenCreated={mapInstance => { mapRef.current = mapInstance; }} [m
[31m-                key={JSON.stringify(currentCenter)} [m
[31m-                center={currentCenter} [m
[31m-                zoom={13} [m
[31m-                scrollWheelZoom={false}[m
[31m-                style={{ height: "100%", width: "100%" }}[m
[31m-            >[m
[31m-                <TileLayer[m
[31m-                    attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'[m
[31m-                    url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"[m
[31m-                />[m
[31m-                {currentMarkerPos && ([m
[31m-                    <Marker position={currentMarkerPos}>[m
[31m-                        <Popup>[m
[31m-                            Coordinates: <br /> Lat: {currentMarkerPos[0]?.toFixed(5)}, Lng: {currentMarkerPos[1]?.toFixed(5)}[m
[31m-                        </Popup>[m
[31m-                    </Marker>[m
[31m-                )}[m
[31m-                <MapEvents onMapClick={onMapClick} setMarkerPosition={setMarkerPosition} />[m
[31m-            </MapContainer>[m
[31m-        </div>[m
[31m-    );[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/app/admin/AccessDenied.jsx b/app/admin/AccessDenied.jsx[m
[1mindex b294065..d094c77 100644[m
[1m--- a/app/admin/AccessDenied.jsx[m
[1m+++ b/app/admin/AccessDenied.jsx[m
[36m@@ -1,5 +1,5 @@[m
 export default function AccessDenied() {[m
   return ([m
[31m-    <div>Vous n&acute;avez pas accès à cette partie du site :p (AccessDenied.jsx)</div>[m
[32m+[m[32m    <div>Vous n&acute;avez pas accès à cette partie du site :p</div>[m
   )[m
 }[m
[1mdiff --git a/app/admin/layout.jsx b/app/admin/layout.jsx[m
[1mindex 9b818fc..9d4f018 100644[m
[1m--- a/app/admin/layout.jsx[m
[1m+++ b/app/admin/layout.jsx[m
[36m@@ -1,11 +1,11 @@[m
 import {useContext} from 'react'[m
 import AccessDenied from "./AccessDenied"[m
 import AuthContext from "../../stores/authContext"[m
[31m-import "../../assets/scss/admin.scss"[m
 [m
 export default function Layout({children}) {[m
   // const { isAdmin } = useContext(AuthContext)[m
 [m
[32m+[m[41m  [m
   return (<>[m
     {children}[m
     {/* {isAdmin && children}[m
[1mdiff --git a/app/admin/page.jsx b/app/admin/page.jsx[m
[1mdeleted file mode 100644[m
[1mindex 5353f34..0000000[m
[1m--- a/app/admin/page.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,8 +0,0 @@[m
[31m-[m
[31m-export default function AdminHomepage() {[m
[31m-  // const { isAdmin } = useContext(AuthContext)[m
[31m-[m
[31m-  return (<>[m
[31m-    rien de spécial à dire pour l'instant[m
[31m-  </>)[m
[31m-}[m
[1mdiff --git a/app/admin/sanctuaire/page.jsx b/app/admin/sanctuaire/page.jsx[m
[1mindex 6845efb..91ffbfe 100644[m
[1m--- a/app/admin/sanctuaire/page.jsx[m
[1m+++ b/app/admin/sanctuaire/page.jsx[m
[36m@@ -12,6 +12,7 @@[m [mexport default function ReservationManager() {[m
   const [isModalVisible, setIsModalVisible] = useState(false)[m
   const [isPromotionModalVisible, setIsPromotionModalVisible] = useState(false)[m
   const [isDeleteModalVisible, setIsDeleteModalVisible] = useState(false)[m
[32m+[m[32m  const [isDetailsModalVisible, setIsDetailsModalVisible] = useState(false)[m
   const [editingReservation, setEditingReservation] = useState(null)[m
   const [searchText, setSearchText] = useState('')[m
   const [dateRange, setDateRange] = useState(null)[m
[36m@@ -36,18 +37,58 @@[m [mexport default function ReservationManager() {[m
     fetchReservations()[m
   }, [])[m
 [m
[32m+[m[32m  // Ajouter une fonction de gestion des dates[m
[32m+[m[32m  const handleDateRangeChange = (dates, dateStrings) => {[m
[32m+[m[32m    console.log('Dates reçues du RangePicker:', dates);[m
[32m+[m[32m    console.log('Dates en format string:', dateStrings);[m
[32m+[m[41m    [m
[32m+[m[32m    if (dates) {[m
[32m+[m[32m      // Créer de nouveaux objets moment à partir des chaînes de date[m
[32m+[m[32m      const [startStr, endStr] = dateStrings;[m
[32m+[m[32m      const startDate = moment(startStr, 'DD/MM/YYYY').startOf('day');[m
[32m+[m[32m      const endDate = moment(endStr, 'DD/MM/YYYY').endOf('day');[m
[32m+[m[41m      [m
[32m+[m
[32m+[m[32m      console.log('Dates converties:', {[m
[32m+[m[32m        start: startDate.format('YYYY-MM-DD HH:mm:ss'),[m
[32m+[m[32m        end: endDate.format('YYYY-MM-DD HH:mm:ss')[m
[32m+[m[32m      });[m
[32m+[m[32m      setDateRange([startDate, endDate]);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      setDateRange(null);[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m
   // Filtrer les réservations[m
   const filteredReservations = reservations.filter(reservation => {[m
[31m-    const searchLower = searchText.toLowerCase()[m
[32m+[m[32m    const searchLower = searchText.toLowerCase();[m
[32m+[m[41m    [m
[32m+[m[32m    // Debug des dates[m
[32m+[m[32m    console.log('État actuel de dateRange:', dateRange);[m
[32m+[m[41m    [m
[32m+[m[32m    // Convertir les dates de la réservation en objets moment[m
[32m+[m[32m    const reservationStart = moment(reservation.from).startOf('day');[m
[32m+[m[32m    const reservationEnd = moment(reservation.to).endOf('day');[m
[32m+[m[41m    [m
[32m+[m[32m    // Vérifier si une plage de dates est sélectionnée[m
     const dateInRange = !dateRange || ([m
[31m-      moment(reservation.from).isSameOrAfter(dateRange[0], 'day') &&[m
[31m-      moment(reservation.to).isSameOrBefore(dateRange[1], 'day')[m
[31m-    )[m
[32m+[m[32m      reservationStart.isSameOrAfter(dateRange[0], 'day') &&[m
[32m+[m[32m      reservationEnd.isSameOrBefore(dateRange[1], 'day')[m
[32m+[m[32m    );[m
[32m+[m[41m    [m
[32m+[m[32m    console.log('Comparaison des dates pour réservation:', {[m
[32m+[m[32m      reservation_id: reservation._id,[m
[32m+[m[32m      reservationStart: reservationStart.format('YYYY-MM-DD HH:mm:ss'),[m
[32m+[m[32m      reservationEnd: reservationEnd.format('YYYY-MM-DD HH:mm:ss'),[m
[32m+[m[32m      rangeStart: dateRange ? dateRange[0].format('YYYY-MM-DD HH:mm:ss') : 'pas de date',[m
[32m+[m[32m      rangeEnd: dateRange ? dateRange[1].format('YYYY-MM-DD HH:mm:ss') : 'pas de date',[m
[32m+[m[32m      dateInRange[m
[32m+[m[32m    });[m
     [m
     // Vérifier si isArchived est défini, sinon considérer comme non archivé[m
     const isArchivedMatch = typeof reservation.isArchived === 'undefined' [m
       ? !showArchived  // Si isArchived n'est pas défini, montrer dans la vue normale[m
[31m-      : reservation.isArchived === showArchived[m
[32m+[m[32m      : reservation.isArchived === showArchived;[m
 [m
     return dateInRange && [m
       (searchText === '' ||[m
[36m@@ -56,8 +97,8 @@[m [mexport default function ReservationManager() {[m
         reservation.email?.toLowerCase().includes(searchLower) ||[m
         reservation.phone_number?.includes(searchText)[m
       ) &&[m
[31m-      isArchivedMatch[m
[31m-  })[m
[32m+[m[32m      isArchivedMatch;[m
[32m+[m[32m  });[m
 [m
   // Gérer la validation du paiement[m
   const handlePaymentValidation = async (record) => {[m
[36m@@ -182,17 +223,6 @@[m [mexport default function ReservationManager() {[m
       dataIndex: 'community',[m
       key: 'community',[m
     },[m
[31m-    {[m
[31m-      title: 'Contact',[m
[31m-      key: 'contact',[m
[31m-      render: (_, record) => ([m
[31m-        <>[m
[31m-          <div>{record.names}</div>[m
[31m-          <div>{record.email}</div>[m
[31m-          <div>{record.phone_number}</div>[m
[31m-        </>[m
[31m-      )[m
[31m-    },[m
     {[m
       title: 'Type',[m
       dataIndex: 'type_reservation',[m
[36m@@ -221,20 +251,6 @@[m [mexport default function ReservationManager() {[m
         </>[m
       )[m
     },[m
[31m-    {[m
[31m-      title: 'Repas',[m
[31m-      key: 'meals',[m
[31m-      render: (_, record) => ([m
[31m-        record.meal_included ? ([m
[31m-          <>[m
[31m-            <div>Plan: {record.meal_plan === 1 ? '1 repas + PDJ' : '2 repas + PDJ'}</div>[m
[31m-            {record.meals.breakfast && <div>PDJ: {record.meals.breakfast}</div>}[m
[31m-            {record.meals.lunch && <div>Déj: {record.meals.lunch}</div>}[m
[31m-            {record.meals.dinner && <div>Dîner: {record.meals.dinner}</div>}[m
[31m-          </>[m
[31m-        ) : 'Non inclus'[m
[31m-      )[m
[31m-    },[m
     {[m
       title: 'Montants',[m
       key: 'montants',[m
[36m@@ -252,51 +268,6 @@[m [mexport default function ReservationManager() {[m
           </Space>[m
         </>[m
       )[m
[31m-    },[m
[31m-    {[m
[31m-      title: 'Actions',[m
[31m-      key: 'actions',[m
[31m-      render: (_, record) => ([m
[31m-        <Space>[m
[31m-          <Button [m
[31m-            type={record.isValidated ? 'default' : 'primary'}[m
[31m-            icon={record.isValidated ? <CloseCircleOutlined /> : <CheckCircleOutlined />}[m
[31m-            onClick={() => handleReservationValidation(record)}[m
[31m-          >[m
[31m-            {record.isValidated ? 'Invalider' : 'Valider'} réservation[m
[31m-          </Button>[m
[31m-          <Button [m
[31m-            type={record.avance_payee ? 'default' : 'primary'}[m
[31m-            icon={record.avance_payee ? <CloseCircleOutlined /> : <CheckCircleOutlined />}[m
[31m-            onClick={() => handlePaymentValidation(record)}[m
[31m-          >[m
[31m-            {record.avance_payee ? 'Annuler' : 'Valider'} avance pécunière[m
[31m-          </Button>[m
[31m-          <Button [m
[31m-            onClick={() => {[m
[31m-              setEditingReservation(record)[m
[31m-              setIsPromotionModalVisible(true)[m
[31m-            }}[m
[31m-          >[m
[31m-            Réduction[m
[31m-          </Button>[m
[31m-          <Button[m
[31m-            type={record.isArchived ? 'default' : 'dashed'}[m
[31m-            onClick={() => handleArchive(record)}[m
[31m-          >[m
[31m-            {record.isArchived ? 'Désarchiver' : 'Archiver'}[m
[31m-          </Button>[m
[31m-          <Button[m
[31m-            danger[m
[31m-            onClick={() => {[m
[31m-              setEditingReservation(record)[m
[31m-              setIsDeleteModalVisible(true)[m
[31m-            }}[m
[31m-          >[m
[31m-            Supprimer[m
[31m-          </Button>[m
[31m-        </Space>[m
[31m-      )[m
     }[m
   ][m
 [m
[36m@@ -311,8 +282,12 @@[m [mexport default function ReservationManager() {[m
             style={{ width: 300 }}[m
           />[m
           <RangePicker[m
[31m-            onChange={setDateRange}[m
[32m+[m[32m            onChange={handleDateRangeChange}[m
             format="DD/MM/YYYY"[m
[32m+[m[32m            style={{ minWidth: '240px' }}[m
[32m+[m[32m            placeholder={['Date début', 'Date fin']}[m
[32m+[m[32m            allowClear={true}[m
[32m+[m[32m            showTime={false}[m
           />[m
           <Button[m
             type={showArchived ? 'primary' : 'default'}[m
[36m@@ -321,8 +296,8 @@[m [mexport default function ReservationManager() {[m
             {showArchived ? 'Voir réservations actives' : 'Voir archives'}[m
           </Button>[m
         </Space>[m
[31m-        <ul style={{fontSize:".8em"}}>[m
[31m-          <p style={{fontSize:".8em"}}>Ce filtre s'applique sur les propriétés suivantes: [m
[32m+[m[32m        <ul style={{}}>[m
[32m+[m[32m          <p style={{}}>Ce filtre s'applique sur les propriétés suivantes:[m[41m [m
           </p>[m
           <li>La communauté (community)</li>[m
           <li>Le nom (names)</li>[m
[36m@@ -336,8 +311,117 @@[m [mexport default function ReservationManager() {[m
         dataSource={filteredReservations}[m
         rowKey="_id"[m
         scroll={{ x: true }}[m
[32m+[m[32m        onRow={(record) => ({[m
[32m+[m[32m          onClick: () => {[m
[32m+[m[32m            setEditingReservation(record)[m
[32m+[m[32m            setIsDetailsModalVisible(true)[m
[32m+[m[32m          },[m
[32m+[m[32m          style: { cursor: 'pointer' }[m
[32m+[m[32m        })}[m
       />[m
 [m
[32m+[m[32m      {/* Modal de détails */}[m
[32m+[m[32m      <Modal[m
[32m+[m[32m        title={`Détails de la réservation - ${editingReservation?.community || ''}`}[m
[32m+[m[32m        open={isDetailsModalVisible}[m
[32m+[m[32m        onCancel={() => setIsDetailsModalVisible(false)}[m
[32m+[m[32m        width={800}[m
[32m+[m[32m        footer={[[m
[32m+[m[32m          <Button[m
[32m+[m[32m            key="validate"[m
[32m+[m[32m            type={editingReservation?.isValidated ? 'default' : 'primary'}[m
[32m+[m[32m            icon={editingReservation?.isValidated ? <CloseCircleOutlined /> : <CheckCircleOutlined />}[m
[32m+[m[32m            onClick={() => {[m
[32m+[m[32m              handleReservationValidation(editingReservation)[m
[32m+[m[32m              setIsDetailsModalVisible(false)[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            {editingReservation?.isValidated ? 'Invalider' : 'Valider'} réservation[m
[32m+[m[32m          </Button>,[m
[32m+[m[32m          <Button[m
[32m+[m[32m            key="payment"[m
[32m+[m[32m            type={editingReservation?.avance_payee ? 'default' : 'primary'}[m
[32m+[m[32m            icon={editingReservation?.avance_payee ? <CloseCircleOutlined /> : <CheckCircleOutlined />}[m
[32m+[m[32m            onClick={() => {[m
[32m+[m[32m              handlePaymentValidation(editingReservation)[m
[32m+[m[32m              setIsDetailsModalVisible(false)[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            {editingReservation?.avance_payee ? 'Annuler' : 'Valider'} avance pécunière[m
[32m+[m[32m          </Button>,[m
[32m+[m[32m          <Button[m
[32m+[m[32m            key="promotion"[m
[32m+[m[32m            onClick={() => {[m
[32m+[m[32m              setIsPromotionModalVisible(true)[m
[32m+[m[32m              setIsDetailsModalVisible(false)[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            Réduction[m
[32m+[m[32m          </Button>,[m
[32m+[m[32m          <Button[m
[32m+[m[32m            key="archive"[m
[32m+[m[32m            type={editingReservation?.isArchived ? 'default' : 'dashed'}[m
[32m+[m[32m            onClick={() => {[m
[32m+[m[32m              handleArchive(editingReservation)[m
[32m+[m[32m              setIsDetailsModalVisible(false)[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            {editingReservation?.isArchived ? 'Désarchiver' : 'Archiver'}[m
[32m+[m[32m          </Button>,[m
[32m+[m[32m          <Button[m
[32m+[m[32m            key="delete"[m
[32m+[m[32m            danger[m
[32m+[m[32m            onClick={() => {[m
[32m+[m[32m              setIsDeleteModalVisible(true)[m
[32m+[m[32m              setIsDetailsModalVisible(false)[m
[32m+[m[32m            }}[m
[32m+[m[32m          >[m
[32m+[m[32m            Supprimer[m
[32m+[m[32m          </Button>[m
[32m+[m[32m        ]}[m
[32m+[m[32m      >[m
[32m+[m[32m        <div className="reservation-details">[m
[32m+[m[32m          <div className="detail-section">[m
[32m+[m[32m            <h3>Informations de contact</h3>[m
[32m+[m[32m            <p><strong>Nom:</strong> {editingReservation?.names}</p>[m
[32m+[m[32m            <p><strong>Email:</strong> {editingReservation?.email}</p>[m
[32m+[m[32m            <p><strong>Téléphone:</strong> {editingReservation?.phone_number}</p>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div className="detail-section">[m
[32m+[m[32m            <h3>Détails du séjour</h3>[m
[32m+[m[32m            <p><strong>Dates:</strong> Du {moment(editingReservation?.from).format('DD/MM/YYYY')} au {moment(editingReservation?.to).format('DD/MM/YYYY')}</p>[m
[32m+[m[32m            <p><strong>Type:</strong> {editingReservation?.type_reservation}</p>[m
[32m+[m[32m            <p><strong>Participants:</strong> {editingReservation?.participants} au total</p>[m
[32m+[m[32m            {editingReservation?.individual_room_participants > 0 && ([m
[32m+[m[32m              <p><strong>Chambres individuelles:</strong> {editingReservation?.individual_room_participants}</p>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div className="detail-section">[m
[32m+[m[32m            <h3>Repas</h3>[m
[32m+[m[32m            {editingReservation?.meal_included ? ([m
[32m+[m[32m              <>[m
[32m+[m[32m                <p><strong>Plan de repas:</strong> {editingReservation?.meal_plan === 1 ? '1 repas + PDJ' : '2 repas + PDJ'}</p>[m
[32m+[m[32m                {editingReservation?.meals?.breakfast && <p><strong>Petit-déjeuner:</strong> {editingReservation?.meals.breakfast}</p>}[m
[32m+[m[32m                {editingReservation?.meals?.lunch && <p><strong>Déjeuner:</strong> {editingReservation?.meals.lunch}</p>}[m
[32m+[m[32m                {editingReservation?.meals?.dinner && <p><strong>Dîner:</strong> {editingReservation?.meals.dinner}</p>}[m
[32m+[m[32m              </>[m
[32m+[m[32m            ) : ([m
[32m+[m[32m              <p>Repas non inclus</p>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div className="detail-section">[m
[32m+[m[32m            <h3>Informations financières</h3>[m
[32m+[m[32m            <p><strong>Montant total:</strong> {editingReservation?.montant_total}F</p>[m
[32m+[m[32m            <p><strong>Avance:</strong> {editingReservation?.montant_avance}F</p>[m
[32m+[m[32m            <p><strong>Statut du paiement:</strong> {editingReservation?.avance_payee ? 'Payé' : 'Avance en attente'}</p>[m
[32m+[m[32m            <p><strong>Statut de la réservation:</strong> {editingReservation?.isValidated ? 'Validée' : 'Non validée'}</p>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </Modal>[m
[32m+[m
       {/* Modal pour les promotions */}[m
       <Modal[m
         title="Appliquer une promotion"[m
[1mdiff --git a/app/admin/school/EditMongoForm.jsx b/app/admin/school/EditMongoForm.jsx[m
[1mindex 6d3ca7b..b2cf359 100644[m
[1m--- a/app/admin/school/EditMongoForm.jsx[m
[1m+++ b/app/admin/school/EditMongoForm.jsx[m
[36m@@ -1,8 +1,6 @@[m
 "use client"[m
 [m
[31m-import { useState, useEffect } from 'react';[m
[31m-// import MapLeaflet from '../../_/MapLeaflet_Gemini';[m
[31m-import Gmap from '../../_/Gmap_plus.jsx'[m
[32m+[m[32mimport { useState } from 'react';[m
 [m
 const fields_placeholder = {[m
     nom: "ex: Smith"[m
[36m@@ -10,85 +8,39 @@[m [mconst fields_placeholder = {[m
     , naissance: "JJ-MM-YYYY"[m
     , mere: "ex: Smith, Johana, Jane"[m
     , pere: "ex: Smith, John, Senior"[m
[31m-}[m
[31m-, fields_defaultValue = {[m
[31m-    "nom": "Nom de famille",[m
[31m-    "prenoms": "Prénoms",[m
[31m-    "naissance": "Date de Naissance",[m
[31m-    "mere": "Mère",[m
[31m-    "pere": "Père",[m
[31m-    "phone": "Numéro de Téléphone des parents",[m
[31m-    "adresse": "Adresse géographique",[m
[31m-    "photo": "Photo d'identité",[m
[31m-    "scolarity_fees": "Frais de scolarité",[m
[31m-    "school_history": "Historique scolaire",[m
[31m-    "notes": "Liste des NOTES pour chaque année",[m
[31m-    "compositions": "Liste des COMPOSITIONS pour chaque année",[m
[31m-    "bonus": "Liste des ENCOURAGEMENTS",[m
[31m-    "manus": "Liste des PUNITIONS",[m
[31m-    "isInternes": "Est un élève interne ?",[m
[31m-    "moyenne_trimetriel": "Moyennes trimestielles pour chaque année",[m
[31m-[m
[31m-[m
 }[m
 , default_input_placeholder = "___default_text___"[m
 , doRequiredInput = false[m
 [m
 [m
[31m-const StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={}, datas, hides= [] }) => {[m
[32m+[m[32mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={}, datas }) => {[m
     // console.log(model);[m
     // console.log(datas);[m
[31m-[m
[31m-    let currentSchoolYear = new Date()[m
[31m-    currentSchoolYear = (currentSchoolYear.getMonth()+1)<7 ? (currentSchoolYear.getFullYear()-1)+"-"+currentSchoolYear.getFullYear() : currentSchoolYear.getFullYear()+"-"+(currentSchoolYear.getFullYear()+1)[m
[31m-    let currentSchoolYearField = JSON.stringify({[currentSchoolYear]: false})[m
[31m-[m
[31m-    const [formData, setFormData] = useState({timestamp: +new Date(), "scolarity_fees_$_checkbox": currentSchoolYearField, "isInternes_$_checkbox": false})[m
[32m+[m[32m    const [formData, setFormData] = useState({timestamp: +new Date()})[m
     , [selectedImage, setSelectedImage] = useState("")[m
     , [selectedFile, setSelectedFile] = useState({})[m
[31m-    , [latitude, setLatitude] = useState('') // State for latitude[m
[31m-    , [longitude, setLongitude] = useState('') // State for longitude[m
[31m-    , [showMap, setShowMap] = useState(false) // State for longitude[m
 [m
[31m-    let handleClickCheckbox = ({target}) => {[m
[31m-        const {checked,name} = target[m
[32m+[m[32m    let handleChange = (e) => {[m
[32m+[m[32m        const { name, value, files } = e.target;[m
         setFormData((prevFormData) => ({[m
             ...prevFormData,[m
[31m-            [name]: checked,[m
[31m-        }))[m
[31m-    }[m
[31m-    , handleChange = (e) => {[m
[31m-        const { name, value, files, type, checked } = e.target;[m
[31m-        console.log(name+" "+value+" "+files+" "+type," "+checked); [m
[31m-        [m
[31m-        setFormData((prevFormData) => ({[m
[31m-            ...prevFormData,[m
[31m-            [name]: files?.[0] || (type=="checkbox") ? checked : value,[m
[32m+[m[32m            [name]: files?.[0] || value,[m
         }))[m
     }[m
     , handleObjectChange = (e, inputName) => {[m
[31m-        const { value,checked } = e.target[m
[32m+[m[32m        const { value } = e.target[m
         , subName = e.target.dataset.name[m
[31m-        , absoluteValue = (e.target.type==="checkbox")?checked:value[m
[31m-        console.log(e.target);[m
[31m-        console.log(e.target.checked);[m
[31m-        console.log(checked);[m
[31m-[m
[31m-        [m
[31m-        [m
         setFormData((prevFormData) => {[m
             // let subName = name.split('_*_')[1][m
             return {[m
                 ...prevFormData,[m
                 [inputName]: JSON.stringify([m
                     prevFormData?.[inputName] [m
[31m-                        ? {...JSON.parse(prevFormData?.[inputName]), [subName]: absoluteValue }[m
[31m-                        : {[subName]: absoluteValue}[m
[32m+[m[32m                        ? {...JSON.parse(prevFormData?.[inputName]), [subName]: value }[m
[32m+[m[32m                        : {[subName]: value}[m
                 )[m
             }[m
         })[m
[31m-        console.log(formData);[m
[31m-        [m
     }[m
     , handleSubmit = (e) => {[m
         e.preventDefault();[m
[36m@@ -114,7 +66,7 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
             if(r[0].indexOf('_$_file')!==-1 && r[1].name){[m
                 multi = true[m
                 console.log(r[1]);[m
[31m-                // alert('fdsff',r[1].length)[m
[32m+[m[32m                alert('fdsff',r[1].length)[m
             }[m
             if(datas){[m
                 if(r[0].indexOf("_$_file")!==-1){[m
[36m@@ -132,7 +84,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                     : JSON.stringify(r[1])[m
                 : r[1][m
         })[m
[31m-        [m
         const settings = {[m
             method: datas ? "PATCH" : "POST"[m
             , headers: {[m
[36m@@ -142,7 +93,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
             }[m
             , body: JSON.stringify(obj)[m
         }[m
[31m-        [m
         ___formData.append('ok',"khiuhu")[m
         console.log(___formData);[m
         console.log(Array.from(___formData));[m
[36m@@ -157,22 +107,11 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
             if(multi){[m
                 console.log(datas);[m
                 console.log(datas?.src_$_file);[m
[31m-                console.log(`/api/media`+(datas?`?type=${modelKey}&src=${datas?.src_$_file}`:""));[m
[31m-                console.log(obj);[m
[31m-                [m
[31m-                [m
                 alert('in multi')[m
                 settings.headers = {}[m
                 settings.body = ___formData[m
                 settings.method = "POST"[m
[31m-                const createdFilename = modelKey == "classe"[m
[31m-                    ? obj.annee+"___"+obj.niveau+"-"+obj.alias[m
[31m-                    : obj.nom+"_"+obj.prenoms[m
[31m-                console.log("modelKey: "+modelKey);[m
[31m-                console.log("createdFilename: "+createdFilename);[m
[31m-                [m
[31m-                [m
[31m-                fetch(`/api/media?type=${modelKey}s&createdFilename=${createdFilename}`+(datas?`&src=${datas?.src_$_file}`:""), settings)[m
[32m+[m[32m                fetch(`/api/media`+(datas?`?src=${datas?.src_$_file}`:""), settings)[m
                     .then(r=>r.json())[m
                     .then(dataMedia=>{[m
                         console.log(dataMedia);[m
[36m@@ -182,54 +121,14 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
 [m
         // Réinitialiser les champs du formulaire[m
         setFormData({});[m
[31m-    }[m
[31m-    , handleMapClick = (coords) => { // Expects { lat, lng }[m
[31m-        const lat = coords.lat.toFixed(6);[m
[31m-        const lng = coords.lng.toFixed(6);[m
[31m-        setLatitude(lat); // Update state with fixed precision[m
[31m-        setLongitude(lng);[m
[31m-[m
[31m-        // Find the map field key in the model (e.g., 'adresse_$_map')[m
[31m-        const mapFieldKey = Object.keys(model).find(k => k.endsWith('_$_map'));[m
[31m-        // console.log(mapFieldKey);[m
[31m-        console.log(formData[mapFieldKey]);[m
[31m-        [m
[31m-        [m
[31m-        if (mapFieldKey) {[m
[31m-            console.log(Array.from(document.forms).filter(f=>f.classList.contains("active"))[0]["adresse_$_map"]);[m
[31m-            [m
[31m-            Array.from(document.forms).filter(f=>f.classList.contains("active"))[0][mapFieldKey+"_"].value = JSON.stringify({ lat: parseFloat(lat), lng: parseFloat(lng) })[m
[31m-            // Update the formData for the hidden map input[m
[31m-            setFormData(prevFormData => ({[m
[31m-                ...prevFormData,[m
[31m-                // [mapFieldKey]: formData[mapFieldKey] + ";;;" + JSON.stringify({ lat: parseFloat(lat), lng: parseFloat(lng) })[m
[31m-                [mapFieldKey]: Array.from(document.forms).filter(f=>f.classList.contains("active"))[0][mapFieldKey].value + ";;;" + JSON.stringify({ lat: parseFloat(lat), lng: parseFloat(lng) })[m
[31m-            }));[m
[31m-        }[m
[31m-    }[m
[31m-[m
[32m+[m[32m    };[m
     const getTimestamp = () => {[m
         return Date.now();[m
     };[m
     // console.log(hiddens);[m
 [m
[31m-[m
[31m-    useEffect(() => {[m
[31m-        // Assuming address coordinates are stored like 'adresse_latitude', 'adresse_longitude'[m
[31m-        // Adjust field names if they are different[m
[31m-        const latField = 'adresse_latitude';[m
[31m-        const lonField = 'adresse_longitude';[m
[31m-        if (datas && typeof datas === 'object') {[m
[31m-            setLatitude(datas[latField] || '');[m
[31m-            setLongitude(datas[lonField] || '');[m
[31m-        } else {[m
[31m-            setLatitude('');[m
[31m-            setLongitude('');[m
[31m-        }[m
[31m-    }, [datas]) // Re-run if datas changes[m
[31m-[m
     return ([m
[31m-        <form onSubmit={handleSubmit} className={((modelKey=="teacher"||modelKey=="student")?"member ":"")+modelKey+(datas?"_update":"")}>[m
[32m+[m[32m        <form onSubmit={handleSubmit} className={modelKey+(datas?"_update":"")}>[m
             <input type="hidden" name="modelKey" defaultValue={modelKey} />[m
             <input type="hidden" name="timestamp" defaultValue={formData.timestamp} />[m
             {/* { console.log(model) } */}[m
[36m@@ -251,7 +150,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                 , hidden = false[m
                 , endLabel = ""[m
                 // console.log(inputType);[m
[31m-                // alert(key+' property_baseValue '+property_baseValue)[m
                 let other_input_type = false[m
                 , checked = ""[m
                 , add_btn = ""[m
[36m@@ -262,10 +160,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                 // console.log(_eval);[m
                 // console.log(model[key]);[m
                 // console.log(model[key].options?.default);[m
[31m-                [m
[31m-                console.log(hides);[m
[31m-                // if(hides?.includes(inputName))return;[m
[31m-                [m
                 switch(inputType){[m
                     case"tel":[m
                     break;[m
[36m@@ -277,61 +171,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                     break;[m
                     case"radio":[m
                     break;[m
[31m-                    case"map":[m
[31m-                        endLabel = <>[m
[31m-                            {!showMap&&<button type="button" onClick={[m
[31m-                                ({target}) => {[m
[31m-                                    setShowMap(true)[m
[31m-                                }[m
[31m-                            }>Choisir sur la carte</button>}[m
[31m-                            {showMap && <div key={key}>[m
[31m-                                {showMap&&<button type="button" onClick={e=>{setShowMap(false)}}>Fermer la carte</button>}[m
[31m-                                <p>{property_baseValue}:</p>[m
[31m-                                <input [m
[31m-                                    type="hidden" [m
[31m-                                    name={inputName+"_"}[m
[31m-                                    value={""} // Store as JSON string[m
[31m-                                    // defaultValue="{}"[m
[31m-                                />[m
[31m-                                <div className="form-group coordinates-group" style={{marginTop: '1rem', borderTop: '1px solid #eee', paddingTop: '1rem'}}>[m
[31m-                                    <p>Coordonnées Géographiques: </p>[m
[31m-                                    <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>[m
[31m-                                        <label htmlFor={"latFieldName"}>Latitude</label>[m
[31m-                                        <input[m
[31m-                                            id={"latFieldName"}[m
[31m-                                            name={"latFieldName"} // Important for form submission[m
[31m-                                            type="number"[m
[31m-                                            step="any"[m
[31m-                                            className="form-control"[m
[31m-                                            placeholder="Latitude"[m
[31m-                                            value={latitude} // Controlled component[m
[31m-                                            // onChange={(e) => setLatitude(e.target.value)} // Update state on change[m
[31m-                                            readonly[m
[31m-                                        />[m
[31m-                                        <label htmlFor={"lonFieldName"}>Longitude</label>[m
[31m-                                        <input[m
[31m-                                            id={"lonFieldName"}[m
[31m-                                            name={"lonFieldName"} // Important for form submission[m
[31m-                                            type="number"[m
[31m-                                            step="any"[m
[31m-                                            className="form-control"[m
[31m-                                            placeholder="Longitude"[m
[31m-                                            value={longitude} // Controlled component[m
[31m-                                            // onChange={(e) => setLongitude(e.target.value)} // Update state on change[m
[31m-                                            readonly[m
[31m-                                        />[m
[31m-                                    </div>[m
[31m-                                    {/* Render the Map Component */}[m
[31m-                                    <Gmap [m
[31m-                                        // Pass initial center based on current state (which might be from datas)[m
[31m-                                        // initialCenter={{ lat: parseFloat(latitude) || 5.36, lng: parseFloat(longitude) || -4.00 }}[m
[31m-                                        onCoordinatesClick={handleMapClick} // Pass the callback function[m
[31m-                                    />[m
[31m-                                    <small>Cliquez sur la carte pour définir/modifier les coordonnées.</small>[m
[31m-                                </div>[m
[31m-                            </div>}[m
[31m-                        </>;[m
[31m-                    break;[m
                     case"file":[m
                         handleChange = ({target}) => {[m
                             if(target.files){[m
[36m@@ -428,7 +267,7 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                                             defaultValue=""[m
                                         >[m
                                             <option value="">Choisir {joinedDataName}</option>[m
[31m-                                            {joinedData?.map((elt,i)=><option key={property_baseValue+"_"+i} value={elt._id}>{(elt.niveau&&elt.alias) ? elt.niveau+"-"+elt.alias : elt.nom+"-"+elt.prenoms.join("-")}</option>)}[m
[32m+[m[32m                                            {joinedData.map((elt,i)=><option key={property_baseValue+"_"+i} value={elt.id}>{(elt.niveau&&elt.alias) ? elt.niveau+"-"+elt.alias : elt.nom+"-"+elt.prenoms.join("-")}</option>)}[m
                                         </select>[m
                                     </>[m
                                 break;[m
[36m@@ -442,7 +281,7 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                                             defaultValue=""[m
                                         >[m
                                             <option value="">Choisir {joinedDataName}</option>[m
[31m-                                            {joinedData?.map((elt,i)=><option key={property_baseValue+"_"+i} value={elt._id}>{(elt.niveau&&elt.alias) ? elt.niveau+"-"+elt.alias : elt.nom+"-"+elt.prenoms?.join("-")}</option>)}[m
[32m+[m[32m                                            {joinedData.map((elt,i)=><option key={property_baseValue+"_"+i} value={elt.id}>{(elt.niveau&&elt.alias) ? elt.niveau+"-"+elt.alias : elt.nom+"-"+elt.prenoms.join("-")}</option>)}[m
                                         </select>[m
                                         <div id={inputName+"_div"}></div>[m
                                         <input [m
[36m@@ -471,10 +310,9 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                 // if(defaultValue+"" == "[object Object]")defaultValue = default_input_placeholder[m
                 [m
                 if (_eval === String || _eval === Boolean || _eval === Number) {[m
[31m-                    // alert(inputName+" "+inputType)[m
[31m-                    return (<div>[m
[31m-                        <label key={key} className={key.split('_$_')[0]}>[m
[31m-                            {fields_defaultValue[key.split('_$_')[0]]||key.split('_$_')[0]} (simple value):[m
[32m+[m[32m                    return ([m
[32m+[m[32m                        <label key={key}>[m
[32m+[m[32m                            {key.split('_$_')[0]} aa:[m
                             <input[m
                                 type={inputType}[m
                                 name={inputName}[m
[36m@@ -482,27 +320,22 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                                     ? defaultValue[m
                                     :  datas[m
                                         ? datas[inputName][m
[31m-                                        : inputType=="checkbox"[m
[31m-                                            ? undefined[m
[31m-                                            : defaultValue[m
[32m+[m[32m                                        : defaultValue[m
                                 }[m
                                 placeholder={fields_placeholder[key] || defaultValue}[m
                                 onChange={handleChange}[m
[31m-                                onClick={inputType=="checkbox" ? handleClickCheckbox : undefined}[m
[31m-                                // defaultChecked={inputType=="checkbox" ? model[key].defaultValue : undefined}[m
                                 required={doRequiredInput&&true}[m
                                 hidden={hidden}[m
                             />[m
[32m+[m[32m                            {endLabel}[m
                         </label>[m
[31m-                        {endLabel}[m
[31m-                    </div>[m
                     );[m
                 }[m
 [m
                 if (_eval === Array) {[m
[31m-                    return (<div>[m
[31m-                        <label key={key} className={key.split('_$_')[0]}>[m
[31m-                            {fields_defaultValue[key.split('_$_')[0]]||key.split('_$_')[0]} (array):[m
[32m+[m[32m                    return ([m
[32m+[m[32m                        <label key={key}>[m
[32m+[m[32m                            {key.split('_$_')[0]} ii:[m
                             <input[m
                                 type={inputType}[m
                                 name={inputName}[m
[36m@@ -517,16 +350,15 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                                 }}[m
                                 required={doRequiredInput&&true}[m
                             />[m
[31m-                            [m
                         </label>[m
[31m-                    </div>);[m
[32m+[m[32m                    );[m
                 }[m
 [m
                 if (_eval === Object)[m
                     if(!other_input_type) {[m
                         return ([m
[31m-                            <div key={key} className={key.split('_$_')[0]}>[m
[31m-                                <p>{fields_defaultValue[property_baseValue]||property_baseValue} (object):</p>[m
[32m+[m[32m                            <div key={key}>[m
[32m+[m[32m                                <p>{property_baseValue} oo:</p>[m
                                 <input [m
                                     type="hidden" [m
                                     name={inputName}[m
[36m@@ -535,23 +367,17 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                                 />[m
                                 {Object.keys(defaultValue).map((subKey) => {[m
                                     // const subInputName = `${inputName}_*_${subKey}`;[m
[31m-                                    console.log(inputName+" "+defaultValue[subKey]);[m
[31m-                                    console.log(defaultValue);[m
[31m-                                    console.log(subKey);[m
[31m-                                    [m
[31m-                                    [m
                                     let checked = inputType=="checkbox" ? defaultValue[subKey] : ""[m
                                     return ([m
                                         <label key={subKey}>[m
[31m-                                            {fields_defaultValue[subKey]||subKey}:[m
[32m+[m[32m                                            {subKey}:[m
                                             <input[m
                                                 type={inputType}[m
                                                 data-name={subKey}[m
                                                 // value={formData[subInputName]}[m
                                                 placeholder={fields_placeholder[subKey] || ""}[m
                                                 onChange={(e)=>{handleObjectChange(e,inputName)}}[m
[31m-                                                defaultChecked={checked}[m
[31m-                                                // checked={inputType === 'checkbox' ? (formData[inputName]?.[subKey] ?? false) : undefined}[m
[32m+[m[32m                                                checked={checked}[m
                                                 required={doRequiredInput&&true}[m
                                             />[m
                                         </label>[m
[36m@@ -561,7 +387,7 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
                         );[m
                     }else return ([m
                         <div key={key}>[m
[31m-                            {/* <p>{key.split('_$_')[0]}:</p> */}[m
[32m+[m[32m                            <p>{key.split('_$_')[0]} oo^^:</p>[m
                             {other_input_type}[m
                         </div>[m
                     )[m
[36m@@ -571,10 +397,6 @@[m [mconst StudentForm = ({ model, modelKey, joinedDatasProps, endpoint, hiddens={},[m
             }})}[m
 [m
             <button type="submit">Créer</button>[m
[31m-            <hr />[m
[31m-            <div className="formDataDisplay">[m
[31m-                {JSON.stringify(formData)}[m
[31m-            </div>[m
         </form>[m
     );[m
 };[m
[1mdiff --git a/app/admin/school/NavAdminMenus.jsx b/app/admin/school/NavAdminMenus.jsx[m
[1mdeleted file mode 100644[m
[1mindex 0002c29..0000000[m
[1m--- a/app/admin/school/NavAdminMenus.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,32 +0,0 @@[m
[31m-"use client"[m
[31m-[m
[31m-import { useEffect,useContext } from 'react'[m
[31m-import AdminContext from "../../../stores/adminContext.js"[m
[31m-// import { ecole_classes } from "../../../assets/classes.js"[m
[31m-import TableClasse from './_/TableClasse.jsx'[m
[31m-import TeachersStudentsView from './_/TeachersStudentsView.jsx'[m
[31m-[m
[31m-export default () => {[m
[31m-    const {ecole_classes,isWhichHash,year,MembersMenu,YearsList,ClassesList,renderClasse,showTeachers,showStudents} = useContext(AdminContext)[m
[31m-[m
[31m-    useEffect(()=>{[m
[31m-        isWhichHash()[m
[31m-        console.log(ecole_classes);[m
[31m-        [m
[31m-        // alert("hash changed in navadminmenus")[m
[31m-    }, [location.hash])[m
[31m-    [m
[31m-    return <>[m
[31m-        <nav id="adminMenus">[m
[31m-            <h1>METTRE À JOUR, LES PROFS, LES ÉLÈVES, OU LES CLASSES: </h1>[m
[31m-            <MembersMenu />[m
[31m-            <YearsList />[m
[31m-            <ClassesList data={ecole_classes?.filter(elt => elt.annee == year)||[]} />[m
[31m-        [m
[31m-        </nav>[m
[31m-        <section id="adminContent">[m
[31m-            <TableClasse renderClasse={renderClasse} />[m
[31m-            <TeachersStudentsView $={{renderClasse,showTeachers,showStudents}} />[m
[31m-        </section>[m
[31m-    </>[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/app/admin/school/_/BackButton.jsx b/app/admin/school/_/BackButton.jsx[m
[1mdeleted file mode 100644[m
[1mindex d00afc7..0000000[m
[1m--- a/app/admin/school/_/BackButton.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,8 +0,0 @@[m
[31m-"use client"[m
[31m-[m
[31m-export default () => <button [m
[31m-    className="btn btn-primary"[m
[31m-    onClick={() => window.history.back()}[m
[31m->[m
[31m-    Retour[m
[31m-</button>[m
\ No newline at end of file[m
[1mdiff --git a/app/admin/school/_/MembersList.jsx b/app/admin/school/_/MembersList.jsx[m
[1mindex c813d1c..17abee8 100644[m
[1m--- a/app/admin/school/_/MembersList.jsx[m
[1m+++ b/app/admin/school/_/MembersList.jsx[m
[36m@@ -1,53 +1,36 @@[m
[31m-import Link from "next/link";[m
[31m-// import '../styles/MembersList.css'[m
[31m-import "../../../../assets/scss/admin_ai.scss"[m
[32m+[m[32mimport './MembersList.css'[m
 [m
[31m-export default ({ data, type }) => {[m
[31m-    console.log(data);[m
[31m-    [m
[31m-    return <ul id="school_members">[m
[31m-        {data?.map((elt, i) => <li[m
[31m-            key={(type == "teachers" ? "prof" : "eleve") + "_" + i}[m
[31m-            // onClick={e => {[m
[31m-            //     alert('okaddmember')[m
[31m-            // }}[m
[31m-        >[m
[31m-            {[m
[31m-                console.log(elt)[m
[31m-                [m
[31m-            }[m
[31m-        <Link [m
[31m-            key={"classe_profs_" + i} [m
[31m-            // href={`/admin/school/${type == "teachers" ? "teacher" : "student"}/${elt.id}`}[m
[31m-            href={`/admin/school/${type == "teachers" ? "teacher" : "student"}/${elt._id}`}[m
[31m-            className="member-link"[m
[31m-        >[m
[31m-            <figure>[m
[31m-                <img src={"/school/" + type + "/" + elt.nom.toLowerCase() + "_" + elt?.prenoms?.join("-").toLocaleLowerCase() +"_"+ elt["photo_$_file"].substring(elt["photo_$_file"].indexOf('.'))} alt={"eleve saint martin de porèz en classe de \"" + elt.current_classe + "\""} />[m
[31m-                <figcaption><span>{elt.nom}</span> - <span>{elt.prenoms?.join(', ')}</span></figcaption>[m
[31m-            </figure>[m
[31m-            {type == "students" && <>[m
[31m-                <span className={"isInterne" + (elt.isInterne ? " active" : "")}></span>[m
[31m-                <span[m
[31m-                className={"doFeesPaid" + (elt.scolarity_fees ? " euuuuh,c'est très compliqué, il faut que tous les frais soient payé (et donc vérifiés) pour le rendre actif!!!" : "")}[m
[31m-                onClick={e => {[m
[31m-                    if (!e.target.classList.contains('active')) {[m
[31m-                        alert('ouafouafouafouaaaaf!!!! LES FRAIS NE SONT PAS TOUS PAAAAAYÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉS!!!!!')[m
[31m-                    }[m
[31m-                }}[m
[31m-                ></span>[m
[31m-            </>}[m
[31m-            <section>[m
[31m-                <div className="birth">{elt["naissance_$_date"]}</div>[m
[31m-                <div className="address">{elt.adresse}</div>[m
[31m-                {type == "teachers" && <>[m
[31m-                    <div className="phone"><a href={"tel:" + elt.phone}>{elt.phone}</a></div>[m
[31m-                    <div className="email"><a href={"mail:" + elt.email}>{elt.email}</a></div>[m
[31m-                    </>}[m
[31m-                    {type == "students" && <div className="parents">{JSON.stringify(elt.parents)}</div>[m
[32m+[m[32mexport default ({ data, type }) => <ul id="school_members">[m
[32m+[m[32m    {data.map((elt, i) => <li[m
[32m+[m[32m        key={(type == "teachers" ? "prof" : "eleve") + "_" + i}[m
[32m+[m[32m        onClick={e => {[m
[32m+[m[32m            alert('okaddmember')[m
[32m+[m[32m        }}[m
[32m+[m[32m    >[m
[32m+[m[32m        <figure>[m
[32m+[m[32m            <img src={"/school/" + type + "/" + elt.nom.toLowerCase() + "-" + elt.prenoms.join("-").toLocaleLowerCase() + "/photo.png"} alt={"eleve saint martin de porèz en classe de \"" + elt.current_classe + "\""} />[m
[32m+[m[32m            <figcaption>{elt.nom} - {elt.prenoms.join(', ')}</figcaption>[m
[32m+[m[32m        </figure>[m
[32m+[m[32m        {type == "students" && <>[m
[32m+[m[32m            <span className={"isInterne" + (elt.isInterne ? " active" : "")}></span>[m
[32m+[m[32m            <span[m
[32m+[m[32m            className={"doFeesPaid" + (elt.scolarity_fees ? " euuuuh,c'est très compliqué, il faut que tous les frais soient payé (et donc vérifiés) pour le rendre actif!!!" : "")}[m
[32m+[m[32m            onClick={e => {[m
[32m+[m[32m                if (!e.target.classList.contains('active')) {[m
[32m+[m[32m                    alert('ouafouafouafouaaaaf!!!! LES FRAIS NE SONT PAS TOUS PAAAAAYÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉÉS!!!!!')[m
                 }[m
[31m-            </section>[m
[31m-        </Link>[m
[31m-        </li>)}[m
[31m-    </ul>[m
[31m-    }[m
\ No newline at end of file[m
[32m+[m[32m            }}[m
[32m+[m[32m            ></span>[m
[32m+[m[32m        </>}[m
[32m+[m[32m        <section>[m
[32m+[m[32m            <div className="birth">{elt.naissance}</div>[m
[32m+[m[32m            <div className="address">{elt.adresse}</div>[m
[32m+[m[32m            {type == "teachers" && <>[m
[32m+[m[32m                <div className="phone"><a href={"tel:" + elt.phone}>{elt.phone}</a></div>[m
[32m+[m[32m                <div className="email"><a href={"mail:" + elt.email}>{elt.email}</a></div>[m
[32m+[m[32m                </>}[m
[32m+[m[32m                {type == "students" && <div className="parents">{JSON.stringify(elt.parents)}</div>[m
[32m+[m[32m            }[m
[32m+[m[32m        </section>[m
[32m+[m[32m    </li>)}[m
[32m+[m[32m</ul>[m
\ No newline at end of file[m
[1mdiff --git a/app/admin/school/_/NavAdminMenus.jsx b/app/admin/school/_/NavAdminMenus.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..743bc75[m
[1m--- /dev/null[m
[1m+++ b/app/admin/school/_/NavAdminMenus.jsx[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport { useContext } from 'react'[m
[32m+[m[32mimport AdminContext from "../../../../stores/adminContext.js"[m
[32m+[m[32mimport { ecole_classes } from "../../../../assets/classes.js"[m
[32m+[m[32mimport TableClasse from './TableClasse.jsx'[m
[32m+[m[32mimport TeachersStudentsView from './TeachersStudentsView.jsx'[m
[32m+[m
[32m+[m[32mexport default () => {[m
[32m+[m[32m    const {year,MembersMenu,YearsList,ClassesList,renderClasse,showTeachers,showStudents} = useContext(AdminContext)[m
[32m+[m
[32m+[m[41m    [m
[32m+[m[32m    return <>[m
[32m+[m[32m        <nav id="adminMenus">[m
[32m+[m[32m            <MembersMenu />[m
[32m+[m[32m            <YearsList />[m
[32m+[m[32m            <ClassesList data={ecole_classes.filter(elt => elt.annee == year)} />[m
[32m+[m[41m        [m
[32m+[m[32m        </nav>[m
[32m+[m[32m        <section id="adminContent">[m
[32m+[m[32m            <TableClasse renderClasse={renderClasse} />[m
[32m+[m[32m            <TeachersStudentsView $={{renderClasse,showTeachers,showStudents}} />[m
[32m+[m[32m        </section>[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/admin/school/_/TableClasse.jsx b/app/admin/school/_/TableClasse.jsx[m
[1mindex 986c78b..9ec4230 100644[m
[1m--- a/app/admin/school/_/TableClasse.jsx[m
[1m+++ b/app/admin/school/_/TableClasse.jsx[m
[36m@@ -1,6 +1,6 @@[m
 // import { useContext } from 'react'[m
 // import AdminContext from "../../../../stores/adminContext.js"[m
[31m-// import '../styles/table-classe.css'[m
[32m+[m[32mimport '../styles/table-classe.css'[m
 [m
 export default ({renderClasse}) => {[m
     // const {renderClasse} = useContext(AdminContext)[m
[1mdiff --git a/app/admin/school/_/TeachersStudentsView.jsx b/app/admin/school/_/TeachersStudentsView.jsx[m
[1mindex 0e2deae..47f5d9b 100644[m
[1m--- a/app/admin/school/_/TeachersStudentsView.jsx[m
[1m+++ b/app/admin/school/_/TeachersStudentsView.jsx[m
[36m@@ -19,7 +19,7 @@[m [mexport default () => {[m
               let notIn = showTeachers ? ecole_profs : ecole_eleves[m
               notIn = notIn.filter(member => {[m
                 let nom = member.nom.indexOf(e.target.value)[m
[31m-                  , prenoms = member.prenoms?.join(', ').indexOf(e.target.value)[m
[32m+[m[32m                  , prenoms = member.prenoms.join(', ').indexOf(e.target.value)[m
                 if ((nom && prenoms) == -1) return member[m
               })[m
               console.log(notIn);[m
[36m@@ -45,11 +45,9 @@[m [mexport default () => {[m
               // modal.style.display="block"[m
               modal.classList.add('active')[m
               // setShowModal(true)[m
[31m-              // console.log('#modal .modal___main>form.'+(showTeachers?"teacher":"student"));[m
[31m-              document.querySelector('#modal .modal___header').innerHTML = "<h2>Modifier les informations d'un " + (showTeachers ? "professeur" : "élève") + ": </h2>"[m
[31m-              document.querySelector('#modal .modal___main>form.classe').classList.remove('active')[m
[31m-              document.querySelector('#modal .modal___main>form.member.'+(showTeachers?"teacher":"student")).classList.add('active')[m
[31m-              document.querySelector('#modal .modal___footer').innerHTML = `<button onClick="e=>{document.querySelector('#modal .modal___main form.active>button').click()}">SOUMETTRE (not working yet...)</button>`[m
[32m+[m[32m              console.log('#modal .modal___main>form.'+(showTeachers?"teacher":"student"));[m
[32m+[m[32m              document.querySelector('#modal .modal___main>form').classList.remove('classe')[m
[32m+[m[32m              document.querySelector('#modal .modal___main>form.'+(showTeachers?"teacher":"student")).classList.add('active')[m
             }}[m
           >+</button>[m
           {[m
[36m@@ -59,7 +57,6 @@[m [mexport default () => {[m
                 modelKey={showTeachers?"teacher":"student"} [m
                 model={showTeachers ? models?.schemaTeacher?.paths || {} : models?.schemaEleve?.paths || {}} [m
                 joinedDatasProps={{classes: ecole_classes}} [m
[31m-                hides={["school_history","absences","notes","compositions","moyenne_trimetriel","bonus","manus","commentaires","documents"]}[m
               />[m
               , document.querySelector('#modal .modal___main')[m
             )[m
[1mdiff --git a/app/admin/school/page.jsx b/app/admin/school/page.jsx[m
[1mindex 85b0c03..340446f 100644[m
[1m--- a/app/admin/school/page.jsx[m
[1m+++ b/app/admin/school/page.jsx[m
[36m@@ -3,7 +3,7 @@[m [mimport Link from "next/link";[m
 import EditMongoForm from "./EditMongoForm.jsx"[m
 import AdminContext from "../../../stores/adminContext.js"[m
 import MembersList from "./_/MembersList.jsx";[m
[31m-import NavAdminMenus from "./NavAdminMenus.jsx";[m
[32m+[m[32mimport NavAdminMenus from "./_/NavAdminMenus.jsx";[m
 import TableClasse from "./_/TableClasse.jsx";[m
 import TeachersStudentsView from "./_/TeachersStudentsView.jsx";[m
 [m
[1mdiff --git a/app/admin/school/student/[id]/page.jsx b/app/admin/school/student/[id]/page.jsx[m
[1mindex 38eb0ec..9badd4d 100644[m
[1m--- a/app/admin/school/student/[id]/page.jsx[m
[1m+++ b/app/admin/school/student/[id]/page.jsx[m
[36m@@ -1,72 +1,67 @@[m
[31m-"use client"[m
[31m-[m
[31m-import { useContext } from 'react'[m
[31m-// import { ecole_eleves } from '../../../../../assets/classes'[m
[31m-import AdminContext from "../../../../../stores/adminContext.js"[m
[31m-import BackButton from "../../_/BackButton.jsx"[m
[32m+[m[32mimport { ecole_eleves } from '../../../../../assets/classes'[m
 [m
 export default function StudentPage({ params }) {[m
[31m-  const {ecole_eleves} = useContext(AdminContext)[m
[31m-  const student = ecole_eleves.find(eleve => eleve._id === params.id)[m
[31m-  console.log(student);[m
[31m-  console.log(ecole_eleves);[m
[31m-  console.log(student?.scolarity_fees);[m
[31m-  [m
[32m+[m[32m  const student = ecole_eleves.find(eleve => eleve.id === params.id)[m
 [m
   if (!student) {[m
     return <div className="alert alert-danger">Élève non trouvé</div>[m
   }[m
 [m
   return ([m
[31m-    <main className="container py-4 profilContainer">[m
[31m-      <div className="card safe">[m
[32m+[m[32m    <div className="container py-4">[m
[32m+[m[32m      <div className="card">[m
         <div className="card-header d-flex justify-content-between align-items-center">[m
           <h1 className="h3 mb-0">Profil de l'Élève</h1>[m
[31m-          <BackButton />[m
[32m+[m[32m          <button[m[41m [m
[32m+[m[32m            className="btn btn-primary"[m
[32m+[m[32m            onClick={() => window.history.back()}[m
[32m+[m[32m          >[m
[32m+[m[32m            Retour[m
[32m+[m[32m          </button>[m
         </div>[m
         <div className="card-body">[m
           <div className="row">[m
             <div className="col-md-4">[m
[31m-              {student?.photo_$_file && ([m
[32m+[m[32m              {student.photo_$_file && ([m
                 <img [m
[31m-                  src={student?.photo_$_file} [m
[31m-                  alt={`${student?.nom} ${student?.prenoms?.join(' ')}`}[m
[32m+[m[32m                  src={student.photo_$_file}[m[41m [m
[32m+[m[32m                  alt={`${student.nom} ${student.prenoms.join(' ')}`}[m
                   className="img-fluid rounded mb-3"[m
                 />[m
               )}[m
             </div>[m
             <div className="col-md-8">[m
[31m-              <h2 className="h4 mb-3">{student?.nom} {student?.prenoms?.join(' ')}</h2>[m
[32m+[m[32m              <h2 className="h4 mb-3">{student.nom} {student.prenoms.join(' ')}</h2>[m
               [m
               <div className="mb-3">[m
[31m-                <strong>Date de naissance:</strong> {student?.naissance_$_date}[m
[32m+[m[32m                <strong>Date de naissance:</strong> {student.naissance_$_date}[m
               </div>[m
               <div className="mb-3">[m
[31m-                <strong>Adresse:</strong> {student?.adresse}[m
[32m+[m[32m                <strong>Adresse:</strong> {student.adresse}[m
               </div>[m
               <div className="mb-3">[m
[31m-                <strong>Classe actuelle:</strong> {student?.current_classe_$_ref_µ_classes}[m
[32m+[m[32m                <strong>Classe actuelle:</strong> {student.current_classe_$_ref_µ_classes}[m
               </div>[m
 [m
[31m-              <div className="card safe mb-3">[m
[32m+[m[32m              <div className="card mb-3">[m
                 <div className="card-header">[m
                   <h3 className="h5 mb-0">Parents</h3>[m
                 </div>[m
[31m-                <section className="card-body">[m
[32m+[m[32m                <div className="card-body">[m
                   <div className="row">[m
                     <div className="col-md-6">[m
                       <h4 className="h6">Père</h4>[m
[31m-                      <p>{student?.parents?.pere}</p>[m
[32m+[m[32m                      <p>{student.parents.pere}</p>[m
                     </div>[m
                     <div className="col-md-6">[m
                       <h4 className="h6">Mère</h4>[m
[31m-                      <p>{student?.parents?.mere}</p>[m
[32m+[m[32m                      <p>{student.parents.mere}</p>[m
                     </div>[m
                     <div className="col-12">[m
[31m-                      <strong>Téléphone:</strong> <a href={"tel:"+student?.parents?.phone}>{student?.parents?.phone}</a>[m
[32m+[m[32m                      <strong>Téléphone:</strong> {student.parents.phone}[m
                     </div>[m
                   </div>[m
[31m-                </section>[m
[32m+[m[32m                </div>[m
               </div>[m
 [m
               <div className="card mb-3">[m
[36m@@ -77,8 +72,7 @@[m [mexport default function StudentPage({ params }) {[m
                   <div className="mb-3">[m
                     <strong>Frais de scolarité:</strong>[m
                     <ul className="list-unstyled">[m
[31m-                      {/* {Object.entries(student?.scolarity_fees_$_checkbox).map(([annee, statut], index) => ( */}[m
[31m-                      {student?.scolarity_fees&&Object.entries(student?.scolarity_fees).map(([annee, statut], index) => ([m
[32m+[m[32m                      {Object.entries(student.scolarity_fees_$_checkbox).map(([annee, statut], index) => ([m
                         <li key={index}>[m
                           {annee}: <span className={`badge ${statut === 'checked' ? 'bg-success' : 'bg-danger'}`}>[m
                             {statut === 'checked' ? 'Payé' : 'Non payé'}[m
[36m@@ -91,8 +85,7 @@[m [mexport default function StudentPage({ params }) {[m
                   <div className="mb-3">[m
                     <strong>Historique des classes:</strong>[m
                     <ul className="list-unstyled">[m
[31m-                      {/* {Object.entries(student?.bolobi_class_history_$_ref_µ_classes).map(([annee, classe], index) => ( */}[m
[31m-                      {student?.bolobi_class_history&&Object.entries(student?.bolobi_class_history).map(([annee, classe], index) => ([m
[32m+[m[32m                      {Object.entries(student.bolobi_class_history_$_ref_µ_classes).map(([annee, classe], index) => ([m
                         <li key={index}>{annee}: {classe || 'Non renseigné'}</li>[m
                       ))}[m
                     </ul>[m
[36m@@ -103,6 +96,6 @@[m [mexport default function StudentPage({ params }) {[m
           </div>[m
         </div>[m
       </div>[m
[31m-    </main>[m
[32m+[m[32m    </div>[m
   )[m
 }[m
[1mdiff --git a/app/admin/school/styles/table-classe.css b/app/admin/school/styles/table-classe.css[m
[1mindex 1392fe0..d7460b2 100644[m
[1m--- a/app/admin/school/styles/table-classe.css[m
[1m+++ b/app/admin/school/styles/table-classe.css[m
[36m@@ -124,7 +124,7 @@[m
 .member-link {[m
     display: inline-block;[m
     margin: 0.25rem;[m
[31m-    /* padding: 0.5rem 1rem; */[m
[32m+[m[32m    padding: 0.5rem 1rem;[m
     background-color: #f8f9fa;[m
     border-radius: 4px;[m
     color: #2c3e50;[m
[1mdiff --git a/app/admin/school/teacher/[id]/page.jsx b/app/admin/school/teacher/[id]/page.jsx[m
[1mindex f427722..e224fdc 100644[m
[1m--- a/app/admin/school/teacher/[id]/page.jsx[m
[1m+++ b/app/admin/school/teacher/[id]/page.jsx[m
[36m@@ -1,43 +1,37 @@[m
[31m-"use client"[m
[31m-[m
[31m-import { useContext } from 'react'[m
[31m-import Link from "next/link";[m
[31m-// import { ecole_classes } from '../../../../../assets/classes'[m
[31m-import AdminContext from "../../../../../stores/adminContext.js"[m
[31m-import BackButton from "../../_/BackButton.jsx"[m
[32m+[m[32mimport { ecole_profs } from '../../../../../assets/classes'[m
 [m
 export default function TeacherPage({ params }) {[m
[31m-  const {ecole_profs,ecole_classes} = useContext(AdminContext)[m
[31m-  const teacher = ecole_profs?.find(prof => prof._id === params.id)[m
[31m-  console.log(teacher);[m
[31m-  console.log(teacher);[m
[31m-[m
[31m-  [m
[32m+[m[32m  const teacher = ecole_profs.find(prof => prof.id === params.id)[m
 [m
   if (!teacher) {[m
     return <div className="alert alert-danger">Professeur non trouvé</div>[m
   }[m
 [m
   return ([m
[31m-    <main className="container py-4 profilContainer">[m
[32m+[m[32m    <div className="container py-4">[m
       <div className="card">[m
         <div className="card-header d-flex justify-content-between align-items-center">[m
           <h1 className="h3 mb-0">Profil du Professeur</h1>[m
[31m-          <BackButton />[m
[32m+[m[32m          <button[m[41m [m
[32m+[m[32m            className="btn btn-primary"[m
[32m+[m[32m            onClick={() => window.history.back()}[m
[32m+[m[32m          >[m
[32m+[m[32m            Retour[m
[32m+[m[32m          </button>[m
         </div>[m
         <div className="card-body">[m
           <div className="row">[m
             <div className="col-md-4">[m
               {teacher.photo_$_file && ([m
                 <img [m
[31m-                  src={"/school/teachers/"+teacher.nom.toLowerCase() + "_" + teacher?.prenoms?.join("-").toLocaleLowerCase() +"_"+ teacher["photo_$_file"].substring(teacher["photo_$_file"].indexOf('.'))} [m
[31m-                  alt={`${teacher.nom} ${teacher.prenoms?.join(' ')}`}[m
[32m+[m[32m                  src={teacher.photo_$_file}[m[41m [m
[32m+[m[32m                  alt={`${teacher.nom} ${teacher.prenoms.join(' ')}`}[m
                   className="img-fluid rounded mb-3"[m
                 />[m
               )}[m
             </div>[m
             <div className="col-md-8">[m
[31m-              <h2 className="h4 mb-3">{teacher.nom} {teacher.prenoms?.join(' ')}</h2>[m
[32m+[m[32m              <h2 className="h4 mb-3">{teacher.nom} {teacher.prenoms.join(' ')}</h2>[m
               <div className="mb-3">[m
                 <strong>Email:</strong> {teacher.email_$_email}[m
               </div>[m
[36m@@ -50,22 +44,15 @@[m [mexport default function TeacherPage({ params }) {[m
               <div className="mb-3">[m
                 <strong>Classes actuelles:</strong>[m
                 <ul className="list-unstyled">[m
[31m-                  {/* {Object.entries(teacher.current_classes_$_ref_µ_classes).map(([key, value], index) => ( */}[m
[31m-                  {teacher.current_classes_$_ref_µ_classes&&Object.entries([teacher.current_classes_$_ref_µ_classes]).map(([key, value], index) => {[m
[31m-                    const classe = ecole_classes.find(classe => classe._id === value)[m
[31m-                    console.log(value);[m
[31m-                    console.log(classe);[m
[31m-                    [m
[31m-                    return <li key={index} className="badge bg-primary me-2">[m
[31m-                      <Link className="class_from_teacherPage" href={`/admin/school#${classe.annee}___${classe.niveau+"-"+classe.alias}`}>{classe.niveau}-{classe.alias}</Link>[m
[31m-                    </li>[m
[31m-                  })}[m
[32m+[m[32m                  {Object.entries(teacher.current_classes_$_ref_µ_classes).map(([key, value], index) => ([m
[32m+[m[32m                    <li key={index} className="badge bg-primary me-2">{key}</li>[m
[32m+[m[32m                  ))}[m
                 </ul>[m
               </div>[m
             </div>[m
           </div>[m
         </div>[m
       </div>[m
[31m-    </main>[m
[32m+[m[32m    </div>[m
   )[m
 }[m
[1mdiff --git a/app/api/admin/products/[id]/route.js b/app/api/admin/products/[id]/route.js[m
[1mdeleted file mode 100644[m
[1mindex a076226..0000000[m
[1m--- a/app/api/admin/products/[id]/route.js[m
[1m+++ /dev/null[m
[36m@@ -1,85 +0,0 @@[m
[31m-import { NextResponse } from 'next/server'[m
[31m-import fs from 'fs/promises'[m
[31m-import path from 'path'[m
[31m-[m
[31m-const ARTICLES_FILE_PATH = path.join(process.cwd(), 'assets', 'datas', 'articles.js')[m
[31m-[m
[31m-async function readArticlesFile() {[m
[31m-    try {[m
[31m-        const content = await fs.readFile(ARTICLES_FILE_PATH, 'utf-8')[m
[31m-        const match = content.match(/data":\s*\[([\s\S]*?)\]/)[m
[31m-        if (match && match[1]) {[m
[31m-            const dataString = `[${match[1]}]`[m
[31m-            return JSON.parse(dataString)[m
[31m-        }[m
[31m-        return [][m
[31m-    } catch (error) {[m
[31m-        console.error('Error reading articles file:', error)[m
[31m-        return [][m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-async function writeArticlesFile(products) {[m
[31m-    try {[m
[31m-        const content = await fs.readFile(ARTICLES_FILE_PATH, 'utf-8')[m
[31m-        const newContent = content.replace([m
[31m-            /data":\s*\[([\s\S]*?)\]/,[m
[31m-            `data": ${JSON.stringify(products, null, 4)}`[m
[31m-        )[m
[31m-        await fs.writeFile(ARTICLES_FILE_PATH, newContent, 'utf-8')[m
[31m-    } catch (error) {[m
[31m-        console.error('Error writing articles file:', error)[m
[31m-        throw error[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-export async function PUT(request, { params }) {[m
[31m-    try {[m
[31m-        const { id } = params[m
[31m-        const updatedProduct = await request.json()[m
[31m-        const products = await readArticlesFile()[m
[31m-        [m
[31m-        const index = products.findIndex(p => p.id_produits === id)[m
[31m-        if (index === -1) {[m
[31m-            return NextResponse.json([m
[31m-                { error: 'Product not found' },[m
[31m-                { status: 404 }[m
[31m-            )[m
[31m-        }[m
[31m-        [m
[31m-        products[index] = { ...products[index], ...updatedProduct }[m
[31m-        await writeArticlesFile(products)[m
[31m-        [m
[31m-        return NextResponse.json(products[index])[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to update product' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-export async function DELETE(request, { params }) {[m
[31m-    try {[m
[31m-        const { id } = params[m
[31m-        const products = await readArticlesFile()[m
[31m-        [m
[31m-        const index = products.findIndex(p => p.id_produits === id)[m
[31m-        if (index === -1) {[m
[31m-            return NextResponse.json([m
[31m-                { error: 'Product not found' },[m
[31m-                { status: 404 }[m
[31m-            )[m
[31m-        }[m
[31m-        [m
[31m-        products.splice(index, 1)[m
[31m-        await writeArticlesFile(products)[m
[31m-        [m
[31m-        return NextResponse.json({ message: 'Product deleted successfully' })[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to delete product' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/app/api/admin/products/route.js b/app/api/admin/products/route.js[m
[1mdeleted file mode 100644[m
[1mindex 3d25d17..0000000[m
[1m--- a/app/api/admin/products/route.js[m
[1m+++ /dev/null[m
[36m@@ -1,125 +0,0 @@[m
[31m-import { NextResponse } from 'next/server'[m
[31m-import fs from 'fs/promises'[m
[31m-import path from 'path'[m
[31m-[m
[31m-const ARTICLES_FILE_PATH = path.join(process.cwd(), 'assets', 'datas', 'articles.js')[m
[31m-[m
[31m-// Fonction utilitaire pour lire le fichier articles.js[m
[31m-async function readArticlesFile() {[m
[31m-    try {[m
[31m-        const content = await fs.readFile(ARTICLES_FILE_PATH, 'utf-8')[m
[31m-        // Extraire les données entre les crochets [][m
[31m-        const match = content.match(/data":\s*\[([\s\S]*?)\]/)[m
[31m-        if (match && match[1]) {[m
[31m-            // Convertir le contenu en tableau d'objets[m
[31m-            const dataString = `[${match[1]}]`[m
[31m-            return JSON.parse(dataString)[m
[31m-        }[m
[31m-        return [][m
[31m-    } catch (error) {[m
[31m-        console.error('Error reading articles file:', error)[m
[31m-        return [][m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-// Fonction utilitaire pour écrire dans le fichier articles.js[m
[31m-async function writeArticlesFile(products) {[m
[31m-    try {[m
[31m-        const content = await fs.readFile(ARTICLES_FILE_PATH, 'utf-8')[m
[31m-        const newContent = content.replace([m
[31m-            /data":\s*\[([\s\S]*?)\]/,[m
[31m-            `data": ${JSON.stringify(products, null, 4)}`[m
[31m-        )[m
[31m-        await fs.writeFile(ARTICLES_FILE_PATH, newContent, 'utf-8')[m
[31m-    } catch (error) {[m
[31m-        console.error('Error writing articles file:', error)[m
[31m-        throw error[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-// GET /api/admin/products[m
[31m-export async function GET() {[m
[31m-    try {[m
[31m-        const products = await readArticlesFile()[m
[31m-        return NextResponse.json(products)[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to fetch products' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-// POST /api/admin/products[m
[31m-export async function POST(request) {[m
[31m-    try {[m
[31m-        const newProduct = await request.json()[m
[31m-        const products = await readArticlesFile()[m
[31m-        [m
[31m-        // Générer un nouvel ID[m
[31m-        const maxId = Math.max(...products.map(p => parseInt(p.id_produits)))[m
[31m-        newProduct.id_produits = (maxId + 1).toString()[m
[31m-        [m
[31m-        products.push(newProduct)[m
[31m-        await writeArticlesFile(products)[m
[31m-        [m
[31m-        return NextResponse.json(newProduct, { status: 201 })[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to create product' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-// PUT /api/admin/products/[id][m
[31m-export async function PUT(request, { params }) {[m
[31m-    try {[m
[31m-        const updatedProduct = await request.json()[m
[31m-        const products = await readArticlesFile()[m
[31m-        [m
[31m-        const index = products.findIndex(p => p.id_produits === updatedProduct.id_produits)[m
[31m-        if (index === -1) {[m
[31m-            return NextResponse.json([m
[31m-                { error: 'Product not found' },[m
[31m-                { status: 404 }[m
[31m-            )[m
[31m-        }[m
[31m-        [m
[31m-        products[index] = updatedProduct[m
[31m-        await writeArticlesFile(products)[m
[31m-        [m
[31m-        return NextResponse.json(updatedProduct)[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to update product' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-// DELETE /api/admin/products/[id][m
[31m-export async function DELETE(request, { params }) {[m
[31m-    try {[m
[31m-        const { id } = params[m
[31m-        const products = await readArticlesFile()[m
[31m-        [m
[31m-        const index = products.findIndex(p => p.id_produits === id)[m
[31m-        if (index === -1) {[m
[31m-            return NextResponse.json([m
[31m-                { error: 'Product not found' },[m
[31m-                { status: 404 }[m
[31m-            )[m
[31m-        }[m
[31m-        [m
[31m-        products.splice(index, 1)[m
[31m-        await writeArticlesFile(products)[m
[31m-        [m
[31m-        return NextResponse.json({ message: 'Product deleted successfully' })[m
[31m-    } catch (error) {[m
[31m-        return NextResponse.json([m
[31m-            { error: 'Failed to delete product' },[m
[31m-            { status: 500 }[m
[31m-        )[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/_/ModalProduct.jsx b/app/ecom/_/ModalProduct.jsx[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/_/ModalProduct.jsx[m
[1mrename to app/ecom/_/ModalProduct.jsx[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/_/ShareButton.module.css b/app/ecom/_/ShareButton.module.css[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/_/ShareButton.module.css[m
[1mrename to app/ecom/_/ShareButton.module.css[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/actions.js b/app/ecom/actions.js[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/actions.js[m
[1mrename to app/ecom/actions.js[m
[1mdiff --git a/app/ecom/components/AddArticleForm.jsx b/app/ecom/components/AddArticleForm.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..2277c0b[m
[1m--- /dev/null[m
[1m+++ b/app/ecom/components/AddArticleForm.jsx[m
[36m@@ -0,0 +1,201 @@[m
[32m+[m[32mimport { useState } from 'react';[m
[32m+[m
[32m+[m
[32m+[m[32mconst articles_img_table = {[m
[32m+[m[32m  'livret P.D': "publication-puissance-divine",[m
[32m+[m[32m  'bibles': "sainte-bible",[m
[32m+[m[32m  'NEI': "sainte-bible",[m
[32m+[m[32m  'texte&priere': "sainte-bible",[m
[32m+[m[32m  'divers': "divers",[m
[32m+[m[32m  'tableau/icone': "icone-religieuse",[m
[32m+[m[32m  'croixp': "croix-jesus",[m
[32m+[m[32m  'croixm': "croix-jesus",[m
[32m+[m[32m  'croix': "croix-jesus",[m
[32m+[m[32m  'encens': "encens-priere",[m
[32m+[m[32m  'statue': "statue-religieuse",[m
[32m+[m[32m  'grotte': "statue-religieuse",[m
[32m+[m[32m  'chapelet': "chapelet-priere",[m
[32m+[m[32m  'aLaUne': "aLaUne",[m
[32m+[m[32m}[m
[32m+[m[32mconst articles_title_table = {[m
[32m+[m[32m  'tableau/icone': "Icônes Religieuses",[m
[32m+[m[32m  '_livret P.D': "Publication Puissance Divine",[m
[32m+[m[32m  '_bibles': "Saintes Bibles",[m
[32m+[m[32m  '_NEI': "NEI",[m
[32m+[m[32m  '_texte&priere': "Textes & Prières",[m
[32m+[m[32m  'croixp': "Croix Posées",[m
[32m+[m[32m  'croixm': "Croix Murales",[m
[32m+[m[32m  'croix': "Croix Jésus",[m
[32m+[m[32m  'encens': "Encens",[m
[32m+[m[32m  'statue': "Statue Religieuse",[m
[32m+[m[32m  'grotte': "Grotte Religieuse",[m
[32m+[m[32m  'chapelet': "Chapelet de Prière",[m
[32m+[m[32m  'divers': "Divers",[m
[32m+[m[32m  '_divers': "Divers",[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mimport { useEffect } from 'react';[m
[32m+[m
[32m+[m[32mexport default function AddArticleForm({ onSubmit, onCancel, initialData }) {[m
[32m+[m[32m  const [form, setForm] = useState({[m
[32m+[m[32m    nom: '', prix: '', img: '', fr: '',[m
[32m+[m[32m    auteur: '', taille: '', materiaux: '', autre: '', stock: 5, actif: '1',[m
[32m+[m[32m    aLaUne: 0,[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    if (initialData) {[m
[32m+[m[32m      setForm({[m
[32m+[m[32m        nom: initialData.nom || '',[m
[32m+[m[32m        prix: initialData.prix || '',[m
[32m+[m[32m        img: initialData.img || '',[m
[32m+[m[32m        fr: initialData.fr || '',[m
[32m+[m[32m        auteur: initialData.auteur || '',[m
[32m+[m[32m        taille: initialData.taille || '',[m
[32m+[m[32m        materiaux: initialData.materiaux || '',[m
[32m+[m[32m        autre: initialData.autre || '',[m
[32m+[m[32m        stock: initialData.stock ?? 5,[m
[32m+[m[32m        actif: initialData.actif !== undefined ? (initialData.actif ? '1' : '0') : '1',[m
[32m+[m[32m        aLaUne: initialData.alaune || 0,[m
[32m+[m[32m        fr1: initialData.fr1 || '',[m
[32m+[m[32m        user_name: initialData.user_name || '',[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  }, [initialData]);[m
[32m+[m[32m  const [imageFile, setImageFile] = useState(null);[m
[32m+[m[32m  const [uploading, setUploading] = useState(false);[m
[32m+[m[32m  const [uploadError, setUploadError] = useState('');[m
[32m+[m
[32m+[m[32m  const handleChange = e => {[m
[32m+[m[32m    const { name, value } = e.target;[m
[32m+[m[32m    let next = { ...form, [name]: value };[m
[32m+[m[32m    const oo = articles_title_table['_'+value] ? 'publication' : 'objet';[m
[32m+[m[32m    if (name === 'nom') {[m
[32m+[m[32m      // Déterminer automatiquement le type selon la clé[m
[32m+[m[32m      next.user_name = articles_title_table['_'+value] ? 'publication' : 'objet';[m
[32m+[m[32m    }[m
[32m+[m[32m    setForm(next);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const handleImageChange = (e) => {[m
[32m+[m[32m    const file = e.target.files[0];[m
[32m+[m[32m    if (!file) return;[m
[32m+[m[32m    setImageFile(file);[m
[32m+[m[32m    setForm(f => ({ ...f, img: file.name }));[m
[32m+[m[32m    setUploadError('');[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const handleSubmit = async (e) => {[m
[32m+[m[32m    e.preventDefault();[m
[32m+[m[32m    setUploading(true);[m
[32m+[m[32m    setUploadError('');[m
[32m+[m[32m    let imgUrl = form.img;[m
[32m+[m[32m    // Si imageFile existe, upload d'abord[m
[32m+[m[32m    if (imageFile) {[m
[32m+[m[32m      try {[m
[32m+[m[32m        const folderLabel = articles_img_table[form.nom] || 'divers';[m
[32m+[m[32m        const formData = new FormData();[m
[32m+[m[32m        formData.append('image', imageFile);[m
[32m+[m[32m        formData.append('folder', folderLabel);[m
[32m+[m[32m        formData.append('articleNom', form.nom);[m
[32m+[m[32m        formData.append('originalName', imageFile.name);[m
[32m+[m[32m        const res = await fetch('/api/upload_ecom', {[m
[32m+[m[32m          method: 'POST',[m
[32m+[m[32m          body: formData[m
[32m+[m[32m        });[m
[32m+[m[32m        const data = await res.json();[m
[32m+[m[32m        if (res.ok && data.url) {[m
[32m+[m[32m          imgUrl = data.url;[m
[32m+[m[32m        } else {[m
[32m+[m[32m          setUploadError(data.error || 'Erreur lors de l\'upload');[m
[32m+[m[32m          setUploading(false);[m
[32m+[m[32m          return;[m
[32m+[m[32m        }[m
[32m+[m[32m      } catch (err) {[m
[32m+[m[32m        setUploadError('Erreur lors de l\'upload');[m
[32m+[m[32m        setUploading(false);[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    setUploading(false);[m
[32m+[m[32m    // Correction : mappe aLaUne -> alaune pour l'API[m
[32m+[m[32m    const { aLaUne, ...rest } = form;[m
[32m+[m[32m    onSubmit({ ...rest, img: imgUrl, alaune: aLaUne });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <form className="ecommerce_form_add" onSubmit={handleSubmit} style={{display:'flex',flexDirection:'column',gap:'1rem',maxWidth:400}}>[m
[32m+[m[32m      {/* {console.log(form)} */}[m
[32m+[m[32m      <h2>Ajouter un article</h2>[m
[32m+[m[32m      <input name="fr" placeholder="Titre de l'article" value={form.fr} onChange={handleChange} />[m
[32m+[m[32m      <label>Catégorie :[m
[32m+[m[32m        <select name="nom" value={form.nom} onChange={handleChange} required>[m
[32m+[m[32m          <option value="">Sélectionner une catégorie</option>[m
[32m+[m[32m          {Object.entries(articles_img_table).map(([key]) => ([m
[32m+[m[32m            <option key={key} value={key}>[m
[32m+[m[32m              {articles_title_table[key] || key}[m
[32m+[m[32m            </option>[m
[32m+[m[32m          ))}[m
[32m+[m[32m        </select>[m
[32m+[m[32m      </label>[m
[32m+[m[32m      <label>Type d'article :[m
[32m+[m[32m        <input name="user_name" value={form.user_name === 'publication' ? 'Publication chrétienne' : form.user_name === 'objet' ? 'Objet de piété' : ''} readOnly style={{background:'#f5f5f5',color:'#333',fontWeight:'bold'}} />[m
[32m+[m[32m      </label>[m
[32m+[m[32m      {/* Upload image */}[m
[32m+[m[32m      <label>Image&nbsp;:[m
[32m+[m[32m        {/* <input id="image_article_add" type="file" name="image" accept="image/*" onChange={handleImageChange} disabled={!form.nom || uploading} /> */}[m
[32m+[m[32m        <input id="image_article_add" type="file" name="image" accept="image/*" capture="environment" onChange={handleImageChange} disabled={!form.nom || uploading} />[m
[32m+[m
[32m+[m[32m      </label>[m
[32m+[m[32m      {uploading && <span style={{color:'#6c63ff'}}>Envoi en cours...</span>}[m
[32m+[m[32m      {uploadError && <span style={{color:'red'}}>{uploadError}</span>}[m
[32m+[m[32m      {/* Preview temporaire si imageFile */}[m
[32m+[m[32m      {imageFile && !form.img && ([m
[32m+[m[32m        <img[m
[32m+[m[32m          src={URL.createObjectURL(imageFile)}[m
[32m+[m[32m          alt="aperçu temporaire"[m
[32m+[m[32m          style={{maxWidth:120,margin:'0 auto',borderRadius:8,opacity:0.7}}[m
[32m+[m[32m        />[m
[32m+[m[32m      )}[m
[32m+[m[32m      {form.img && <img src={form.img} alt="aperçu" style={{maxWidth:120,margin:'0 auto',borderRadius:8}} />}[m
[32m+[m[32m      {/* Champ texte img désactivé */}[m
[32m+[m[32m      <input name="img" placeholder="Nom personnalisé de l'image (optionnel)" value={form.img} onChange={handleChange} disabled={uploading||!document.getElementById('image_article_add')?.value} />[m
[32m+[m[32m      <input name="prix" placeholder="Prix" value={form.prix} onChange={handleChange} required />[m
[32m+[m[32m      <input name="stock" placeholder="Stock" value={form.stock} onChange={handleChange} />[m
[32m+[m[32m      <input name="auteur" placeholder="Auteur" value={form.auteur} onChange={handleChange} />[m
[32m+[m[32m      <textarea name="fr1" placeholder="Description détaillée" value={form.fr1||''} onChange={handleChange} />[m
[32m+[m[32m      <input name="taille" placeholder="Taille" value={form.taille} onChange={handleChange} />[m
[32m+[m[32m      <input name="materiaux" placeholder="Matériaux" value={form.materiaux} onChange={handleChange} />[m
[32m+[m[32m      <input name="autre" placeholder="Autre" value={form.autre} onChange={handleChange} />[m
[32m+[m[32m      <label style={{display:'flex',flexDirection:'column',alignItems:'flex-start',gap:4}}>[m
[32m+[m[32m        Date de fin "À la Une" :[m
[32m+[m[32m        <input[m
[32m+[m[32m          name="alaune"[m
[32m+[m[32m          type="datetime-local"[m
[32m+[m[32m          value={form.aLaUne ? new Date(form.aLaUne).toISOString().slice(0,16) : ''}[m
[32m+[m[32m          onChange={e => {[m
[32m+[m[32m            const val = e.target.value;[m
[32m+[m[32m            setForm(f => ({[m
[32m+[m[32m              ...f,[m
[32m+[m[32m              aLaUne: val ? new Date(val).getTime() : 0[m
[32m+[m[32m            }));[m
[32m+[m[32m          }}[m
[32m+[m[32m          style={{maxWidth:220}}[m
[32m+[m[32m        />[m
[32m+[m[32m        {form.aLaUne ? <span style={{fontSize:12}}>Fin à la une : {new Date(form.aLaUne).toLocaleString()}</span> : null}[m
[32m+[m[32m      </label>[m
[32m+[m[32m      <label>[m
[32m+[m[32m        Actif :[m
[32m+[m[32m        <select name="actif" value={form.actif} onChange={handleChange}>[m
[32m+[m[32m          <option value="1">Oui</option>[m
[32m+[m[32m          <option value="0">Non</option>[m
[32m+[m[32m        </select>[m
[32m+[m[32m      </label>[m
[32m+[m[32m      <div style={{display:'flex',gap:'1rem'}}>[m
[32m+[m[32m        <button type="submit">Ajouter</button>[m
[32m+[m[32m        <button type="button" onClick={onCancel}>Annuler</button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </form>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/components/ArticleGrid.jsx b/app/ecom/components/ArticleGrid.jsx[m
[1msimilarity index 92%[m
[1mrename from app/ecommerce-chretien-abidjan/components/ArticleGrid.jsx[m
[1mrename to app/ecom/components/ArticleGrid.jsx[m
[1mindex aa26293..8014bf3 100644[m
[1m--- a/app/ecommerce-chretien-abidjan/components/ArticleGrid.jsx[m
[1m+++ b/app/ecom/components/ArticleGrid.jsx[m
[36m@@ -32,7 +32,10 @@[m [mexport default function ArticleGrid({[m
     handleUpdate,[m
     handleDelete,[m
     isAdmin,[m
[31m-    miniCart[m
[32m+[m[32m    miniCart,[m
[32m+[m[32m    selectedCategory,[m
[32m+[m[32m    selectedType,[m
[32m+[m[32m    openEditForm[m
 }) {[m
     const [selectedProduct, setSelectedProduct] = useState(null);[m
     const { setHoveredTitle } = useHover();[m
[36m@@ -43,7 +46,7 @@[m [mexport default function ArticleGrid({[m
 [m
     return ([m
         <>[m
[31m-            <article id="articles" className="publication cardsAI">[m
[32m+[m[32m            <article id="articles" className={selectedType+" "+selectedCategory+" cardsAI"}>[m
                 {Ecommerce_articles.articles.data.map((item, i) => {[m
                     let option = Ecommerce_articles_OPTIONS.data.find([m
                         el => el.img_article == item.img[m
[36m@@ -57,10 +60,11 @@[m [mexport default function ArticleGrid({[m
 [m
                     return ([m
                         <figure [m
[31m-                            className={item.user_name + " " + item.nom.replace(' ','_').replace('.','_').replace('/','_')} [m
[32m+[m[32m                            className={item.user_name + " " + item.nom.replace(' ','_').replace('.','_').replace('/','_').replace('&','_')}[m[41m [m
                             key={"figure_"+i}[m
                             onMouseEnter={() => setHoveredTitle(item.fr__)}[m
                             onMouseLeave={() => setHoveredTitle('')}[m
[32m+[m[32m                            data-aLaUne={item.alaune||0}[m
                         >[m
                             <div>[m
                                 <Image[m
[36m@@ -91,9 +95,9 @@[m [mexport default function ArticleGrid({[m
                                         >avec couverture: +{option.couverture} Fcfa</div>}[m
                                         {option.opt_nom && <div className="option_name">{option.opt_nom}</div>}[m
                                     </>}[m
[31m-                                    {isAdmin && <ul>[m
[31m-                                        <li onClick={(e) => handleUpdate(e,item)}>edit</li>[m
[31m-                                        <li onClick={handleDelete} data-_id={item._id} data-src={item.src_$_file}>delete</li>[m
[32m+[m[32m                                    {isAdmin && <ul class="admin_btns">[m
[32m+[m[32m                                        <li onClick={() => openEditForm(item)}>edit</li>[m
[32m+[m[32m                                        <li onClick={handleDelete} data-_id={item._id} data-src={`img/vente-religieuse/min/${Ecommerce_articles.articles_img_table[item.nom]}/${item.img}.webp`}>delete</li>[m
                                     </ul>}[m
                                 </button>}[m
                                 <figcaption title={item.fr}>{item.fr__}</figcaption>[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/components/Intro.jsx b/app/ecom/components/Intro.jsx[m
[1msimilarity index 66%[m
[1mrename from app/ecommerce-chretien-abidjan/components/Intro.jsx[m
[1mrename to app/ecom/components/Intro.jsx[m
[1mindex df7562e..97b85ba 100644[m
[1m--- a/app/ecommerce-chretien-abidjan/components/Intro.jsx[m
[1m+++ b/app/ecom/components/Intro.jsx[m
[36m@@ -1,12 +1,5 @@[m
[31m-const Intro = ({ handleProductsDisplay }) => {[m
[31m-    const categories = [[m
[31m-        { name: "Bibles", color: "purple" },[m
[31m-        { name: "Livres de prière", color: "blue" },[m
[31m-        { name: "Chapelets", color: "green" },[m
[31m-        { name: "Livres spirituels", color: "orange" },[m
[31m-        { name: "Objets de dévotion", color: "red" },[m
[31m-        { name: "Médailles religieuses", color: "teal" }[m
[31m-    ];[m
[32m+[m[32mconst Intro = ({ selectedCategory, setSelectedCategory, categories }) => {[m
[32m+[m
 [m
     return ([m
         <section className="intro-section">[m
[36m@@ -18,12 +11,19 @@[m [mconst Intro = ({ handleProductsDisplay }) => {[m
                 </p>[m
                 <p className="intro-categories">[m
                     Explorez nos catégories : {' '}[m
[32m+[m[32m                    <button[m
[32m+[m[32m                        key="all"[m
[32m+[m[32m                        onClick={() => setSelectedCategory('all')}[m
[32m+[m[32m                        className={`category-badge neutral${selectedCategory === 'all' ? ' active' : ''}`}[m
[32m+[m[32m                    >[m
[32m+[m[32m                        Toutes[m
[32m+[m[32m                    </button>{' '}[m
                     {categories.map((category, index) => ([m
                         <>[m
                             <button[m
                                 key={index}[m
[31m-                                onClick={() => handleProductsDisplay(category.name.toLowerCase())}[m
[31m-                                className={`category-badge ${category.color}`}[m
[32m+[m[32m                                onClick={() => setSelectedCategory(category.label)}[m
[32m+[m[32m                                className={`category-badge ${category.color}${selectedCategory === category.label ? ' active' : ''}`}[m
                             >[m
                                 {category.name}[m
                             </button>[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/components/IntroVideo.jsx b/app/ecom/components/IntroVideo.jsx[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/components/IntroVideo.jsx[m
[1mrename to app/ecom/components/IntroVideo.jsx[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/components/Modal.jsx b/app/ecom/components/Modal.jsx[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/components/Modal.jsx[m
[1mrename to app/ecom/components/Modal.jsx[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/components/ecomNavbar.jsx b/app/ecom/components/ecomNavbar copy.jsx[m
[1msimilarity index 67%[m
[1mrename from app/ecommerce-chretien-abidjan/components/ecomNavbar.jsx[m
[1mrename to app/ecom/components/ecomNavbar copy.jsx[m
[1mindex 8da5910..c7ce901 100644[m
[1m--- a/app/ecommerce-chretien-abidjan/components/ecomNavbar.jsx[m
[1m+++ b/app/ecom/components/ecomNavbar copy.jsx[m	
[36m@@ -1,27 +1,43 @@[m
[31m-import {handleProductsDisplay,handleSelect,handleSelectButtons} from "../../../utils/handleEvents.js"[m
[32m+[m[32mimport {handleProductsDisplay,handleSelect} from "../../../utils/handleEvents.js"[m
 import { useContext } from "react"[m
 import {createPortal} from "react-dom"[m
 import EditMongoForm from "../../admin/school/EditMongoForm.jsx"[m
 import AuthContext from "../../../stores/authContext.js"[m
 import { useHover } from '../context/HoverContext.jsx'[m
 [m
[31m-export default function EcomNavbar({models,currentDatas}) {[m
[31m-    const {isAdmin,selectOptions, setSelectOptions} = useContext(AuthContext)[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function EcomNavbar({models,currentDatas,setSelectedCategory,setSelectedType}) {[m
[32m+[m[32m    const {isAdmin} = useContext(AuthContext)[m
     const { hoveredTitle } = useHover()[m
 [m
[32m+[m[32m    const handleSelectType = (e,type) => {[m
[32m+[m[32m        setSelectedCategory('all')[m
[32m+[m[32m        setSelectedType(type)[m
[32m+[m[32m        const a = e.target.parentNode.querySelectorAll('button')[m
[32m+[m[32m        console.log(a);[m
[32m+[m[32m        console.log(type);[m
[32m+[m[32m        console.log(a[type=="objet"?1:0]);[m
[32m+[m[41m        [m
[32m+[m[41m        [m
[32m+[m[41m        [m
[32m+[m[32m        a.forEach(ee=>{ee.classList.remove('active')})[m
[32m+[m[32m        a[type=="objet"?1:0].classList.add('active')[m
[32m+[m[32m    }[m
[32m+[m
     return <section id="navbarEcom">[m
         <section>[m
[31m-            <button onClick={(e)=>{handleSelectButtons(e,setSelectOptions)}} className="active">Publications chrétiennes</button>[m
[31m-            <button onClick={(e)=>{handleSelectButtons(e,setSelectOptions)}}>Objets de piété</button>[m
[32m+[m[32m            <button onClick={(e)=>{handleSelectType(e,"publication");}} className="active">Publications chrétiennes</button>[m
[32m+[m[32m            <button onClick={(e)=>{handleSelectType(e,"objet");}}>Objets de piété</button>[m
         </section>[m
         [m
[31m-        <div className="search-container">[m
[32m+[m[32m        {/* <div className="search-container">[m
             <input type="text" placeholder="Rechercher un article..." />[m
             <select id="ecommerce_select" onChange={handleSelect}>[m
                 <option value="all">Choisir un type d&apos;article</option>[m
                 {selectOptions}[m
             </select>[m
[31m-        </div>[m
[32m+[m[32m        </div> */}[m
 [m
         <div className="howtoshow">[m
             <button onClick={handleProductsDisplay} className="active">▢</button>[m
[1mdiff --git a/app/ecom/components/ecomNavbar.jsx b/app/ecom/components/ecomNavbar.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..fb1aa7d[m
[1m--- /dev/null[m
[1m+++ b/app/ecom/components/ecomNavbar.jsx[m
[36m@@ -0,0 +1,125 @@[m
[32m+[m[32mimport {handleProductsDisplay,handleSelect} from "../../../utils/handleEvents.js"[m
[32m+[m[32mimport { useContext } from "react"[m
[32m+[m[32mimport {createPortal} from "react-dom"[m
[32m+[m[32mimport EditMongoForm from "../../admin/school/EditMongoForm.jsx"[m
[32m+[m[32mimport AuthContext from "../../../stores/authContext.js"[m
[32m+[m[32mimport { useHover } from '../context/HoverContext.jsx'[m
[32m+[m[32mimport Modal from './Modal.jsx'[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mimport { useState } from "react";[m
[32m+[m[32mimport AddArticleForm from './AddArticleForm.jsx';[m
[32m+[m
[32m+[m[32mexport default function EcomNavbar({models,currentDatas,setSelectedCategory,setSelectedType}) {[m
[32m+[m[32m    const {isAdmin} = useContext(AuthContext)[m
[32m+[m[32m    const { hoveredTitle } = useHover()[m
[32m+[m[32m    const [showAddModal, setShowAddModal] = useState(false);[m
[32m+[m[32m    const [adding, setAdding] = useState(false);[m
[32m+[m[32m    const [addError, setAddError] = useState('');[m
[32m+[m[32m    const [successMessage, setSuccessMessage] = useState('');[m
[32m+[m[32m    const handleAddArticle = async (data) => {[m
[32m+[m[32m        setAdding(true);[m
[32m+[m[32m        setAddError('');[m
[32m+[m[32m        try {[m
[32m+[m[32m            const res = await fetch('/api/ecom', {[m
[32m+[m[32m                method: 'POST',[m
[32m+[m[32m                headers: { 'Content-Type': 'application/json' },[m
[32m+[m[32m                body: JSON.stringify(data),[m
[32m+[m[32m            });[m
[32m+[m[32m            const result = await res.json();[m
[32m+[m[32m            if (!res.ok) {[m
[32m+[m[32m                setAddError(result.error || 'Erreur lors de l\'ajout');[m
[32m+[m[32m                setAdding(false);[m
[32m+[m[32m                return;[m
[32m+[m[32m            }[m
[32m+[m[32m            localStorage.removeItem('ecommerce_articles')[m
[32m+[m[32m            setShowAddModal(false);[m
[32m+[m[32m            setSuccessMessage('Article ajouté avec succès !');[m
[32m+[m[32m            if (typeof window !== 'undefined') {[m
[32m+[m[32m                if (typeof (window.onRefreshArticles) === 'function') {[m
[32m+[m[32m                    window.onRefreshArticles();[m
[32m+[m[32m                } else if (typeof location !== 'undefined') {[m
[32m+[m[32m                    location.reload();[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        } catch (err) {[m
[32m+[m[32m            setAddError('Erreur lors de l\'ajout');[m
[32m+[m[32m        } finally {[m
[32m+[m[32m            setAdding(false);[m
[32m+[m[32m            setTimeout(()=>setSuccessMessage(''), 3500);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    const handleSelectType = (e,type) => {[m
[32m+[m[32m        setSelectedCategory('all')[m
[32m+[m[32m        setSelectedType(type)[m
[32m+[m[32m        const a = e.target.parentNode.querySelectorAll('button')[m
[32m+[m[32m        console.log(a);[m
[32m+[m[32m        console.log(type);[m
[32m+[m[32m        console.log(a[type=="objet"?1:0]);[m
[32m+[m[41m        [m
[32m+[m[41m        [m
[32m+[m[41m        [m
[32m+[m[32m        a.forEach(ee=>{ee.classList.remove('active')})[m
[32m+[m[32m        a[type=="objet"?1:0].classList.add('active')[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return <>[m
[32m+[m[32m        <section id="navbarEcom">[m
[32m+[m[32m            <section>[m
[32m+[m[32m                <button onClick={(e)=>{handleSelectType(e,"publication");}} className="active">Publications chrétiennes</button>[m
[32m+[m[32m                <button onClick={(e)=>{handleSelectType(e,"objet");}}>Objets de piété</button>[m
[32m+[m[32m            </section>[m
[32m+[m[41m            [m
[32m+[m[32m            {/* <div className="search-container">[m
[32m+[m[32m                <input type="text" placeholder="Rechercher un article..." />[m
[32m+[m[32m                <select id="ecommerce_select" onChange={handleSelect}>[m
[32m+[m[32m                    <option value="all">Choisir un type d&apos;article</option>[m
[32m+[m[32m                    {selectOptions}[m
[32m+[m[32m                </select>[m
[32m+[m[32m            </div> */}[m
[32m+[m[32m            {document.querySelectorAll('#articles>figure[data-alaune]').length != document.querySelectorAll('#articles>figure[data-alaune="0"]').length && <button[m[41m                         [m
[32m+[m[32m                className={"aLaUne" + (window.__alauneFilter ? " active" : "")}[m
[32m+[m[32m                onClick={e => {[m
[32m+[m[32m                    const now = Date.now();[m
[32m+[m[32m                    const btn = e.currentTarget;[m
[32m+[m[32m                    const figures = document.querySelectorAll('#articles>figure');[m
[32m+[m[32m                    if (!window.__alauneFilter) {[m
[32m+[m[32m                        figures.forEach(fig => {[m
[32m+[m[32m                            const alaune = parseInt(fig.getAttribute('data-alaune'), 10);[m
[32m+[m[32m                            if (alaune !== 0 && alaune > now) fig.style.display = '';[m
[32m+[m[32m                            else fig.style.display = 'none';[m
[32m+[m[32m                        });[m
[32m+[m[32m                        btn.classList.add('active');[m
[32m+[m[32m                        window.__alauneFilter = true;[m
[32m+[m[32m                    } else {[m
[32m+[m[32m                        figures.forEach(fig => fig.style.display = '');[m
[32m+[m[32m                        btn.classList.remove('active');[m
[32m+[m[32m                        window.__alauneFilter = false;[m
[32m+[m[32m                    }[m
[32m+[m[32m                }}[m
[32m+[m[32m            >À La Une</button>}[m
[32m+[m
[32m+[m[32m            <div className="howtoshow">[m
[32m+[m[32m                <button onClick={handleProductsDisplay} className="active">▢</button>[m
[32m+[m[32m                <button onClick={handleProductsDisplay}>─</button>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            {isAdmin && <>[m
[32m+[m[32m                <button[m[41m [m
[32m+[m[32m                    title={"Ajouter une produit au ecommerce"}[m
[32m+[m[32m                    onClick={()=>setShowAddModal(true)}[m
[32m+[m[32m                >+</button>[m
[32m+[m[32m                <Modal isOpen={showAddModal} onClose={()=>setShowAddModal(false)}>[m
[32m+[m[32m                    <AddArticleForm[m[41m [m
[32m+[m[32m                        onSubmit={handleAddArticle}[m
[32m+[m[32m                        onCancel={()=>setShowAddModal(false)}[m
[32m+[m[32m                    />[m
[32m+[m[32m                </Modal>[m
[32m+[m[32m            </>}[m
[32m+[m[32m            <h4 className="hover-title">{hoveredTitle}</h4>[m
[32m+[m[32m        </section>[m
[32m+[m[32m        {successMessage && <div style={{position:'fixed',top:10,right:10,background:'#6c63ff',color:'#fff',padding:'1em 2em',borderRadius:8,zIndex:9999,boxShadow:'0 2px 8px #2225'}}> {successMessage} </div>}[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/context/HoverContext.jsx b/app/ecom/context/HoverContext.jsx[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/context/HoverContext.jsx[m
[1mrename to app/ecom/context/HoverContext.jsx[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/layout.jsx b/app/ecom/layout.jsx[m
[1msimilarity index 61%[m
[1mrename from app/ecommerce-chretien-abidjan/layout.jsx[m
[1mrename to app/ecom/layout.jsx[m
[1mindex 4a9cd29..672e6df 100644[m
[1m--- a/app/ecommerce-chretien-abidjan/layout.jsx[m
[1m+++ b/app/ecom/layout.jsx[m
[36m@@ -1,12 +1,8 @@[m
[31m-import {EcomContextProvider} from '../../stores/ecomContext'[m
[31m-[m
 export const metadata = {[m
   title: 'Ecommerce Chrétien - Librairie Puissance Divine d\'Amour',[m
   description: 'Publications chrétiennes et objets de piété',[m
 }[m
 [m
 export default function Layout({ children }) {[m
[31m-  return <EcomContextProvider>[m
[31m-    {children}[m
[31m-  </EcomContextProvider>[m
[32m+[m[32m  return children[m
 }[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/loading.jsx b/app/ecom/loading.jsx[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/loading.jsx[m
[1mrename to app/ecom/loading.jsx[m
[1mdiff --git a/app/ecom/page.jsx b/app/ecom/page.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..38207cc[m
[1m--- /dev/null[m
[1m+++ b/app/ecom/page.jsx[m
[36m@@ -0,0 +1,230 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport {useState,useEffect,useContext} from 'react'[m
[32m+[m[32mimport Link from "next/link"[m
[32m+[m[32mimport Image from "next/image"[m
[32m+[m[32mimport AuthContext from "../../stores/authContext.js"[m
[32m+[m[32mimport EcomContext from "../../stores/ecomContext.js"[m
[32m+[m[32m// import Nav from '../../components/Nav.jsx'[m
[32m+[m[32mimport ModalProduct from './_/ModalProduct.jsx'[m
[32m+[m[32mimport Intro from './components/Intro.jsx'[m
[32m+[m[32mimport EcomNavbar from './components/ecomNavbar.jsx'[m
[32m+[m[32mimport "./style.scss"[m
[32m+[m[32mimport "../../assets/scss/index_ecom_ai.scss"[m
[32m+[m[32m// import * as Ecommerce_articles from "../../assets/datas/articles.js"[m
[32m+[m[32m// import Ecommerce_articles_OPTIONS from "../../assets/datas/articles_options.js"[m
[32m+[m[32mimport {handleModalShowProduct,handleAddToCart,handleProductsDisplay,handleSelect,handleVariantButtonHover} from "../../utils/handleEvents.js"[m
[32m+[m[32mimport BlogCategory from '../_/Blog/BlogCategory'[m
[32m+[m[32mimport ArticleGrid from './components/ArticleGrid'[m
[32m+[m[32mimport AddArticleForm from './components/AddArticleForm.jsx';[m
[32m+[m[32mimport { HoverProvider } from './context/HoverContext'[m
[32m+[m[32m// import { getEcommerceData } from './actions'[m
[32m+[m
[32m+[m[32mfunction EcommercePage() {[m
[32m+[m[32m    const [ecommerce_articles, setEcommerce_articles] = useState({});[m
[32m+[m[32m    const [ecommerce_articles_OPTIONS, setEcommerce_articles_OPTIONS] = useState({});[m
[32m+[m[32m    const [loading, setLoading] = useState(true);[m
[32m+[m[32m    const [error, setError] = useState(null);[m
[32m+[m
[32m+[m[32m    useEffect(() => {[m
[32m+[m[32m        // Vérifie d'abord le localStorage[m
[32m+[m[32m        const localArticles = window.localStorage.getItem('ecommerce_articles');[m
[32m+[m[32m        const localOptions = window.localStorage.getItem('ecommerce_articles_OPTIONS');[m
[32m+[m[32m        let hasLocal = false;[m
[32m+[m[32m        if (localArticles && localOptions) {[m
[32m+[m[32m            try {[m
[32m+[m[32m                const parsedArticles = JSON.parse(localArticles);[m
[32m+[m[32m                const parsedOptions = JSON.parse(localOptions);[m
[32m+[m[32m                setEcommerce_articles(parsedArticles);[m
[32m+[m[32m                setEcommerce_articles_OPTIONS(parsedOptions);[m
[32m+[m[32m                setLoading(false);[m
[32m+[m[32m                hasLocal = true;[m
[32m+[m[32m            } catch (e) {[m
[32m+[m[32m                // Si parsing échoue, on continue avec le fetch[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m        if (!hasLocal) {[m
[32m+[m[32m            fetch('/api/ecom')[m
[32m+[m[32m                .then(res => res.ok ? res.json() : Promise.reject(res))[m
[32m+[m[32m                .then(data => {[m
[32m+[m[32m                    const articlesObj = {articles: {data: data.articles},articles_img_table,articles_title_table};[m
[32m+[m[32m                    const optionsObj = {data: data.options};[m
[32m+[m[32m                    setEcommerce_articles(articlesObj);[m
[32m+[m[32m                    setEcommerce_articles_OPTIONS(optionsObj);[m
[32m+[m[32m                    window.localStorage.setItem('ecommerce_articles', JSON.stringify(articlesObj));[m
[32m+[m[32m                    window.localStorage.setItem('ecommerce_articles_OPTIONS', JSON.stringify(optionsObj));[m
[32m+[m[32m                    setLoading(false);[m
[32m+[m[32m                })[m
[32m+[m[32m                .catch(err => {[m
[32m+[m[32m                    setError('Erreur lors du chargement des articles');[m
[32m+[m[32m                    setLoading(false);[m
[32m+[m[32m                });[m
[32m+[m[32m        }[m
[32m+[m[32m    }, []);[m
[32m+[m
[32m+[m[32m    if (loading) return <div>Chargement des articles...</div>;[m
[32m+[m[32m    if (error) return <div>{error}</div>;[m
[32m+[m
[32m+[m[32m    return <Ecommerce Ecommerce_articles={ecommerce_articles} Ecommerce_articles_OPTIONS={ecommerce_articles_OPTIONS} />;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst articles_img_table = {[m
[32m+[m[32m    'tableau/icone': "icone-religieuse",[m
[32m+[m[32m    'livret P.D': "publication-puissance-divine",[m
[32m+[m[32m    'bibles': "sainte-bible",[m
[32m+[m[32m    'NEI': "sainte-bible",[m
[32m+[m[32m    'texte&priere': "sainte-bible",[m
[32m+[m[32m    'divers': "divers",[m
[32m+[m[32m    'croixp': "croix-jesus",[m
[32m+[m[32m    'croixm': "croix-jesus",[m
[32m+[m[32m    'croix': "croix-jesus",[m
[32m+[m[32m    'encens': "encens-priere",[m
[32m+[m[32m    'statue': "statue-religieuse",[m
[32m+[m[32m    'grotte': "statue-religieuse",[m
[32m+[m[32m    'chapelet': "chapelet-priere",[m
[32m+[m[32m    'aLaUne': "aLaUne",[m
[32m+[m[32m}[m
[32m+[m[32mconst articles_title_table = {[m
[32m+[m[32m    'tableau/icone': "Icônes Religieuses",[m
[32m+[m[32m    '_livret P.D': "Publication Puissance Divine",[m
[32m+[m[32m    '_bibles': "Saintes Bibles",[m
[32m+[m[32m            'NEI': "NEI",[m
[32m+[m[32m            'texte&priere': "Textes & Prières",[m
[32m+[m[32m    'croixp': "Croix Posées",[m
[32m+[m[32m    'croixm': "Croix Murales",[m
[32m+[m[32m    'croix': "Croix Jésus",[m
[32m+[m[32m    'encens': "Encens",[m
[32m+[m[32m    'statue': "Statue Religieuse",[m
[32m+[m[32m    'grotte': "Grotte Religieuse",[m
[32m+[m[32m    'chapelet': "Chapelet de Prière",[m
[32m+[m[32m    'divers': "Divers",[m
[32m+[m[32m    '_divers': "Divers",[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst categories = [[m
[32m+[m[32m    { label: "tableau_icone", color: "orange", name: "Icônes Religieuses"},[m
[32m+[m[32m    { label: "livret_P_D", color: "teal", name: "Publication Puissance Divine"},[m
[32m+[m[32m    { label: "bibles", color: "purple", name: "Saintes Bibles"},[m
[32m+[m[32m    { label: "NEI", color: "blue", name: "NEI"},[m
[32m+[m[32m    { label: "texte_priere", color: "green", name: "Textes & Prières"},[m
[32m+[m[32m    { label: "divers", color: "orange", name: "Croix Posées"},[m
[32m+[m[32m    { label: "croixp", color: "red", name: "Croix Murales"},[m
[32m+[m[32m    { label: "croixm", color: "teal", name: "Croix Jésus"},[m
[32m+[m[32m    { label: "croix", color: "gold", name: "Encens"},[m
[32m+[m[32m    { label: "encens", color: "silver", name: "Statue Religieuse"},[m
[32m+[m[32m    { label: "statue", color: "brown", name: "Grotte Religieuse"},[m
[32m+[m[32m    { label: "grotte", color: "pink", name: "Chapelet de Prière"},[m
[32m+[m[32m    { label: "chapelet", color: "wheat", name: "Divers autreproduits" }[m
[32m+[m[32m];[m
[32m+[m
[32m+[m[32mfunction Ecommerce({Ecommerce_articles,Ecommerce_articles_OPTIONS,categoryPosts,models={}}) {[m
[32m+[m[32m    const {isAdmin, myLoader} = useContext(AuthContext)[m
[32m+[m[32m    const {miniCart, setCartBox, selectOptions, setSelectOptions} = useContext(EcomContext)[m
[32m+[m[32m    , id=3[m
[32m+[m[32m    , headings = {[m
[32m+[m[32m        h3:"CATÉGORIE: \"LIBRARIE PUISSANCE DIVINE D'AMOUR\""[m
[32m+[m[32m    }[m
[32m+[m[32m    // Nouvel état pour l'article en cours d'édition[m
[32m+[m[32m    const [editingArticle, setEditingArticle] = useState(null);[m
[32m+[m[41m    [m
[32m+[m[32m    const handleUpdate = async (e, item) => {[m
[32m+[m[32m        e.preventDefault();[m
[32m+[m[32m        if (!item || !item._id) return alert('Article invalide ou ID manquant');[m
[32m+[m[32m        try {[m
[32m+[m[32m            const res = await fetch('/api/ecom', {[m
[32m+[m[32m                method: 'PATCH',[m
[32m+[m[32m                headers: { 'Content-Type': 'application/json' },[m
[32m+[m[32m                body: JSON.stringify(item)[m
[32m+[m[32m            });[m
[32m+[m[32m            const data = await res.json();[m
[32m+[m[32m            if (res.ok && data.article) {[m
[32m+[m[32m                alert('Article modifié avec succès.');[m
[32m+[m[32m                setEditingArticle(null);[m
[32m+[m[32m                window.localStorage.removeItem('ecommerce_articles');[m
[32m+[m[32m                location.reload();[m
[32m+[m[32m            } else {[m
[32m+[m[32m                alert('Erreur lors de la modification : ' + (data.error || (data.errors && data.errors.join('; '))));[m
[32m+[m[32m            }[m
[32m+[m[32m        } catch (err) {[m
[32m+[m[32m            alert('Erreur lors de la modification : ' + err.message);[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    // Fonction pour ouvrir le formulaire d'édition[m
[32m+[m[32m    const openEditForm = (item) => setEditingArticle(item);[m
[32m+[m[32m    // Fonction pour fermer le formulaire[m
[32m+[m[32m    const closeEditForm = () => setEditingArticle(null);[m
[32m+[m
[32m+[m[32m    const handleDelete = async (e) => {[m
[32m+[m[32m        e.preventDefault();[m
[32m+[m[32m        const id = e.target.dataset._id;[m
[32m+[m[32m        const src = e.target.dataset.src;[m
[32m+[m[32m        if (!id) return alert('ID manquant');[m
[32m+[m[32m        const doSupp = confirm("Êtes-vous sûr de vouloir supprimer cet article ? Cette action est irréversible.");[m
[32m+[m[32m        if (!doSupp) return;[m
[32m+[m[32m        try {[m
[32m+[m[32m            const res = await fetch(`/api/ecom?id=${id}&src=${src}`, { method: 'DELETE' });[m
[32m+[m[32m            const data = await res.json();[m
[32m+[m[32m            if (res.ok && data.success) {[m
[32m+[m[32m                alert('Article supprimé avec succès.');[m
[32m+[m[32m                // Option : rafraîchir la liste sans reload si tu utilises un state local[m
[32m+[m[32m                window.localStorage.removeItem('ecommerce_articles');[m
[32m+[m[32m                location.reload();[m
[32m+[m[32m            } else {[m
[32m+[m[32m                alert('Erreur lors de la suppression : ' + (data.error || (data.errors && data.errors.join('; '))));[m
[32m+[m[32m            }[m
[32m+[m[32m        } catch (err) {[m
[32m+[m[32m            alert('Erreur lors de la suppression : ' + err.message);[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    let [currentDatas, setCurrentDatas] = useState({})[m
[32m+[m[32m    , [selectedCategory, setSelectedCategory] = useState("all")[m
[32m+[m[32m    , [selectedType, setSelectedType] = useState("publication")[m
[32m+[m
[32m+[m[32m    useEffect(() => {[m[41m [m
[32m+[m[32m        console.log("console.log(Ecommerce_articles)");[m
[32m+[m[32m        console.log(categoryPosts);[m
[32m+[m[32m        setCartBox(miniCart(true))[m
[32m+[m[32m    }, [])[m
[32m+[m[41m    [m
[32m+[m[32m    return ([m
[32m+[m[32m        <HoverProvider>[m
[32m+[m[32m            <main className="ecommerce">[m
[32m+[m[32m                {editingArticle && ([m
[32m+[m[32m                    <div className="modal-edit-article" style={{position:'fixed',top:0,left:0,width:'100vw',height:'100vh',zIndex:1000000,background:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center'}}>[m
[32m+[m[32m                        <div style={{background:'#fff',padding:32,borderRadius:12,boxShadow:'0 8px 32px #0003',minWidth:340,maxWidth:480,height:"80%",overflowY:"scroll",position:'relative'}}>[m
[32m+[m[32m                            <button onClick={closeEditForm} style={{position:'absolute',top:8,right:8,fontSize:24,lineHeight:1,border:'none',background:'none',cursor:'pointer'}}>&times;</button>[m
[32m+[m[32m                            <AddArticleForm[m
[32m+[m[32m                                onSubmit={item => handleUpdate({ preventDefault:()=>{} }, { ...editingArticle, ...item })}[m
[32m+[m[32m                                onCancel={closeEditForm}[m
[32m+[m[32m                                initialData={editingArticle}[m
[32m+[m[32m                            />[m
[32m+[m[32m                        </div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                )}[m
[32m+[m[32m                <Intro {...{selectedCategory,categories,setSelectedCategory}} />[m
[32m+[m[32m                <EcomNavbar {...{models,currentDatas,setSelectedCategory,setSelectedType,categories}} />[m
[32m+[m[32m                <ArticleGrid[m[41m [m
[32m+[m[32m                    Ecommerce_articles={Ecommerce_articles}[m
[32m+[m[32m                    Ecommerce_articles_OPTIONS={Ecommerce_articles_OPTIONS}[m
[32m+[m[32m                    myLoader={myLoader}[m
[32m+[m[32m                    setCartBox={setCartBox}[m
[32m+[m[32m                    handleAddToCart={handleAddToCart}[m
[32m+[m[32m                    handleVariantButtonHover={handleVariantButtonHover}[m
[32m+[m[32m                    handleUpdate={handleUpdate}[m
[32m+[m[32m                    handleDelete={handleDelete}[m
[32m+[m[32m                    handleModalShowProduct={handleModalShowProduct}[m
[32m+[m[32m                    isAdmin={isAdmin}[m
[32m+[m[32m                    miniCart={miniCart}[m
[32m+[m[32m                    selectedCategory={selectedCategory}[m
[32m+[m[32m                    selectedType={selectedType}[m
[32m+[m[32m                    openEditForm={openEditForm}[m
[32m+[m[32m                />[m
[32m+[m[32m                <BlogCategory {...{categoryPosts,headings}} />[m
[32m+[m[32m            </main>[m
[32m+[m[32m        </HoverProvider>[m
[32m+[m[32m    );[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default EcommercePage[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/style.scss b/app/ecom/style.scss[m
[1msimilarity index 100%[m
[1mrename from app/ecommerce-chretien-abidjan/style.scss[m
[1mrename to app/ecom/style.scss[m
[1mdiff --git a/app/ecommerce-chretien-abidjan/page.jsx b/app/ecommerce-chretien-abidjan/page.jsx[m
[1mdeleted file mode 100644[m
[1mindex dec4783..0000000[m
[1m--- a/app/ecommerce-chretien-abidjan/page.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,87 +0,0 @@[m
[31m-"use client"[m
[31m-[m
[31m-import {useState,useEffect,useContext} from 'react'[m
[31m-import Link from "next/link"[m
[31m-import Image from "next/image"[m
[31m-import AuthContext from "../../stores/authContext.js"[m
[31m-import EcomContext from "../../stores/ecomContext.js"[m
[31m-// import Nav from '../../components/Nav.jsx'[m
[31m-import ModalProduct from './_/ModalProduct.jsx'[m
[31m-import Intro from './components/Intro.jsx'[m
[31m-import IntroVideo from './components/IntroVideo.jsx'[m
[31m-import EcomNavbar from './components/ecomNavbar.jsx'[m
[31m-import "./style.scss"[m
[31m-import * as Ecommerce_articles from "../../assets/datas/articles.js"[m
[31m-import Ecommerce_articles_OPTIONS from "../../assets/datas/articles_options.js"[m
[31m-import {handleModalShowProduct,handleAddToCart,handleProductsDisplay,handleSelect,handleSelectButtons,handleVariantButtonHover} from "../../utils/handleEvents.js"[m
[31m-import BlogCategory from '../_/Blog/BlogCategory'[m
[31m-import ArticleGrid from './components/ArticleGrid'[m
[31m-import { HoverProvider } from './context/HoverContext'[m
[31m-// import { getEcommerceData } from './actions'[m
[31m-[m
[31m-async function EcommercePage() {[m
[31m-    // const { categoryPosts } = await getEcommerceData()[m
[31m-    [m
[31m-    return <Ecommerce />[m
[31m-}[m
[31m-[m
[31m-function Ecommerce({categoryPosts,models={}}) {[m
[31m-    const {myLoader} = useContext(AuthContext)[m
[31m-    const {miniCart, setCartBox, selectOptions, setSelectOptions} = useContext(EcomContext)[m
[31m-    , id=3[m
[31m-    , headings = {[m
[31m-        h3:"CATÉGORIE: \"LIBRARIE PUISSANCE DIVINE D'AMOUR\""[m
[31m-    }[m
[31m-    , handleUpdate = (e,item) => {[m
[31m-        e.stopPropagation()[m
[31m-        alert(item)[m
[31m-        console.log(item);[m
[31m-        setCurrentDatas(item)[m
[31m-        modal.classList.add('active')[m
[31m-        document.querySelectorAll('#modal .modal___main>form').forEach(elt=>{elt.classList.remove('active')})[m
[31m-        document.querySelector('#modal .modal___main>form.ecommerce_update').classList.add('active')[m
[31m-    }[m
[31m-    , handleDelete = (e) => {[m
[31m-        console.log(e.target);[m
[31m-        console.log(e.target.dataset);[m
[31m-        const doSupp = confirm("Êtes-vous sûr de vouloir supprimer cette photo du diapo ?")[m
[31m-        if(doSupp)fetch(`/api/diapo?_id=${e.target.dataset._id}&src=${e.target.dataset.src}`, {[m
[31m-            method: "DELETE"[m
[31m-        })[m
[31m-    }[m
[31m-    [m
[31m-    let {isAdmin} = useContext(AuthContext)[m
[31m-    , [currentDatas, setCurrentDatas] = useState({})[m
[31m-[m
[31m-    // useEffect(() => { [m
[31m-    //     console.log("console.log(Ecommerce_articles)");[m
[31m-    //     console.log(categoryPosts);[m
[31m-    //     setCartBox(miniCart(true))[m
[31m-    // }, [])[m
[31m-    [m
[31m-    return ([m
[31m-        <HoverProvider>[m
[31m-            <main className="ecommerce">[m
[31m-                <IntroVideo />[m
[31m-                <Intro handleProductsDisplay={handleProductsDisplay} />[m
[31m-                <EcomNavbar {...{models,currentDatas}} />[m
[31m-                <ArticleGrid [m
[31m-                    Ecommerce_articles={Ecommerce_articles}[m
[31m-                    Ecommerce_articles_OPTIONS={Ecommerce_articles_OPTIONS}[m
[31m-                    myLoader={myLoader}[m
[31m-                    setCartBox={setCartBox}[m
[31m-                    handleAddToCart={handleAddToCart}[m
[31m-                    handleVariantButtonHover={handleVariantButtonHover}[m
[31m-                    handleUpdate={handleUpdate}[m
[31m-                    handleDelete={handleDelete}[m
[31m-                    handleModalShowProduct={handleModalShowProduct}[m
[31m-                    isAdmin={isAdmin}[m
[31m-                    miniCart={miniCart}[m
[31m-                />[m
[31m-                <BlogCategory {...{categoryPosts,headings}} />[m
[31m-            </main>[m
[31m-        </HoverProvider>[m
[31m-    )[m
[31m-}[m
[31m-[m
[31m-export default EcommercePage[m
[1mdiff --git a/app/panier-ecommerce-religieux/page.jsx b/app/panier-ecommerce-religieux/page.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..d1eb3e1[m
[1m--- /dev/null[m
[1m+++ b/app/panier-ecommerce-religieux/page.jsx[m
[36m@@ -0,0 +1,218 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport {useState, useEffect, useContext} from 'react'[m
[32m+[m[32mimport AuthContext from "../../stores/authContext.js"[m
[32m+[m[32mimport CartRecap from "../_/Cart/_/CartRecap.jsx"[m
[32m+[m[32mimport CartUserDatasForm from "../_/Cart/_/CartUserDatasForm.jsx"[m
[32m+[m[32mimport CartHold from "../_/Cart/index.js"[m
[32m+[m[32mimport "../../assets/scss/index_ecom_ai.scss"[m
[32m+[m[32mimport { useUser } from "@clerk/nextjs"[m
[32m+[m
[32m+[m[32mexport default function Cart() {[m
[32m+[m[32m  const {userConnectedDatas} = useContext(AuthContext);[m
[32m+[m[32m  const { user, isLoaded, isSignedIn } = useUser();[m
[32m+[m[32m  const [step, setStep] = useState(1);[m
[32m+[m[32m  const [form, setForm] = useState({[m
[32m+[m[32m    fullName: '',[m
[32m+[m[32m    email: '',[m
[32m+[m[32m    tel: '',[m
[32m+[m[32m    adresse: '',[m
[32m+[m[32m    ville: '',[m
[32m+[m[32m    // codePostal: '',[m
[32m+[m[32m    livraison: '',[m
[32m+[m[32m    paiement: '',[m
[32m+[m[32m    instructions: ''[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  // Hydrate le form avec Clerk si connecté[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    if (isLoaded && isSignedIn && user) {[m
[32m+[m[32m      setForm(f => ({[m
[32m+[m[32m        ...f,[m
[32m+[m[32m        fullName: user.fullName || f.fullName,[m
[32m+[m[32m        email: user.emailAddresses?.[0]?.emailAddress || f.email,[m
[32m+[m[32m        tel: user.phoneNumbers?.[0]?.phoneNumber || f.tel[m
[32m+[m[32m      }));[m
[32m+[m[32m    }[m
[32m+[m[32m  }, [isLoaded, isSignedIn, user])[m
[32m+[m[32m  useEffect(() => {[m
[32m+[m[32m    // On ne lance la requête que si un email est présent[m
[32m+[m[32m    if (!form.email) return;[m
[32m+[m[32m    fetch(`/api/users?email=${encodeURIComponent(form.email)}`)[m
[32m+[m[32m      .then(res => res.ok ? res.json() : null)[m
[32m+[m[32m      .then(data => {[m
[32m+[m[32m        if (data && data.user) {[m
[32m+[m[32m          const u = data.user;[m
[32m+[m[32m          setForm(f => ({[m
[32m+[m[32m            ...f,[m
[32m+[m[32m            fullName: u.fullName || f.fullName,[m
[32m+[m[32m            tel: u.tel || f.tel,[m
[32m+[m[32m            adresse: u.options?.adress || f.adresse,[m
[32m+[m[32m            ville: u.options?.ville || f.ville,[m
[32m+[m[32m            livraison: u.options?.livraison || f.livraison,[m
[32m+[m[32m            paiement: u.options?.paiement || f.paiement,[m
[32m+[m[32m            instructions: u.options?.instructions || f.instructions[m
[32m+[m[32m          }));[m
[32m+[m[32m        }[m
[32m+[m[32m      })[m
[32m+[m[32m      .catch(() => {/* ignore erreur si user non trouvé */});[m
[32m+[m[32m  }, [form.email]);[m
[32m+[m[32m  // Gestion du changement de champ[m
[32m+[m[32m  const handleChange = e => {[m
[32m+[m[32m    setForm({...form, [e.target.name]: e.target.value});[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  // Validation intermédiaire (simple)[m
[32m+[m[32m  const handleNext = () => setStep(step+1);[m
[32m+[m[32m  const handlePrev = () => setStep(step-1);[m
[32m+[m
[32m+[m[32m  // Soumission finale (à adapter selon backend)[m
[32m+[m[32m  const handleSubmit = async e => {[m
[32m+[m[32m    e.preventDefault();[m
[32m+[m[32m    // Récupère le panier depuis le localStorage (CartLS)[m
[32m+[m[32m    let cart = [];[m
[32m+[m[32m    try {[m
[32m+[m[32m      const CartLS = JSON.parse(window.localStorage.getItem('cart')) || {};[m
[32m+[m[32m      cart = Object.keys(CartLS).map(item => {[m
[32m+[m[32m        const parsed = JSON.parse(item);[m
[32m+[m[32m        return {[m
[32m+[m[32m          ...parsed,[m
[32m+[m[32m          qty: CartLS[item][m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      alert('Erreur de lecture du panier');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[32m    if (!cart.length) {[m
[32m+[m[32m      alert('Votre panier est vide');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[32m    // Prépare la commande[m
[32m+[m[32m    const commande = {[m
[32m+[m[32m      produits: cart,[m
[32m+[m[32m      date: new Date().toISOString(),[m
[32m+[m[32m      montant: cart.reduce((sum, item) => sum + (item.price * item.qty), 0),[m
[32m+[m[32m      livraison: form.livraison,[m
[32m+[m[32m      paiement: form.paiement,[m
[32m+[m[32m      instructions: form.instructions[m
[32m+[m[32m    };[m
[32m+[m[32m    // Prépare le payload utilisateur[m
[32m+[m[32m    const payload = {[m
[32m+[m[32m      email: form.email,[m
[32m+[m[32m      fullName: form.fullName,[m
[32m+[m[32m      tel: form.tel,[m
[32m+[m[32m      options: {[m
[32m+[m[32m        adress: form.adresse,[m
[32m+[m[32m        ville: form.ville,[m
[32m+[m[32m        livraison: form.livraison,[m
[32m+[m[32m        paiement: form.paiement,[m
[32m+[m[32m        instructions: form.instructions[m
[32m+[m[32m      },[m
[32m+[m[32m      commande[m
[32m+[m[32m    };[m
[32m+[m[32m    // Envoi à l'API[m
[32m+[m[32m    try {[m
[32m+[m[32m      const res = await fetch('/api/users', {[m
[32m+[m[32m        method: 'POST',[m
[32m+[m[32m        headers: { 'Content-Type': 'application/json' },[m
[32m+[m[32m        body: JSON.stringify(payload)[m
[32m+[m[32m      });[m
[32m+[m[32m      const data = await res.json();[m
[32m+[m[32m      if (res.ok && data.success) {[m
[32m+[m[32m        alert('Commande envoyée avec succès !');[m
[32m+[m[32m        window.localStorage.removeItem('cart'); // Vide le panier[m
[32m+[m[32m        setStep(1);[m
[32m+[m[32m        setForm({[m
[32m+[m[32m          fullName: '', email: '', tel: '', adresse: '', ville: '', livraison: '', paiement: '', instructions: ''[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        alert('Erreur lors de la commande : ' + (data.error || ''));[m[41m [m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      alert('Erreur lors de la connexion au serveur.');[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <main className="cart-ai-checkout">[m
[32m+[m[32m      <div className="cart-ai-checkout__container">[m
[32m+[m[32m        <section className="cart-ai-checkout__recap">[m
[32m+[m[32m          <CartRecap />[m
[32m+[m[32m        </section>[m
[32m+[m[32m        <section className="cart-ai-checkout__form">[m
[32m+[m[32m          <div className="cart-ai-steps">[m
[32m+[m[32m            <button className={step===1 ? 'active' : ''} onClick={()=>setStep(1)}>1. Infos client</button>[m
[32m+[m[32m            <button className={step===2 ? 'active' : ''} onClick={()=>form.fullName && form.email && setStep(2)} disabled={!form.fullName || !form.email}>2. Livraison</button>[m
[32m+[m[32m            <button className={step===3 ? 'active' : ''} onClick={()=>form.livraison && setStep(3)} disabled={!form.livraison}>3. Paiement</button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <form className="cart-ai-form" onSubmit={handleSubmit}>[m
[32m+[m[32m            {step === 1 && ([m
[32m+[m[32m              <div className="cart-ai-step-content">[m
[32m+[m[32m                <h2>Informations client</h2>[m
[32m+[m[32m                <label>Nom complet*[m
[32m+[m[32m                  <input name="fullName" value={form.fullName} onChange={handleChange} required />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label>Email*[m
[32m+[m[32m                  <input type="email" name="email" value={form.email} onChange={handleChange} required />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label>Téléphone[m
[32m+[m[32m                  <input name="tel" value={form.tel} onChange={handleChange} />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <button type="button" className="btn-primary" onClick={handleNext} disabled={!form.fullName || !form.email}>Suivant</button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m            {step === 2 && ([m
[32m+[m[32m              <div className="cart-ai-step-content">[m
[32m+[m[32m                <h2>Livraison</h2>[m
[32m+[m[32m                <label>Adresse*[m
[32m+[m[32m                  <input name="adresse" value={form.adresse} onChange={handleChange} required />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label>Ville*[m
[32m+[m[32m                  <input name="ville" value={form.ville} onChange={handleChange} required />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                {/* <label>Code postal*[m
[32m+[m[32m                  <input name="codePostal" value={form.codePostal} onChange={handleChange} required />[m
[32m+[m[32m                </label> */}[m
[32m+[m[32m                <label>Mode de livraison*[m
[32m+[m[32m                  <select name="livraison" value={form.livraison} onChange={handleChange} required>[m
[32m+[m[32m                    <option value="">Choisir...</option>[m
[32m+[m[32m                    <option value="retrait">Retrait en boutique</option>[m
[32m+[m[32m                    <option value="colissimo">Colissimo (France)</option>[m
[32m+[m[32m                    <option value="express">Express (Abidjan)</option>[m
[32m+[m[32m                  </select>[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label>Instructions (optionnel)[m
[32m+[m[32m                  <textarea name="instructions" value={form.instructions} onChange={handleChange} />[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <div className="cart-ai-nav-btns">[m
[32m+[m[32m                  <button type="button" className="btn-secondary" onClick={handlePrev}>Retour</button>[m
[32m+[m[32m                  <button type="button" className="btn-primary" onClick={handleNext} disabled={!form.adresse || !form.ville || !form.livraison}>Suivant</button>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m            {step === 3 && ([m
[32m+[m[32m              <div className="cart-ai-step-content">[m
[32m+[m[32m                <h2>Paiement</h2>[m
[32m+[m[32m                <label>Méthode de paiement*[m
[32m+[m[32m                  <select name="paiement" value={form.paiement} onChange={handleChange} required>[m
[32m+[m[32m                    <option value="">Choisir...</option>[m
[32m+[m[32m                    <option value="cb">Carte bancaire</option>[m
[32m+[m[32m                    <option value="paypal">PayPal</option>[m
[32m+[m[32m                    <option value="especes">Espèces à la livraison</option>[m
[32m+[m[32m                  </select>[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <div className="cart-ai-nav-btns">[m
[32m+[m[32m                  <button type="button" className="btn-secondary" onClick={handlePrev}>Retour</button>[m
[32m+[m[32m                  <button type="submit" className="btn-primary" disabled={!form.paiement}>Valider la commande</button>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m          </form>[m
[32m+[m[32m        </section>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </main>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Article.jsx b/app/retraites-spirituelles-bolobi/_/Article.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..a752f92[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Article.jsx[m
[36m@@ -0,0 +1,31 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport Link from "next/link";[m
[32m+[m[32mimport Cards from "./Cards";[m
[32m+[m[32mimport IntroVideo from './components/IntroVideo'[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function Article() {[m
[32m+[m[32m    return <article>[m
[32m+[m[32m        <h3>Itinéraire vidéo vers le Sanctuaire notre Dame Raosaire Bolobi</h3>[m
[32m+[m[32m        <p>Situé sur l'<b>axe routier Abidjan-Adzopé</b>, cette vidéo explique <b>comment se rendre au <u>Sanctuaire Notre Dame du Rosaire de Bolobi</u></b>.</p>[m
[32m+[m[32m        <IntroVideo />[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m        <h3 id="firstH3" data-icon="1">Bienvenue au Sanctuaire Notre Dame du Rosaire à Bolobi, Abidjan, Côte d'Ivoire</h3>[m
[32m+[m
[32m+[m[32m        {/* <iframe width="560" height="315" src="https://www.youtube.com/embed/Yv3BHtHt3Pg?si=e2Kepaxuk2NhGbK1" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe> */}[m
[32m+[m
[32m+[m[32m        <p>Si vous êtes à la recherche d'<b>un lieu de paix, de prière et de recueillement au cœur de la nature</b>, le <Link href="#">Sanctuaire Notre Dame du Rosaire à Bolobi</Link> est l'endroit idéal pour vous.</p>[m
[32m+[m[32m        <p>Niché dans les magnifiques collines verdoyantes du <b>diocèse d'Agboville</b>, en périphérie du grand Abidjan sur la <b>route Abidjan-Adzopé</b>, s'étendant sur 18Ha, ce sanctuaire chrétien offre une expérience spirituelle apaisante et unique.</p>[m
[32m+[m[32m        <p>Voici les principaux thèmes relatifs au Sanctuare ND du Rosaire de Bolobi: </p>[m
[32m+[m[32m        <Cards />[m
[32m+[m[32m        {/* <p>encore un peu de blablabla pour présenter les différents types d'activités possibles au Sanctuaire... Lorem ipsum, dolor sit amet consectetur adipisicing elit. Itaque suscipit, explicabo aperiam, eius eaque ratione, iusto deleniti quos iste quasi non assumenda rem neque quaerat sit in voluptatibus provident sed!</p> */}[m
[32m+[m[32m        {/* <SliderInArticle carousel={carouselBolobi} carouselName="carouselBolobi_spirituel" /> */}[m
[32m+[m[32m        {/* <button onClick={()=>{setShowArticle(!showArticle)}}>Afficher {!showArticle?"plus":"moins"}...</button> */}[m
[32m+[m
[32m+[m[32m    </article>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Cards.jsx b/app/retraites-spirituelles-bolobi/_/Cards.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..4ca237b[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Cards.jsx[m
[36m@@ -0,0 +1,30 @@[m
[32m+[m[32mimport { useEffect } from "react"[m
[32m+[m
[32m+[m[32mconst arr = [[m
[32m+[m[32m    {cls:"sanctuaire", title:"SANCTUAIRE", content:"Étendu sur 18 hectares d'espace vert, c'est le nom du lac qui traverse ce terrain. Le sanctuaire de Bolobi offre un cadre vallonné, serein et rafraîchissant. C'est un havre de paix où vous pouvez vous retirer du tumulte de la vie quotidienne pour vous connecter avec votre foi et trouver la tranquillité intérieure."}[m
[32m+[m[32m    // , {cls:"priere", title:"Prière", content:"Étendu sur 18 hectares d'espace vert, le sanctuaire de Bolobi offre un cadre vallonné, serein et rafraîchissant. C'est un havre de paix où vous pouvez vous retirer du tumulte de la vie quotidienne pour vous connecter avec votre foi et trouver la tranquillité intérieure."}[m
[32m+[m[32m    , {cls: "eglise", title: "ÉGLISE", content: "L'église a été dédicacée le 10 Septembre 2016 par Monseigneur Alexis Touably Youlo, l'évêque du diocèse d'Agboville. Grâce à son esplanade, elle peut accueillir jusqu'à 200 fidèles."}[m
[32m+[m[32m    , {cls: "grotteMarial", title: "GROTTE MARIALE", content:"Un joyau spirituel du sanctuaire est la Grotte Mariale dédiée à Notre Dame du Rosaire. Consacrée le 10 Septembre 2016 par Monseigneur Alexis Touably Youl. Cette grotte est située au cœur d'une vaste plantation de palmiers à huile. Des célébrations de messe en plein air peuvent y avoir lieu, créant une atmosphère profondément connectée à la nature."}[m
[32m+[m[32m    , {cls: "ecole", title: "ÉCOLE", content:"C'est une oeuvre caritative du sanctuaire. Elle offre aux enfants des ouvriers autour du sanctuaire une école primaire gratuite. elle a actuellement (2024-2025) 80 élèves du CP1 au CM1"}[m
[32m+[m[32m    , {cls: "economie", title: "ÉCONOMIE", content:"Pour subvenir aux besoins du sanctuaire et de l'école, nous avons créé: 1) Un élevage d'escargots, 2) Un élevage de poulets de chair, 3) des cultures de bananes, patates douces, navets, etc. 4) Nous avons en projet des étant piscicoles."}[m
[32m+[m[32m    // , {cls: "facilitiesBis", title: "Solutions d'Hébergement 2", content:"Le sanctuaire propose des hébergements abordables pour répondre à vos besoins. Vous avez le choix entre des dortoirs avec salle d'eau extérieure à seulement 1500 francs CFA par jour et par personne. Des studios avec salle d'eau sont également disponibles; veuillez nous contacter pour plus d'informations sur les tarifs. De plus, le sanctuaire offre des options de restauration pour les pèlerins et les retraitants qui le souhaitent."}[m
[32m+[m[32m    // , {cls: "other", title: "Activités Inspirantes", content:"Les activités spirituelles abondent au Sanctuaire Notre Dame du Rosaire, y compris des prières quotidiennes, des prières à l'Esprit Saint et des prières d'intercession. De plus, ne manquez pas la journée nationale du Rosaire, qui est célébrée chaque année le 14 Août à Bolobi, rassemblant les cœurs et les esprits dans la prière et la méditation."}[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32mexport default function Cards() {[m
[32m+[m[41m    [m
[32m+[m[32m    const handleClick = e => {[m
[32m+[m[32m        if(!e.target.closest('li').classList.contains('active'))[m
[32m+[m[32m            document.querySelectorAll('main.sanctuaire_ndr>article>ul>li').forEach((elt,i) => {[m
[32m+[m[32m                elt.classList.remove('active')[m
[32m+[m[32m            })[m
[32m+[m[32m        e.target.closest('li').classList.toggle('active')[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    return <ul>[m
[32m+[m[32m        {arr.map((item,i) => <li key={"card_ndr_"+i} className={item.cls} onClick={handleClick}>[m
[32m+[m[32m            <h4>{item.title}</h4>[m
[32m+[m[32m            <p>{item.content}</p>[m
[32m+[m[32m        </li> )}[m
[32m+[m[32m    </ul>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Event.js b/app/retraites-spirituelles-bolobi/_/Event.js[m
[1mnew file mode 100644[m
[1mindex 0000000..7a94f3b[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Event.js[m
[36m@@ -0,0 +1,67 @@[m
[32m+[m[32m/**[m
[32m+[m[32m* Unifies event handling across browsers[m
[32m+[m[32m*[m
[32m+[m[32m* - Allows registering and unregistering of event handlers[m
[32m+[m[32m* - Injects event object and involved DOM element to listener[m
[32m+[m[32m*[m
[32m+[m[32m* @author Mark Rolich <mark.rolich@gmail.com>[m
[32m+[m[32m*/[m
[32m+[m[32mvar Event = function () {[m
[32m+[m[32m    "use strict";[m
[32m+[m[32m    this.attach = function (evtName, element, listener, capture) {[m
[32m+[m[32m        var evt         = '',[m
[32m+[m[32m            useCapture  = (capture === undefined) ? true : capture,[m
[32m+[m[32m            handler     = null;[m
[32m+[m
[32m+[m[32m        if (window.addEventListener === undefined) {[m
[32m+[m[32m            evt = 'on' + evtName;[m
[32m+[m[32m            handler = function (evt, listener) {[m
[32m+[m[32m                element.attachEvent(evt, listener);[m
[32m+[m[32m                return listener;[m
[32m+[m[32m            };[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt = evtName;[m
[32m+[m[32m            handler = function (evt, listener, useCapture) {[m
[32m+[m[32m                element.addEventListener(evt, listener, useCapture);[m
[32m+[m[32m                return listener;[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return handler.apply(element, [evt, function (ev) {[m
[32m+[m[32m            var e   = ev || event,[m
[32m+[m[32m                src = e.srcElement || e.target;[m
[32m+[m
[32m+[m[32m            listener(e, src);[m
[32m+[m[32m        }, useCapture]);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.detach = function (evtName, element, listener, capture) {[m
[32m+[m[32m        var evt         = '',[m
[32m+[m[32m            useCapture  = (capture === undefined) ? true : capture;[m
[32m+[m
[32m+[m[32m        if (window.removeEventListener === undefined) {[m
[32m+[m[32m            evt = 'on' + evtName;[m
[32m+[m[32m            element.detachEvent(evt, listener);[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt = evtName;[m
[32m+[m[32m            element.removeEventListener(evt, listener, useCapture);[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.stop = function (evt) {[m
[32m+[m[32m        evt.cancelBubble = true;[m
[32m+[m
[32m+[m[32m        if (evt.stopPropagation) {[m
[32m+[m[32m            evt.stopPropagation();[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.prevent = function (evt) {[m
[32m+[m[32m        if (evt.preventDefault) {[m
[32m+[m[32m            evt.preventDefault();[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt.returnValue = false;[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m[32m};[m
[32m+[m[32mexport default Event[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Locate/Event.js b/app/retraites-spirituelles-bolobi/_/Locate/Event.js[m
[1mnew file mode 100644[m
[1mindex 0000000..f965229[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Locate/Event.js[m
[36m@@ -0,0 +1,58 @@[m
[32m+[m[32mexport default function Event() {[m
[32m+[m[32m    "use strict";[m
[32m+[m[32m    this.attach = function (evtName, element, listener, capture) {[m
[32m+[m[32m        var evt = '',[m
[32m+[m[32m            useCapture = (capture === undefined) ? true : capture,[m
[32m+[m[32m            handler = null;[m
[32m+[m
[32m+[m[32m        if (window.addEventListener === undefined) {[m
[32m+[m[32m            evt = 'on' + evtName;[m
[32m+[m[32m            handler = function (evt, listener) {[m
[32m+[m[32m                element.attachEvent(evt, listener);[m
[32m+[m[32m                return listener;[m
[32m+[m[32m            };[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt = evtName;[m
[32m+[m[32m            handler = function (evt, listener, useCapture) {[m
[32m+[m[32m                element.addEventListener(evt, listener, useCapture);[m
[32m+[m[32m                return listener;[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        return handler.apply(element, [evt, function (ev) {[m
[32m+[m[32m            var e = ev || event,[m
[32m+[m[32m                src = e.srcElement || e.target;[m
[32m+[m
[32m+[m[32m            listener(e, src);[m
[32m+[m[32m        }, useCapture]);[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.detach = function (evtName, element, listener, capture) {[m
[32m+[m[32m        var evt = '',[m
[32m+[m[32m            useCapture = (capture === undefined) ? true : capture;[m
[32m+[m
[32m+[m[32m        if (window.removeEventListener === undefined) {[m
[32m+[m[32m            evt = 'on' + evtName;[m
[32m+[m[32m            element.detachEvent(evt, listener);[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt = evtName;[m
[32m+[m[32m            element.removeEventListener(evt, listener, useCapture);[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.stop = function (evt) {[m
[32m+[m[32m        evt.cancelBubble = true;[m
[32m+[m
[32m+[m[32m        if (evt.stopPropagation) {[m
[32m+[m[32m            evt.stopPropagation();[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.prevent = function (evt) {[m
[32m+[m[32m        if (evt.preventDefault) {[m
[32m+[m[32m            evt.preventDefault();[m
[32m+[m[32m        } else {[m
[32m+[m[32m            evt.returnValue = false;[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Locate/Magnifier.js b/app/retraites-spirituelles-bolobi/_/Locate/Magnifier.js[m
[1mnew file mode 100644[m
[1mindex 0000000..914f00a[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Locate/Magnifier.js[m
[36m@@ -0,0 +1,568 @@[m
[32m+[m[32mexport default function Magnifier(evt, options) {[m
[32m+[m[32m    "use strict";[m
[32m+[m
[32m+[m[32m    var gOptions = options || {},[m
[32m+[m[32m        curThumb = null,[m
[32m+[m[32m        curData = {[m
[32m+[m[32m            x: 0,[m
[32m+[m[32m            y: 0,[m
[32m+[m[32m            w: 0,[m
[32m+[m[32m            h: 0,[m
[32m+[m[32m            lensW: 0,[m
[32m+[m[32m            lensH: 0,[m
[32m+[m[32m            lensBgX: 0,[m
[32m+[m[32m            lensBgY: 0,[m
[32m+[m[32m            largeW: 0,[m
[32m+[m[32m            largeH: 0,[m
[32m+[m[32m            largeL: 0,[m
[32m+[m[32m            largeT: 0,[m
[32m+[m[32m            zoom: 2,[m
[32m+[m[32m            zoomMin: 1.1,[m
[32m+[m[32m            zoomMax: 5,[m
[32m+[m[32m            mode: 'outside',[m
[32m+[m[32m            largeWrapperId: (gOptions.largeWrapper !== undefined)[m
[32m+[m[32m                ? (gOptions.largeWrapper.id || null)[m
[32m+[m[32m                : null,[m
[32m+[m[32m            status: 0,[m
[32m+[m[32m            zoomAttached: false,[m
[32m+[m[32m            zoomable: (gOptions.zoomable !== undefined)[m
[32m+[m[32m                ? gOptions.zoomable[m
[32m+[m[32m                : false,[m
[32m+[m[32m            onthumbenter: (gOptions.onthumbenter !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbenter[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onthumbmove: (gOptions.onthumbmove !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbmove[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onthumbleave: (gOptions.onthumbleave !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbleave[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onzoom: (gOptions.onzoom !== undefined)[m
[32m+[m[32m                ? gOptions.onzoom[m
[32m+[m[32m                : null[m
[32m+[m[32m        },[m
[32m+[m[32m        pos = {[m
[32m+[m[32m            t: 0,[m
[32m+[m[32m            l: 0,[m
[32m+[m[32m            x: 0,[m
[32m+[m[32m            y: 0[m
[32m+[m[32m        },[m
[32m+[m[32m        gId = 0,[m
[32m+[m[32m        status = 0,[m
[32m+[m[32m        curIdx = '',[m
[32m+[m[32m        curLens = null,[m
[32m+[m[32m        curLarge = null,[m
[32m+[m[32m        gZoom = (gOptions.zoom !== undefined)[m
[32m+[m[32m            ? gOptions.zoom[m
[32m+[m[32m            : curData.zoom,[m
[32m+[m[32m        gZoomMin = (gOptions.zoomMin !== undefined)[m
[32m+[m[32m            ? gOptions.zoomMin[m
[32m+[m[32m            : curData.zoomMin,[m
[32m+[m[32m        gZoomMax = (gOptions.zoomMax !== undefined)[m
[32m+[m[32m            ? gOptions.zoomMax[m
[32m+[m[32m            : curData.zoomMax,[m
[32m+[m[32m        gMode = gOptions.mode || curData.mode,[m
[32m+[m[32m        data = {},[m
[32m+[m[32m        inBounds = false,[m
[32m+[m[32m        isOverThumb = 0,[m
[32m+[m[32m        getElementsByClass = function (className) {[m
[32m+[m[32m            var list = [],[m
[32m+[m[32m                elements = null,[m
[32m+[m[32m                len = 0,[m
[32m+[m[32m                pattern = '',[m
[32m+[m[32m                i = 0,[m
[32m+[m[32m                j = 0;[m
[32m+[m
[32m+[m[32m            if (document.getElementsByClassName) {[m
[32m+[m[32m                list = document.getElementsByClassName(className);[m
[32m+[m[32m            } else {[m
[32m+[m[32m                elements = document.getElementsByTagName('*');[m
[32m+[m[32m                len = elements.length;[m
[32m+[m[32m                pattern = new RegExp("(^|\\s)" + className + "(\\s|$)");[m
[32m+[m
[32m+[m[32m                for (i, j; i < len; i += 1) {[m
[32m+[m[32m                    if (pattern.test(elements[i].className)) {[m
[32m+[m[32m                        list[j] = elements[i];[m
[32m+[m[32m                        j += 1;[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            return list;[m
[32m+[m[32m        },[m
[32m+[m[32m        $ = function (selector) {[m
[32m+[m[32m            var idx = '',[m
[32m+[m[32m                type = selector.charAt(0),[m
[32m+[m[32m                result = null;[m
[32m+[m
[32m+[m[32m            if (type === '#' || type === '.') {[m
[32m+[m[32m                idx = selector.substr(1, selector.length);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (idx !== '') {[m
[32m+[m[32m                switch (type) {[m
[32m+[m[32m                    case '#':[m
[32m+[m[32m                        result = document.getElementById(idx);[m
[32m+[m[32m                        break;[m
[32m+[m[32m                    case '.':[m
[32m+[m[32m                        result = getElementsByClass(idx);[m
[32m+[m[32m                        break;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            return result;[m
[32m+[m[32m        },[m
[32m+[m[32m        createLens = function (thumb, idx) {[m
[32m+[m[32m            var lens = document.createElement('div');[m
[32m+[m
[32m+[m[32m            lens.id = idx + '-lens';[m
[32m+[m[32m            lens.className = 'magnifier-loader';[m
[32m+[m
[32m+[m[32m            thumb.parentNode.appendChild(lens);[m
[32m+[m[32m        },[m
[32m+[m[32m        updateLensOnZoom = function () {[m
[32m+[m[32m            curLens.style.left = pos.l + 'px';[m
[32m+[m[32m            curLens.style.top = pos.t + 'px';[m
[32m+[m[32m            curLens.style.width = curData.lensW + 'px';[m
[32m+[m[32m            curLens.style.height = curData.lensH + 'px';[m
[32m+[m[32m            curLens.style.backgroundPosition = '-' + curData.lensBgX + 'px -' +[m
[32m+[m[32m                curData.lensBgY + 'px';[m
[32m+[m
[32m+[m[32m            curLarge.style.left = '-' + curData.largeL + 'px';[m
[32m+[m[32m            curLarge.style.top = '-' + curData.largeT + 'px';[m
[32m+[m[32m            curLarge.style.width = curData.largeW + 'px';[m
[32m+[m[32m            curLarge.style.height = curData.largeH + 'px';[m
[32m+[m[32m        },[m
[32m+[m[32m        updateLensOnLoad = function (idx, thumb, large, largeWrapper) {[m
[32m+[m[32m            var lens = $('#' + idx + '-lens'),[m
[32m+[m[32m                textWrapper = null;[m
[32m+[m
[32m+[m[32m            if (data[idx].status === 1) {[m
[32m+[m[32m                textWrapper = document.createElement('div');[m
[32m+[m[32m                textWrapper.className = 'magnifier-loader-text';[m
[32m+[m[32m                lens.className = 'magnifier-loader hidden';[m
[32m+[m
[32m+[m[32m                textWrapper.appendChild(document.createTextNode('Loading...'));[m
[32m+[m[32m                lens.appendChild(textWrapper);[m
[32m+[m[32m            } else if (data[idx].status === 2) {[m
[32m+[m[32m                lens.className = 'magnifier-lens hidden';[m
[32m+[m[32m                lens.removeChild(lens.childNodes[0]);[m
[32m+[m[32m                lens.style.background = 'url(' + thumb.src + ') no-repeat 0 0 scroll';[m
[32m+[m
[32m+[m[32m                large.id = idx + '-large';[m
[32m+[m[32m                large.style.width = data[idx].largeW + 'px';[m
[32m+[m[32m                large.style.height = data[idx].largeH + 'px';[m
[32m+[m[32m                large.className = 'magnifier-large hidden';[m
[32m+[m
[32m+[m[32m                if (data[idx].mode === 'inside') {[m
[32m+[m[32m                    lens.appendChild(large);[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    largeWrapper.appendChild(large);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            lens.style.width = data[idx].lensW + 'px';[m
[32m+[m[32m            lens.style.height = data[idx].lensH + 'px';[m
[32m+[m[32m        },[m
[32m+[m[32m        getMousePos = function () {[m
[32m+[m[32m            var xPos = pos.x - curData.x,[m
[32m+[m[32m                yPos = pos.y - curData.y,[m
[32m+[m[32m                t = 0,[m
[32m+[m[32m                l = 0;[m
[32m+[m
[32m+[m[32m            inBounds = ([m
[32m+[m[32m                xPos < 0 ||[m
[32m+[m[32m                yPos < 0 ||[m
[32m+[m[32m                xPos > curData.w ||[m
[32m+[m[32m                yPos > curData.h[m
[32m+[m[32m            )[m
[32m+[m[32m                ? false[m
[32m+[m[32m                : true;[m
[32m+[m
[32m+[m[32m            l = xPos - (curData.lensW / 2);[m
[32m+[m[32m            t = yPos - (curData.lensH / 2);[m
[32m+[m
[32m+[m[32m            if (curData.mode !== 'inside') {[m
[32m+[m[32m                if (xPos < curData.lensW / 2) {[m
[32m+[m[32m                    l = 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (yPos < curData.lensH / 2) {[m
[32m+[m[32m                    t = 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (xPos - curData.w + (curData.lensW / 2) > 0) {[m
[32m+[m[32m                    l = curData.w - (curData.lensW + 2);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (yPos - curData.h + (curData.lensH / 2) > 0) {[m
[32m+[m[32m                    t = curData.h - (curData.lensH + 2);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            pos.l = Math.round(l);[m
[32m+[m[32m            pos.t = Math.round(t);[m
[32m+[m
[32m+[m[32m            curData.lensBgX = pos.l + 1;[m
[32m+[m[32m            curData.lensBgY = pos.t + 1;[m
[32m+[m
[32m+[m[32m            if (curData.mode === 'inside') {[m
[32m+[m[32m                curData.largeL = Math.round(xPos * (curData.zoom - (curData.lensW / curData.w)));[m
[32m+[m[32m                curData.largeT = Math.round(yPos * (curData.zoom - (curData.lensH / curData.h)));[m
[32m+[m[32m            } else {[m
[32m+[m[32m                curData.largeL = Math.round(curData.lensBgX * curData.zoom * (curData.largeWrapperW / curData.w));[m
[32m+[m[32m                curData.largeT = Math.round(curData.lensBgY * curData.zoom * (curData.largeWrapperH / curData.h));[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        zoomInOut = function (e) {[m
[32m+[m[32m            var delta = (e.wheelDelta > 0 || e.detail < 0) ? 0.1 : -0.1,[m
[32m+[m[32m                handler = curData.onzoom,[m
[32m+[m[32m                multiplier = 1,[m
[32m+[m[32m                w = 0,[m
[32m+[m[32m                h = 0;[m
[32m+[m
[32m+[m[32m            if (e.preventDefault) {[m
[32m+[m[32m                e.preventDefault();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            e.returnValue = false;[m
[32m+[m
[32m+[m[32m            curData.zoom = Math.round((curData.zoom + delta) * 10) / 10;[m
[32m+[m
[32m+[m[32m            if (curData.zoom >= curData.zoomMax) {[m
[32m+[m[32m                curData.zoom = curData.zoomMax;[m
[32m+[m[32m            } else if (curData.zoom >= curData.zoomMin) {[m
[32m+[m[32m                curData.lensW = Math.round(curData.w / curData.zoom);[m
[32m+[m[32m                curData.lensH = Math.round(curData.h / curData.zoom);[m
[32m+[m
[32m+[m[32m                if (curData.mode === 'inside') {[m
[32m+[m[32m                    w = curData.w;[m
[32m+[m[32m                    h = curData.h;[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    w = curData.largeWrapperW;[m
[32m+[m[32m                    h = curData.largeWrapperH;[m
[32m+[m[32m                    multiplier = curData.largeWrapperW / curData.w;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curData.largeW = Math.round(curData.zoom * w);[m
[32m+[m[32m                curData.largeH = Math.round(curData.zoom * h);[m
[32m+[m
[32m+[m[32m                getMousePos();[m
[32m+[m[32m                updateLensOnZoom();[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y,[m
[32m+[m[32m                        zoom: Math.round(curData.zoom * multiplier * 10) / 10,[m
[32m+[m[32m                        w: curData.lensW,[m
[32m+[m[32m                        h: curData.lensH[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m[32m            } else {[m
[32m+[m[32m                curData.zoom = curData.zoomMin;[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        onThumbEnter = function () {[m
[32m+[m[32m            curData = data[curIdx];[m
[32m+[m[32m            curLens = $('#' + curIdx + '-lens');[m
[32m+[m
[32m+[m[32m            if (curData.status === 2) {[m
[32m+[m[32m                curLens.className = 'magnifier-lens';[m
[32m+[m
[32m+[m[32m                if (curData.zoomAttached === false) {[m
[32m+[m[32m                    if (curData.zoomable !== undefined && curData.zoomable === true) {[m
[32m+[m[32m                        evt.attach('mousewheel', curLens, zoomInOut);[m
[32m+[m
[32m+[m[32m                        if (window.addEventListener) {[m
[32m+[m[32m                            curLens.addEventListener('DOMMouseScroll', function (e) {[m
[32m+[m[32m                                zoomInOut(e);[m
[32m+[m[32m                            });[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    curData.zoomAttached = true;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curLarge = $('#' + curIdx + '-large');[m
[32m+[m[32m                curLarge.className = 'magnifier-large';[m
[32m+[m[32m            } else if (curData.status === 1) {[m
[32m+[m[32m                curLens.className = 'magnifier-loader';[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        onThumbLeave = function () {[m
[32m+[m[32m            if (curData.status > 0) {[m
[32m+[m[32m                var handler = curData.onthumbleave;[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (curLens.className.indexOf('hidden') === -1) {[m
[32m+[m[32m                    curLens.className += ' hidden';[m
[32m+[m[32m                    curThumb.className = curData.thumbCssClass;[m
[32m+[m
[32m+[m[32m                    if (curLarge !== null) {[m
[32m+[m[32m                        curLarge.className += ' hidden';[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        move = function () {[m
[32m+[m[32m            if (status !== curData.status) {[m
[32m+[m[32m                onThumbEnter();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (curData.status > 0) {[m
[32m+[m[32m                curThumb.className = curData.thumbCssClass + ' opaque';[m
[32m+[m
[32m+[m[32m                if (curData.status === 1) {[m
[32m+[m[32m                    curLens.className = 'magnifier-loader';[m
[32m+[m[32m                } else if (curData.status === 2) {[m
[32m+[m[32m                    curLens.className = 'magnifier-lens';[m
[32m+[m[32m                    curLarge.className = 'magnifier-large';[m
[32m+[m[32m                    curLarge.style.left = '-' + curData.largeL + 'px';[m
[32m+[m[32m                    curLarge.style.top = '-' + curData.largeT + 'px';[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curLens.style.left = pos.l + 'px';[m
[32m+[m[32m                curLens.style.top = pos.t + 'px';[m
[32m+[m[32m                curLens.style.backgroundPosition = '-' +[m
[32m+[m[32m                    curData.lensBgX + 'px -' +[m
[32m+[m[32m                    curData.lensBgY + 'px';[m
[32m+[m
[32m+[m[32m                var handler = curData.onthumbmove;[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            status = curData.status;[m
[32m+[m[32m        },[m
[32m+[m[32m        setThumbData = function (thumb, thumbData) {[m
[32m+[m[32m            var thumbBounds = thumb.getBoundingClientRect(),[m
[32m+[m[32m                w = 0,[m
[32m+[m[32m                h = 0;[m
[32m+[m
[32m+[m[32m            thumbData.x = thumbBounds.left;[m
[32m+[m[32m            thumbData.y = thumbBounds.top;[m
[32m+[m[32m            thumbData.w = Math.round(thumbBounds.right - thumbData.x);[m
[32m+[m[32m            thumbData.h = Math.round(thumbBounds.bottom - thumbData.y);[m
[32m+[m
[32m+[m[32m            thumbData.lensW = Math.round(thumbData.w / thumbData.zoom);[m
[32m+[m[32m            thumbData.lensH = Math.round(thumbData.h / thumbData.zoom);[m
[32m+[m
[32m+[m[32m            if (thumbData.mode === 'inside') {[m
[32m+[m[32m                w = thumbData.w;[m
[32m+[m[32m                h = thumbData.h;[m
[32m+[m[32m            } else {[m
[32m+[m[32m                w = thumbData.largeWrapperW;[m
[32m+[m[32m                h = thumbData.largeWrapperH;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            thumbData.largeW = Math.round(thumbData.zoom * w);[m
[32m+[m[32m            thumbData.largeH = Math.round(thumbData.zoom * h);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m    this.attach = function (options) {[m
[32m+[m[32m        if (options.thumb === undefined) {[m
[32m+[m[32m            throw {[m
[32m+[m[32m                name: 'Magnifier error',[m
[32m+[m[32m                message: 'Please set thumbnail',[m
[32m+[m[32m                toString: function () { return this.name + ": " + this.message; }[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        var thumb = $(options.thumb),[m
[32m+[m[32m            i = 0;[m
[32m+[m
[32m+[m[32m        if (thumb.length !== undefined) {[m
[32m+[m[32m            for (i; i < thumb.length; i += 1) {[m
[32m+[m[32m                options.thumb = thumb[i];[m
[32m+[m[32m                this.set(options);[m
[32m+[m[32m            }[m
[32m+[m[32m        } else {[m
[32m+[m[32m            options.thumb = thumb;[m
[32m+[m[32m            this.set(options);[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.setThumb = function (thumb) {[m
[32m+[m[32m        curThumb = thumb;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.set = function (options) {[m
[32m+[m[32m        if (data[options.thumb.id] !== undefined) {[m
[32m+[m[32m            curThumb = options.thumb;[m
[32m+[m[32m            return false;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        var thumbObj = new Image(),[m
[32m+[m[32m            largeObj = new Image(),[m
[32m+[m[32m            thumb = options.thumb,[m
[32m+[m[32m            idx = thumb.id,[m
[32m+[m[32m            zoomable = null,[m
[32m+[m[32m            largeUrl = null,[m
[32m+[m[32m            largeWrapper = ([m
[32m+[m[32m                $('#' + options.largeWrapper) ||[m
[32m+[m[32m                $('#' + thumb.getAttribute('data-large-img-wrapper')) ||[m
[32m+[m[32m                $('#' + curData.largeWrapperId)[m
[32m+[m[32m            ),[m
[32m+[m[32m            zoom = options.zoom || thumb.getAttribute('data-zoom') || gZoom,[m
[32m+[m[32m            zoomMin = options.zoomMin || thumb.getAttribute('data-zoom-min') || gZoomMin,[m
[32m+[m[32m            zoomMax = options.zoomMax || thumb.getAttribute('data-zoom-max') || gZoomMax,[m
[32m+[m[32m            mode = options.mode || thumb.getAttribute('data-mode') || gMode,[m
[32m+[m[32m            onthumbenter = (options.onthumbenter !== undefined)[m
[32m+[m[32m                ? options.onthumbenter[m
[32m+[m[32m                : curData.onthumbenter,[m
[32m+[m[32m            onthumbleave = (options.onthumbleave !== undefined)[m
[32m+[m[32m                ? options.onthumbleave[m
[32m+[m[32m                : curData.onthumbleave,[m
[32m+[m[32m            onthumbmove = (options.onthumbmove !== undefined)[m
[32m+[m[32m                ? options.onthumbmove[m
[32m+[m[32m                : curData.onthumbmove,[m
[32m+[m[32m            onzoom = (options.onzoom !== undefined)[m
[32m+[m[32m                ? options.onzoom[m
[32m+[m[32m                : curData.onzoom;[m
[32m+[m
[32m+[m[32m        if (options.large === undefined) {[m
[32m+[m[32m            largeUrl = (options.thumb.getAttribute('data-large-img-url') !== null)[m
[32m+[m[32m                ? options.thumb.getAttribute('data-large-img-url')[m
[32m+[m[32m                : options.thumb.src;[m
[32m+[m[32m        } else {[m
[32m+[m[32m            largeUrl = options.large;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (largeWrapper === null && mode !== 'inside') {[m
[32m+[m[32m            throw {[m
[32m+[m[32m                name: 'Magnifier error',[m
[32m+[m[32m                message: 'Please specify large image wrapper DOM element',[m
[32m+[m[32m                toString: function () { return this.name + ": " + this.message; }[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (options.zoomable !== undefined) {[m
[32m+[m[32m            zoomable = options.zoomable;[m
[32m+[m[32m        } else if (thumb.getAttribute('data-zoomable') !== null) {[m
[32m+[m[32m            zoomable = (thumb.getAttribute('data-zoomable') === 'true');[m
[32m+[m[32m        } else if (curData.zoomable !== undefined) {[m
[32m+[m[32m            zoomable = curData.zoomable;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (thumb.id === '') {[m
[32m+[m[32m            idx = thumb.id = 'magnifier-item-' + gId;[m
[32m+[m[32m            gId += 1;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        createLens(thumb, idx);[m
[32m+[m
[32m+[m[32m        data[idx] = {[m
[32m+[m[32m            zoom: zoom,[m
[32m+[m[32m            zoomMin: zoomMin,[m
[32m+[m[32m            zoomMax: zoomMax,[m
[32m+[m[32m            mode: mode,[m
[32m+[m[32m            zoomable: zoomable,[m
[32m+[m[32m            thumbCssClass: thumb.className,[m
[32m+[m[32m            zoomAttached: false,[m
[32m+[m[32m            status: 0,[m
[32m+[m[32m            largeUrl: largeUrl,[m
[32m+[m[32m            largeWrapperId: mode === 'outside' ? largeWrapper.id : null,[m
[32m+[m[32m            largeWrapperW: mode === 'outside' ? largeWrapper.offsetWidth : null,[m
[32m+[m[32m            largeWrapperH: mode === 'outside' ? largeWrapper.offsetHeight : null,[m
[32m+[m[32m            onzoom: onzoom,[m
[32m+[m[32m            onthumbenter: onthumbenter,[m
[32m+[m[32m            onthumbleave: onthumbleave,[m
[32m+[m[32m            onthumbmove: onthumbmove[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        evt.attach('mouseover', thumb, function (e, src) {[m
[32m+[m[32m            if (curData.status !== 0) {[m
[32m+[m[32m                onThumbLeave();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            curIdx = src.id;[m
[32m+[m[32m            curThumb = src;[m
[32m+[m
[32m+[m[32m            onThumbEnter(src);[m
[32m+[m
[32m+[m[32m            setThumbData(curThumb, curData);[m
[32m+[m
[32m+[m[32m            pos.x = e.clientX;[m
[32m+[m[32m            pos.y = e.clientY;[m
[32m+[m
[32m+[m[32m            getMousePos();[m
[32m+[m[32m            move();[m
[32m+[m
[32m+[m[32m            var handler = curData.onthumbenter;[m
[32m+[m
[32m+[m[32m            if (handler !== null) {[m
[32m+[m[32m                handler({[m
[32m+[m[32m                    thumb: curThumb,[m
[32m+[m[32m                    lens: curLens,[m
[32m+[m[32m                    large: curLarge,[m
[32m+[m[32m                    x: pos.x,[m
[32m+[m[32m                    y: pos.y[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m[32m        }, false);[m
[32m+[m
[32m+[m[32m        evt.attach('mousemove', thumb, function (e, src) {[m
[32m+[m[32m            isOverThumb = 1;[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        evt.attach('load', thumbObj, function () {[m
[32m+[m[32m            data[idx].status = 1;[m
[32m+[m
[32m+[m[32m            setThumbData(thumb, data[idx]);[m
[32m+[m[32m            updateLensOnLoad(idx);[m
[32m+[m
[32m+[m[32m            evt.attach('load', largeObj, function () {[m
[32m+[m[32m                data[idx].status = 2;[m
[32m+[m[32m                updateLensOnLoad(idx, thumb, largeObj, largeWrapper);[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            largeObj.src = data[idx].largeUrl;[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        thumbObj.src = thumb.src;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    evt.attach('mousemove', document, function (e) {[m
[32m+[m[32m        pos.x = e.clientX;[m
[32m+[m[32m        pos.y = e.clientY;[m
[32m+[m
[32m+[m[32m        getMousePos();[m
[32m+[m
[32m+[m[32m        if (inBounds === true) {[m
[32m+[m[32m            move();[m
[32m+[m[32m        } else {[m
[32m+[m[32m            if (isOverThumb !== 0) {[m
[32m+[m[32m                onThumbLeave();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            isOverThumb = 0;[m
[32m+[m[32m        }[m
[32m+[m[32m    }, false);[m
[32m+[m
[32m+[m[32m    evt.attach('scroll', window, function () {[m
[32m+[m[32m        if (curThumb !== null) {[m
[32m+[m[32m            setThumbData(curThumb, curData);[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Locate/NdrImage.jsx b/app/retraites-spirituelles-bolobi/_/Locate/NdrImage.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..340a7aa[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Locate/NdrImage.jsx[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function NdrImage() {[m
[32m+[m[32m    return <div className="ndr_image off">[m
[32m+[m[32m        {/*[m
[32m+[m[32mhttps://github.com/AndersDJohnson/magnificent.js[m
[32m+[m[32mhttps://github.com/mark-rolich/Magnifier.js[m
[32m+[m[32m        https://github.com/jackmoore/wheelzoom[m
[32m+[m[41m    [m
[32m+[m[32m        https://www.google.com/search?q=npm+react+next+zoom+loop+image&sxsrf=APwXEddFlF3HFg-ksm33etjMNDkALDjnUA%3A1685628109413&ei=zaR4ZPrrGIKokdUPxZe8wAQ&ved=0ahUKEwi6hr2FnqL_AhUCVKQEHcULD0gQ4dUDCA8&uact=5&oq=npm+react+next+zoom+loop+image&gs_lcp=Cgxnd3Mtd2l6LXNlcnAQAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwAzIKCAAQRxDWBBCwA0oECEEYAFC-AViQCGCqCmgBcAF4AIABsQOIAcYLkgEFMy0zLjGYAQCgAQHAAQHIAQg&sclient=gws-wiz-serp[m
[32m+[m[32m        https://morioh.com/p/bca9c144354c[m
[32m+[m[32m            https://bashooka.com/coding/21-zoom-javascript-libraries-for-web-mobile/?ref=morioh.com&utm_source=morioh.com[m[41m [m
[32m+[m[32m        https://github.com/infeng/react-viewer[m
[32m+[m[32m        https://github.com/prc5/react-zoom-pan-pinch#readme[m
[32m+[m[32m    */}[m
[32m+[m[32m        {/* https://www.npmjs.com/package/react-image-magnify */}[m
[32m+[m[32m        <div style={{ width: 610, margin: "0 auto" }}>[m
[32m+[m[32m            <img id="thumb1" src="abidjan-adzope.png" />[m
[32m+[m[32m            <div className="magnifier-preview example heading" id="preview1">Starry Night Over The Rhone<br />by Vincent van Gogh</div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        {/* <ReactImageZoom {...props} /> */}[m
[32m+[m[32m        {/* <ReactImageMagnify {...{[m
[32m+[m[32m            smallImage: {[m
[32m+[m[32m                alt: 'Wristwatch by Ted Baker London',[m
[32m+[m[32m                isFluidWidth: true,[m
[32m+[m[32m                src: "celluloid-shot0002.jpg"[m
[32m+[m[32m            },[m
[32m+[m[32m            largeImage: {[m
[32m+[m[32m                src: "abidjan-adzope.png",[m
[32m+[m[32m                width: 500,[m
[32m+[m[32m                height: 500[m
[32m+[m[32m            }[m
[32m+[m[32m        }} /> */}[m
[32m+[m[32m        {/* <img src="/abidjan-adzope.png" alt="" /> */}[m
[32m+[m[32m    </div>[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Locate/NdrToggle.jsx b/app/retraites-spirituelles-bolobi/_/Locate/NdrToggle.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..15d7122[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Locate/NdrToggle.jsx[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function NdrToggle() {[m
[32m+[m[32m    return <div className="ndr_toggle">[m
[32m+[m[32m        <button[m
[32m+[m[32m            className="ndr_toggle_image_map_btn"[m
[32m+[m[32m            onClick={e => {[m
[32m+[m[32m                let section = e.target.closest('section')[m
[32m+[m[32m                    , ndr_image = section.querySelector('.ndr_image')[m
[32m+[m[32m                    , ndr_map = section.querySelector('.ndr_map')[m
[32m+[m[32m                    , span = e.target.closest('.ndr_toggle_image_map_btn').querySelector('span')[m
[32m+[m[32m                console.log(e.target.closest('.ndr_toggle_image_map_btn'));[m
[32m+[m[32m                console.log(e.target.closest('.ndr_toggle_image_map_btn').querySelector('span'));[m
[32m+[m[32m                ndr_image.classList.toggle('off')[m
[32m+[m[32m                ndr_map.classList.toggle('off')[m
[32m+[m[32m                if (ndr_image.classList.contains('off'))[m
[32m+[m[32m                    span.innerText = "le plan routier"[m
[32m+[m[32m                else span.innerText = "Google Map"[m
[32m+[m[32m            }}[m
[32m+[m[32m        >[m
[32m+[m[32m            <div><b>Afficher</b> <span>Google Map</span></div>[m
[32m+[m[32m        </button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/LocateBolobi.jsx b/app/retraites-spirituelles-bolobi/_/LocateBolobi.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e9b344c[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/LocateBolobi.jsx[m
[36m@@ -0,0 +1,110 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport React, { useState, useEffect, useMemo } from "react"[m
[32m+[m[32mimport dynamic from 'next/dynamic'[m
[32m+[m[32m// import ReactImageZoom from 'react-image-zoom';[m
[32m+[m[32m// import ReactImageMagnify from 'react-image-magnify';[m
[32m+[m[32mimport 'leaflet/dist/leaflet.css'[m
[32m+[m[32m// import watchImg300 from[m[41m [m
[32m+[m
[32m+[m
[32m+[m[32mimport Event from './Locate/Event.js'[m
[32m+[m[32m// import Magnifier from './Locate/Magnifier.js'[m
[32m+[m[32mimport NdrToggle from './Locate/NdrToggle.jsx'[m
[32m+[m[32mimport NdrImage from './Locate/NdrImage.jsx'[m
[32m+[m[32mimport Gmap from '../../_/Gmap.jsx'[m
[32m+[m[32m{/*[m
[32m+[m[32mimport L from 'leaflet'[m
[32m+[m[32mimport { MapContainer, Marker, Popup, TileLayer } from 'react-leaflet'[m
[32m+[m[32mimport 'leaflet/dist/leaflet.css'[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mfunction MapLeaflet() {[m
[32m+[m[32m    const position = [51.505, -0.09][m
[32m+[m[41m        [m
[32m+[m[32m    return([m
[32m+[m[32m      <MapContainer center={position} zoom={13} scrollWheelZoom={false}>[m
[32m+[m[32m        <TileLayer[m
[32m+[m[32m          attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'[m
[32m+[m[32m          url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"[m
[32m+[m[32m        />[m
[32m+[m[32m        <Marker position={position}>[m
[32m+[m[32m          <Popup>[m
[32m+[m[32m            A pretty CSS3 popup. <br /> Easily customizable.[m
[32m+[m[32m          </Popup>[m
[32m+[m[32m        </Marker>[m
[32m+[m[32m      </MapContainer>[m
[32m+[m[32m    )[m
[32m+[m[32m}[m
[32m+[m[32m*/}[m
[32m+[m
[32m+[m[32mexport default function LocateBolobi() {[m
[32m+[m[32m    // const Map = React.useMemo(() => dynamic([m
[32m+[m[32m    //     () => import('./../../../components/_/MapLeaflet'), // replace '@components/map' with your component's location[m
[32m+[m[32m    //     { ssr: false } // This line is important. It's what prevents server-side render[m
[32m+[m[32m    // ), [])[m
[32m+[m[32m    // const props = {width: 400, height: 250, zoomWidth: 2500, img: "/abidjan-adzope.png"}[m
[32m+[m[32m    const props = {width: 400, height: 250, zoomWidth: 500, img: "celluloid-shot0002.jpg", offset: {vertical: 0, horizontal: 10}}[m
[32m+[m[32m    , [did,setDid] = useState(0)[m
[32m+[m[32m    , titreH3 = "OÙ SE SITUE LE SANCTUAIRE ND ROSAIRE DE BOLOBI"[m
[32m+[m[32m    , sommaire = "GÉOLOCALISER BOLOBI"[m
[32m+[m
[32m+[m[32m    {/*}[m
[32m+[m[32m    const Magnifier = React.useMemo(() => dynamic([m
[32m+[m
[32m+[m[32m        () => import("./Magnifier.js"), // replace '@components/map' with your component's location[m
[32m+[m[32m        { ssr: false } // This line is important. It's what prevents server-side render[m
[32m+[m[32m      ), [])[m
[32m+[m[32m    , Event = React.useMemo(() => dynamic([m
[32m+[m
[32m+[m[32m        () => import("./Event.js"), // replace '@components/map' with your component's location[m
[32m+[m[32m        { ssr: false } // This line is important. It's what prevents server-side render[m
[32m+[m[32m      ), [])[m
[32m+[m[32m    */}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[41m    [m
[32m+[m[32m    // useEffect(()=>{[m
[32m+[m[32m    //     // console.log(Event);[m
[32m+[m[32m    //     console.log(did);[m
[32m+[m[32m    //     setDid(1)[m
[32m+[m[32m    // }, [])[m
[32m+[m[32m    // useEffect(()=>{[m
[32m+[m[32m    //     console.log("iiiiii");[m
[32m+[m[32m    //     console.log(did);[m
[32m+[m[32m    //     if(did){[m
[32m+[m[32m    //         console.log("iooooo");[m
[32m+[m[32m    //         let evt = new Event()[m
[32m+[m[32m    //         , m = new Magnifier(evt)[m
[32m+[m[32m    //         // let m = new Magnifier(ok)[m
[32m+[m[32m    //         m.attach({[m
[32m+[m[32m    //             thumb: '#thumb1',[m
[32m+[m[32m    //             large: 'abidjan-adzope.png',[m
[32m+[m[32m    //             largeWrapper: 'preview1',[m
[32m+[m[32m    //             zoom: 3,[m
[32m+[m[32m    //             zoomable: false[m
[32m+[m[32m    //         })[m
[32m+[m[32m    //     }[m
[32m+[m[32m    // },[did])[m
[32m+[m[32m    return ([m
[32m+[m[32m        <section>[m
[32m+[m[32m            <h3 id="thirdH3" data-icon="3" data-sommaire={sommaire||titreH3}>{titreH3}</h3>[m
[32m+[m[32m            <p>Le Sanctuaire ND Rosaire de Bolobi se situe à la périphérie d'Abidjan, juste après <a href="#" target="_blank">Azaguié</a> (12km), un peu avant <a href="#" target="_blank">Yakasseme</a>, des panneaux indicateurs inscript "BOLOBI" pointent vers l'entrée du sanctuaire (à 200 mètres du goudron, ~7minutes à pas légers).</p>[m
[32m+[m[32m            <div>[m
[32m+[m[32m                {/* <NdrToggle />[m
[32m+[m[32m                <NdrImage /> */}[m
[32m+[m[32m                <div className="ndr_map">[m
[32m+[m[32m                    <Gmap />[m
[32m+[m[32m                    {/* <MapLeaflet /> */}[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m        </section>[m
[32m+[m[32m    )[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/Magnifier.js b/app/retraites-spirituelles-bolobi/_/Magnifier.js[m
[1mnew file mode 100755[m
[1mindex 0000000..1a7910e[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/Magnifier.js[m
[36m@@ -0,0 +1,591 @@[m
[32m+[m[32m/**[m
[32m+[m[32m* Magnifier.js is a Javascript library enabling magnifying glass effect on an images.[m
[32m+[m[32m*[m
[32m+[m[32m* Features[m
[32m+[m[32m*[m
[32m+[m[32m* Zoom in / out functionality using mouse wheel[m
[32m+[m[32m* Setting options via Javascript or data attributes[m
[32m+[m[32m* Magnified image can be displayed in the lens itself or outside of it in a wrapper[m
[32m+[m[32m* Attachment to multiple images with single call[m
[32m+[m[32m* Attachment of user defined functions for thumbnail entering, moving and leaving and image zooming events[m
[32m+[m[32m* Display loading text while the large image is being loaded, and switch to lens once its loaded[m
[32m+[m[32m*[m
[32m+[m[32m* Magnifier.js uses Event.js as a cross-browser event handling wrapper, which is available at[m
[32m+[m[32m* Github and JSClasses.org:[m
[32m+[m[32m*[m
[32m+[m[32m* Github - https://github.com/mark-rolich/Event.js[m
[32m+[m[32m* JS Classes - http://www.jsclasses.org/package/212-JavaScript-Handle-events-in-a-browser-independent-manner.html[m
[32m+[m[32m*[m
[32m+[m[32m* Works in Chrome, Firefox, Safari, IE 7, 8, 9 & 10.[m
[32m+[m[32m*[m
[32m+[m[32m* @author Mark Rolich <mark.rolich@gmail.com>[m
[32m+[m[32m*/[m
[32m+[m[32mvar Magnifier = function (evt, options) {[m
[32m+[m[32m    "use strict";[m
[32m+[m
[32m+[m[32m    var gOptions = options || {},[m
[32m+[m[32m        curThumb = null,[m
[32m+[m[32m        curData = {[m
[32m+[m[32m            x: 0,[m
[32m+[m[32m            y: 0,[m
[32m+[m[32m            w: 0,[m
[32m+[m[32m            h: 0,[m
[32m+[m[32m            lensW: 0,[m
[32m+[m[32m            lensH: 0,[m
[32m+[m[32m            lensBgX: 0,[m
[32m+[m[32m            lensBgY: 0,[m
[32m+[m[32m            largeW: 0,[m
[32m+[m[32m            largeH: 0,[m
[32m+[m[32m            largeL: 0,[m
[32m+[m[32m            largeT: 0,[m
[32m+[m[32m            zoom: 2,[m
[32m+[m[32m            zoomMin: 1.1,[m
[32m+[m[32m            zoomMax: 5,[m
[32m+[m[32m            mode: 'outside',[m
[32m+[m[32m            largeWrapperId: (gOptions.largeWrapper !== undefined)[m
[32m+[m[32m                ? (gOptions.largeWrapper.id || null)[m
[32m+[m[32m                : null,[m
[32m+[m[32m            status: 0,[m
[32m+[m[32m            zoomAttached: false,[m
[32m+[m[32m            zoomable: (gOptions.zoomable !== undefined)[m
[32m+[m[32m                ? gOptions.zoomable[m
[32m+[m[32m                : false,[m
[32m+[m[32m            onthumbenter: (gOptions.onthumbenter !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbenter[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onthumbmove: (gOptions.onthumbmove !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbmove[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onthumbleave: (gOptions.onthumbleave !== undefined)[m
[32m+[m[32m                ? gOptions.onthumbleave[m
[32m+[m[32m                : null,[m
[32m+[m[32m            onzoom: (gOptions.onzoom !== undefined)[m
[32m+[m[32m                ? gOptions.onzoom[m
[32m+[m[32m                : null[m
[32m+[m[32m        },[m
[32m+[m[32m        pos = {[m
[32m+[m[32m            t: 0,[m
[32m+[m[32m            l: 0,[m
[32m+[m[32m            x: 0,[m
[32m+[m[32m            y: 0[m
[32m+[m[32m        },[m
[32m+[m[32m        gId = 0,[m
[32m+[m[32m        status = 0,[m
[32m+[m[32m        curIdx = '',[m
[32m+[m[32m        curLens = null,[m
[32m+[m[32m        curLarge = null,[m
[32m+[m[32m        gZoom = (gOptions.zoom !== undefined)[m
[32m+[m[32m                    ? gOptions.zoom[m
[32m+[m[32m                    : curData.zoom,[m
[32m+[m[32m        gZoomMin = (gOptions.zoomMin !== undefined)[m
[32m+[m[32m                    ? gOptions.zoomMin[m
[32m+[m[32m                    : curData.zoomMin,[m
[32m+[m[32m        gZoomMax = (gOptions.zoomMax !== undefined)[m
[32m+[m[32m                    ? gOptions.zoomMax[m
[32m+[m[32m                    : curData.zoomMax,[m
[32m+[m[32m        gMode = gOptions.mode || curData.mode,[m
[32m+[m[32m        data = {},[m
[32m+[m[32m        inBounds = false,[m
[32m+[m[32m        isOverThumb = 0,[m
[32m+[m[32m        getElementsByClass = function (className) {[m
[32m+[m[32m            var list = [],[m
[32m+[m[32m                elements = null,[m
[32m+[m[32m                len = 0,[m
[32m+[m[32m                pattern = '',[m
[32m+[m[32m                i = 0,[m
[32m+[m[32m                j = 0;[m
[32m+[m
[32m+[m[32m            if (document.getElementsByClassName) {[m
[32m+[m[32m                list = document.getElementsByClassName(className);[m
[32m+[m[32m            } else {[m
[32m+[m[32m                elements = document.getElementsByTagName('*');[m
[32m+[m[32m                len = elements.length;[m
[32m+[m[32m                pattern = new RegExp("(^|\\s)" + className + "(\\s|$)");[m
[32m+[m
[32m+[m[32m                for (i, j; i < len; i += 1) {[m
[32m+[m[32m                    if (pattern.test(elements[i].className)) {[m
[32m+[m[32m                        list[j] = elements[i];[m
[32m+[m[32m                        j += 1;[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            return list;[m
[32m+[m[32m        },[m
[32m+[m[32m        $ = function (selector) {[m
[32m+[m[32m            var idx = '',[m
[32m+[m[32m                type = selector.charAt(0),[m
[32m+[m[32m                result = null;[m
[32m+[m
[32m+[m[32m            if (type === '#' || type === '.') {[m
[32m+[m[32m                idx = selector.substr(1, selector.length);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (idx !== '') {[m
[32m+[m[32m                switch (type) {[m
[32m+[m[32m                case '#':[m
[32m+[m[32m                    result = document.getElementById(idx);[m
[32m+[m[32m                    break;[m
[32m+[m[32m                case '.':[m
[32m+[m[32m                    result = getElementsByClass(idx);[m
[32m+[m[32m                    break;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            return result;[m
[32m+[m[32m        },[m
[32m+[m[32m        createLens = function (thumb, idx) {[m
[32m+[m[32m            var lens = document.createElement('div');[m
[32m+[m
[32m+[m[32m            lens.id = idx + '-lens';[m
[32m+[m[32m            lens.className = 'magnifier-loader';[m
[32m+[m
[32m+[m[32m            thumb.parentNode.appendChild(lens);[m
[32m+[m[32m        },[m
[32m+[m[32m        updateLensOnZoom = function () {[m
[32m+[m[32m            curLens.style.left = pos.l + 'px';[m
[32m+[m[32m            curLens.style.top = pos.t + 'px';[m
[32m+[m[32m            curLens.style.width = curData.lensW + 'px';[m
[32m+[m[32m            curLens.style.height = curData.lensH + 'px';[m
[32m+[m[32m            curLens.style.backgroundPosition = '-' + curData.lensBgX + 'px -' +[m
[32m+[m[32m                                                curData.lensBgY + 'px';[m
[32m+[m
[32m+[m[32m            curLarge.style.left = '-' + curData.largeL + 'px';[m
[32m+[m[32m            curLarge.style.top = '-' + curData.largeT + 'px';[m
[32m+[m[32m            curLarge.style.width = curData.largeW + 'px';[m
[32m+[m[32m            curLarge.style.height = curData.largeH + 'px';[m
[32m+[m[32m        },[m
[32m+[m[32m        updateLensOnLoad = function (idx, thumb, large, largeWrapper) {[m
[32m+[m[32m            var lens = $('#' + idx + '-lens'),[m
[32m+[m[32m                textWrapper = null;[m
[32m+[m
[32m+[m[32m            if (data[idx].status === 1) {[m
[32m+[m[32m                textWrapper = document.createElement('div');[m
[32m+[m[32m                textWrapper.className = 'magnifier-loader-text';[m
[32m+[m[32m                lens.className = 'magnifier-loader hidden';[m
[32m+[m
[32m+[m[32m                textWrapper.appendChild(document.createTextNode('Loading...'));[m
[32m+[m[32m                lens.appendChild(textWrapper);[m
[32m+[m[32m            } else if (data[idx].status === 2) {[m
[32m+[m[32m                lens.className = 'magnifier-lens hidden';[m
[32m+[m[32m                lens.removeChild(lens.childNodes[0]);[m
[32m+[m[32m                lens.style.background = 'url(' + thumb.src + ') no-repeat 0 0 scroll';[m
[32m+[m
[32m+[m[32m                large.id = idx + '-large';[m
[32m+[m[32m                large.style.width = data[idx].largeW + 'px';[m
[32m+[m[32m                large.style.height = data[idx].largeH + 'px';[m
[32m+[m[32m                large.className = 'magnifier-large hidden';[m
[32m+[m
[32m+[m[32m                if (data[idx].mode === 'inside') {[m
[32m+[m[32m                    lens.appendChild(large);[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    largeWrapper.appendChild(large);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            lens.style.width = data[idx].lensW + 'px';[m
[32m+[m[32m            lens.style.height = data[idx].lensH + 'px';[m
[32m+[m[32m        },[m
[32m+[m[32m        getMousePos = function () {[m
[32m+[m[32m            var xPos = pos.x - curData.x,[m
[32m+[m[32m                yPos = pos.y - curData.y,[m
[32m+[m[32m                t    = 0,[m
[32m+[m[32m                l    = 0;[m
[32m+[m
[32m+[m[32m            inBounds = ([m
[32m+[m[32m                xPos < 0 ||[m
[32m+[m[32m                yPos < 0 ||[m
[32m+[m[32m                xPos > curData.w ||[m
[32m+[m[32m                yPos > curData.h[m
[32m+[m[32m            )[m
[32m+[m[32m                ? false[m
[32m+[m[32m                : true;[m
[32m+[m
[32m+[m[32m            l = xPos - (curData.lensW / 2);[m
[32m+[m[32m            t = yPos - (curData.lensH / 2);[m
[32m+[m
[32m+[m[32m            if (curData.mode !== 'inside') {[m
[32m+[m[32m                if (xPos < curData.lensW / 2) {[m
[32m+[m[32m                    l = 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (yPos < curData.lensH / 2) {[m
[32m+[m[32m                    t = 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (xPos - curData.w + (curData.lensW / 2) > 0) {[m
[32m+[m[32m                    l = curData.w - (curData.lensW + 2);[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (yPos - curData.h + (curData.lensH / 2) > 0) {[m
[32m+[m[32m                    t = curData.h - (curData.lensH + 2);[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            pos.l = Math.round(l);[m
[32m+[m[32m            pos.t = Math.round(t);[m
[32m+[m
[32m+[m[32m            curData.lensBgX = pos.l + 1;[m
[32m+[m[32m            curData.lensBgY = pos.t + 1;[m
[32m+[m
[32m+[m[32m            if (curData.mode === 'inside') {[m
[32m+[m[32m                curData.largeL = Math.round(xPos * (curData.zoom - (curData.lensW / curData.w)));[m
[32m+[m[32m                curData.largeT = Math.round(yPos * (curData.zoom - (curData.lensH / curData.h)));[m
[32m+[m[32m            } else {[m
[32m+[m[32m                curData.largeL = Math.round(curData.lensBgX * curData.zoom * (curData.largeWrapperW / curData.w));[m
[32m+[m[32m                curData.largeT = Math.round(curData.lensBgY * curData.zoom * (curData.largeWrapperH / curData.h));[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        zoomInOut = function (e) {[m
[32m+[m[32m            var delta = (e.wheelDelta > 0 || e.detail < 0) ? 0.1 : -0.1,[m
[32m+[m[32m                handler = curData.onzoom,[m
[32m+[m[32m                multiplier = 1,[m
[32m+[m[32m                w = 0,[m
[32m+[m[32m                h = 0;[m
[32m+[m
[32m+[m[32m            if (e.preventDefault) {[m
[32m+[m[32m                e.preventDefault();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            e.returnValue = false;[m
[32m+[m
[32m+[m[32m            curData.zoom = Math.round((curData.zoom + delta) * 10) / 10;[m
[32m+[m
[32m+[m[32m            if (curData.zoom >= curData.zoomMax) {[m
[32m+[m[32m                curData.zoom = curData.zoomMax;[m
[32m+[m[32m            } else if (curData.zoom >= curData.zoomMin) {[m
[32m+[m[32m                curData.lensW = Math.round(curData.w / curData.zoom);[m
[32m+[m[32m                curData.lensH = Math.round(curData.h / curData.zoom);[m
[32m+[m
[32m+[m[32m                if (curData.mode === 'inside') {[m
[32m+[m[32m                    w = curData.w;[m
[32m+[m[32m                    h = curData.h;[m
[32m+[m[32m                } else {[m
[32m+[m[32m                    w = curData.largeWrapperW;[m
[32m+[m[32m                    h = curData.largeWrapperH;[m
[32m+[m[32m                    multiplier = curData.largeWrapperW / curData.w;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curData.largeW = Math.round(curData.zoom * w);[m
[32m+[m[32m                curData.largeH = Math.round(curData.zoom * h);[m
[32m+[m
[32m+[m[32m                getMousePos();[m
[32m+[m[32m                updateLensOnZoom();[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y,[m
[32m+[m[32m                        zoom: Math.round(curData.zoom * multiplier * 10) / 10,[m
[32m+[m[32m                        w: curData.lensW,[m
[32m+[m[32m                        h: curData.lensH[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m[32m            } else {[m
[32m+[m[32m                curData.zoom = curData.zoomMin;[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        onThumbEnter = function () {[m
[32m+[m[32m            curData = data[curIdx];[m
[32m+[m[32m            curLens = $('#' + curIdx + '-lens');[m
[32m+[m
[32m+[m[32m            if (curData.status === 2) {[m
[32m+[m[32m                curLens.className = 'magnifier-lens';[m
[32m+[m
[32m+[m[32m                if (curData.zoomAttached === false) {[m
[32m+[m[32m                    if (curData.zoomable !== undefined && curData.zoomable === true) {[m
[32m+[m[32m                        evt.attach('mousewheel', curLens, zoomInOut);[m
[32m+[m
[32m+[m[32m                        if (window.addEventListener) {[m
[32m+[m[32m                            curLens.addEventListener('DOMMouseScroll', function (e) {[m
[32m+[m[32m                                zoomInOut(e);[m
[32m+[m[32m                            });[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m
[32m+[m[32m                    curData.zoomAttached = true;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curLarge = $('#' + curIdx + '-large');[m
[32m+[m[32m                curLarge.className = 'magnifier-large';[m
[32m+[m[32m            } else if (curData.status === 1) {[m
[32m+[m[32m                curLens.className = 'magnifier-loader';[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        onThumbLeave = function () {[m
[32m+[m[32m            if (curData.status > 0) {[m
[32m+[m[32m                var handler = curData.onthumbleave;[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                if (curLens.className.indexOf('hidden') === -1) {[m
[32m+[m[32m                    curLens.className += ' hidden';[m
[32m+[m[32m                    curThumb.className = curData.thumbCssClass;[m
[32m+[m
[32m+[m[32m                    if (curLarge !== null) {[m
[32m+[m[32m                        curLarge.className += ' hidden';[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        },[m
[32m+[m[32m        move = function () {[m
[32m+[m[32m            if (status !== curData.status) {[m
[32m+[m[32m                onThumbEnter();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            if (curData.status > 0) {[m
[32m+[m[32m                curThumb.className = curData.thumbCssClass + ' opaque';[m
[32m+[m
[32m+[m[32m                if (curData.status === 1) {[m
[32m+[m[32m                    curLens.className = 'magnifier-loader';[m
[32m+[m[32m                } else if (curData.status === 2) {[m
[32m+[m[32m                    curLens.className = 'magnifier-lens';[m
[32m+[m[32m                    curLarge.className = 'magnifier-large';[m
[32m+[m[32m                    curLarge.style.left = '-' + curData.largeL + 'px';[m
[32m+[m[32m                    curLarge.style.top = '-' + curData.largeT + 'px';[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                curLens.style.left = pos.l + 'px';[m
[32m+[m[32m                curLens.style.top = pos.t + 'px';[m
[32m+[m[32m                curLens.style.backgroundPosition = '-' +[m
[32m+[m[32m                                                curData.lensBgX + 'px -' +[m
[32m+[m[32m                                                curData.lensBgY + 'px';[m
[32m+[m
[32m+[m[32m                var handler = curData.onthumbmove;[m
[32m+[m
[32m+[m[32m                if (handler !== null) {[m
[32m+[m[32m                    handler({[m
[32m+[m[32m                        thumb: curThumb,[m
[32m+[m[32m                        lens: curLens,[m
[32m+[m[32m                        large: curLarge,[m
[32m+[m[32m                        x: pos.x,[m
[32m+[m[32m                        y: pos.y[m
[32m+[m[32m                    });[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            status = curData.status;[m
[32m+[m[32m        },[m
[32m+[m[32m        setThumbData = function (thumb, thumbData) {[m
[32m+[m[32m            var thumbBounds = thumb.getBoundingClientRect(),[m
[32m+[m[32m                w = 0,[m
[32m+[m[32m                h = 0;[m
[32m+[m
[32m+[m[32m            thumbData.x = thumbBounds.left;[m
[32m+[m[32m            thumbData.y = thumbBounds.top;[m
[32m+[m[32m            thumbData.w = Math.round(thumbBounds.right - thumbData.x);[m
[32m+[m[32m            thumbData.h = Math.round(thumbBounds.bottom - thumbData.y);[m
[32m+[m
[32m+[m[32m            thumbData.lensW = Math.round(thumbData.w / thumbData.zoom);[m
[32m+[m[32m            thumbData.lensH = Math.round(thumbData.h / thumbData.zoom);[m
[32m+[m
[32m+[m[32m            if (thumbData.mode === 'inside') {[m
[32m+[m[32m                w = thumbData.w;[m
[32m+[m[32m                h = thumbData.h;[m
[32m+[m[32m            } else {[m
[32m+[m[32m                w = thumbData.largeWrapperW;[m
[32m+[m[32m                h = thumbData.largeWrapperH;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            thumbData.largeW = Math.round(thumbData.zoom * w);[m
[32m+[m[32m            thumbData.largeH = Math.round(thumbData.zoom * h);[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m    this.attach = function (options) {[m
[32m+[m[32m        if (options.thumb === undefined) {[m
[32m+[m[32m            throw {[m
[32m+[m[32m                name: 'Magnifier error',[m
[32m+[m[32m                message: 'Please set thumbnail',[m
[32m+[m[32m                toString: function () {return this.name + ": " + this.message; }[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        var thumb = $(options.thumb),[m
[32m+[m[32m            i = 0;[m
[32m+[m
[32m+[m[32m        if (thumb.length !== undefined) {[m
[32m+[m[32m            for (i; i < thumb.length; i += 1) {[m
[32m+[m[32m                options.thumb = thumb[i];[m
[32m+[m[32m                this.set(options);[m
[32m+[m[32m            }[m
[32m+[m[32m        } else {[m
[32m+[m[32m            options.thumb = thumb;[m
[32m+[m[32m            this.set(options);[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.setThumb = function (thumb) {[m
[32m+[m[32m        curThumb = thumb;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    this.set = function (options) {[m
[32m+[m[32m        if (data[options.thumb.id] !== undefined) {[m
[32m+[m[32m            curThumb = options.thumb;[m
[32m+[m[32m            return false;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        var thumbObj    = new Image(),[m
[32m+[m[32m            largeObj    = new Image(),[m
[32m+[m[32m            thumb       = options.thumb,[m
[32m+[m[32m            idx         = thumb.id,[m
[32m+[m[32m            zoomable    = null,[m
[32m+[m[32m            largeUrl    = null,[m
[32m+[m[32m            largeWrapper = ([m
[32m+[m[32m                $('#' + options.largeWrapper) ||[m
[32m+[m[32m                $('#' + thumb.getAttribute('data-large-img-wrapper')) ||[m
[32m+[m[32m                $('#' + curData.largeWrapperId)[m
[32m+[m[32m            ),[m
[32m+[m[32m            zoom = options.zoom || thumb.getAttribute('data-zoom') || gZoom,[m
[32m+[m[32m            zoomMin = options.zoomMin || thumb.getAttribute('data-zoom-min') || gZoomMin,[m
[32m+[m[32m            zoomMax = options.zoomMax || thumb.getAttribute('data-zoom-max') || gZoomMax,[m
[32m+[m[32m            mode = options.mode || thumb.getAttribute('data-mode') || gMode,[m
[32m+[m[32m            onthumbenter = (options.onthumbenter !== undefined)[m
[32m+[m[32m                        ? options.onthumbenter[m
[32m+[m[32m                        : curData.onthumbenter,[m
[32m+[m[32m            onthumbleave = (options.onthumbleave !== undefined)[m
[32m+[m[32m                        ? options.onthumbleave[m
[32m+[m[32m                        : curData.onthumbleave,[m
[32m+[m[32m            onthumbmove = (options.onthumbmove !== undefined)[m
[32m+[m[32m                        ? options.onthumbmove[m
[32m+[m[32m                        : curData.onthumbmove,[m
[32m+[m[32m            onzoom = (options.onzoom !== undefined)[m
[32m+[m[32m                        ? options.onzoom[m
[32m+[m[32m                        : curData.onzoom;[m
[32m+[m
[32m+[m[32m        if (options.large === undefined) {[m
[32m+[m[32m            largeUrl = (options.thumb.getAttribute('data-large-img-url') !== null)[m
[32m+[m[32m                            ? options.thumb.getAttribute('data-large-img-url')[m
[32m+[m[32m                            : options.thumb.src;[m
[32m+[m[32m        } else {[m
[32m+[m[32m            largeUrl = options.large;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (largeWrapper === null && mode !== 'inside') {[m
[32m+[m[32m            throw {[m
[32m+[m[32m                name: 'Magnifier error',[m
[32m+[m[32m                message: 'Please specify large image wrapper DOM element',[m
[32m+[m[32m                toString: function () {return this.name + ": " + this.message; }[m
[32m+[m[32m            };[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (options.zoomable !== undefined) {[m
[32m+[m[32m            zoomable = options.zoomable;[m
[32m+[m[32m        } else if (thumb.getAttribute('data-zoomable') !== null) {[m
[32m+[m[32m            zoomable = (thumb.getAttribute('data-zoomable') === 'true');[m
[32m+[m[32m        } else if (curData.zoomable !== undefined) {[m
[32m+[m[32m            zoomable = curData.zoomable;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        if (thumb.id === '') {[m
[32m+[m[32m            idx = thumb.id = 'magnifier-item-' + gId;[m
[32m+[m[32m            gId += 1;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        createLens(thumb, idx);[m
[32m+[m
[32m+[m[32m        data[idx] = {[m
[32m+[m[32m            zoom: zoom,[m
[32m+[m[32m            zoomMin: zoomMin,[m
[32m+[m[32m            zoomMax: zoomMax,[m
[32m+[m[32m            mode: mode,[m
[32m+[m[32m            zoomable: zoomable,[m
[32m+[m[32m            thumbCssClass: thumb.className,[m
[32m+[m[32m            zoomAttached: false,[m
[32m+[m[32m            status: 0,[m
[32m+[m[32m            largeUrl: largeUrl,[m
[32m+[m[32m            largeWrapperId: mode === 'outside' ? largeWrapper.id : null,[m
[32m+[m[32m            largeWrapperW: mode === 'outside' ? largeWrapper.offsetWidth : null,[m
[32m+[m[32m            largeWrapperH: mode === 'outside' ? largeWrapper.offsetHeight : null,[m
[32m+[m[32m            onzoom: onzoom,[m
[32m+[m[32m            onthumbenter: onthumbenter,[m
[32m+[m[32m            onthumbleave: onthumbleave,[m
[32m+[m[32m            onthumbmove: onthumbmove[m
[32m+[m[32m        };[m
[32m+[m
[32m+[m[32m        evt.attach('mouseover', thumb, function (e, src) {[m
[32m+[m[32m            if (curData.status !== 0) {[m
[32m+[m[32m                onThumbLeave();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            curIdx = src.id;[m
[32m+[m[32m            curThumb = src;[m
[32m+[m
[32m+[m[32m            onThumbEnter(src);[m
[32m+[m
[32m+[m[32m            setThumbData(curThumb, curData);[m
[32m+[m
[32m+[m[32m            pos.x = e.clientX;[m
[32m+[m[32m            pos.y = e.clientY;[m
[32m+[m
[32m+[m[32m            getMousePos();[m
[32m+[m[32m            move();[m
[32m+[m
[32m+[m[32m            var handler = curData.onthumbenter;[m
[32m+[m
[32m+[m[32m            if (handler !== null) {[m
[32m+[m[32m                handler({[m
[32m+[m[32m                    thumb: curThumb,[m
[32m+[m[32m                    lens: curLens,[m
[32m+[m[32m                    large: curLarge,[m
[32m+[m[32m                    x: pos.x,[m
[32m+[m[32m                    y: pos.y[m
[32m+[m[32m                });[m
[32m+[m[32m            }[m
[32m+[m[32m        }, false);[m
[32m+[m
[32m+[m[32m        evt.attach('mousemove', thumb, function (e, src) {[m
[32m+[m[32m            isOverThumb = 1;[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        evt.attach('load', thumbObj, function () {[m
[32m+[m[32m            data[idx].status = 1;[m
[32m+[m
[32m+[m[32m            setThumbData(thumb, data[idx]);[m
[32m+[m[32m            updateLensOnLoad(idx);[m
[32m+[m
[32m+[m[32m            evt.attach('load', largeObj, function () {[m
[32m+[m[32m                data[idx].status = 2;[m
[32m+[m[32m                updateLensOnLoad(idx, thumb, largeObj, largeWrapper);[m
[32m+[m[32m            });[m
[32m+[m
[32m+[m[32m            largeObj.src = data[idx].largeUrl;[m
[32m+[m[32m        });[m
[32m+[m
[32m+[m[32m        thumbObj.src = thumb.src;[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    evt.attach('mousemove', document, function (e) {[m
[32m+[m[32m        pos.x = e.clientX;[m
[32m+[m[32m        pos.y = e.clientY;[m
[32m+[m
[32m+[m[32m        getMousePos();[m
[32m+[m
[32m+[m[32m        if (inBounds === true) {[m
[32m+[m[32m            move();[m
[32m+[m[32m        } else {[m
[32m+[m[32m            if (isOverThumb !== 0) {[m
[32m+[m[32m                onThumbLeave();[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            isOverThumb = 0;[m
[32m+[m[32m        }[m
[32m+[m[32m    }, false);[m
[32m+[m
[32m+[m[32m    evt.attach('scroll', window, function () {[m
[32m+[m[32m        if (curThumb !== null) {[m
[32m+[m[32m            setThumbData(curThumb, curData);[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m[32m};[m
[32m+[m[32mexport default Magnifier[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetDate.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetDate.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..54e7e6e[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetDate.jsx[m
[36m@@ -0,0 +1,202 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport { useState, useEffect } from "react"[m
[32m+[m[32mimport moment from "moment"[m
[32m+[m
[32m+[m[32mmoment.locale('fr')[m
[32m+[m
[32m+[m[32mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiffDuAu, handleFieldsetValidation}) {[m
[32m+[m[32m    const [isWeek, setIsWeek] = useState(false)[m
[32m+[m[32m    , onFocus = e => e.target.showPicker()[m
[32m+[m[32m    , onChange = e => {[m
[32m+[m[32m        const label = e.target.parentNode.querySelector("label[for="+e.target.id+"]")[m
[32m+[m[32m        , span = e.target.parentNode.querySelector("label[for="+e.target.id+"] span")[m
[32m+[m[32m        , tmp = moment(e.target.value)[m
[32m+[m[32m        span.innerHTML = tmp.format('LL')[m
[32m+[m[41m        [m
[32m+[m[32m        // document.querySelector(".dates div:last-of-type>b").innerHTML = ((du.value && au.value) && (!zero_night.checked))[m[41m [m
[32m+[m[32m        document.querySelector(".dates div b").innerHTML[m
[32m+[m[32m            = ((du.value && au.value) && (!zero_night.checked))[m[41m [m
[32m+[m[32m                ? dateDiffDuAu().day[m
[32m+[m[32m                : 0[m
[32m+[m
[32m+[m[32m        handleDateChange(zero_night.checked&&true)[m
[32m+[m[32m    }[m
[32m+[m[32m    , weekSelection = (e,weekNum) => {[m
[32m+[m[41m        [m
[32m+[m[32m        const range = getDateRangeOfWeek(weekNum)[m
[32m+[m[32m        , e1={target:du}[m
[32m+[m[32m        , e2={target:au}[m
[32m+[m
[32m+[m[32m        document.querySelector(".dates div b").innerHTML = 2[m
[32m+[m
[32m+[m[32m        document.querySelector(".dates ul li.on")?.classList.remove('on')[m
[32m+[m[32m        e.target.closest('li').classList.add('on')[m
[32m+[m
[32m+[m[32m        du.value = range[0][m
[32m+[m[32m        onChange(e1)[m
[32m+[m[32m        au.value = range[1][m
[32m+[m[32m        onChange(e2)[m
[32m+[m
[32m+[m[32m        handleDateChange()[m
[32m+[m[32m    }[m[41m      [m
[32m+[m[32m    , getDateRangeOfWeek = (weekNo=1, y=new Date().getFullYear()) => {[m
[32m+[m[32m        // Commencer par le premier jour de l'année[m
[32m+[m[32m        const d1 = new Date(y, 0, 1);[m
[32m+[m[32m        // Ajuster au premier lundi de l'année[m
[32m+[m[32m        d1.setDate(d1.getDate() + (1 - d1.getDay() || 7));[m
[32m+[m[32m        // Avancer jusqu'à la semaine demandée[m
[32m+[m[32m        d1.setDate(d1.getDate() + (weekNo - 1) * 7);[m
[32m+[m[32m        // Avancer jusqu'au vendredi[m
[32m+[m[32m        d1.setDate(d1.getDate() + 4);[m
[32m+[m
[32m+[m[32m        // Formater la date de début (vendredi)[m
[32m+[m[32m        const prependMonthZero1 = (d1.getMonth() + 1) < 10 ? "0" : "";[m
[32m+[m[32m        const prependDaysZero1 = d1.getDate() < 10 ? "0" : "";[m
[32m+[m[32m        const rangeIsFrom = `${d1.getFullYear()}-${prependMonthZero1}${d1.getMonth() + 1}-${prependDaysZero1}${d1.getDate()}`;[m
[32m+[m
[32m+[m[32m        // Avancer de 2 jours pour le dimanche[m
[32m+[m[32m        d1.setDate(d1.getDate() + 2);[m
[32m+[m[41m        [m
[32m+[m[32m        // Formater la date de fin (dimanche)[m
[32m+[m[32m        const prependMonthZero2 = (d1.getMonth() + 1) < 10 ? "0" : "";[m
[32m+[m[32m        const prependDaysZero2 = d1.getDate() < 10 ? "0" : "";[m
[32m+[m[32m        const rangeIsTo = `${d1.getFullYear()}-${prependMonthZero2}${d1.getMonth() + 1}-${prependDaysZero2}${d1.getDate()}`;[m
[32m+[m
[32m+[m[32m        return [rangeIsFrom, rangeIsTo];[m
[32m+[m[32m    }[m
[32m+[m[32m    , getWeekendDates = (weekNum, year = new Date().getFullYear()) => {[m
[32m+[m[32m        // Utiliser directement les dates retournées par getDateRangeOfWeek pour assurer la cohérence[m
[32m+[m[32m        const [startDate, endDate] = getDateRangeOfWeek(weekNum, year);[m
[32m+[m[32m        return {[m
[32m+[m[32m            friday: moment(startDate).format('D MMM').toLowerCase(),[m
[32m+[m[32m            sunday: moment(endDate).format('D MMM').toLowerCase()[m
[32m+[m[32m        };[m
[32m+[m[32m    }[m
[32m+[m[32m    , dateWeek = (a) => {[m
[32m+[m[32m        var d = a ? new Date(a) : new Date();[m
[32m+[m[32m        d.setHours(0,0,0,0);[m
[32m+[m[32m        d.setDate(d.getDate() + 3 - (d.getDay() + 6) % 7);[m
[32m+[m[32m        var w = new Date(d.getFullYear(), 0, 4);[m
[32m+[m[32m        return ('0' + (1 + Math.round(((d.getTime() - w.getTime()) / 86400000 - 3 + (w.getDay() + 6) % 7) / 7))).slice(-2);[m
[32m+[m[32m    }[m
[32m+[m[32m    , currentWeekNum = dateWeek(new Date())[m
[32m+[m[32m    , weeks_list = [][m
[32m+[m
[32m+[m[32m    weeks_list.length = 54[m
[32m+[m[32m    weeks_list.fill(0).map((elt,i)=>i+1)[m
[32m+[m
[32m+[m[32m    Date.prototype.getWeek = function() {[m
[32m+[m[32m        var date = new Date(this.getTime());[m
[32m+[m[32m        date.setHours(0, 0, 0, 0);[m
[32m+[m[32m        // Thursday in current week decides the year.[m
[32m+[m[32m        date.setDate(date.getDate() + 3 - (date.getDay() + 6) % 7);[m
[32m+[m[32m        // January 4 is always in week 1.[m
[32m+[m[32m        var week1 = new Date(date.getFullYear(), 0, 4);[m
[32m+[m[32m        // Adjust to Thursday in week 1 and count number of weeks from date to week1.[m
[32m+[m[32m        return 1 + Math.round(((date.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    useEffect(()=>{[m
[32m+[m[32m        // participants[m
[32m+[m[32m        document.querySelectorAll('fieldset.datepicker p').forEach((item,i) => {[m
[32m+[m[32m            item.addEventListener("click", e => {[m
[32m+[m[32m                const tmp = e.target.className[m
[32m+[m[32m                console.log(document.querySelector("fieldset"+(tmp&&"."+e.target.className)))[m
[32m+[m[32m                console.log("li."+e.target.className)[m
[32m+[m[32m                document.querySelector("li"+(tmp&&"."+e.target.className)).click()[m
[32m+[m[32m            })[m
[32m+[m[32m        })[m
[32m+[m[32m        document.querySelector('fieldset.recap>article.dates>div').removeAttribute('style')[m
[32m+[m
[32m+[m[32m        // Initialiser les dates avec la semaine courante[m
[32m+[m[32m        const e = { target: document.querySelector('li.on') };[m
[32m+[m[32m        if (e.target) {[m
[32m+[m[32m            weekSelection(e, currentWeekNum);[m
[32m+[m[32m        }[m
[32m+[m[32m    }, [])[m
[32m+[m[41m    [m
[32m+[m[32m    return <fieldset className="dates">[m
[32m+[m[32m        <h4 onClick={toggleFormNdrImg}>Choisir une période (du DD/MM/YYYY au DD/MM/YYYY): </h4>[m
[32m+[m[41m        [m
[32m+[m[32m        <p>Vous pouvez choisir une tranche de dates de votre spécifique, ou alors sélectionner un numéro de semaine (cas fréquent pour les retraites de groupe)</p>[m
[32m+[m[41m        [m
[32m+[m[32m        <div className="zero_night_box">[m
[32m+[m[32m            <p>SI VOUS NE RÉSERVEZ <u>AUCUNE NUÎTÉ</u>, ALORS <u>COCHEZ CETTE CASE</u>:</p>[m
[32m+[m[32m            <div><input type="checkbox" className="safe" name="zero_night" id="zero_night"[m
[32m+[m[32m            onChange={[m
[32m+[m[32m                e=>{[m
[32m+[m[32m                    document.querySelector(".dates div b").innerHTML="0"[m
[32m+[m[32m                    if(zero_night.checked){[m
[32m+[m[32m                        du.value=""[m
[32m+[m[32m                        du.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                        au.value=""[m
[32m+[m[32m                        au.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                    }else{[m
[32m+[m[32m                        le.value=""[m
[32m+[m[32m                        le.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m             /></div>[m
[32m+[m[32m            <div>[m[41m    [m
[32m+[m[32m                <p>Choisir le jour de réservation: </p>[m[41m            [m
[32m+[m[32m                <label htmlFor="le"><span></span></label>[m
[32m+[m[32m                <input type="date" id="le" name="le" {...{onChange, onFocus}}/>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div>[m
[32m+[m[32m            <label htmlFor="du"><span></span></label>[m
[32m+[m[32m            <input type="date" id="du" name="du" {...{onChange, onFocus}} />[m
[32m+[m[32m            <label htmlFor="au"><span></span></label>[m
[32m+[m[32m            <input type="date" id="au" name="au" {...{onChange, onFocus}} />[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <ul onMouseOver={e => {e.target.querySelector('li.on')?.scrollIntoView({ behavior: "smooth", block: "center"})}}>[m
[32m+[m[32m            <li>Weekends semaines {new Date().getFullYear()}: </li>[m
[32m+[m[32m            {weeks_list.map((elt,i) => (i>=currentWeekNum) && <li[m[41m [m
[32m+[m[32m                    key={i}[m[41m [m
[32m+[m[32m                    onClick={ e=>weekSelection(e,i+"") }[m[41m [m
[32m+[m[32m                    className={currentWeekNum==i ? "on" : ""}[m[41m [m
[32m+[m[32m                >[m
[32m+[m[32m                    <span>{i}</span>[m
[32m+[m[32m                    <div><span>(du ven {getWeekendDates(i).friday})</span>   <span>(au dim {getWeekendDates(i).sunday})</span></div>[m
[32m+[m[32m                </li>[m
[32m+[m[32m            )}[m
[32m+[m[32m        </ul>[m
[32m+[m[32m        <div>Nombre de nuits: <b>0</b></div>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            const dateDebut = document.querySelector('#du')?.value;[m
[32m+[m[32m            const dateFin = document.querySelector('#au')?.value;[m
[32m+[m[32m            const dateLe = document.querySelector('#le')?.value;[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si les deux dates sont remplies[m
[32m+[m[32m            if(zero_night.checked){[m
[32m+[m[32m                if(!dateLe){[m
[32m+[m[32m                    alert('Veuillez sélectionner une date pour votre évènement.');[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m            }else if (!dateDebut || !dateFin) {[m
[32m+[m[32m              alert('Veuillez sélectionner les dates de début et de fin');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si la date de fin est après la date de début[m
[32m+[m[32m            if (new Date(dateFin) <= new Date(dateDebut)) {[m
[32m+[m[32m              alert('La date de fin doit être après la date de début');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si tout est valide, appeler handleFieldsetValidation[m
[32m+[m[32m            handleFieldsetValidation('dates');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
[32m+[m[32m    </fieldset>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetInfos.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetInfos.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..a39a479[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetInfos.jsx[m
[36m@@ -0,0 +1,130 @@[m
[32m+[m[32mimport { useState,useEffect } from 'react';[m
[32m+[m[32mimport { FaUser, FaPhone, FaEnvelope, FaBuilding } from 'react-icons/fa';[m
[32m+[m[32mimport { SignInButton,SignedOut,useUser } from "@clerk/nextjs"[m
[32m+[m
[32m+[m[32mexport default function FieldsetInfos({ toggleFormNdrImg, handleFieldsetValidation }) {[m
[32m+[m[32m    const [infos, setInfos] = useState({[m
[32m+[m[32m        community: 'aaa',[m
[32m+[m[32m        names: '',[m
[32m+[m[32m        phone_number: '0704763132',[m
[32m+[m[32m        email: ''[m
[32m+[m[32m    })[m
[32m+[m[32m    , { user } = useUser()[m
[32m+[m
[32m+[m
[32m+[m[32m    // Pré-remplir le formulaire quand l'utilisateur est connecté[m
[32m+[m[32m    useEffect(() => {[m
[32m+[m[32m        console.log(user);[m
[32m+[m[41m        [m
[32m+[m[32m        if (user) {[m
[32m+[m[32m            setInfos(prevInfos => ({[m
[32m+[m[32m                ...prevInfos,[m
[32m+[m[32m                names: user.fullName || '',[m
[32m+[m[32m                email: user.primaryEmailAddress?.emailAddress || '',[m
[32m+[m[32m                phone_number: user.phoneNumbers?.[0] || prevInfos.phone_number,[m
[32m+[m[32m                // La communauté n'est généralement pas disponible dans les données utilisateur par défaut[m
[32m+[m[32m                community: user.publicMetadata?.community || prevInfos.community[m
[32m+[m[32m            }))[m
[32m+[m[32m        }[m
[32m+[m[32m    }, [user])[m
[32m+[m
[32m+[m[32m    const handleInputChange = (e) => {[m
[32m+[m[32m        const { name, value } = e.target;[m
[32m+[m[32m        setInfos(prevInfos => {[m
[32m+[m[41m            [m
[32m+[m[32m            // if(infos["community"])[m
[32m+[m[32m            if(name=="community")[m
[32m+[m[32m                // document.querySelector("article.infos>b").innerHTML = "Communauté: <b>"+infos["community"]+"</b>"[m
[32m+[m[32m                document.querySelector("article.infos>b").innerHTML = "Communauté: <b>"+value+"</b>"[m
[32m+[m
[32m+[m[32m            return {[m
[32m+[m[32m                ...prevInfos,[m
[32m+[m[32m                [name]: value[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    )[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    return ([m
[32m+[m[32m        <fieldset className="active infos card mb-4 position-relative">[m
[32m+[m[32m            {/* {JSON.stringify(infos)} */}[m
[32m+[m[32m            <h4 className="mb-0">Informations générales</h4>[m
[32m+[m[32m            {/*[m[41m [m
[32m+[m[32m            <h5>Nous attendrons le <b>paiment wave</b> ou <b>OrangeMoney</b> via le numéro ci-mentionné,</h5>[m
[32m+[m[32m            <h5>Nous vous enverrons un <b>email de confirmation</b> à l'adresse mentionné ci-dessous</h5>[m[41m [m
[32m+[m[32m            */}[m
[32m+[m[32m            <h5>Remplissez vos coordonnées de contact</h5>[m
[32m+[m[32m            <h5>Puis, décrivez simplement ci-dessous l'objet de votre réservation</h5>[m
[32m+[m[32m            <h5>Nous reçevrons un email, et vous rappelerons</h5>[m
[32m+[m[32m            <div onClick={e=>{console.log(e.target.firstChild.click())}}className="formSignIn" title="Vous n'êtes pas connecté !">[m
[32m+[m[32m                {!user ? <>[m
[32m+[m[32m                    <SignedOut>[m
[32m+[m[32m                        <SignInButton title="Se conncecter/S'incrire  pour remplir les informations de contact ?" type="button">Connexion ?</SignInButton>[m
[32m+[m[32m                    </SignedOut>[m
[32m+[m[32m                </>:""[m
[32m+[m[32m                }[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div className="card-body">[m
[32m+[m[32m                <div className="mb-3">[m
[32m+[m[32m                    <label htmlFor="community" className="form-label d-flex align-items-center">[m
[32m+[m[32m                        <FaBuilding className="me-2" />[m
[32m+[m[32m                        Communauté[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="text"[m[41m [m
[32m+[m[32m                        className="form-control"[m[41m [m
[32m+[m[32m                        id="community"[m[41m [m
[32m+[m[32m                        name="community"[m[41m [m
[32m+[m[32m                        value={infos.community}[m
[32m+[m[32m                        onChange={handleInputChange}[m
[32m+[m[32m                    />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div className="mb-3">[m
[32m+[m[32m                    <label htmlFor="names" className="form-label d-flex align-items-center">[m
[32m+[m[32m                        <FaUser className="me-2" />[m
[32m+[m[32m                        Nom, Prénoms du responsable <span className="text-danger">*</span>[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="text"[m[41m [m
[32m+[m[32m                        className="form-control"[m[41m [m
[32m+[m[32m                        id="names"[m[41m [m
[32m+[m[32m                        name="names"[m[41m [m
[32m+[m[32m                        value={infos.names}[m
[32m+[m[32m                        onChange={handleInputChange}[m
[32m+[m[32m                    />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div className="mb-3">[m
[32m+[m[32m                    <label htmlFor="phone_number" className="form-label d-flex align-items-center">[m
[32m+[m[32m                        <FaPhone className="me-2" />[m
[32m+[m[32m                        Numéro de contact <span className="text-danger">*</span>[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="tel"[m[41m [m
[32m+[m[32m                        className="form-control"[m[41m [m
[32m+[m[32m                        // pattern="/^(\+225)?\d{8}$/"[m[41m [m
[32m+[m[32m                        id="phone_number"[m[41m [m
[32m+[m[32m                        name="phone_number"[m[41m [m
[32m+[m[32m                        value={infos.phone_number}[m
[32m+[m[32m                        onChange={handleInputChange}[m
[32m+[m[32m                    />[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div className="mb-3">[m
[32m+[m[32m                    <label htmlFor="email" className="form-label d-flex align-items-center">[m
[32m+[m[32m                        <FaEnvelope className="me-2" />[m
[32m+[m[32m                        Email de contact[m[41m [m
[32m+[m[32m                        {/* <span className="text-danger">*</span> */}[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="email"[m[41m [m
[32m+[m[32m                        className="form-control"[m[41m [m
[32m+[m[32m                        id="email"[m[41m [m
[32m+[m[32m                        name="email"[m[41m [m
[32m+[m[32m                        value={infos.email}[m
[32m+[m[32m                        onChange={handleInputChange}[m
[32m+[m[32m                    />[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div></div>[m
[32m+[m[32m        </fieldset>[m
[32m+[m[32m    );[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetLocation.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetLocation.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..ea351bf[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetLocation.jsx[m
[36m@@ -0,0 +1,147 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport { useState, useEffect } from "react"[m
[32m+[m[32mimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'[m
[32m+[m[32mimport { faBed,faUsers } from '@fortawesome/free-solid-svg-icons'[m
[32m+[m
[32m+[m[32mexport default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange, onIndividualRoomChange, participants, individualRoomParticipants, handleFieldsetValidation}) {[m
[32m+[m[32m    const [isnotZeroParticipant, setIsnotZeroParticipant] = useState(0)[m
[32m+[m[32m    const [isApproximateCount, setIsApproximateCount] = useState(false)[m
[32m+[m
[32m+[m[32m    const onChangeParticipants = (e,alt) => {[m
[32m+[m[32m        setIsnotZeroParticipant(alt||participants)[m
[32m+[m[32m        onParticipantsChange(alt||e.target.value)[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    const handleApproximateChange = (value) => {[m
[32m+[m[32m        const participantsMap = {[m
[32m+[m[32m            '10-30': 15,[m
[32m+[m[32m            '30-50': 40,[m
[32m+[m[32m            '50-100': 75,[m
[32m+[m[32m            '100+': 120[m
[32m+[m[32m        }[m
[32m+[m[32m        onParticipantsChange(participantsMap[value])[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    useEffect(()=>{[m
[32m+[m[32m        // document.querySelector('article.dates b').innerHTML = dateDiffDuAu()[m
[32m+[m[32m    },[])[m
[32m+[m[41m    [m
[32m+[m[32m    return <>[m
[32m+[m[32m        <h4 onClick={toggleFormNdrImg}>Choisir le nombre de participants, ainsi que le type de logement désiré <br /> (chambre indiv., ou dortoir): </h4>[m
[32m+[m[32m        <p>Les Chambres individuelles et dortoirs sont <u>protégés par moustiquaires</u></p>[m
[32m+[m[32m        <ul>[m
[32m+[m[32m            <li><u>Chambre individuelle (<b>10.000F</b> / nuit):</u> ventilateur - douche - lavabo - wc</li>[m
[32m+[m[32m            <li><u>Chambre en dortoir (<b>3.000F</b> / nuit):</u> 10 matelas double - ventilateurs plafond - wc & sdb commun</li>[m
[32m+[m[32m        </ul>[m
[32m+[m[32m        <section>[m
[32m+[m[32m            <div className="checkApproxim">[m
[32m+[m[32m                <label>[m
[32m+[m[32m                    <div>SI VOUS<u> NE SAVEZ PAS,</u> COCHEZ CETTE CASE</div>[m
[32m+[m[32m                    <div>PUIS, DONNEZ JUSTE UNE FOURCHETTE APPROXIMATIVE DU<u> NOMBRE DE PARTICIPANTS.</u></div>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="checkbox"[m[41m [m
[32m+[m[32m                        checked={isApproximateCount}[m
[32m+[m[32m                        onChange={(e) => setIsApproximateCount(e.target.checked)}[m
[32m+[m[32m                    />[m
[32m+[m[32m                    <i><b>*</b> Estimation <strong>{isApproximateCount ? "approximative" : "précise"}</strong> du nombre de participants.</i>[m
[32m+[m[32m                </label>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div className={`${isnotZeroParticipant!=false?"on":""} ${isApproximateCount ? 'hidden' : ''}`}>[m
[32m+[m[32m                <label htmlFor="participants"><b><u>Précisez</u></b> le nombre exact de participants *</label>[m
[32m+[m[32m                <div className="custom-number-input">[m
[32m+[m[32m                    <button type="button" onClick={e => {onChangeParticipants(e,parseInt(participants)-1)}}>-</button>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        id="participants"[m[41m [m
[32m+[m[32m                        type="number"[m[41m [m
[32m+[m[32m                        name="participants"[m[41m [m
[32m+[m[32m                        max="250"[m[41m [m
[32m+[m[32m                        min="1"[m[41m [m
[32m+[m[32m                        value={participants}[m
[32m+[m[32m                        onChange={onChangeParticipants}[m[41m [m
[32m+[m[32m                    />[m
[32m+[m[32m                    <button type="button" onClick={e => {onChangeParticipants(e,parseInt(participants)+1)}}>+</button>[m
[32m+[m[32m                    <FontAwesomeIcon icon={faUsers} title="Nombre total de participants" />[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div className={`approxim-number-input ${!isApproximateCount ? 'hidden' : ''}`}>[m
[32m+[m[32m                <label><b><u>Sélectionnez</u></b> une estimation du nombre de participants *</label>[m
[32m+[m[32m                <div>[m
[32m+[m[32m                    {[[m
[32m+[m[32m                        { value: '10-30'},[m
[32m+[m[32m                        { value: '30-50'},[m
[32m+[m[32m                        { value: '50-100'},[m
[32m+[m[32m                        { value: '100+' }[m
[32m+[m[32m                    ].map(option => ([m
[32m+[m[32m                        <label key={option.value} className="radio-label">[m
[32m+[m[32m                            <input[m
[32m+[m[32m                                type="radio"[m
[32m+[m[32m                                name="approximateCount"[m
[32m+[m[32m                                value={option.value}[m
[32m+[m[32m                                onChange={(e) => handleApproximateChange(e.target.value)}[m
[32m+[m[32m                            />[m
[32m+[m[32m                            <div>entre <span>{option.value}</span> participants</div>[m
[32m+[m[32m                        </label>[m
[32m+[m[32m                    ))}[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <p>Vous pouvez réserver jusqu'à 7 chambres individuelles: </p>[m
[32m+[m
[32m+[m[32m            <label htmlFor="chambre" className="radioLabel safe">[m
[32m+[m[32m                <span>Chambre Individuel <b>(<b>10000Fcfa</b> la nuité)</b></span>[m
[32m+[m[32m                <div className="custom-number-input">[m
[32m+[m[32m                    <button type="button" onClick={e => {onIndividualRoomChange(parseInt(individual_room_participants.value)-1)}}>-</button>[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        id="individual_room_participants"[m[41m [m
[32m+[m[32m                        type="number"[m[41m [m
[32m+[m[32m                        name="individual_room_participants"[m[41m [m
[32m+[m[32m                        // max={participants}[m[41m [m
[32m+[m[32m                        max={7}[m[41m [m
[32m+[m[32m                        min="0"[m[41m [m
[32m+[m[32m                        value={individualRoomParticipants}[m
[32m+[m[32m                        onChange={e => {[m
[32m+[m[32m                            onIndividualRoomChange(e.target.value)[m
[32m+[m[32m                        }}[m[41m [m
[32m+[m[32m                    />[m
[32m+[m[32m                    <button type="button" onClick={e => {onIndividualRoomChange(parseInt(individual_room_participants.value)+1)}}>-</button>[m
[32m+[m[32m                    <label htmlFor="individual_room_participants" title="chambres individuelles"><FontAwesomeIcon icon={faBed} /></label>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </label>[m
[32m+[m[32m        </section>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            const totalParticipants = parseInt(document.querySelector('#participants')?.value || '0');[m
[32m+[m[32m            const individualRooms = parseInt(document.querySelector('#individual_room_participants')?.value || '0');[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre total de participants est valide[m
[32m+[m[32m            if (totalParticipants <= 0) {[m
[32m+[m[32m              alert('Le nombre total de participants doit être supérieur à 0');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre de chambres individuelles est valide[m
[32m+[m[32m            if (individualRooms < 0) {[m
[32m+[m[32m              alert('Le nombre de chambres individuelles ne peut pas être négatif');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre de chambres individuelles n'excède pas le nombre total de participants[m
[32m+[m[32m            if (individualRooms > totalParticipants) {[m
[32m+[m[32m              alert('Le nombre de chambres individuelles ne peut pas être supérieur au nombre total de participants');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si toutes les validations passent[m
[32m+[m[32m            handleFieldsetValidation('location');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetMeal.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetMeal.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..af73e88[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetMeal.jsx[m
[36m@@ -0,0 +1,353 @@[m
[32m+[m[32mimport {useState, useEffect} from "react"[m
[32m+[m[32mimport MealPlanOptions from "./MealPlanOptions"[m
[32m+[m
[32m+[m[32m// Données JSON pour les options de repas[m
[32m+[m[32mconst mealOptions = {[m
[32m+[m[32m    breakfast: ["Bakka (bouilli: riz ou maïs)", "café-pain"],[m
[32m+[m[32m    lunch: ["APF", "Tchep", "Kedjenou"],[m
[32m+[m[32m    dinner: ["APF", "Tchep", "Kedjenou"][m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, onMealPlanChange, onCustomMealChange, handleFieldsetValidation}) {[m
[32m+[m[32m    const [isMealIncluded, setIsMealIncluded] = useState(false);[m
[32m+[m[32m    const [mealPlan, setMealPlan] = useState("");[m[41m [m
[32m+[m[32m    const [customMeal, setCustomMeal] = useState({[m
[32m+[m[32m        breakfast: "",[m
[32m+[m[32m        lunch: "",[m
[32m+[m[32m        dinner: ""[m
[32m+[m[32m    });[m
[32m+[m[32m    const [showCustomInput, setShowCustomInput] = useState({[m
[32m+[m[32m        breakfast: false,[m
[32m+[m[32m        lunch: false,[m
[32m+[m[32m        dinner: false[m
[32m+[m[32m    });[m
[32m+[m[32m    const [showFlash, setShowFlash] = useState(false);[m
[32m+[m[32m    const [flashMessage, setFlashMessage] = useState("");[m
[32m+[m[32m    const [flashType, setFlashType] = useState("");[m
[32m+[m
[32m+[m[32m    // Notifier le parent des changements de repas[m
[32m+[m[32m    useEffect(() => {[m
[32m+[m[32m        onCustomMealChange(customMeal);[m
[32m+[m[32m    }, [customMeal, onCustomMealChange]);[m
[32m+[m
[32m+[m[32m    useEffect(() => {[m
[32m+[m[32m        const div = document.querySelector('article.meal>div')[m
[32m+[m[32m        let tmp = ""[m
[32m+[m[32m        if(customMeal["breakfast"])tmp += "<span>Petit-déjeuner: <b>"+customMeal["breakfast"]+"</b></span>"[m
[32m+[m[32m        if(customMeal["lunch"])tmp += "<span>Déjeuner: <b>"+customMeal["lunch"]+"</b></span>"[m
[32m+[m[32m        if(customMeal["dinner"])tmp += "<span>Diner: <b>"+customMeal["dinner"]+"</b></span>"[m[41m [m
[32m+[m[32m        div.innerHTML = tmp[m
[32m+[m[32m    }, [customMeal]);[m
[32m+[m
[32m+[m[32m    const handleMealChange = (e) => {[m
[32m+[m[32m        setIsMealIncluded(e.target.checked);[m
[32m+[m[32m        if (!e.target.checked) {[m
[32m+[m[32m            setMealPlan("");[m
[32m+[m[32m        }[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    const handleMealPlanChange = (e) => {[m
[32m+[m[32m        const value = parseInt(e.target.value, 10);[m
[32m+[m[32m        setMealPlan(value);[m
[32m+[m[32m        if(value) document.querySelector("article.meal>b").innerHTML = value + " repas /jour/personne";[m
[32m+[m[32m        onMealPlanChange(value); // Notifier le composant parent[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    const handleCustomMealChange = (mealType, e) => {[m
[32m+[m[32m        setCustomMeal(prev => ({...prev, [mealType]: e.target.value}))[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    const handleRadioChange = (mealType, value) => {[m
[32m+[m[32m        setShowCustomInput(prev => ({...prev, [mealType]: value === 'custom'}));[m
[32m+[m[32m        setCustomMeal(prev => ({[m
[32m+[m[32m            ...prev,[m[41m [m
[32m+[m[32m            [mealType]: value === 'custom' ? prev[mealType] : value[m
[32m+[m[32m        }));[m
[32m+[m[32m    };[m
[32m+[m
[32m+[m[32m    // Fonction pour générer une colonne de repas[m
[32m+[m[32m    const generateMealColumn = (mealType, options) => {[m
[32m+[m[41m        [m
[32m+[m[32m        // alert(JSON.stringify(customMeal))[m
[32m+[m
[32m+[m[41m        [m
[32m+[m[32m        return <div className="mealColumn card">[m
[32m+[m[32m            <div className="card-header">[m
[32m+[m[32m                <h5 className="mb-0">{mealType === "breakfast" ? "Petit-déjeuner" : mealType === "lunch" ? "Déjeuner" : "Diner"}</h5>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div className="card-body">[m
[32m+[m[32m                {options.map((option) => ([m
[32m+[m[32m                    <div className="form-check" key={`${mealType}-${option}`}>[m
[32m+[m[32m                        <input[m[41m [m
[32m+[m[32m                            className="form-check-input"[m[41m [m
[32m+[m[32m                            type={mealType === "breakfast" ? "radio" : "checkbox"}[m
[32m+[m[32m                            name={mealType}[m[41m [m
[32m+[m[32m                            id={`${mealType}-${option}`}[m[41m [m
[32m+[m[32m                            value={option.toLowerCase()}[m[41m [m
[32m+[m[32m                            onChange={(e) => {[m
[32m+[m[32m                                if (mealType === "breakfast") {[m
[32m+[m[32m                                    handleRadioChange(mealType, option.toLowerCase());[m
[32m+[m[32m                                } else {[m
[32m+[m[32m                                    // Pour checkbox, on gère un tableau de valeurs[m
[32m+[m[32m                                    const currentValues = customMeal[mealType] ? customMeal[mealType].split(';') : [];[m
[32m+[m[32m                                    if (e.target.checked) {[m
[32m+[m[32m                                        currentValues.push(option.toLowerCase());[m
[32m+[m[32m                                    } else {[m
[32m+[m[32m                                        const index = currentValues.indexOf(option.toLowerCase());[m
[32m+[m[32m                                        if (index > -1) currentValues.splice(index, 1);[m
[32m+[m[32m                                    }[m
[32m+[m[32m                                    setCustomMeal(prev => ({[m
[32m+[m[32m                                        ...prev,[m
[32m+[m[32m                                        [mealType]: currentValues.join(';')[m
[32m+[m[32m                                    }));[m
[32m+[m[32m                                }[m
[32m+[m[32m                            }}[m
[32m+[m[32m                            checked={mealType === "breakfast"[m[41m [m
[32m+[m[32m                                ? customMeal[mealType] === option.toLowerCase()[m
[32m+[m[32m                                : customMeal[mealType]?.split(';').includes(option.toLowerCase())[m
[32m+[m[32m                            }[m
[32m+[m[32m                        />[m
[32m+[m[32m                        <label className="form-check-label" htmlFor={`${mealType}-${option}`}>[m
[32m+[m[32m                            {option}[m
[32m+[m[32m                        </label>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                ))}[m
[32m+[m[32m                {mealType !== "breakfast" && <div className="form-check">[m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        className="form-check-input"[m[41m [m
[32m+[m[32m                        type="checkbox"[m
[32m+[m[32m                        name={`${mealType}-custom`}[m[41m [m
[32m+[m[32m                        id={`${mealType}-custom`}[m[41m [m
[32m+[m[32m                        onChange={(e) => {[m
[32m+[m[32m                            setShowCustomInput(prev => ({...prev, [mealType]: e.target.checked}));[m
[32m+[m[32m                            if (!e.target.checked) {[m
[32m+[m[32m                                setCustomMeal(prev => {[m
[32m+[m[32m                                    const values = prev[mealType].split(';').filter(v => mealOptions[mealType].map(o => o.toLowerCase()).includes(v));[m
[32m+[m[32m                                    return {...prev, [mealType]: values.join(';')};[m
[32m+[m[32m                                });[m
[32m+[m[32m                            }[m
[32m+[m[32m                        }}[m
[32m+[m[32m                        checked={showCustomInput[mealType]}[m
[32m+[m[32m                    />[m
[32m+[m[32m                    <label className="form-check-label" htmlFor={`${mealType}-custom`}>[m
[32m+[m[32m                        Personnalisé <sup>(séparer par des ";" si vous avez plusieurs propositions)</sup>[m
[32m+[m[32m                    </label>[m
[32m+[m[32m                </div>}[m
[32m+[m[32m                {showCustomInput[mealType] && ([m
[32m+[m[32m                    <input[m[41m [m
[32m+[m[32m                        type="text"[m[41m [m
[32m+[m[32m                        className="form-control mt-2"[m[41m [m
[32m+[m[32m                        value={customMeal[mealType]}[m[41m [m
[32m+[m[32m                        placeholder="séparer par des ';' si vous avez plusieurs propositions"[m
[32m+[m[32m                        onChange={(e) => handleCustomMealChange(mealType, e)}[m[41m [m
[32m+[m[32m                    />[m
[32m+[m[32m                )}[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div></div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m    // Générer les colonnes de repas[m
[32m+[m[32m    const breakfastColumn = generateMealColumn("breakfast", mealOptions.breakfast);[m
[32m+[m[32m    const lunchColumn = generateMealColumn("lunch", mealOptions.lunch);[m
[32m+[m[32m    const dinnerColumn = generateMealColumn("dinner", mealOptions.dinner);[m
[32m+[m
[32m+[m[32m    const handleValidate = () => {[m
[32m+[m[32m        const oneMeal = document.querySelector('input[name="one_meal"]');[m
[32m+[m[32m        const twoMeals = document.querySelector('input[name="two_meals"]');[m
[32m+[m[41m                [m
[32m+[m[32m        if(!document.querySelector('input[name="meal_included"]').checked){[m
[32m+[m[32m            // const mealConfirm = confirm('Voulez-vous vraiment NE PAS commander un repas pour votre séjour ?')[m
[32m+[m[32m            const mealConfirm = true[m
[32m+[m[32m            console.log("mealConfirm:",mealConfirm);[m
[32m+[m[32m            if(mealConfirm){[m
[32m+[m[32m                handleFieldsetValidation('meal');[m
[32m+[m[32m            }else {[m[41m                [m
[32m+[m[32m                setShowFlash(true);[m
[32m+[m[32m                setFlashMessage("Validez vos choix de restauration avant de réessayer");[m
[32m+[m[32m                setFlashType("warning");[m
[32m+[m[32m            }[m
[32m+[m[32m        } else if(oneMeal.checked || twoMeals.checked) {[m
[32m+[m[32m            handleFieldsetValidation('meal');[m
[32m+[m[32m        } else {[m
[32m+[m[32m            setShowFlash(true);[m
[32m+[m[32m            setFlashMessage("Vous avez choisi \"AVEC Repas\"\nVeuillez alors sélectionner votre formule: \n1repas ou 2repas ?");[m
[32m+[m[32m            setFlashType("warning");[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return <>[m
[32m+[m[32m        {/* {JSON.stringify(customMeal)} */}[m
[32m+[m[32m        <style jsx>{`[m
[32m+[m[32m            .meal {[m
[32m+[m[32m                margin-bottom: 2rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[41m            [m
[32m+[m[32m            .mealOptions {[m
[32m+[m[32m                width:100%;[m
[32m+[m[32m                display: flex;[m
[32m+[m[32m                flex-wrap: wrap;[m
[32m+[m[32m                gap: 1rem;[m
[32m+[m[32m                margin-top: 1rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .mealOptions :global(.mealColumn) {[m
[32m+[m[32m                flex: 1;[m
[32m+[m[32m                min-width: 250px;[m
[32m+[m[32m                box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);[m
[32m+[m[32m                transition: all 0.3s ease-in-out;[m
[32m+[m[32m                flex-basis:30%;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .mealColumn:hover {[m
[32m+[m[32m                box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);[m
[32m+[m[32m                transform: translateY(-0.25rem);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .card-header {[m
[32m+[m[32m                background-color: #f8f9fa;[m
[32m+[m[32m                border-bottom: 1px solid rgba(0, 0, 0, 0.125);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .card-header h5 {[m
[32m+[m[32m                color: #495057;[m
[32m+[m[32m                font-weight: 600;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .card-body {[m
[32m+[m[32m                padding: 1.25rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .form-check {[m
[32m+[m[32m                margin-bottom: 0.5rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .form-check-input {[m
[32m+[m[32m                margin-top: 0.3rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .form-check-label {[m
[32m+[m[32m                margin-left: 0.25rem;[m
[32m+[m[32m                color: #495057;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .form-control {[m
[32m+[m[32m                display: block;[m
[32m+[m[32m                width: 100%;[m
[32m+[m[32m                padding: 0.375rem 0.75rem;[m
[32m+[m[32m                font-size: 1rem;[m
[32m+[m[32m                line-height: 1.5;[m
[32m+[m[32m                color: #495057;[m
[32m+[m[32m                background-color: #fff;[m
[32m+[m[32m                background-clip: padding-box;[m
[32m+[m[32m                border: 1px solid #ced4da;[m
[32m+[m[32m                border-radius: 0.25rem;[m
[32m+[m[32m                transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .form-control:focus {[m
[32m+[m[32m                color: #495057;[m
[32m+[m[32m                background-color: #fff;[m
[32m+[m[32m                border-color: #80bdff;[m
[32m+[m[32m                outline: 0;[m
[32m+[m[32m                box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .mealPlanOptions {[m
[32m+[m[32m                margin-top: 1rem;[m
[32m+[m[32m                margin-bottom: 1rem;[m
[32m+[m[32m                padding: 1rem;[m
[32m+[m[32m                background-color: #f8f9fa;[m
[32m+[m[32m                border-radius: 0.25rem;[m
[32m+[m[32m                width: 50%;[m
[32m+[m[32m                align-self: center;[m
[32m+[m[32m                border: 1px solid;[m
[32m+[m[32m                box-shadow: 0 0 10px 1px;[m
[32m+[m[32m                padding: 1em 3em;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .mealPlanOptions h5 {[m
[32m+[m[32m                margin: 1.5rem .5rem;[m
[32m+[m[32m                color: #495057;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .mealPlanOptions .form-check {[m
[32m+[m[32m                margin-bottom: 0.5rem;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            @media (max-width: 768px) {[m
[32m+[m[32m                .mealOptions {[m
[32m+[m[32m                    flex-direction: column;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .mealColumn {[m
[32m+[m[32m                    width: 100%;[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m        `}</style>[m[41m [m
[32m+[m[32m        <fieldset className="meal">[m
[32m+[m[32m            <h4 onClick={toggleFormNdrImg}>Choisir si vous souhaitez que les repas vous soient préparés: </h4>[m
[32m+[m[32m            <h5>Vous pouvez <u><b>soit préparer vous-même</b> vos repas</u> au refectoire du santuaire, <u><b>soit commander</b> votre repas</u> à la cuisine du sanctuaire.</h5>[m
[32m+[m[32m            <h5>Si vous préparez vous-même, tous les outils de cuisine et de dégustation sont à votre disposition (marmite, casserols, couteaux, etc...)</h5>[m
[32m+[m[32m            <h5>il faut juste prévoir <u><b>VOTRE</b> propre bouteille de gaz</u></h5>[m
[32m+[m[32m            <p>CHOISIR <u><b>AVEC</b> OU <b>SANS</b></u> REPAS: (<i><u>sans repas</u> par défaut</i>)</p>[m
[32m+[m[32m            <SectionCheckboxStyled>[m
[32m+[m[32m                <label htmlFor="meal">[m
[32m+[m[32m                    <input type="checkbox" id="meal" name="meal_included" onChange={handleMealChange} />[m
[32m+[m[32m                    <span><span>Avec Repas</span> <span>🍔 😋 🍲</span></span>[m
[32m+[m[32m                    <i className="indicator">[m
[32m+[m[32m                        <svg version="1.1" id="toggle" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"[m
[32m+[m[32m                            viewBox="0 0 55 55" xmlSpace="preserve"[m
[32m+[m[32m                        >[m
[32m+[m[32m                            <path className="circ path" style={{ fill: "none", strokeWidth: 3, strokeLinejoin: "round", strokeMiterlimit: 10 }} d="M6.2,6.2L6.2,6.2[m
[32m+[m[32m                    c-5.7,5.7-5.7,14.8,0,20.5l0,0c5.7,5.7,14.8,5.7,20.5,0l0,0c5.7-5.7,5.7-14.8,0-20.5l0,0C21.1,0.6,11.9,0.6,6.2,6.2z"[m
[32m+[m[32m                            />[m
[32m+[m[32m                            <polyline className="cross path" style={{ fill: "none", stroke: "#CD4C10", strokeWidth: 3, strokeLinejoin: "round", strokeMiterlimit: 10 }} points=" 11.4,11.4 21.6,21.6 " />[m
[32m+[m[32m                            <polyline className="cross path" style={{ fill: "none", stroke: "#CD4C10", strokeWidth: 3, strokeLinejoin: "round", strokeMiterlimit: 10 }} points="21.6,11.4 11.4,21.6  " />[m
[32m+[m[32m                            <polyline className="tick path" style={{ fill: "none", stroke: "#557D25", strokeWidth: 3, strokeLinejoin: "round", strokeMiterlimit: 10 }} points="10,17.3 13.8,21.1[m[41m [m
[32m+[m[32m                    23,11.9 "[m
[32m+[m[32m                            />[m
[32m+[m[32m                        </svg>[m
[32m+[m[32m                    </i>[m
[32m+[m[32m                    <span>Sans Repas 🚫</span>[m
[32m+[m[32m                </label>[m
[32m+[m[32m            </SectionCheckboxStyled>[m
[32m+[m[32m            <p>[m
[32m+[m[32m                {isMealIncluded && <>Vous avez choisi <span>AVEC <span className={!mealPlan&&"alert"}>{mealPlan || "0"}</span> repas</span></>}[m
[32m+[m[32m                {!isMealIncluded && <>Vous avez choisi <span>SANS repas</span></>}[m
[32m+[m[32m            </p>[m
[32m+[m[32m            {isMealIncluded && ([m
[32m+[m[32m                <MealPlanOptions mealPlan={mealPlan} handleMealPlanChange={handleMealPlanChange} />[m
[32m+[m[32m            )}[m
[32m+[m
[32m+[m[41m            [m
[32m+[m[32m            {/* POUR INCLURE LES REPAS (QUE MAMAN N'A PAS VOULU INCLURE)*/}[m
[32m+[m[32m            {/* {isMealIncluded && mealPlan && ([m
[32m+[m[32m                <div className="mealOptions">[m
[32m+[m[32m                    {breakfastColumn}[m
[32m+[m[32m                    {mealPlan >= 2 && lunchColumn}[m
[32m+[m[32m                    {dinnerColumn}[m
[32m+[m[32m                </div>[m
[32m+[m[32m            )} */}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m            <button[m[41m [m
[32m+[m[32m              className="validate-button"[m
[32m+[m[32m              onClick={(e) => {[m
[32m+[m[32m                e.preventDefault();[m
[32m+[m[32m                handleValidate();[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              Valider[m
[32m+[m[32m            </button>[m
[32m+[m[32m            {showFlash && ([m
[32m+[m[32m                <div className={`alert alert-${flashType}`} role="alert">[m
[32m+[m[32m                    {flashMessage}[m
[32m+[m[32m                </div>[m
[32m+[m[32m            )}[m
[32m+[m[32m        </fieldset>[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetPayment.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetPayment.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..5e7f612[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetPayment.jsx[m
[36m@@ -0,0 +1,165 @@[m
[32m+[m[32mimport { useState } from 'react';[m
[32m+[m
[32m+[m[32mexport default function FieldsetPayment({ participants, individual_room_participants, dateDiffDuAu, mealPlan }) {[m
[32m+[m[32m    const [isOpen, setIsOpen] = useState(false);[m
[32m+[m[32m    const PRIX_NUIT_COMMUNE = 3000;[m
[32m+[m[32m    const PRIX_NUIT_INDIVIDUELLE = 10000;[m
[32m+[m[32m    const PRIX_REPAS_COMPLET = 3000; // 2 repas + petit déjeuner[m
[32m+[m[32m    const PRIX_REPAS_UNIQUE = 2000;  // 1 repas + petit déjeuner[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul du nombre de nuits[m
[32m+[m[32m    const nombreNuits = dateDiffDuAu()?.day || 0;[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul du nombre de personnes en chambre commune[m
[32m+[m[32m    const participantsCommune = participants - (individual_room_participants || 0);[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul des montants pour l'hébergement[m
[32m+[m[32m    const montantChambresCommunes = participantsCommune * PRIX_NUIT_COMMUNE * nombreNuits;[m
[32m+[m[32m    const montantChambresIndividuelles = (individual_room_participants || 0) * PRIX_NUIT_INDIVIDUELLE * nombreNuits;[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul du montant des repas[m
[32m+[m[32m    let montantRepas = 0;[m
[32m+[m[32m    if (mealPlan === 1) {[m
[32m+[m[32m        montantRepas = participants * PRIX_REPAS_UNIQUE * nombreNuits;[m
[32m+[m[32m    } else if (mealPlan === 2) {[m
[32m+[m[32m        montantRepas = participants * PRIX_REPAS_COMPLET * nombreNuits;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul du montant total[m
[32m+[m[32m    const montantTotal = montantChambresCommunes + montantChambresIndividuelles + montantRepas;[m
[32m+[m[41m    [m
[32m+[m[32m    // Calcul de l'avance (20% du total)[m
[32m+[m[32m    const montantAvance = Math.ceil(montantTotal * 0.2);[m
[32m+[m
[32m+[m[32m    return ([m
[32m+[m[32m        <fieldset className="payment">[m
[32m+[m[32m            <h4>[m
[32m+[m[32m                <button[m[41m [m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    className="payment-toggle-buttonzzz"[m
[32m+[m[32m                    onClick={() => setIsOpen(!isOpen)}[m
[32m+[m[32m                >[m
[32m+[m[32m                    Informations de paiement[m
[32m+[m[32m                    {/* <span className={`arrow ${isOpen ? 'open' : ''}`}>▼</span> */}[m
[32m+[m[32m                </button>[m
[32m+[m[32m            </h4>[m
[32m+[m[41m            [m
[32m+[m[32m            <div className={`payment-details ${isOpen ? 'open' : ''}`}>[m
[32m+[m[32m                <h5>Détail de votre séjour :</h5>[m
[32m+[m[32m                <ul>[m
[32m+[m[32m                    <li>Durée : {nombreNuits} nuit{nombreNuits > 1 ? 's' : ''}</li>[m
[32m+[m[32m                    {participantsCommune > 0 && ([m
[32m+[m[32m                        <li>[m
[32m+[m[32m                            Chambres communes: {participantsCommune} personne{participantsCommune > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                             × {PRIX_NUIT_COMMUNE}F/nuit × {nombreNuits} nuit{nombreNuits > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                            = {montantChambresCommunes}F[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                    )}[m
[32m+[m[32m                    {individual_room_participants > 0 && ([m
[32m+[m[32m                        <li>[m
[32m+[m[32m                            Chambres individuelles: {individual_room_participants} personne{individual_room_participants > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                             × {PRIX_NUIT_INDIVIDUELLE}F/nuit × {nombreNuits} nuit{nombreNuits > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                            = {montantChambresIndividuelles}F[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                    )}[m
[32m+[m[32m                    {mealPlan > 0 && ([m
[32m+[m[32m                        <li>[m
[32m+[m[32m                            Restauration: {participants} personne{participants > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                            × {mealPlan === 1 ? PRIX_REPAS_UNIQUE : PRIX_REPAS_COMPLET}F/jour × {nombreNuits} jour{nombreNuits > 1 ? 's' : ''}[m[41m [m
[32m+[m[32m                            = {montantRepas}F[m
[32m+[m[32m                            {mealPlan === 1 ? ' (1 repas + petit déjeuner)' : ' (2 repas + petit déjeuner)'}[m
[32m+[m[32m                        </li>[m
[32m+[m[32m                    )}[m
[32m+[m[32m                </ul>[m
[32m+[m
[32m+[m[32m                <div className="total">[m
[32m+[m[32m                    <p>Montant total du séjour: <strong>{montantTotal}F</strong></p>[m
[32m+[m[32m                    <p>Avance requise (20%): <strong>{montantAvance}F</strong></p>[m
[32m+[m[32m                </div>[m
[32m+[m
[32m+[m[32m                <div className="payment-info">[m
[32m+[m[32m                    <p>[m
[32m+[m[32m                        <strong>Processus de réservation:</strong>[m
[32m+[m[32m                    </p>[m
[32m+[m[32m                    <ol>[m
[32m+[m[32m                        <li>Après validation de ce formulaire, vous recevrez un email contenant un QR code.</li>[m
[32m+[m[32m                        <li>Ce QR code vous permettra de procéder au paiement de l'avance de {montantAvance}F.</li>[m
[32m+[m[32m                        <li>Votre réservation sera confirmée une fois l'avance reçue.</li>[m
[32m+[m[32m                        <li>Le solde de {montantTotal - montantAvance}F sera à régler sur place.</li>[m
[32m+[m[32m                    </ol>[m
[32m+[m[32m                </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <style jsx>{`[m
[32m+[m[32m                .payment-details {[m
[32m+[m[32m                    background: #f5f5f5;[m
[32m+[m[32m                    padding: 1rem;[m
[32m+[m[32m                    border-radius: 8px;[m
[32m+[m[32m                    margin: 1rem 0;[m
[32m+[m[32m                    display: ${isOpen ? 'block' : 'none'};[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-details ul {[m
[32m+[m[32m                    list-style: none;[m
[32m+[m[32m                    padding-left: 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-details li {[m
[32m+[m[32m                    margin: 0.5rem 0;[m
[32m+[m[32m                    color: #666;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .total {[m
[32m+[m[32m                    margin: 1rem 0;[m
[32m+[m[32m                    padding: 1rem;[m
[32m+[m[32m                    background: #fff;[m
[32m+[m[32m                    border-radius: 4px;[m
[32m+[m[32m                    border-left: 4px solid #2196f3;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .total p {[m
[32m+[m[32m                    margin: 0.5rem 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-info {[m
[32m+[m[32m                    margin-top: 1rem;[m
[32m+[m[32m                    padding: 1rem;[m
[32m+[m[32m                    background: #e3f2fd;[m
[32m+[m[32m                    border-radius: 4px;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-info ol {[m
[32m+[m[32m                    margin: 0.5rem 0;[m
[32m+[m[32m                    padding-left: 1.5rem;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-info li {[m
[32m+[m[32m                    margin: 0.5rem 0;[m
[32m+[m[32m                    color: #444;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-toggle-button {[m
[32m+[m[32m                    background: #fff;[m
[32m+[m[32m                    border: none;[m
[32m+[m[32m                    padding: 0.5rem 1rem;[m
[32m+[m[32m                    font-size: 1.2rem;[m
[32m+[m[32m                    cursor: pointer;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-toggle-button:hover {[m
[32m+[m[32m                    background: #f5f5f5;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .arrow {[m
[32m+[m[32m                    font-size: 1.5rem;[m
[32m+[m[32m                    margin-left: 0.5rem;[m
[32m+[m[32m                    transition: transform 0.2s ease-in-out;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .arrow.open {[m
[32m+[m[32m                    transform: rotate(180deg);[m
[32m+[m[32m                }[m
[32m+[m[32m            `}</style>[m
[32m+[m[32m        </fieldset>[m
[32m+[m[32m    );[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetType.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetType.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..c54e15e[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/FieldsetType.jsx[m
[36m@@ -0,0 +1,72 @@[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function FieldsetType({toggleFormNdrImg, handleFieldsetValidation}) {[m
[32m+[m[32m    <p>Nous vous proposons 2 types générales de réservations, la prière ou le recueillement, chacun sous 3 formes: </p>[m
[32m+[m[32m    return <>[m
[32m+[m[32m        <h4 onClick={toggleFormNdrImg}>Quel type d'évènement souhaitez vous organiser à Bolobi ? </h4>[m
[32m+[m[32m        <section>[m
[32m+[m[32m            <label htmlFor="pray" className="radioLabel">[m
[32m+[m[32m                <input id="pray" value="pray" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio bottom"></span>[m
[32m+[m[32m                <span>Prière ponctuelle <span>(100Avé, veillée, recollection, ...)</span></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m            <label htmlFor="retraite" className="radioLabel">[m
[32m+[m[32m                <input id="retraite" checked value="retraite" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio bottom"></span>[m
[32m+[m[32m                <span>Retraite de prière <b>de groupe</b> <span>(le weekend généralement)</span></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m            <label htmlFor="individuel" className="radioLabel">[m
[32m+[m[32m                <input id="individuel" value="individuel" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio bottom"></span>[m
[32m+[m[32m                <span>Retraite de prière <b>individuelle</b></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m            <label htmlFor="celebration" className="radioLabel">[m
[32m+[m[32m                <input id="celebration" value="celebration" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio"></span>[m
[32m+[m[32m                <span>Célébration <span>(mariage, baptême, conférence, ...)</span></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m            <label htmlFor="repos" className="radioLabel">[m
[32m+[m[32m                <input id="repos" value="repos" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio"></span>[m
[32m+[m[32m                <span>Repos<br />Détente<br />Convalescence <span>(individuel ou petit groupe)</span></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m            <label htmlFor="longTerm" className="radioLabel">[m
[32m+[m[32m                <input id="longTerm" value="longTerm" type="radio" name="type_reservation" />[m
[32m+[m[32m                <span className="radio"></span>[m
[32m+[m[32m                <span>Vacances / long séjour <span>(maximum 2 mois)</span></span>[m
[32m+[m[32m            </label>[m
[32m+[m[32m        </section>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si un type de réservation est sélectionné[m
[32m+[m[32m            const typeReservation = document.querySelector('input[name="type_reservation"]:checked');[m
[32m+[m
[32m+[m[32m            if(typeReservation?.value=="pray"){[m
[32m+[m[32m                zero_night.checked = true[m
[32m+[m[32m                zero_night.hidden = true[m
[32m+[m[32m                zero_night.parentNode.previousElementSibling.hidden = true[m
[32m+[m[32m            }else{[m
[32m+[m[32m                zero_night.checked = false[m
[32m+[m[32m                zero_night.hidden = false[m
[32m+[m[32m                zero_night.parentNode.previousElementSibling.hidden = false[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            if (!typeReservation) {[m
[32m+[m[32m              alert('Veuillez sélectionner un type de réservation');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si un type est sélectionné, valider le fieldset[m
[32m+[m[32m            handleFieldsetValidation('type');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/Intro.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/Intro.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..68f5b1a[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/Intro.jsx[m
[36m@@ -0,0 +1,17 @@[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function Intro({sommaire,titreH3}) {[m
[32m+[m[32m    return <>[m
[32m+[m[32m        <h3 id="forthH3" data-icon="4" data-sommaire={sommaire || titreH3}>{titreH3}</h3>[m
[32m+[m[32m        <p>Le sanctuaire ND Rosaire de Bolobi est <u>alimenté en électricité par l'énergie solaire</u>, <u><b>un groupe électrogène complète cette source</b> en cas de temps défavorable</u>.</p>[m
[32m+[m[32m        <p>Les solutions d'hébergement du sanctuaire comptabilisent jusqu'à 220 places, et vont de la chambre individuel-couple, au chambre communes de 4 à 12 personnes, jusqu'au dortoir d'environ 80 places. Les chambres et les dortoirs sont protégés par des moustiques. * <i>Aucun accessoire d'hébergement n'est fourni (drap, oreillet, etc), ces effets sont à la charge du pèlerin</i>.</p>[m
[32m+[m[32m        <p>Enfin, des <b>solutions de restauration</b> sont à disposition des retraitants selon 2 formules:[m
[32m+[m[32m        </p>[m
[32m+[m[32m        <ol className='safe'>[m
[32m+[m[32m            <li>Les retraitants peuvent se faire eux-même la cuisine,</li>[m
[32m+[m[32m            <li>Les retraitants peuvent <u>commander</u> les repas (3000Fcfa les <u>2 repas + petit déjeuner</u>, ou 1500Fcfa pour <u>1 repas</u>)</li>[m
[32m+[m[32m        </ol>[m
[32m+[m[32m    </>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/MealPlanOptions.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/MealPlanOptions.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..ab5b899[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/MealPlanOptions.jsx[m
[36m@@ -0,0 +1,71 @@[m
[32m+[m[32m"use client"[m
[32m+[m[32mimport {useEffect} from 'react';[m
[32m+[m
[32m+[m[32mexport default function MealPlanOptions({ mealPlan, handleMealPlanChange }) {[m
[32m+[m
[32m+[m[32m    useEffect(() => {[m
[32m+[m
[32m+[m[32m    }, [])[m
[32m+[m[41m    [m
[32m+[m[32m    return ([m
[32m+[m[32m        <div className="mealPlanOptions">[m
[32m+[m[32m            <style jsx>{`[m
[32m+[m[32m                .mealPlanOptions {[m
[32m+[m[32m                    margin-top: 1rem;[m
[32m+[m[32m                    margin-bottom: 1rem;[m
[32m+[m[32m                    padding: 1rem;[m
[32m+[m[32m                    background-color: #f8f9fa;[m
[32m+[m[32m                    border-radius: 0.25rem;[m
[32m+[m[32m                    width: 50%;[m
[32m+[m[32m                    align-self: center;[m
[32m+[m[32m                    border: 1px solid;[m
[32m+[m[32m                    box-shadow: 0 0 10px 1px;[m
[32m+[m[32m                    padding: 1em 3em;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .mealPlanOptions h5 {[m
[32m+[m[32m                    margin-bottom: 0.5rem;[m
[32m+[m[32m                    color: #495057;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .mealPlanOptions .form-check {[m
[32m+[m[32m                    margin-bottom: 0.5rem;[m
[32m+[m[32m                    &:hover{[m
[32m+[m[32m                        >label,>input{[m
[32m+[m[32m                            border-bottom: solid #9356DC;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            `}</style>[m
[32m+[m[32m            <h5>Choisissez votre formule de repas:</h5>[m
[32m+[m[32m            <div className="form-check">[m
[32m+[m[32m                <input[m
[32m+[m[32m                    className="form-check-input"[m
[32m+[m[32m                    type="radio"[m
[32m+[m[32m                    name="meal_plan"[m
[32m+[m[32m                    id="oneMeal"[m
[32m+[m[32m                    value="1"[m
[32m+[m[32m                    checked={mealPlan === 1}[m
[32m+[m[32m                    onChange={handleMealPlanChange}[m
[32m+[m[32m                />[m
[32m+[m[32m                <label className="form-check-label" htmlFor="oneMeal">[m
[32m+[m[32m                    1 repas (<b>Diner</b>) + petit déjeuner offert (<b>2000 Fcfa/jour</b>)[m
[32m+[m[32m                </label>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div className="form-check">[m
[32m+[m[32m                <input[m
[32m+[m[32m                    className="form-check-input"[m
[32m+[m[32m                    type="radio"[m
[32m+[m[32m                    name="meal_plan"[m
[32m+[m[32m                    id="twoMeals"[m
[32m+[m[32m                    value="2"[m
[32m+[m[32m                    checked={mealPlan === 2}[m
[32m+[m[32m                    onChange={handleMealPlanChange}[m
[32m+[m[32m                />[m
[32m+[m[32m                <label className="form-check-label" htmlFor="twoMeals">[m
[32m+[m[32m                    2 repas (<b>Déjeuner et Diner</b>) + petit déjeuner offert (<b>3000 Fcfa/jour</b>)[m
[32m+[m[32m                </label>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    );[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/MobileChoices.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/MobileChoices.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..773834f[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/MobileChoices.jsx[m
[36m@@ -0,0 +1,31 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport { useState } from "react"[m
[32m+[m[32mimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'[m
[32m+[m[32mimport { faCalendarDays, faChurch, faUsers, faUtensils, faIdCard, faCreditCard } from '@fortawesome/free-solid-svg-icons'[m
[32m+[m
[32m+[m[32mexport default function MobileChoices({ onClickMobileChoices: onClick, isActive, fieldsetsValidation }) {[m
[32m+[m[32m    const menuItems = [[m
[32m+[m[32m        { className: "infos", label: "Contact", icon: faIdCard, titre: "Informations de contact" },[m
[32m+[m[32m        { className: "type", label: "Évènement", icon: faChurch, titre: "Choisir un évènement" },[m
[32m+[m[32m        { className: "dates", label: "Dates", icon: faCalendarDays, titre: "Choisir une date" },[m
[32m+[m[32m        { className: "location", label: "Nombre", icon: faUsers, titre: "Choisir nombre participants" },[m
[32m+[m[32m        { className: "meal", label: "Repas", icon: faUtensils, titre: "Choisir le repas" },[m
[32m+[m[32m        // { className: "payment", label: "Paiement", icon: faCreditCard }[m
[32m+[m[32m    ][m
[32m+[m[32m    , activeTitleToShow = menuItems.find(item => item.className.split(" ")[0] === isActive)?.titre[m
[32m+[m[32m    console.log("isActive", isActive);[m
[32m+[m
[32m+[m[32m    return <ul id="bolobiForm_choices_ul" className="bolobiForm_choices">[m
[32m+[m[32m        <p>INSCRIPTION: </p>[m
[32m+[m[32m        <p>SÉLECTIONNER UNE ÉTAPE</p>[m
[32m+[m[32m        {menuItems.map((item, index) => ([m
[32m+[m[32m            <li key={index} onClick={e=>{onClick(e)}} className={`${item.className}${isActive === item.className ? ' active' : ''} ${fieldsetsValidation[item.className] ? 'validated' : 'invalidated'}`}>[m
[32m+[m[32m                <a href={`#${item.className}`}>[m
[32m+[m[32m                    <FontAwesomeIcon icon={item.icon} /> <span>{item.label}</span>[m
[32m+[m[32m                </a>[m
[32m+[m[32m            </li>[m
[32m+[m[32m        ))}[m
[32m+[m[32m        <div>{activeTitleToShow}</div>[m
[32m+[m[32m    </ul>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/Resume.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/Resume.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..1395cf0[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/Resume.jsx[m
[36m@@ -0,0 +1,134 @@[m
[32m+[m[32mimport DatePicker from "react-datepicker"[m
[32m+[m[32mimport "react-datepicker/dist/react-datepicker.css"[m
[32m+[m[32mimport { subDays, addDays, setHours, setMinutes, addMonths } from 'date-fns';[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mexport default function Resume({dateRange,setDateRange,onChange}) {[m
[32m+[m[32m    const [startDate, endDate] = dateRange[m
[32m+[m[32m        , highlightWithRanges = [[m
[32m+[m[32m            {[m
[32m+[m[32m                "react-datepicker__day--highlighted-custom-1": [[m
[32m+[m[32m                    subDays(new Date(), 4),[m
[32m+[m[32m                    subDays(new Date(), 3),[m
[32m+[m[32m                    subDays(new Date(), 2),[m
[32m+[m[32m                    subDays(new Date(), 1),[m
[32m+[m[32m                ],[m
[32m+[m[32m            },[m
[32m+[m[32m            {[m
[32m+[m[32m                "react-datepicker__day--highlighted-custom-2": [[m
[32m+[m[32m                    addDays(new Date(), 1),[m
[32m+[m[32m                    addDays(new Date(), 2),[m
[32m+[m[32m                    addDays(new Date(), 3),[m
[32m+[m[32m                    addDays(new Date(), 4),[m
[32m+[m[32m                ],[m
[32m+[m[32m            },[m
[32m+[m[32m        ][m
[32m+[m[32m        , filterPassedTime = (time) => {[m
[32m+[m[32m            const selectedDate = new Date(time);[m
[32m+[m
[32m+[m[32m            return selectedDate.getHours() < 7 && selectedDate.getHours() > 22[m
[32m+[m[32m        }[m
[32m+[m[32m        , handleOnBlur = ({ target: { value } }) => {[m
[32m+[m[32m            const date = new Date(value);[m
[32m+[m[32m            if (isValid(date)) {[m
[32m+[m[32m                console.log("date: %s", format(date, "dd/MM/yyyy"));[m
[32m+[m[32m                alert(dateRange)[m
[32m+[m[32m                setDateRange([startDate, endDate])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                console.log("value: %s", date);[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m        , handleMealChange = (e) => {[m
[32m+[m[32m            if (e.target.checked) {[m
[32m+[m[32m                document.forms[2].meal.checked = true[m
[32m+[m[32m                const a = e.target.parentNode.cloneNode(true)[m
[32m+[m[32m                console.log(a)[m
[32m+[m[32m                a.querySelector('input').remove()[m
[32m+[m[32m                console.log(a)[m
[32m+[m[32m                document.querySelector('p.meal b').innerHTML = a.textContent[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m
[32m+[m[32m    return <fieldset id="recapitulatif" className="recap">[m
[32m+[m[32m        <h4><button type="button" onClick={e=>{e.target.parentNode.parentNode.classList.toggle('active')}}>RÉCAPITULATIF</button></h4>[m
[32m+[m[32m        <article className="type card">[m
[32m+[m[32m            <h5>Type de <b>réservation</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m        </article>[m
[32m+[m[32m        <article className="nuites card">[m
[32m+[m[32m            <h5>Nombre total (estimé)de <b>participants</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m        </article>[m
[32m+[m[32m        <article className="location card">[m
[32m+[m[32m            <h5>Participants en chambre <b>collectives</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m            <div className="card-footer">[m
[32m+[m[32m                (3.000 Fcfa la nuit)[m
[32m+[m[32m            </div>[m[41m [m
[32m+[m[32m        </article>[m
[32m+[m[32m        <article className="location_ind card">[m
[32m+[m[32m            <h5>Participants en chambre  <b>individuelles</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m[41m [m
[32m+[m[32m            <div>[m
[32m+[m[32m                (10.000 Fcfa la nuit)[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </article>[m
[32m+[m[32m        <article className="meal card">[m
[32m+[m[32m            <h5>Nombre de <b>repas</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m            <div></div>[m
[32m+[m[32m        </article>[m
[32m+[m[32m        <article className="infos card">[m
[32m+[m[32m            <h5>Réservation associé aux <b>coordonnées</b> suivantes: </h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m            <div></div>[m
[32m+[m[32m        </article>[m
[32m+[m
[32m+[m[32m        <article className="dates card">[m
[32m+[m[32m            <h5>Durée de la <b>réservation</b>:</h5>[m
[32m+[m[32m            <b>🚫</b>[m
[32m+[m[32m            <DatePicker[m
[32m+[m[32m                // locale="fr-FR"[m
[32m+[m[32m                // dateFormat="d MMMM yyyy, h:mm aa"[m
[32m+[m[32m                dateFormat="d MMMM yyyy"[m
[32m+[m[32m                selected={startDate}[m
[32m+[m[32m                onChange={onChange}[m
[32m+[m[32m                onBlur={handleOnBlur}[m
[32m+[m[32m                startDate={startDate}[m
[32m+[m[32m                endDate={endDate}[m
[32m+[m[32m                minDate={new Date()}[m
[32m+[m[32m                // filterTime={filterPassedTime}[m
[32m+[m[32m                // minTime={setHours(setMinutes(new Date(), 0), 7)}[m
[32m+[m[32m                // maxTime={setHours(setMinutes(new Date(), 30), 22)}[m[41m              [m
[32m+[m[32m                maxDate={addMonths(new Date(), 18)}[m
[32m+[m[32m                timeIntervals={15}[m
[32m+[m[32m                monthsShown={1}[m
[32m+[m
[32m+[m[32m                // placeholderText="blablabla"[m
[32m+[m[32m                shouldCloseOnSelect={false}[m
[32m+[m[32m                isClearable={true}[m
[32m+[m[32m                selectsRange[m
[32m+[m[32m                inline[m
[32m+[m[32m                // showTimeSelect[m
[32m+[m[32m                // showTimeInput[m
[32m+[m[32m                // showMonthYearPicker[m
[32m+[m[32m                // showFullMonthYearPicker[m
[32m+[m
[32m+[m
[32m+[m[32m                // excludeDates={[addDays(new Date(), 25), addDays(new Date(), 26), addDays(new Date(), 27)]}[m
[32m+[m[32m                highlightDates={highlightWithRanges}[m
[32m+[m[32m                excludeDateIntervals={[{ start: addDays(new Date(), 25), end: addDays(new Date(), 27) }]}[m
[32m+[m[32m                // includeDateIntervals={[{ start: addDays(new Date(), 22), end: addDays(new Date(), 24) },]}[m
[32m+[m[32m                // calendarStartDay={new Date().getDate()}[m
[32m+[m
[32m+[m[32m                // dateFormat="MM/yyyy"[m
[32m+[m[32m                todayButton="Réservation dates à Bolobi"[m
[32m+[m[32m            />[m
[32m+[m[32m        </article>[m
[32m+[m
[32m+[m[41m        [m
[32m+[m[32m    </fieldset>[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/ValidationSection.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/ValidationSection.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..63cde87[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/ValidationSection.jsx[m
[36m@@ -0,0 +1,91 @@[m
[32m+[m[32mimport Image from 'next/image'[m
[32m+[m
[32m+[m[32mexport default function ValidationSection({ reservationData }) {[m
[32m+[m[32m    console.log(reservationData);[m
[32m+[m[41m    [m
[32m+[m[32m    if (!reservationData) return null;[m
[32m+[m
[32m+[m[32m    return ([m
[32m+[m[32m        <div className="validation-content">[m
[32m+[m[32m            <h3>Réservation enregistrée avec succès !</h3>[m
[32m+[m[41m            [m
[32m+[m[32m            <p className="confirmation-message">[m
[32m+[m[32m                Votre demande de réservation a été enregistrée. Un email de confirmation[m[41m [m
[32m+[m[32m                contenant toutes les informations a été envoyé à <strong>{reservationData.email}</strong>.[m
[32m+[m[32m            </p>[m
[32m+[m
[32m+[m[32m            <div className="qr-code-container">[m
[32m+[m[32m                <Image[m[41m [m
[32m+[m[32m                    src="/qrcode.png"[m[41m [m
[32m+[m[32m                    alt="QR Code de paiement"[m[41m [m
[32m+[m[32m                    width={200}[m[41m [m
[32m+[m[32m                    height={200}[m
[32m+[m[32m                />[m
[32m+[m[32m                <p className="qr-info">[m
[32m+[m[32m                    Scannez ce QR code pour procéder au paiement de l'avance de <strong>{reservationData.montant_avance}F</strong>[m
[32m+[m[32m                </p>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div className="payment-reminder">[m
[32m+[m[32m                <h4>Rappel des montants :</h4>[m
[32m+[m[32m                <ul>[m
[32m+[m[32m                    <li>Montant total : <strong>{reservationData.montant_total}F</strong></li>[m
[32m+[m[32m                    <li>Avance à payer : <strong>{reservationData.montant_avance}F</strong></li>[m
[32m+[m[32m                    <li>Solde à régler sur place : <strong>{reservationData.montant_total - reservationData.montant_avance}F</strong></li>[m
[32m+[m[32m                </ul>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <style jsx>{`[m
[32m+[m[32m                .validation-content {[m
[32m+[m[32m                    background: #f8f9fa;[m
[32m+[m[32m                    padding: 2rem;[m
[32m+[m[32m                    border-radius: 8px;[m
[32m+[m[32m                    text-align: center;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                h3 {[m
[32m+[m[32m                    color: #28a745;[m
[32m+[m[32m                    margin-bottom: 1.5rem;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .confirmation-message {[m
[32m+[m[32m                    margin-bottom: 2rem;[m
[32m+[m[32m                    line-height: 1.6;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .qr-code-container {[m
[32m+[m[32m                    margin: 2rem auto;[m
[32m+[m[32m                    max-width: 300px;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .qr-info {[m
[32m+[m[32m                    margin-top: 1rem;[m
[32m+[m[32m                    color: #666;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-reminder {[m
[32m+[m[32m                    background: white;[m
[32m+[m[32m                    padding: 1.5rem;[m
[32m+[m[32m                    border-radius: 8px;[m
[32m+[m[32m                    margin-top: 2rem;[m
[32m+[m[32m                    text-align: left;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-reminder h4 {[m
[32m+[m[32m                    color: #2196f3;[m
[32m+[m[32m                    margin-bottom: 1rem;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-reminder ul {[m
[32m+[m[32m                    list-style: none;[m
[32m+[m[32m                    padding: 0;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-reminder li {[m
[32m+[m[32m                    margin: 0.5rem 0;[m
[32m+[m[32m                    color: #666;[m
[32m+[m[32m                }[m
[32m+[m[32m            `}</style>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    );[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm/index.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm/index.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..dd34679[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm/index.jsx[m
[36m@@ -0,0 +1,215 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport React, { useRef, useState, useEffect, useMemo, useContext } from "react"[m
[32m+[m[32mimport dynamic from 'next/dynamic'[m
[32m+[m[32mimport { subDays, addDays, setHours, setMinutes, addMonths } from 'date-fns';[m
[32m+[m[32mimport {loadRadios} from '../../../_/swappy_radio'[m
[32m+[m[32mimport FlashMessage from '../components/FlashMessage'[m
[32m+[m[32m// import styles from "./swappy_radio.module.scss"[m
[32m+[m[32mimport FormContext from "../../../../stores/formContext.js"[m
[32m+[m[32mimport Resume from "./Resume"[m
[32m+[m[32mimport Intro from "./Intro"[m
[32m+[m[32mimport MobileChoices from "./MobileChoices"[m
[32m+[m[32mimport FieldsetDate from "./FieldsetDate"[m
[32m+[m[32mimport FieldsetType from "./FieldsetType"[m
[32m+[m[32mimport FieldsetLocation from "./FieldsetLocation"[m
[32m+[m[32mimport FieldsetInfos from "./FieldsetInfos"[m
[32m+[m[32mimport FieldsetMeal from "./FieldsetMeal"[m
[32m+[m[32mimport FieldsetPayment from "./FieldsetPayment"[m
[32m+[m[32mimport ValidationSection from "./ValidationSection"[m
[32m+[m
[32m+[m[32mexport default function ReserveForm() {[m[41m [m
[32m+[m
[32m+[m[32m  const [isFormValidated, setIsFormValidated] = useState(false);[m
[32m+[m[32m  const [reservationData, setReservationData] = useState(null);[m
[32m+[m[32m  const [isSubmitting, setIsSubmitting] = useState(false);[m
[32m+[m[32m  const [isActive, setIsActive] = useState("infos")[m
[32m+[m[32m  const [flashMessage, setFlashMessage] = useState(null);[m
[32m+[m
[32m+[m[32m  const showFlash = (message, type = 'info') => {[m
[32m+[m[32m    // Remplace directement le message existant[m
[32m+[m[32m    setFlashMessage({ message, type });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const clearFlash = () => {[m
[32m+[m[32m    setFlashMessage(null);[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const [participants, setParticipants] = useState(1);[m
[32m+[m[32m  const [individualRoomParticipants, setIndividualRoomParticipants] = useState(0);[m
[32m+[m[32m  const [mealPlan, setMealPlan] = useState(0);[m
[32m+[m[32m  const [customMealData, setCustomMealData] = useState(null);[m
[32m+[m
[32m+[m[32m  // State pour suivre la validation des fieldsets[m
[32m+[m[32m  const [fieldsetsValidation, setFieldsetsValidation] = useState({[m
[32m+[m[32m    infos: false,[m
[32m+[m[32m    type: false,[m
[32m+[m[32m    dates: false,[m
[32m+[m[32m    location: false,[m
[32m+[m[32m    meal: false,[m
[32m+[m[32m  });[m
[32m+[m[32m  const titreH3 = "RÉSERVER UN SÉJOUR SUR LE CALENDRIER DU SANCTUAIRE (avance sur paiement demandé): "[m
[32m+[m[32m  , sommaire = "RÉSERVER DATE"[m
[32m+[m[32m  , {toggleFormNdrImg,formNdrToggleImg} = useContext(FormContext)[m
[32m+[m
[32m+[m[41m  [m
[32m+[m
[32m+[m[41m  [m
[32m+[m[32m  async function handleSubmit(e){[m
[32m+[m
[32m+[m[32m    e.preventDefault();[m
[32m+[m[32m    setIsSubmitting(true);[m
[32m+[m[32m    // Créer un timeout de 10 secondes[m
[32m+[m[32m    const timeout = setTimeout(() => {[m
[32m+[m[32m      setIsSubmitting(false);[m
[32m+[m[32m    }, 100000);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    const names = document.querySelector('#names')?.value?.trim();[m
[32m+[m[32m    const phone = document.querySelector('#phone_number')?.value?.trim();[m
[32m+[m[32m    const email = document.querySelector('#email')?.value?.trim();[m
[32m+[m[32m    const community = document.querySelector('#community')?.value?.trim();[m
[32m+[m[41m    [m
[32m+[m[32m    // Vérifier si le nom est rempli[m
[32m+[m[32m    if (!names) {[m
[32m+[m[32m      alert('Veuillez entrer votre nom');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[32m    // Vérifier si le nom de la community est rempli[m
[32m+[m[32m    if (!community) {[m
[32m+[m[32m      alert('Veuillez entrer le nom de votre communauté');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Vérifier si le numéro de téléphone est valide[m
[32m+[m[32m    const phoneRegex = /^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/;[m
[32m+[m[32m    if (!phone || !phoneRegex.test(phone)) {[m
[32m+[m[32m      alert('Veuillez entrer un numéro de téléphone valide');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    const fd = new FormData(e.target)[m
[32m+[m[32m    , fd_ = {[m
[32m+[m[32m      reservation: {[m
[32m+[m[32m        type_reservation: fd.get('type_reservation')[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Récupérer les informations de contact[m
[32m+[m[32m    const contactInfo = {[m
[32m+[m[32m      community: fd.get('community'),[m
[32m+[m[32m      names: fd.get('names'),[m
[32m+[m[32m      phone_number: fd.get('phone_number'),[m
[32m+[m[32m      email: fd.get('email')[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // Ajouter le tableau de contacts converti en JSON[m
[32m+[m[32m    fd.append('contact', JSON.stringify([contactInfo]))[m
[32m+[m[41m    [m
[32m+[m[32m    const PRIX_NUIT_COMMUNE = 3000;[m
[32m+[m[32m    const PRIX_NUIT_INDIVIDUELLE = 10000;[m
[32m+[m[32m    const PRIX_REPAS_COMPLET = 3000; // 2 repas + petit déjeuner[m
[32m+[m[32m    const PRIX_REPAS_UNIQUE = 2000;  // 1 repas + petit déjeuner[m
[32m+[m[41m    [m
[32m+[m
[32m+[m[32m    // Debug: Vérifier toutes les données avant l'envoi[m
[32m+[m[32m    console.log("Final FormData entries:", Array.from(fd.entries()));[m
[32m+[m[32m    console.log("Final fd_ object:", fd_);[m
[32m+[m[41m    [m
[32m+[m[32m    // Copier les données du FormData dans fd_.reservation[m
[32m+[m[32m    Array.from(fd).forEach(([key, value]) => {[m
[32m+[m[32m        // Ne pas écraser les montants déjà calculés[m
[32m+[m[32m        if (key !== 'montant_total' && key !== 'montant_avance' && key !== 'meal_included') {[m
[32m+[m[32m            fd_.reservation[key] = value;[m
[32m+[m[32m        }[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[41m    [m
[32m+[m[32m    // if(true)return false[m
[32m+[m[32m    try {[m
[32m+[m[32m      // const response = await fetch("/api/reservation", {[m
[32m+[m[32m      const response = await fetch("/api/reservation_simple", {[m
[32m+[m[32m          method: "POST",[m
[32m+[m[32m          headers: {[m
[32m+[m[32m              'Content-Type': 'application/json',[m
[32m+[m[32m          },[m
[32m+[m[32m          body: JSON.stringify(fd_),[m
[32m+[m[32m      });[m
[32m+[m[32m      const data = await response.json();[m
[32m+[m[41m      [m
[32m+[m[32m      clearTimeout(timeout); // Annuler le timeout si la réponse arrive avant[m
[32m+[m[32m      setIsSubmitting(false);[m
[32m+[m[41m      [m
[32m+[m[32m      console.log("Réponse du serveur:", data);[m
[32m+[m[32m      setIsFormValidated(true);[m
[32m+[m[32m      // triggerConfetti();[m
[32m+[m[32m    } catch (error) {[m
[32m+[m[32m      console.error("Erreur lors de la soumission:", error);[m
[32m+[m[32m      clearTimeout(timeout);[m
[32m+[m[32m      // setIsSubmitting(false);[m
[32m+[m[32m      // Ici vous pourriez ajouter une gestion d'erreur plus détaillée[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <form id="bolobiForm" onSubmit={handleSubmit}>[m
[32m+[m[32m      {flashMessage && ([m
[32m+[m[32m        <FlashMessage[m
[32m+[m[32m          message={flashMessage.message}[m
[32m+[m[32m          type={flashMessage.type}[m
[32m+[m[32m          onClose={clearFlash}[m
[32m+[m[32m        />[m
[32m+[m[32m      )}[m
[32m+[m[32m      <Intro {...{sommaire,titreH3}} />[m
[32m+[m
[32m+[m[32m      {isSubmitting && ([m
[32m+[m[32m        <div className="overlay">[m
[32m+[m[32m          <div className="spinner"></div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {/* {!isFormValidated && ( */}[m
[32m+[m[32m        <>[m
[32m+[m
[32m+[m
[32m+[m[32m          <section[m
[32m+[m[32m            className = { formNdrToggleImg && "on" }>[m
[32m+[m[41m            [m
[32m+[m[32m            <FieldsetInfos[m[41m [m
[32m+[m[32m              toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m              // handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m            />[m
[32m+[m
[32m+[m
[32m+[m[32m            <fieldset className="form_message">[m
[32m+[m[32m              <h4>Si vous souhaitez passer un message pour cette réservation, nous y tiendrons compte lorsque nous vous rapellons pour confirmer votre réservation: </h4>[m
[32m+[m[32m              <textarea name="message" cols="30" rows="10"></textarea>[m
[32m+[m[32m            </fieldset>[m
[32m+[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m          <fieldset className="submit">[m
[32m+[m[32m            <input id="submit_reservation" type="submit" value="Réserver" />[m
[32m+[m[32m          </fieldset>[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m        </>[m
[32m+[m[32m      {/* )} */}[m
[32m+[m
[32m+[m[32m      {/* {isFormValidated && ([m
[32m+[m[32m        <section className={`validated ${isFormValidated ? 'show' : ''}`}>[m
[32m+[m[32m          {isFormValidated && <ValidationSection reservationData={reservationData} />}[m
[32m+[m[32m        </section>[m
[32m+[m[32m      )} */}[m
[32m+[m
[32m+[m[32m    </form>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetLocation.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetLocation.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetPayment.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetPayment.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetType.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/FieldsetType.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/Intro.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/Intro.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/MealPlanOptions.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/MealPlanOptions.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/MobileChoices.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/MobileChoices.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/Resume.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/Resume.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/ValidationSection.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/ValidationSection.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/index.jsx b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/index.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..3a2c643[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/ReserveForm_copy/index.jsx[m
[36m@@ -0,0 +1,133 @@[m
[32m+[m[32mimport React, { useState } from 'react';[m
[32m+[m[32mimport axios from 'axios';[m
[32m+[m[32mimport '../../../../assets/scss/index_ai_reserveForm.scss';[m
[32m+[m
[32m+[m[32mconst initialState = {[m
[32m+[m[32m  names: '',[m
[32m+[m[32m  phone_number: '',[m
[32m+[m[32m  email: '',[m
[32m+[m[32m  from: '',[m
[32m+[m[32m  to: '',[m
[32m+[m[32m  participants: 1,[m
[32m+[m[32m  individual_room_participants: 0,[m
[32m+[m[32m  message: '',[m
[32m+[m[32m  type_reservation: 'retraite',[m
[32m+[m[32m  meal_included: false,[m
[32m+[m[32m  montant_total: '',[m
[32m+[m[32m  montant_avance: '',[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst typeOptions = [[m
[32m+[m[32m  { value: 'retraite', label: 'Retraite' },[m
[32m+[m[32m  { value: 'pray', label: 'Prière' },[m
[32m+[m[32m  { value: 'individuel', label: 'Individuel' },[m
[32m+[m[32m  { value: 'celebration', label: 'Célébration' },[m
[32m+[m[32m  { value: 'repos', label: 'Repos' },[m
[32m+[m[32m  { value: 'longTerm', label: 'Long séjour' },[m
[32m+[m[32m];[m
[32m+[m
[32m+[m[32mexport default function ReserveForm() {[m
[32m+[m[32m  const [form, setForm] = useState(initialState);[m
[32m+[m[32m  const [loading, setLoading] = useState(false);[m
[32m+[m[32m  const [success, setSuccess] = useState('');[m
[32m+[m[32m  const [error, setError] = useState('');[m
[32m+[m
[32m+[m[32m  const handleChange = (e) => {[m
[32m+[m[32m    const { name, value, type, checked } = e.target;[m
[32m+[m[32m    setForm((prev) => ({[m
[32m+[m[32m      ...prev,[m
[32m+[m[32m      [name]: type === 'checkbox' ? checked : value,[m
[32m+[m[32m    }));[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const handleSubmit = async (e) => {[m
[32m+[m[32m    e.preventDefault();[m
[32m+[m[32m    setLoading(true);[m
[32m+[m[32m    setSuccess('');[m
[32m+[m[32m    setError('');[m
[32m+[m[32m    try {[m
[32m+[m[32m      // Validation rapide côté client[m
[32m+[m[32m      if (!form.names || !form.phone_number || !form.from || !form.to || !form.participants || !form.montant_total || !form.montant_avance) {[m
[32m+[m[32m        setError('Merci de remplir tous les champs obligatoires.');[m
[32m+[m[32m        setLoading(false);[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[32m      const res = await axios.post('/api/reservation_ai', form);[m
[32m+[m[32m      if (res.data && res.data.success) {[m
[32m+[m[32m        setSuccess('Réservation enregistrée avec succès !');[m
[32m+[m[32m        setForm(initialState);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        setError(res.data?.message || 'Une erreur est survenue.');[m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      setError(err.response?.data?.message || 'Erreur serveur.');[m
[32m+[m[32m    } finally {[m
[32m+[m[32m      setLoading(false);[m
[32m+[m[32m    }[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div className="ai-reserve-form__container">[m
[32m+[m[32m      <h2 className="ai-reserve-form__title">Réserver une retraite spirituelle</h2>[m
[32m+[m[32m      <form className="ai-reserve-form" onSubmit={handleSubmit}>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Nom complet *</label>[m
[32m+[m[32m          <input name="names" value={form.names} onChange={handleChange} required placeholder="Votre nom" />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Téléphone *</label>[m
[32m+[m[32m          <input name="phone_number" value={form.phone_number} onChange={handleChange} required placeholder="Votre numéro" />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Email</label>[m
[32m+[m[32m          <input name="email" type="email" value={form.email} onChange={handleChange} placeholder="Votre email" />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row ai-reserve-form__row--dates">[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label>Date d'arrivée *</label>[m
[32m+[m[32m            <input name="from" type="date" value={form.from} onChange={handleChange} required />[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <label>Date de départ *</label>[m
[32m+[m[32m            <input name="to" type="date" value={form.to} onChange={handleChange} required />[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Nombre de participants *</label>[m
[32m+[m[32m          <input name="participants" type="number" min="1" value={form.participants} onChange={handleChange} required />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Chambres individuelles</label>[m
[32m+[m[32m          <input name="individual_room_participants" type="number" min="0" value={form.individual_room_participants} onChange={handleChange} />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Type de réservation *</label>[m
[32m+[m[32m          <select name="type_reservation" value={form.type_reservation} onChange={handleChange} required>[m
[32m+[m[32m            {typeOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}[m
[32m+[m[32m          </select>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row ai-reserve-form__row--checkbox">[m
[32m+[m[32m          <label>[m
[32m+[m[32m            <input name="meal_included" type="checkbox" checked={form.meal_included} onChange={handleChange} />[m
[32m+[m[32m            Repas inclus[m
[32m+[m[32m          </label>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Montant total (€) *</label>[m
[32m+[m[32m          <input name="montant_total" type="number" min="0" value={form.montant_total} onChange={handleChange} required />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Montant de l'avance (€) *</label>[m
[32m+[m[32m          <input name="montant_avance" type="number" min="0" value={form.montant_avance} onChange={handleChange} required />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div className="ai-reserve-form__row">[m
[32m+[m[32m          <label>Message</label>[m
[32m+[m[32m          <textarea name="message" value={form.message} onChange={handleChange} placeholder="Votre message (optionnel)" />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        {error && <div className="ai-reserve-form__error">{error}</div>}[m
[32m+[m[32m        {success && <div className="ai-reserve-form__success">{success}</div>}[m
[32m+[m[32m        <button className="ai-reserve-form__submit" type="submit" disabled={loading}>{loading ? 'Envoi...' : 'Envoyer la réservation'}</button>[m
[32m+[m[32m      </form>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/components/FlashMessage.jsx b/app/retraites-spirituelles-bolobi/_/components/FlashMessage.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..8243b83[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/components/FlashMessage.jsx[m
[36m@@ -0,0 +1,83 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport React from 'react';[m
[32m+[m
[32m+[m[32mconst FlashMessage = ({ message, type = 'info', onClose }) => {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div className={`flash-message ${type}`}>[m
[32m+[m[32m      <p>{message}</p>[m
[32m+[m[32m      <button onClick={onClose} className="close-button">&times;</button>[m
[32m+[m[32m      <style jsx>{`[m
[32m+[m[32m        .flash-message {[m
[32m+[m[32m          position: fixed;[m
[32m+[m[32m          top: 20px;[m
[32m+[m[32m          left: 50%;[m
[32m+[m[32m          transform: translateX(-50%);[m
[32m+[m[32m          padding: 15px 25px;[m
[32m+[m[32m          border-radius: 8px;[m
[32m+[m[32m          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m          z-index: 1000;[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          align-items: center;[m
[32m+[m[32m          gap: 10px;[m
[32m+[m[32m          animation: slideIn 0.3s ease-out;[m
[32m+[m[32m          max-width: 90vw;[m
[32m+[m[32m          transition: all 0.3s ease-out;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        @keyframes slideIn {[m
[32m+[m[32m          from {[m
[32m+[m[32m            transform: translate(-50%, -100%);[m
[32m+[m[32m            opacity: 0;[m
[32m+[m[32m          }[m
[32m+[m[32m          to {[m
[32m+[m[32m            transform: translate(-50%, 0);[m
[32m+[m[32m            opacity: 1;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .info {[m
[32m+[m[32m          background-color: #3498db;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .success {[m
[32m+[m[32m          background-color: #2ecc71;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .error {[m
[32m+[m[32m          background-color: #e74c3c;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .warning {[m
[32m+[m[32m          background-color: #f1c40f;[m
[32m+[m[32m          color: #2c3e50;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .close-button {[m
[32m+[m[32m          background: none;[m
[32m+[m[32m          border: none;[m
[32m+[m[32m          color: inherit;[m
[32m+[m[32m          font-size: 20px;[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          padding: 0 5px;[m
[32m+[m[32m          opacity: 0.8;[m
[32m+[m[32m          transition: opacity 0.2s;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .close-button:hover {[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        p {[m
[32m+[m[32m          margin: 0;[m
[32m+[m[32m          white-space: pre-line;[m
[32m+[m[32m        }[m
[32m+[m[32m      `}</style>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default FlashMessage;[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/components/IntroVideo.jsx b/app/retraites-spirituelles-bolobi/_/components/IntroVideo.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..3f0d39d[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/components/IntroVideo.jsx[m
[36m@@ -0,0 +1,17 @@[m
[32m+[m[32mconst IntroVideo = () => {[m
[32m+[m[32m    return ([m
[32m+[m[32m        <div className="intro-video-container">[m
[32m+[m[32m            <iframe[m
[32m+[m[32m                // src="https://www.youtube.com/embed/FjO441MnCr8"[m
[32m+[m[32m                src="https://www.youtube.com/embed/cSL0O2KJcWc?si=Hjq0LHhx5ZH9Ia9W"[m
[32m+[m[32m                title="Présentation Librairie Puissance Divine"[m
[32m+[m[32m                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"[m
[32m+[m[32m                allowFullScreen[m
[32m+[m[32m                className="intro-video"[m
[32m+[m[32m                style={{width: "100%","height": "400px"}}[m
[32m+[m[32m            />[m
[32m+[m[32m        </div>[m
[32m+[m[32m    );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default IntroVideo;[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/demo.css b/app/retraites-spirituelles-bolobi/_/demo.css[m
[1mnew file mode 100644[m
[1mindex 0000000..042a6a4[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/demo.css[m
[36m@@ -0,0 +1,100 @@[m
[32m+[m[32mhtml, body {[m
[32m+[m[32m    font: 16px 'Open Sans', Arial, sans-serif[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mpre, code {[m
[32m+[m[32m    font: 17px 'Inconsolata', monospace;[m
[32m+[m[32m    color: #333;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mpre {[m
[32m+[m[32m    background: none repeat scroll 0 0 #f8f8f8;[m
[32m+[m[32m    border: 1px solid #e5e5e5;[m
[32m+[m[32m    padding: 8px 15px;[m
[32m+[m[32m    overflow: auto;[m
[32m+[m[32m    border-radius: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mh1, h2 {[m
[32m+[m[32m    text-align: center[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mp {[m
[32m+[m[32m    font-size: 16px;[m
[32m+[m[32m    clear: both[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtable {[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    border: solid 1px #4183C4;[m
[32m+[m[32m    border-collapse: collapse;[m
[32m+[m[32m    font-size: 13px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtable th {[m
[32m+[m[32m    color: #4183C4;[m
[32m+[m[32m    background-color: #e8e8e8;[m
[32m+[m[32m    text-align: left[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mtable th, table td {[m
[32m+[m[32m    border: solid 1px #4183C4;[m
[32m+[m[32m    padding: 3px 5px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mimg {[m
[32m+[m[32m    border: 0[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.wrapper {[m
[32m+[m[32m    width: 800px;[m
[32m+[m[32m    margin: 0 auto[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.heading {[m
[32m+[m[32m    color: #4183C4[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.note {[m
[32m+[m[32m    font-size: 13px;[m
[32m+[m[32m    line-height: 27px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.code {[m
[32m+[m[32m    background-color: #4183C4;[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m    padding: 0 5px;[m
[32m+[m[32m    border-radius: 2px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-preview.example {[m
[32m+[m[32m    border: solid 1px #555;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    line-height: 30px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-info {[m
[32m+[m[32m    float: left;[m
[32m+[m[32m    border: solid 1px #ccc;[m
[32m+[m[32m    width: 200px;[m
[32m+[m[32m    height: 133px;[m
[32m+[m[32m    clear: left;[m
[32m+[m[32m    margin-top: -4px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-thumb-wrapper.demo {[m
[32m+[m[32m    float: left;[m
[32m+[m[32m    padding: 0;[m
[32m+[m[32m    margin: 0;[m
[32m+[m[32m    top: 1px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#preview1 {[m
[32m+[m[32m    width: 400px;[m
[32m+[m[32m    height: 267px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#preview2 {[m
[32m+[m[32m    width: 400px;[m
[32m+[m[32m    height: 267px[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/magnifier.css b/app/retraites-spirituelles-bolobi/_/magnifier.css[m
[1mnew file mode 100644[m
[1mindex 0000000..04c29b2[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/magnifier.css[m
[36m@@ -0,0 +1,63 @@[m
[32m+[m[32m.magnifier-thumb-wrapper {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    left: 0[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-lens {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    border: solid 1px #ccc;[m
[32m+[m[32m    z-index: 1000;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    left: 0;[m
[32m+[m[32m    overflow: hidden[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-loader {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    left: 0;[m
[32m+[m[32m    border: solid 1px #ccc;[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    background: transparent;[m
[32m+[m[32m    background: rgba(50, 50, 50, 0.5);[m
[32m+[m[32m    z-index: 1000;[m
[32m+[m[32m    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F323232,endColorstr=#7F323232)";[m
[32m+[m[32m    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#7F323232,endColorstr=#7F323232)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-loader-text {[m
[32m+[m[32m    font: 13px Arial;[m
[32m+[m[32m    margin-top: 10px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-large {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    z-index: 100[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-preview {[m
[32m+[m[32m    padding: 0;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    height: 150px;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    overflow: hidden[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.magnifier-preview img {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    left: 0[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.opaque {[m
[32m+[m[32m    opacity: .5;[m
[32m+[m[32m    filter: alpha(opacity=50);[m
[32m+[m[32m    -ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=50)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hidden {[m
[32m+[m[32m    display: none[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/_/swappy_radio.module.scss b/app/retraites-spirituelles-bolobi/_/swappy_radio.module.scss[m
[1mnew file mode 100644[m
[1mindex 0000000..170812a[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/_/swappy_radio.module.scss[m
[36m@@ -0,0 +1,72 @@[m
[32m+[m[32m/*[m
[32m+[m[32mce serait intéressant mais, les module ne prennent pas en compte les sélecteurs imbriqués:[m
[32m+[m[32mVOICI LA RÉPONSE DE CHATGPT:[m
[32m+[m
[32m+[m[32mDans votre exemple, vous utilisez des sélecteurs imbriqués dans votre fichier CSS module. Malheureusement, les modules CSS générés par défaut avec Create React App ou Webpack ne prennent pas en charge les sélecteurs imbriqués de cette manière. Les modules CSS généralement générés fournissent des noms de classes uniques pour chaque sélecteur, mais ils ne prennent pas en charge les sélecteurs imbriqués tels que les sélecteurs enfants (>).[m
[32m+[m
[32m+[m[32mPour obtenir le résultat souhaité, vous pouvez utiliser une autre approche comme Styled Components, qui offre une syntaxe similaire aux sélecteurs CSS imbriqués.[m
[32m+[m[32m*/[m
[32m+[m
[32m+[m[32m.radioLabel{[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    flex:1;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    // padding-left: 4rem;[m
[32m+[m[32m    margin: 1.5rem 0;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    font-size: 2rem;[m
[32m+[m[32m    user-select: none;[m
[32m+[m[32m    color: #555;[m
[32m+[m[32m    &:hover>input~span.radio{[m
[32m+[m[32m      //using opacity for hover effect, because background is used (amd delayed!) for the shuffle[m
[32m+[m[32m      opacity: 0.8;[m
[32m+[m[32m    }[m
[32m+[m[32m    input{[m
[32m+[m[32m      position: absolute;[m
[32m+[m[32m      opacity: 0;[m
[32m+[m[32m      cursor: pointer;[m
[32m+[m[32m      height: 0;[m
[32m+[m[32m      width: 0;[m
[32m+[m[32m      &:checked {[m
[32m+[m[32m        ~span{[m
[32m+[m[32m          color: #0bae72;[m
[32m+[m[32m          transition: color .5s;[m
[32m+[m[32m          &.radio {[m
[32m+[m[32m            background-color: #0ac07d;[m
[32m+[m[32m            opacity: 1!important;[m
[32m+[m[32m            &::after {[m
[32m+[m[32m              opacity: 1;[m
[32m+[m[32m              //applying in JS, so as not to make selections delayed when no js:[m
[32m+[m[32m              // transition: opacity 0s 0.75s;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    .oko{color:blue;}[m
[32m+[m[32m    >span{[m
[32m+[m[32m      &.radio {[m
[32m+[m[32m        position: absolute;[m
[32m+[m[32m        top: 0;[m
[32m+[m[32m        left: calc(50% - 1.25rem);[m
[32m+[m[32m        height: 2.5rem;[m
[32m+[m[32m        width: 2.5rem;[m
[32m+[m[32m        background: #c9ded6;[m
[32m+[m[32m        border-radius: 50%;[m
[32m+[m[32m        &::after {[m
[32m+[m[32m          display: block;[m
[32m+[m[32m          content: '';[m
[32m+[m[32m          position: absolute;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m          top: .5rem;[m
[32m+[m[32m          left: .5rem;[m
[32m+[m[32m          width: 1.5rem;[m
[32m+[m[32m          height: 1.5rem;[m
[32m+[m[32m          border-radius: 50%;[m
[32m+[m[32m          background: #fff;[m
[32m+[m[32m          //applying in JS, so as not to make selections delayed when no js:[m
[32m+[m[32m          // transition: opacity 0s 0.75s;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/layout.js b/app/retraites-spirituelles-bolobi/layout.js[m
[1mnew file mode 100644[m
[1mindex 0000000..6ece0de[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/layout.js[m
[36m@@ -0,0 +1,8 @@[m
[32m+[m[32mexport const metadata = {[m
[32m+[m[32m  title: "Sanctuaire ND Rosaire Bolobi - Retraites spirituelles, cérémonies comme mariages et baptêmes, lieu de repos, Abidjan",[m
[32m+[m[32m  description: "À 1H d'abidjan, le Sanctuaire Notre Dame du Rosaire de Bolobi, propose lieu d'hébergements et facilités d'équipements pour retraites spirituels oecuménistes, célébrations de mariages et baptêmes, et bien d'autres activités, Abidjan Côte d'ivoire",[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default function Layout({ children }) {[m
[32m+[m[32m  return children[m
[32m+[m[32m}[m
[1mdiff --git a/app/retraites-spirituelles-bolobi/page.jsx b/app/retraites-spirituelles-bolobi/page.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..25cfbb6[m
[1m--- /dev/null[m
[1m+++ b/app/retraites-spirituelles-bolobi/page.jsx[m
[36m@@ -0,0 +1,48 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport { useContext, memo, useMemo } from 'react'[m
[32m+[m[32mimport AuthContext from "../../stores/authContext.js"[m
[32m+[m[32mimport Article from "./_/Article.jsx"[m
[32m+[m[32mimport Carousel from '../_/Carousel'[m
[32m+[m[32mimport LocateBolobi from "./_/LocateBolobi.jsx"[m
[32m+[m[32m// import ReserveForm from "./_/ReserveForm/index.jsx"[m
[32m+[m[32mimport ReserveForm_ from "./_/ReserveForm_copy/index.jsx"[m
[32m+[m[32mimport BlogCategory from '../_/Blog/BlogCategory'[m
[32m+[m
[32m+[m
[32m+[m[32mconst BtnCTA = ()=>{[m
[32m+[m[32m    return <div className="form_cta_fixed_btns">[m
[32m+[m[32m        <button>WhatsApp</button>[m
[32m+[m[32m        <button>Formulaire</button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mconst SanctuaireContent = memo(({ diapos, categoryPosts, headings }) => ([m
[32m+[m[32m    <main className="sanctuaire_ndr">[m
[32m+[m[32m        <Article />[m
[32m+[m[32m        <Carousel page="sanctuaire" diapos={diapos} titre={"LE SANCTUAIRE DE BOLOBI EN IMAGES"} icon="2" sommaire="La grotte Mariale de notre dame du Rosaire de Bolobi" />[m
[32m+[m[32m        <LocateBolobi />[m
[32m+[m[32m        {/* <ReserveForm /> */}[m
[32m+[m[32m        <ReserveForm_ />[m
[32m+[m[32m        <BtnCTA />[m
[32m+[m[32m        {/* <BlogCategory {...{ categoryPosts, headings, className: "sndr" }} /> */}[m
[32m+[m[32m    </main>[m
[32m+[m[32m));[m
[32m+[m
[32m+[m[32mexport default function LieuxActivites() {[m
[32m+[m[32m    const { data } = useContext(AuthContext)[m
[32m+[m[32m    const { categoryPosts, diapos } = data[m
[32m+[m
[32m+[m[32m    const headings = useMemo(() => ({[m
[32m+[m[32m      h3: "CATÉGORIE: \"SANCTUAIRE NOTRE DAME DU ROSAIRE DE BOLOBI\""[m
[32m+[m[32m    }), []);[m
[32m+[m
[32m+[m[32m    return useMemo(() => ([m
[32m+[m[32m        <SanctuaireContent[m[41m [m
[32m+[m[32m            diapos={diapos}[m[41m [m
[32m+[m[32m            categoryPosts={categoryPosts}[m[41m [m
[32m+[m[32m            headings={headings}[m[41m [m
[32m+[m[32m        />[m
[32m+[m[32m    ), [diapos, categoryPosts, headings]);[m
[32m+[m[32m}[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[1mindex 1b8315f..a752f92 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[36m@@ -2,17 +2,22 @@[m
 [m
 import Link from "next/link";[m
 import Cards from "./Cards";[m
[32m+[m[32mimport IntroVideo from './components/IntroVideo'[m
 [m
 [m
 [m
 [m
 export default function Article() {[m
     return <article>[m
[31m-        <h3 id="firstH3" data-icon="1">Bienvenue au Sanctuaire Notre Dame du Rosaire à Bolobi, Abidjan, Côte d'Ivoire</h3>[m
[32m+[m[32m        <h3>Itinéraire vidéo vers le Sanctuaire notre Dame Raosaire Bolobi</h3>[m
[32m+[m[32m        <p>Situé sur l'<b>axe routier Abidjan-Adzopé</b>, cette vidéo explique <b>comment se rendre au <u>Sanctuaire Notre Dame du Rosaire de Bolobi</u></b>.</p>[m
[32m+[m[32m        <IntroVideo />[m
 [m
 [m
[31m-        {/* <iframe width="560" height="315" src="https://www.youtube.com/embed/Yv3BHtHt3Pg?si=e2Kepaxuk2NhGbK1" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe> */}[m
 [m
[32m+[m[32m        <h3 id="firstH3" data-icon="1">Bienvenue au Sanctuaire Notre Dame du Rosaire à Bolobi, Abidjan, Côte d'Ivoire</h3>[m
[32m+[m
[32m+[m[32m        {/* <iframe width="560" height="315" src="https://www.youtube.com/embed/Yv3BHtHt3Pg?si=e2Kepaxuk2NhGbK1" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe> */}[m
 [m
         <p>Si vous êtes à la recherche d'<b>un lieu de paix, de prière et de recueillement au cœur de la nature</b>, le <Link href="#">Sanctuaire Notre Dame du Rosaire à Bolobi</Link> est l'endroit idéal pour vous.</p>[m
         <p>Niché dans les magnifiques collines verdoyantes du <b>diocèse d'Agboville</b>, en périphérie du grand Abidjan sur la <b>route Abidjan-Adzopé</b>, s'étendant sur 18Ha, ce sanctuaire chrétien offre une expérience spirituelle apaisante et unique.</p>[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetDate.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetDate.jsx[m
[1mindex 3bdf849..54e7e6e 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetDate.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetDate.jsx[m
[36m@@ -5,7 +5,7 @@[m [mimport moment from "moment"[m
 [m
 moment.locale('fr')[m
 [m
[31m-export default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiffDuAu}) {[m
[32m+[m[32mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiffDuAu, handleFieldsetValidation}) {[m
     const [isWeek, setIsWeek] = useState(false)[m
     , onFocus = e => e.target.showPicker()[m
     , onChange = e => {[m
[36m@@ -13,12 +13,14 @@[m [mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiff[m
         , span = e.target.parentNode.querySelector("label[for="+e.target.id+"] span")[m
         , tmp = moment(e.target.value)[m
         span.innerHTML = tmp.format('LL')[m
[32m+[m[41m        [m
[32m+[m[32m        // document.querySelector(".dates div:last-of-type>b").innerHTML = ((du.value && au.value) && (!zero_night.checked))[m[41m [m
[32m+[m[32m        document.querySelector(".dates div b").innerHTML[m
[32m+[m[32m            = ((du.value && au.value) && (!zero_night.checked))[m[41m [m
[32m+[m[32m                ? dateDiffDuAu().day[m
[32m+[m[32m                : 0[m
 [m
[31m-        document.querySelector(".dates div:last-of-type>b").innerHTML = (du.value && au.value) [m
[31m-            ? dateDiffDuAu().day[m
[31m-            : 0[m
[31m-[m
[31m-        handleDateChange()[m
[32m+[m[32m        handleDateChange(zero_night.checked&&true)[m
     }[m
     , weekSelection = (e,weekNum) => {[m
         [m
[36m@@ -29,7 +31,7 @@[m [mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiff[m
         document.querySelector(".dates div b").innerHTML = 2[m
 [m
         document.querySelector(".dates ul li.on")?.classList.remove('on')[m
[31m-        e.target.classList.add('on')[m
[32m+[m[32m        e.target.closest('li').classList.add('on')[m
 [m
         du.value = range[0][m
         onChange(e1)[m
[36m@@ -105,7 +107,7 @@[m [mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiff[m
                 document.querySelector("li"+(tmp&&"."+e.target.className)).click()[m
             })[m
         })[m
[31m-        document.querySelector('fieldset.datepicker>article.dates>div').removeAttribute('style')[m
[32m+[m[32m        document.querySelector('fieldset.recap>article.dates>div').removeAttribute('style')[m
 [m
         // Initialiser les dates avec la semaine courante[m
         const e = { target: document.querySelector('li.on') };[m
[36m@@ -114,23 +116,48 @@[m [mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiff[m
         }[m
     }, [])[m
     [m
[31m-    return <fieldset className="active dates">[m
[32m+[m[32m    return <fieldset className="dates">[m
         <h4 onClick={toggleFormNdrImg}>Choisir une période (du DD/MM/YYYY au DD/MM/YYYY): </h4>[m
         [m
         <p>Vous pouvez choisir une tranche de dates de votre spécifique, ou alors sélectionner un numéro de semaine (cas fréquent pour les retraites de groupe)</p>[m
         [m
[32m+[m[32m        <div className="zero_night_box">[m
[32m+[m[32m            <p>SI VOUS NE RÉSERVEZ <u>AUCUNE NUÎTÉ</u>, ALORS <u>COCHEZ CETTE CASE</u>:</p>[m
[32m+[m[32m            <div><input type="checkbox" className="safe" name="zero_night" id="zero_night"[m
[32m+[m[32m            onChange={[m
[32m+[m[32m                e=>{[m
[32m+[m[32m                    document.querySelector(".dates div b").innerHTML="0"[m
[32m+[m[32m                    if(zero_night.checked){[m
[32m+[m[32m                        du.value=""[m
[32m+[m[32m                        du.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                        au.value=""[m
[32m+[m[32m                        au.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                    }else{[m
[32m+[m[32m                        le.value=""[m
[32m+[m[32m                        le.previousElementSibling.querySelector("span").innerHTML=""[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m            }[m
[32m+[m[32m             /></div>[m
[32m+[m[32m            <div>[m[41m    [m
[32m+[m[32m                <p>Choisir le jour de réservation: </p>[m[41m            [m
[32m+[m[32m                <label htmlFor="le"><span></span></label>[m
[32m+[m[32m                <input type="date" id="le" name="le" {...{onChange, onFocus}}/>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
         <div>[m
             <label htmlFor="du"><span></span></label>[m
[31m-            <input type="date" id="du" name="du" {...{onChange, onFocus}} required />[m
[32m+[m[32m            <input type="date" id="du" name="du" {...{onChange, onFocus}} />[m
             <label htmlFor="au"><span></span></label>[m
[31m-            <input type="date" id="au" name="au" {...{onChange, onFocus}} required />[m
[32m+[m[32m            <input type="date" id="au" name="au" {...{onChange, onFocus}} />[m
         </div>[m
 [m
         <ul onMouseOver={e => {e.target.querySelector('li.on')?.scrollIntoView({ behavior: "smooth", block: "center"})}}>[m
             <li>Weekends semaines {new Date().getFullYear()}: </li>[m
             {weeks_list.map((elt,i) => (i>=currentWeekNum) && <li [m
                     key={i} [m
[31m-                    onClick={ e=>weekSelection(e,i) } [m
[32m+[m[32m                    onClick={ e=>weekSelection(e,i+"") }[m[41m [m
                     className={currentWeekNum==i ? "on" : ""} [m
                 >[m
                     <span>{i}</span>[m
[36m@@ -139,5 +166,37 @@[m [mexport default function fieldsetDate({handleDateChange,toggleFormNdrImg,dateDiff[m
             )}[m
         </ul>[m
         <div>Nombre de nuits: <b>0</b></div>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            const dateDebut = document.querySelector('#du')?.value;[m
[32m+[m[32m            const dateFin = document.querySelector('#au')?.value;[m
[32m+[m[32m            const dateLe = document.querySelector('#le')?.value;[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si les deux dates sont remplies[m
[32m+[m[32m            if(zero_night.checked){[m
[32m+[m[32m                if(!dateLe){[m
[32m+[m[32m                    alert('Veuillez sélectionner une date pour votre évènement.');[m
[32m+[m[32m                    return;[m
[32m+[m[32m                  }[m
[32m+[m[32m            }else if (!dateDebut || !dateFin) {[m
[32m+[m[32m              alert('Veuillez sélectionner les dates de début et de fin');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si la date de fin est après la date de début[m
[32m+[m[32m            if (new Date(dateFin) <= new Date(dateDebut)) {[m
[32m+[m[32m              alert('La date de fin doit être après la date de début');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si tout est valide, appeler handleFieldsetValidation[m
[32m+[m[32m            handleFieldsetValidation('dates');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
     </fieldset>[m
 }[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetInfos.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetInfos.jsx[m
[1mindex 0507872..7cb17df 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetInfos.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetInfos.jsx[m
[36m@@ -2,11 +2,11 @@[m [mimport { useState,useEffect } from 'react';[m
 import { FaUser, FaPhone, FaEnvelope, FaBuilding } from 'react-icons/fa';[m
 import { SignInButton,SignedOut,useUser } from "@clerk/nextjs"[m
 [m
[31m-export default function FieldsetInfos({ toggleFormNdrImg }) {[m
[32m+[m[32mexport default function FieldsetInfos({ toggleFormNdrImg, handleFieldsetValidation }) {[m
     const [infos, setInfos] = useState({[m
[31m-        community: '',[m
[32m+[m[32m        community: 'aaa',[m
         names: '',[m
[31m-        phone_number: '',[m
[32m+[m[32m        phone_number: '0704763132',[m
         email: ''[m
     })[m
     , { user } = useUser()[m
[36m@@ -21,7 +21,7 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
                 ...prevInfos,[m
                 names: user.fullName || '',[m
                 email: user.primaryEmailAddress?.emailAddress || '',[m
[31m-                phone_number: user.phoneNumbers?.[0] || '',[m
[32m+[m[32m                phone_number: user.phoneNumbers?.[0] || prevInfos.phone_number,[m
                 // La communauté n'est généralement pas disponible dans les données utilisateur par défaut[m
                 community: user.publicMetadata?.community || prevInfos.community[m
             }))[m
[36m@@ -32,8 +32,11 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
         const { name, value } = e.target;[m
         setInfos(prevInfos => {[m
             [m
[31m-            if(infos["community"])[m
[31m-                document.querySelector("article.infos>b").innerHTML = "Communauté: <b>"+infos["community"]+"</b>"[m
[32m+[m[32m            // if(infos["community"])[m
[32m+[m[32m            if(name=="community")[m
[32m+[m[32m                // document.querySelector("article.infos>b").innerHTML = "Communauté: <b>"+infos["community"]+"</b>"[m
[32m+[m[32m                document.querySelector("article.infos>b").innerHTML = "Communauté: <b>"+value+"</b>"[m
[32m+[m
             return {[m
                 ...prevInfos,[m
                 [name]: value[m
[36m@@ -43,10 +46,10 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
     };[m
 [m
     return ([m
[31m-        <fieldset className="infos card mb-4 position-relative">[m
[32m+[m[32m        <fieldset className="active infos card mb-4 position-relative">[m
             {/* {JSON.stringify(infos)} */}[m
             <h4 className="mb-0">Informations générales</h4>[m
[31m-            <h5>Nous attendrons le <b>paiment wave</b> via le numéro mentionné ci-dessous,</h5>[m
[32m+[m[32m            <h5>Nous attendrons le <b>paiment wave</b> ou <b>OrangeMoney</b> via le numéro ci-mentionné,</h5>[m
             <h5>Nous vous enverrons un <b>email de confirmation</b> à l'adresse mentionné ci-dessous</h5>[m
             <div>[m
                 {!user ? <>[m
[36m@@ -67,7 +70,6 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
                         type="text" [m
                         className="form-control" [m
                         id="community" [m
[31m-                        required [m
                         name="community" [m
                         value={infos.community}[m
                         onChange={handleInputChange}[m
[36m@@ -83,7 +85,6 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
                         className="form-control" [m
                         id="names" [m
                         name="names" [m
[31m-                        required [m
                         value={infos.names}[m
                         onChange={handleInputChange}[m
                     />[m
[36m@@ -99,7 +100,6 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
                         // pattern="/^(\+225)?\d{8}$/" [m
                         id="phone_number" [m
                         name="phone_number" [m
[31m-                        required [m
                         value={infos.phone_number}[m
                         onChange={handleInputChange}[m
                     />[m
[36m@@ -107,19 +107,60 @@[m [mexport default function FieldsetInfos({ toggleFormNdrImg }) {[m
                 <div className="mb-3">[m
                     <label htmlFor="email" className="form-label d-flex align-items-center">[m
                         <FaEnvelope className="me-2" />[m
[31m-                        Email de contact[m
[32m+[m[32m                        Email de contact[m[41m [m
[32m+[m[32m                        {/* <span className="text-danger">*</span> */}[m
                     </label>[m
                     <input [m
                         type="email" [m
                         className="form-control" [m
                         id="email" [m
[31m-                        required [m
                         name="email" [m
                         value={infos.email}[m
                         onChange={handleInputChange}[m
                     />[m
                 </div>[m
             </div>[m
[32m+[m[32m            <button[m[41m [m
[32m+[m[32m              className="validate-button"[m
[32m+[m[32m              onClick={(e) => {[m
[32m+[m[32m                e.preventDefault();[m
[32m+[m[41m                [m
[32m+[m[32m                const names = document.querySelector('#names')?.value?.trim();[m
[32m+[m[32m                const phone = document.querySelector('#phone_number')?.value?.trim();[m
[32m+[m[32m                const email = document.querySelector('#email')?.value?.trim();[m
[32m+[m[32m                const community = document.querySelector('#community')?.value?.trim();[m
[32m+[m[41m                [m
[32m+[m[32m                // Vérifier si le nom est rempli[m
[32m+[m[32m                if (!names) {[m
[32m+[m[32m                  alert('Veuillez entrer votre nom');[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[32m                // Vérifier si le nom de la community est rempli[m
[32m+[m[32m                if (!community) {[m
[32m+[m[32m                  alert('Veuillez entrer le nom de votre communauté');[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[41m                [m
[32m+[m[32m                // Vérifier si le numéro de téléphone est valide[m
[32m+[m[32m                const phoneRegex = /^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/;[m
[32m+[m[32m                if (!phone || !phoneRegex.test(phone)) {[m
[32m+[m[32m                  alert('Veuillez entrer un numéro de téléphone valide');[m
[32m+[m[32m                  return;[m
[32m+[m[32m                }[m
[32m+[m[41m                [m
[32m+[m[32m                // Vérifier si l'email est valide[m
[32m+[m[32m                // const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;[m
[32m+[m[32m                // if (!email || !emailRegex.test(email)) {[m
[32m+[m[32m                //   alert('Veuillez entrer une adresse email valide');[m
[32m+[m[32m                //   return;[m
[32m+[m[32m                // }[m
[32m+[m[41m                [m
[32m+[m[32m                // Si toutes les validations passent[m
[32m+[m[32m                handleFieldsetValidation('infos');[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              Valider[m
[32m+[m[32m            </button>[m
             <div className="cross-image d-none d-lg-block">[m
             </div>[m
         </fieldset>[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetLocation.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetLocation.jsx[m
[1mindex fd4732d..ea351bf 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetLocation.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetLocation.jsx[m
[36m@@ -1,8 +1,10 @@[m
 "use client"[m
 [m
 import { useState, useEffect } from "react"[m
[32m+[m[32mimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'[m
[32m+[m[32mimport { faBed,faUsers } from '@fortawesome/free-solid-svg-icons'[m
 [m
[31m-export default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange, onIndividualRoomChange, participants, individualRoomParticipants}) {[m
[32m+[m[32mexport default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange, onIndividualRoomChange, participants, individualRoomParticipants, handleFieldsetValidation}) {[m
     const [isnotZeroParticipant, setIsnotZeroParticipant] = useState(0)[m
     const [isApproximateCount, setIsApproximateCount] = useState(false)[m
 [m
[36m@@ -42,7 +44,7 @@[m [mexport default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange[m
                         checked={isApproximateCount}[m
                         onChange={(e) => setIsApproximateCount(e.target.checked)}[m
                     />[m
[31m-                    <i><b>*</b> Estimation <strong>{isApproximateCount ? "approximative" : "précise"}</strong> du nombre de participants <b>active</b></i>[m
[32m+[m[32m                    <i><b>*</b> Estimation <strong>{isApproximateCount ? "approximative" : "précise"}</strong> du nombre de participants.</i>[m
                 </label>[m
             </div>[m
 [m
[36m@@ -60,6 +62,7 @@[m [mexport default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange[m
                         onChange={onChangeParticipants} [m
                     />[m
                     <button type="button" onClick={e => {onChangeParticipants(e,parseInt(participants)+1)}}>+</button>[m
[32m+[m[32m                    <FontAwesomeIcon icon={faUsers} title="Nombre total de participants" />[m
                 </div>[m
             </div>[m
 [m
[36m@@ -85,23 +88,60 @@[m [mexport default function FieldsetLocation({toggleFormNdrImg, onParticipantsChange[m
                 </div>[m
             </div>[m
 [m
[32m+[m[32m            <p>Vous pouvez réserver jusqu'à 7 chambres individuelles: </p>[m
[32m+[m
             <label htmlFor="chambre" className="radioLabel safe">[m
[31m-                <span>Chambre Individuel <b>(<b>10000Fcfa</b>/personne la nuité)</b></span>[m
[31m-                <div>[m
[32m+[m[32m                <span>Chambre Individuel <b>(<b>10000Fcfa</b> la nuité)</b></span>[m
[32m+[m[32m                <div className="custom-number-input">[m
[32m+[m[32m                    <button type="button" onClick={e => {onIndividualRoomChange(parseInt(individual_room_participants.value)-1)}}>-</button>[m
                     <input [m
                         id="individual_room_participants" [m
                         type="number" [m
                         name="individual_room_participants" [m
[31m-                        max={participants} [m
[32m+[m[32m                        // max={participants}[m[41m [m
[32m+[m[32m                        max={7}[m[41m [m
                         min="0" [m
                         value={individualRoomParticipants}[m
                         onChange={e => {[m
                             onIndividualRoomChange(e.target.value)[m
                         }} [m
                     />[m
[32m+[m[32m                    <button type="button" onClick={e => {onIndividualRoomChange(parseInt(individual_room_participants.value)+1)}}>-</button>[m
[32m+[m[32m                    <label htmlFor="individual_room_participants" title="chambres individuelles"><FontAwesomeIcon icon={faBed} /></label>[m
                 </div>[m
[31m-                <label htmlFor="individual_room_participants">chambres</label>[m
             </label>[m
         </section>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            const totalParticipants = parseInt(document.querySelector('#participants')?.value || '0');[m
[32m+[m[32m            const individualRooms = parseInt(document.querySelector('#individual_room_participants')?.value || '0');[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre total de participants est valide[m
[32m+[m[32m            if (totalParticipants <= 0) {[m
[32m+[m[32m              alert('Le nombre total de participants doit être supérieur à 0');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre de chambres individuelles est valide[m
[32m+[m[32m            if (individualRooms < 0) {[m
[32m+[m[32m              alert('Le nombre de chambres individuelles ne peut pas être négatif');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si le nombre de chambres individuelles n'excède pas le nombre total de participants[m
[32m+[m[32m            if (individualRooms > totalParticipants) {[m
[32m+[m[32m              alert('Le nombre de chambres individuelles ne peut pas être supérieur au nombre total de participants');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si toutes les validations passent[m
[32m+[m[32m            handleFieldsetValidation('location');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
     </>[m
 }[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetMeal.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetMeal.jsx[m
[1mindex 8d79544..af73e88 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetMeal.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetMeal.jsx[m
[36m@@ -8,7 +8,7 @@[m [mconst mealOptions = {[m
     dinner: ["APF", "Tchep", "Kedjenou"][m
 };[m
 [m
[31m-export default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, onMealPlanChange, onCustomMealChange}) {[m
[32m+[m[32mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, onMealPlanChange, onCustomMealChange, handleFieldsetValidation}) {[m
     const [isMealIncluded, setIsMealIncluded] = useState(false);[m
     const [mealPlan, setMealPlan] = useState(""); [m
     const [customMeal, setCustomMeal] = useState({[m
[36m@@ -21,6 +21,9 @@[m [mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, o[m
         lunch: false,[m
         dinner: false[m
     });[m
[32m+[m[32m    const [showFlash, setShowFlash] = useState(false);[m
[32m+[m[32m    const [flashMessage, setFlashMessage] = useState("");[m
[32m+[m[32m    const [flashType, setFlashType] = useState("");[m
 [m
     // Notifier le parent des changements de repas[m
     useEffect(() => {[m
[36m@@ -150,6 +153,30 @@[m [mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, o[m
     const lunchColumn = generateMealColumn("lunch", mealOptions.lunch);[m
     const dinnerColumn = generateMealColumn("dinner", mealOptions.dinner);[m
 [m
[32m+[m[32m    const handleValidate = () => {[m
[32m+[m[32m        const oneMeal = document.querySelector('input[name="one_meal"]');[m
[32m+[m[32m        const twoMeals = document.querySelector('input[name="two_meals"]');[m
[32m+[m[41m                [m
[32m+[m[32m        if(!document.querySelector('input[name="meal_included"]').checked){[m
[32m+[m[32m            // const mealConfirm = confirm('Voulez-vous vraiment NE PAS commander un repas pour votre séjour ?')[m
[32m+[m[32m            const mealConfirm = true[m
[32m+[m[32m            console.log("mealConfirm:",mealConfirm);[m
[32m+[m[32m            if(mealConfirm){[m
[32m+[m[32m                handleFieldsetValidation('meal');[m
[32m+[m[32m            }else {[m[41m                [m
[32m+[m[32m                setShowFlash(true);[m
[32m+[m[32m                setFlashMessage("Validez vos choix de restauration avant de réessayer");[m
[32m+[m[32m                setFlashType("warning");[m
[32m+[m[32m            }[m
[32m+[m[32m        } else if(oneMeal.checked || twoMeals.checked) {[m
[32m+[m[32m            handleFieldsetValidation('meal');[m
[32m+[m[32m        } else {[m
[32m+[m[32m            setShowFlash(true);[m
[32m+[m[32m            setFlashMessage("Vous avez choisi \"AVEC Repas\"\nVeuillez alors sélectionner votre formule: \n1repas ou 2repas ?");[m
[32m+[m[32m            setFlashType("warning");[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m
     return <>[m
         {/* {JSON.stringify(customMeal)} */}[m
         <style jsx>{`[m
[36m@@ -234,10 +261,15 @@[m [mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, o[m
                 padding: 1rem;[m
                 background-color: #f8f9fa;[m
                 border-radius: 0.25rem;[m
[32m+[m[32m                width: 50%;[m
[32m+[m[32m                align-self: center;[m
[32m+[m[32m                border: 1px solid;[m
[32m+[m[32m                box-shadow: 0 0 10px 1px;[m
[32m+[m[32m                padding: 1em 3em;[m
             }[m
 [m
             .mealPlanOptions h5 {[m
[31m-                margin-bottom: 0.5rem;[m
[32m+[m[32m                margin: 1.5rem .5rem;[m
                 color: #495057;[m
             }[m
 [m
[36m@@ -254,19 +286,20 @@[m [mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, o[m
                     width: 100%;[m
                 }[m
             }[m
[31m-        `}</style>[m
[32m+[m[32m        `}</style>[m[41m [m
         <fieldset className="meal">[m
             <h4 onClick={toggleFormNdrImg}>Choisir si vous souhaitez que les repas vous soient préparés: </h4>[m
             <h5>Vous pouvez <u><b>soit préparer vous-même</b> vos repas</u> au refectoire du santuaire, <u><b>soit commander</b> votre repas</u> à la cuisine du sanctuaire.</h5>[m
             <h5>Si vous préparez vous-même, tous les outils de cuisine et de dégustation sont à votre disposition (marmite, casserols, couteaux, etc...)</h5>[m
             <h5>il faut juste prévoir <u><b>VOTRE</b> propre bouteille de gaz</u></h5>[m
[32m+[m[32m            <p>CHOISIR <u><b>AVEC</b> OU <b>SANS</b></u> REPAS: (<i><u>sans repas</u> par défaut</i>)</p>[m
             <SectionCheckboxStyled>[m
                 <label htmlFor="meal">[m
                     <input type="checkbox" id="meal" name="meal_included" onChange={handleMealChange} />[m
[31m-                    <span>Repas Inclus 🍔 😋 🍲</span>[m
[32m+[m[32m                    <span><span>Avec Repas</span> <span>🍔 😋 🍲</span></span>[m
                     <i className="indicator">[m
                         <svg version="1.1" id="toggle" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"[m
[31m-                            viewBox="0 0 33 33" xmlSpace="preserve"[m
[32m+[m[32m                            viewBox="0 0 55 55" xmlSpace="preserve"[m
                         >[m
                             <path className="circ path" style={{ fill: "none", strokeWidth: 3, strokeLinejoin: "round", strokeMiterlimit: 10 }} d="M6.2,6.2L6.2,6.2[m
                     c-5.7,5.7-5.7,14.8,0,20.5l0,0c5.7,5.7,14.8,5.7,20.5,0l0,0c5.7-5.7,5.7-14.8,0-20.5l0,0C21.1,0.6,11.9,0.6,6.2,6.2z"[m
[36m@@ -278,18 +311,42 @@[m [mexport default function FieldsetMeal({SectionCheckboxStyled, toggleFormNdrImg, o[m
                             />[m
                         </svg>[m
                     </i>[m
[31m-                    <span>Sans repas 🚫</span>[m
[32m+[m[32m                    <span>Sans Repas 🚫</span>[m
                 </label>[m
             </SectionCheckboxStyled>[m
[32m+[m[32m            <p>[m
[32m+[m[32m                {isMealIncluded && <>Vous avez choisi <span>AVEC <span className={!mealPlan&&"alert"}>{mealPlan || "0"}</span> repas</span></>}[m
[32m+[m[32m                {!isMealIncluded && <>Vous avez choisi <span>SANS repas</span></>}[m
[32m+[m[32m            </p>[m
             {isMealIncluded && ([m
                 <MealPlanOptions mealPlan={mealPlan} handleMealPlanChange={handleMealPlanChange} />[m
             )}[m
[31m-            {isMealIncluded && mealPlan && ([m
[32m+[m
[32m+[m[41m            [m
[32m+[m[32m            {/* POUR INCLURE LES REPAS (QUE MAMAN N'A PAS VOULU INCLURE)*/}[m
[32m+[m[32m            {/* {isMealIncluded && mealPlan && ([m
                 <div className="mealOptions">[m
                     {breakfastColumn}[m
                     {mealPlan >= 2 && lunchColumn}[m
                     {dinnerColumn}[m
                 </div>[m
[32m+[m[32m            )} */}[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m            <button[m[41m [m
[32m+[m[32m              className="validate-button"[m
[32m+[m[32m              onClick={(e) => {[m
[32m+[m[32m                e.preventDefault();[m
[32m+[m[32m                handleValidate();[m
[32m+[m[32m              }}[m
[32m+[m[32m            >[m
[32m+[m[32m              Valider[m
[32m+[m[32m            </button>[m
[32m+[m[32m            {showFlash && ([m
[32m+[m[32m                <div className={`alert alert-${flashType}`} role="alert">[m
[32m+[m[32m                    {flashMessage}[m
[32m+[m[32m                </div>[m
             )}[m
         </fieldset>[m
     </>[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetPayment.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetPayment.jsx[m
[1mindex ea7782c..5e7f612 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetPayment.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetPayment.jsx[m
[36m@@ -1,4 +1,7 @@[m
[32m+[m[32mimport { useState } from 'react';[m
[32m+[m
 export default function FieldsetPayment({ participants, individual_room_participants, dateDiffDuAu, mealPlan }) {[m
[32m+[m[32m    const [isOpen, setIsOpen] = useState(false);[m
     const PRIX_NUIT_COMMUNE = 3000;[m
     const PRIX_NUIT_INDIVIDUELLE = 10000;[m
     const PRIX_REPAS_COMPLET = 3000; // 2 repas + petit déjeuner[m
[36m@@ -30,9 +33,18 @@[m [mexport default function FieldsetPayment({ participants, individual_room_particip[m
 [m
     return ([m
         <fieldset className="payment">[m
[31m-            <h4>Informations de paiement</h4>[m
[32m+[m[32m            <h4>[m
[32m+[m[32m                <button[m[41m [m
[32m+[m[32m                    type="button"[m
[32m+[m[32m                    className="payment-toggle-buttonzzz"[m
[32m+[m[32m                    onClick={() => setIsOpen(!isOpen)}[m
[32m+[m[32m                >[m
[32m+[m[32m                    Informations de paiement[m
[32m+[m[32m                    {/* <span className={`arrow ${isOpen ? 'open' : ''}`}>▼</span> */}[m
[32m+[m[32m                </button>[m
[32m+[m[32m            </h4>[m
             [m
[31m-            <div className="payment-details">[m
[32m+[m[32m            <div className={`payment-details ${isOpen ? 'open' : ''}`}>[m
                 <h5>Détail de votre séjour :</h5>[m
                 <ul>[m
                     <li>Durée : {nombreNuits} nuit{nombreNuits > 1 ? 's' : ''}</li>[m
[36m@@ -84,6 +96,7 @@[m [mexport default function FieldsetPayment({ participants, individual_room_particip[m
                     padding: 1rem;[m
                     border-radius: 8px;[m
                     margin: 1rem 0;[m
[32m+[m[32m                    display: ${isOpen ? 'block' : 'none'};[m
                 }[m
 [m
                 .payment-details ul {[m
[36m@@ -124,6 +137,28 @@[m [mexport default function FieldsetPayment({ participants, individual_room_particip[m
                     margin: 0.5rem 0;[m
                     color: #444;[m
                 }[m
[32m+[m
[32m+[m[32m                .payment-toggle-button {[m
[32m+[m[32m                    background: #fff;[m
[32m+[m[32m                    border: none;[m
[32m+[m[32m                    padding: 0.5rem 1rem;[m
[32m+[m[32m                    font-size: 1.2rem;[m
[32m+[m[32m                    cursor: pointer;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .payment-toggle-button:hover {[m
[32m+[m[32m                    background: #f5f5f5;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .arrow {[m
[32m+[m[32m                    font-size: 1.5rem;[m
[32m+[m[32m                    margin-left: 0.5rem;[m
[32m+[m[32m                    transition: transform 0.2s ease-in-out;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                .arrow.open {[m
[32m+[m[32m                    transform: rotate(180deg);[m
[32m+[m[32m                }[m
             `}</style>[m
         </fieldset>[m
     );[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetType.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetType.jsx[m
[1mindex 583b7bd..c54e15e 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetType.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/FieldsetType.jsx[m
[36m@@ -3,7 +3,7 @@[m
 [m
 [m
 [m
[31m-export default function FieldsetType({toggleFormNdrImg}) {[m
[32m+[m[32mexport default function FieldsetType({toggleFormNdrImg, handleFieldsetValidation}) {[m
     <p>Nous vous proposons 2 types générales de réservations, la prière ou le recueillement, chacun sous 3 formes: </p>[m
     return <>[m
         <h4 onClick={toggleFormNdrImg}>Quel type d'évènement souhaitez vous organiser à Bolobi ? </h4>[m
[36m@@ -14,7 +14,7 @@[m [mexport default function FieldsetType({toggleFormNdrImg}) {[m
                 <span>Prière ponctuelle <span>(100Avé, veillée, recollection, ...)</span></span>[m
             </label>[m
             <label htmlFor="retraite" className="radioLabel">[m
[31m-                <input id="retraite" value="retraite" type="radio" name="type_reservation" />[m
[32m+[m[32m                <input id="retraite" checked value="retraite" type="radio" name="type_reservation" />[m
                 <span className="radio bottom"></span>[m
                 <span>Retraite de prière <b>de groupe</b> <span>(le weekend généralement)</span></span>[m
             </label>[m
[36m@@ -39,5 +39,34 @@[m [mexport default function FieldsetType({toggleFormNdrImg}) {[m
                 <span>Vacances / long séjour <span>(maximum 2 mois)</span></span>[m
             </label>[m
         </section>[m
[32m+[m[32m        <button[m[41m [m
[32m+[m[32m          className="validate-button"[m
[32m+[m[32m          onClick={(e) => {[m
[32m+[m[32m            e.preventDefault();[m
[32m+[m[41m            [m
[32m+[m[32m            // Vérifier si un type de réservation est sélectionné[m
[32m+[m[32m            const typeReservation = document.querySelector('input[name="type_reservation"]:checked');[m
[32m+[m
[32m+[m[32m            if(typeReservation?.value=="pray"){[m
[32m+[m[32m                zero_night.checked = true[m
[32m+[m[32m                zero_night.hidden = true[m
[32m+[m[32m                zero_night.parentNode.previousElementSibling.hidden = true[m
[32m+[m[32m            }else{[m
[32m+[m[32m                zero_night.checked = false[m
[32m+[m[32m                zero_night.hidden = false[m
[32m+[m[32m                zero_night.parentNode.previousElementSibling.hidden = false[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            if (!typeReservation) {[m
[32m+[m[32m              alert('Veuillez sélectionner un type de réservation');[m
[32m+[m[32m              return;[m
[32m+[m[32m            }[m
[32m+[m[41m            [m
[32m+[m[32m            // Si un type est sélectionné, valider le fieldset[m
[32m+[m[32m            handleFieldsetValidation('type');[m
[32m+[m[32m          }}[m
[32m+[m[32m        >[m
[32m+[m[32m          Valider[m
[32m+[m[32m        </button>[m
     </>[m
 }[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MealPlanOptions.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MealPlanOptions.jsx[m
[1mindex 929df8d..ab5b899 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MealPlanOptions.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MealPlanOptions.jsx[m
[36m@@ -16,6 +16,11 @@[m [mexport default function MealPlanOptions({ mealPlan, handleMealPlanChange }) {[m
                     padding: 1rem;[m
                     background-color: #f8f9fa;[m
                     border-radius: 0.25rem;[m
[32m+[m[32m                    width: 50%;[m
[32m+[m[32m                    align-self: center;[m
[32m+[m[32m                    border: 1px solid;[m
[32m+[m[32m                    box-shadow: 0 0 10px 1px;[m
[32m+[m[32m                    padding: 1em 3em;[m
                 }[m
 [m
                 .mealPlanOptions h5 {[m
[36m@@ -25,6 +30,11 @@[m [mexport default function MealPlanOptions({ mealPlan, handleMealPlanChange }) {[m
 [m
                 .mealPlanOptions .form-check {[m
                     margin-bottom: 0.5rem;[m
[32m+[m[32m                    &:hover{[m
[32m+[m[32m                        >label,>input{[m
[32m+[m[32m                            border-bottom: solid #9356DC;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
                 }[m
             `}</style>[m
             <h5>Choisissez votre formule de repas:</h5>[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MobileChoices.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MobileChoices.jsx[m
[1mindex fc9ee4a..773834f 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MobileChoices.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/MobileChoices.jsx[m
[36m@@ -1,48 +1,31 @@[m
 "use client"[m
 [m
[32m+[m[32mimport { useState } from "react"[m
 import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'[m
 import { faCalendarDays, faChurch, faUsers, faUtensils, faIdCard, faCreditCard } from '@fortawesome/free-solid-svg-icons'[m
 [m
[31m-export default function MobileChoices() {[m
[32m+[m[32mexport default function MobileChoices({ onClickMobileChoices: onClick, isActive, fieldsetsValidation }) {[m
     const menuItems = [[m
[31m-        { className: "dates", label: "Dates", icon: faCalendarDays },[m
[31m-        { className: "type", label: "Évènement", icon: faChurch },[m
[31m-        { className: "location", label: "Nombre", icon: faUsers },[m
[31m-        { className: "meal", label: "Repas", icon: faUtensils },[m
[31m-        { className: "infos", label: "Contact", icon: faIdCard },[m
[32m+[m[32m        { className: "infos", label: "Contact", icon: faIdCard, titre: "Informations de contact" },[m
[32m+[m[32m        { className: "type", label: "Évènement", icon: faChurch, titre: "Choisir un évènement" },[m
[32m+[m[32m        { className: "dates", label: "Dates", icon: faCalendarDays, titre: "Choisir une date" },[m
[32m+[m[32m        { className: "location", label: "Nombre", icon: faUsers, titre: "Choisir nombre participants" },[m
[32m+[m[32m        { className: "meal", label: "Repas", icon: faUtensils, titre: "Choisir le repas" },[m
         // { className: "payment", label: "Paiement", icon: faCreditCard }[m
     ][m
[31m-    , onClick = e => {[m
[31m-        // console.log(item.textContent==e.target.textContent)[m
[31m-        // console.log(item.textContent)[m
[31m-        // console.log(e.target.textContent)[m
[31m-        if (e.target.nodeName == "LI" || e.target.nodeName == "A") {[m
[31m-            let lis = Array.from(e.target.closest('ul').querySelectorAll('li'))[m
[31m-            , f = Array.from(bolobiForm.querySelectorAll('fieldset'))[m
[31m-            , li = lis.find((item, i) => item.textContent == e.target.textContent)[m
[31m-            , fieldsetClassName = li.className[m
[31m-            // console.log(li)[m
[31m-            lis.forEach((item, i) => item.classList.remove('active'))[m
[31m-            li.classList.add('active')[m
[31m-            f.forEach((item, i) => item.classList.remove('active'))[m
[31m-        }[m
[31m-    }[m
[31m-        [m
[32m+[m[32m    , activeTitleToShow = menuItems.find(item => item.className.split(" ")[0] === isActive)?.titre[m
[32m+[m[32m    console.log("isActive", isActive);[m
 [m
[31m-    return <ul className="bolobiForm_choices" onClick={e => {[m
[31m-        const fieldsetClassName = e.target.closest('li')?.className.split(' ')[0][m
[31m-        if (fieldsetClassName) {[m
[31m-            document.querySelector("fieldset.active")?.classList.remove("active")[m
[31m-            document.querySelector("fieldset." + fieldsetClassName).className = "active " + document.querySelector("fieldset." + fieldsetClassName).className[m
[31m-        }[m
[31m-    }}>[m
[31m-        <p>SÉLECTIONNER UNE ÉTAPE DE L'INSCRIPTION: </p>[m
[32m+[m[32m    return <ul id="bolobiForm_choices_ul" className="bolobiForm_choices">[m
[32m+[m[32m        <p>INSCRIPTION: </p>[m
[32m+[m[32m        <p>SÉLECTIONNER UNE ÉTAPE</p>[m
         {menuItems.map((item, index) => ([m
[31m-            <li key={index} onClick={onClick} className={`${item.className}${index === 0 ? ' active' : ''}`}>[m
[32m+[m[32m            <li key={index} onClick={e=>{onClick(e)}} className={`${item.className}${isActive === item.className ? ' active' : ''} ${fieldsetsValidation[item.className] ? 'validated' : 'invalidated'}`}>[m
                 <a href={`#${item.className}`}>[m
[31m-                    <FontAwesomeIcon icon={item.icon} /> {item.label}[m
[32m+[m[32m                    <FontAwesomeIcon icon={item.icon} /> <span>{item.label}</span>[m
                 </a>[m
             </li>[m
         ))}[m
[32m+[m[32m        <div>{activeTitleToShow}</div>[m
     </ul>[m
 }[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/Resume.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/Resume.jsx[m
[1mindex 1d2c3de..1395cf0 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/Resume.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/Resume.jsx[m
[36m@@ -52,8 +52,8 @@[m [mexport default function Resume({dateRange,setDateRange,onChange}) {[m
         }[m
 [m
 [m
[31m-    return <fieldset className="datepicker">[m
[31m-        <h4>RÉCAPITULATIF: </h4>[m
[32m+[m[32m    return <fieldset id="recapitulatif" className="recap">[m
[32m+[m[32m        <h4><button type="button" onClick={e=>{e.target.parentNode.parentNode.classList.toggle('active')}}>RÉCAPITULATIF</button></h4>[m
         <article className="type card">[m
             <h5>Type de <b>réservation</b>:</h5>[m
             <b>🚫</b>[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/index.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/index.jsx[m
[1mindex 14b303b..31fa23e 100644[m
[1m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/index.jsx[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/ReserveForm/index.jsx[m
[36m@@ -4,6 +4,7 @@[m [mimport React, { useRef, useState, useEffect, useMemo, useContext } from "react"[m
 import dynamic from 'next/dynamic'[m
 import { subDays, addDays, setHours, setMinutes, addMonths } from 'date-fns';[m
 import {loadRadios} from '../../../_/swappy_radio'[m
[32m+[m[32mimport FlashMessage from '../components/FlashMessage'[m
 // import styles from "./swappy_radio.module.scss"[m
 import FormContext from "../../../../stores/formContext.js"[m
 import Resume from "./Resume"[m
[36m@@ -22,18 +23,42 @@[m [mexport default function ReserveForm() {[m
   const [isFormValidated, setIsFormValidated] = useState(false);[m
   const [reservationData, setReservationData] = useState(null);[m
   const [isSubmitting, setIsSubmitting] = useState(false);[m
[32m+[m[32m  const [isActive, setIsActive] = useState("infos")[m
[32m+[m[32m  const [flashMessage, setFlashMessage] = useState(null);[m
[32m+[m
[32m+[m[32m  const showFlash = (message, type = 'info') => {[m
[32m+[m[32m    // Remplace directement le message existant[m
[32m+[m[32m    setFlashMessage({ message, type });[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  const clearFlash = () => {[m
[32m+[m[32m    setFlashMessage(null);[m
[32m+[m[32m  };[m
 [m
   const [participants, setParticipants] = useState(1);[m
   const [individualRoomParticipants, setIndividualRoomParticipants] = useState(0);[m
   const [mealPlan, setMealPlan] = useState(0);[m
   const [customMealData, setCustomMealData] = useState(null);[m
 [m
[32m+[m[32m  // State pour suivre la validation des fieldsets[m
[32m+[m[32m  const [fieldsetsValidation, setFieldsetsValidation] = useState({[m
[32m+[m[32m    infos: false,[m
[32m+[m[32m    type: false,[m
[32m+[m[32m    dates: false,[m
[32m+[m[32m    location: false,[m
[32m+[m[32m    meal: false,[m
[32m+[m[32m  });[m
[32m+[m[32m  const fieldsetsValidationRef = useRef(fieldsetsValidation);[m
[32m+[m
[32m+[m[32m  // Fonction pour mettre à jour la validation d'un fieldset[m
[32m+[m
   // Gestionnaires pour les changements[m
   const handleParticipantsChange = (value) => {[m
     const newValue = parseInt(value) || 1;[m
     setParticipants(newValue);[m
     // Ajuster le nombre de chambres individuelles si nécessaire[m
     if (individualRoomParticipants > newValue) {[m
[32m+[m[32m      showFlash('okkk')[m
       setIndividualRoomParticipants(newValue);[m
     }[m
     // Mettre à jour l'affichage[m
[36m@@ -43,7 +68,12 @@[m [mexport default function ReserveForm() {[m
 [m
   const handleIndividualRoomChange = (value) => {[m
     const newValue = parseInt(value) || 0;[m
[31m-    setIndividualRoomParticipants(newValue);[m
[32m+[m[32m    // alert(participants)[m
[32m+[m[32m    // alert(newValue)[m
[32m+[m[32m    if(participants >= newValue)[m
[32m+[m[32m      setIndividualRoomParticipants(newValue);[m
[32m+[m[32m    else[m
[32m+[m[32m      showFlash('Impossible de réserver un nombre de chambre individuelle, plus grand que le nombre de participants')[m
     // Mettre à jour l'affichage[m
     document.querySelector("article.location>b").innerHTML = participants - newValue;[m
     document.querySelector("article.location_ind>b").innerHTML = newValue;[m
[36m@@ -87,7 +117,7 @@[m [mexport default function ReserveForm() {[m
         document.querySelector("li"+(tmp&&"."+e.target.className)).click()[m
       })[m
     })[m
[31m-    document.querySelector('fieldset.datepicker>article.dates>div').removeAttribute('style')[m
[32m+[m[32m    document.querySelector('fieldset.recap>article.dates>div').removeAttribute('style')[m
   }, [])[m
   useEffect(()=>{[m
     loadRadios()[m
[36m@@ -102,9 +132,22 @@[m [mexport default function ReserveForm() {[m
       })[m
     })[m
   }, [FieldsetRadioStyled])[m
[32m+[m[32m  useEffect(()=>{[m
[32m+[m
[32m+[m[32m    // console.log(fieldsetsValidation);[m
[32m+[m[32m    // alert('oklmlmlml')[m
[32m+[m[41m    [m
[32m+[m[32m    if(Object.values(fieldsetsValidation).filter(el=>!!!el).length==0){[m
[32m+[m[32m      recapitulatif.scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[32m    }[m
[32m+[m[32m    fieldsetsValidationRef.current = fieldsetsValidation;[m
[32m+[m[41m    [m
[32m+[m[32m  }, [fieldsetsValidation])[m
[32m+[m
[32m+[m
   // const [dateRange, setDateRange] = useState(new Date(),null)[m
   // const [dateRange, setDateRange] = useState([new Date().setHours(9,0,0),null])[m
[31m-  const [dateRange, setDateRange] = useState([setHours(setMinutes(new Date(), 0), 9),null])[m
[32m+[m[32m  const [dateRange, setDateRange] = useState([null,null])[m
   , onChange = (update) => {[m
     // alert(+new Date(update[0]))[m
     let a = new Date(update[0])[m
[36m@@ -120,11 +163,136 @@[m [mexport default function ReserveForm() {[m
     console.log(dateDiffDuAu());[m
     document.querySelector('article.dates>b').innerHTML = dateDiffDuAu().day +" nuits"[m
   }[m
[31m-  , handleDateChange = (e) => {[m
[31m-    if(du.value!="" && au.value!=""){[m
[32m+[m[32m  , handleDateChange = (is_SingleDateInputChoice) => {[m
[32m+[m[32m    if(is_SingleDateInputChoice){[m
[32m+[m[32m      document.querySelector('article.dates>b').innerHTML = "0 nuits"[m
[32m+[m[32m    }else if(du.value!="" && au.value!=""){[m
       onChange([new Date(du.value),new Date(au.value)])[m
     }[m
   }[m
[32m+[m[32m  , handleFieldsetValidation = (fieldsetName) => {[m
[32m+[m
[32m+[m[32m    console.log("fieldsetsValidation(0):",fieldsetsValidation);[m
[32m+[m[32m    // location.href = "/sanctuaire-rosaire-bolobi-adzope#bolobiForm_choices_ul"[m
[32m+[m[32m    bolobiForm_choices_ul.scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[41m    [m
[32m+[m[32m    setFieldsetsValidation(prev => {[m
[32m+[m[32m      console.log("prev(0):",prev);[m
[32m+[m[32m      // console.log("fieldsetsValidation:",fieldsetsValidation);[m
[32m+[m[32m      // console.log(Object.keys(prev));[m
[32m+[m
[32m+[m[32m      let isLastFieldset[m
[32m+[m[41m      [m
[32m+[m[32m      const currentIndex = Object.keys(prev).findIndex(elt=>elt===fieldsetName)[m
[32m+[m[32m      , nextFieldsetName = Object.keys(prev)[currentIndex+1] || Object.keys(prev)[0][m
[32m+[m[32m      , nextFieldsetEventLikeObject = {target: document.querySelector(`.bolobiForm_choices .${nextFieldsetName}`)}[m
[32m+[m
[32m+[m[41m      [m
[32m+[m[32m      isLastFieldset = Object.keys(prev)[currentIndex+1] ? false : true[m
[32m+[m[32m      console.log("currentIndex:",currentIndex);[m
[32m+[m[32m      console.log("isLastFieldset:",isLastFieldset);[m
[32m+[m[32m      console.log("currentFieldsetName:",Object.keys(prev)[currentIndex]);[m
[32m+[m[32m      console.log("nextFieldsetName:",Object.keys(prev)[currentIndex+1]);[m
[32m+[m[32m      console.log("nextFieldsetEventLikeObject:",nextFieldsetEventLikeObject);[m
[32m+[m
[32m+[m
[32m+[m[32m      // Si on est en mode mobile, "bolobiForm_choices.offsetParent" ne sera pas null,[m
[32m+[m[32m      if(bolobiForm_choices_ul.offsetParent){[m
[32m+[m[32m        onClickMobileChoices(nextFieldsetEventLikeObject)[m
[32m+[m[32m      }[m
[32m+[m[41m        [m
[32m+[m[41m        [m
[32m+[m[32m// JE PENSE QU'IL Y A UN PROBLÈME ICI[m
[32m+[m[32m// ENTRE VERSION MOBILE ET DESKTOP[m
[32m+[m[32m// ENTRE VERSION MOBILE ET DESKTOP[m
[32m+[m[32m/*[m
[32m+[m[32m      else{[m
[32m+[m[32m        // Si tous les fieldsets sont validés, on va au récapitulatif[m
[32m+[m[32m        if(Object.values(fieldsetsValidation).filter(el=>!!!el).length==0)[m
[32m+[m[32m          recapitulatif.scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[32m        else{[m
[32m+[m[32m          const tmpNextFieldsetIndex = Object.values(fieldsetsValidation).findIndex(el=>!!!el)[m
[32m+[m[32m          , tmpNextFieldsetName = Object.keys(fieldsetsValidation)[tmpNextFieldsetIndex][m
[32m+[m[32m          , tmpNextFieldsetEventLikeObject = {target: document.querySelector(`.bolobiForm_choices .${tmpNextFieldsetName}`)}[m
[32m+[m
[32m+[m[32m          if(tmpNextFieldsetEventLikeObject.target)onClickMobileChoices(tmpNextFieldsetEventLikeObject)[m
[32m+[m
[32m+[m[32m          bolobiForm_choices_ul.scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m*/[m
[32m+[m[32m// END[m
[32m+[m[32m// END[m
[32m+[m[41m      [m
[32m+[m[41m      [m
[32m+[m[41m      [m
[32m+[m[32m      console.log("prev(1):",prev);[m
[32m+[m[32m      return {[m
[32m+[m[32m        ...prev,[m
[32m+[m[32m        [fieldsetName]: true[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    console.log("fieldsetsValidation(1):",fieldsetsValidation);[m
[32m+[m[41m      [m
[32m+[m[32m  }[m
[32m+[m[32m  , onClickMobileChoices = e => {[m
[32m+[m[32m    // console.log(item.textContent==e.target.textContent)[m
[32m+[m[32m    // console.log(item.textContent)[m
[32m+[m[32m    // console.log(e.target.textContent)[m
[32m+[m
[32m+[m[32m    // if (e.target.nodeName == "LI" || e.target.nodeName == "A") {[m
[32m+[m[32m        // console.log(e);[m
[32m+[m
[32m+[m[32m        // POUR ACTIVER LE LI CORRESPONDANT[m
[32m+[m[32m        // let lis = Array.from(e.target.closest('ul').querySelectorAll('li'))[m
[32m+[m[32m        let lis = Array.from(bolobiForm_choices_ul.querySelectorAll('li'))[m
[32m+[m[32m        , f = Array.from(bolobiForm.querySelectorAll('fieldset'))[m
[32m+[m[32m        , li = e.target.closest('li')[m
[32m+[m[32m        , li_item_related_to_li_clicked = lis.find((item, i) => {[m
[32m+[m[32m          console.log(item.className, " yyy ", li.className);[m
[32m+[m[32m          console.log(item.textContent, " xxx ", li.textContent);[m
[32m+[m[41m          [m
[32m+[m[32m          return item.textContent == li.textContent[m
[32m+[m[32m        })[m
[32m+[m[32m        console.log(li)[m
[32m+[m[32m        console.log(lis)[m
[32m+[m[32m        lis.forEach((item, i) => {[m
[32m+[m[32m          console.log("li: ", item.className);[m
[32m+[m[32m          item.classList.remove('active')[m
[32m+[m[32m          console.log("li bis: ", item.className);[m
[32m+[m[32m        })[m
[32m+[m[32m        console.log(li);[m
[32m+[m[32m        console.log(li.className)[m
[32m+[m[32m        console.log(lis)[m
[32m+[m[32m        li.classList.add('active')[m
[32m+[m[32m        console.log(li);[m
[32m+[m[32m        console.log(li.className)[m
[32m+[m[32m        f.forEach((item, i) => {item.classList.remove('active')})[m
[32m+[m
[32m+[m[41m        [m
[32m+[m
[32m+[m
[32m+[m[32m        // POUR ACTIVER LE FIELDSET CORRESPONDANT[m
[32m+[m[32m        const fieldsetClassName = li?.className.split(' ')[0][m
[32m+[m[32m        console.log(fieldsetClassName)[m
[32m+[m[32m        document.querySelector("fieldset.active")?.classList.remove("active")[m
[32m+[m[32m        document.querySelector("fieldset." + fieldsetClassName).className = "active " + document.querySelector("fieldset." + fieldsetClassName).className[m
[32m+[m
[32m+[m[32m    // }[m
[32m+[m
[32m+[m[32m    // setFieldsetsValidation(prev => {[m
[32m+[m[32m    //   // alert(li)[m
[32m+[m[32m    //   // alert(e.target)[m
[32m+[m[32m    //   // alert(e.target.className)[m
[32m+[m[32m    //   // e.target.classList.add("active")[m
[32m+[m[32m    //   return {...prev, [li.className.split(" ")[0]]: false}[m
[32m+[m[32m    // })[m
[32m+[m[41m    [m
[32m+[m[32m    const isActiveValue = e.target.closest('li').className.split(" ")[0][m
[32m+[m[32m    setIsActive(isActiveValue)[m
[32m+[m[41m    [m
[32m+[m[32m  }[m
   /*[m
   const [startDate, setStartDate] = useState(new Date())[m
   , [endDate, setEndDate] = useState(null)[m
[36m@@ -134,14 +302,74 @@[m [mexport default function ReserveForm() {[m
     setEndDate(end);[m
   }[m
   */[m
[32m+[m[32m  async function handleEmptyInputsChecking(e){[m
[32m+[m[32m    console.log(document.querySelectorAll('section.on fieldset'));[m
[32m+[m[32m    document.querySelectorAll('section.on fieldset').forEach(fs => fs.classList.add('active'));[m
[32m+[m
[32m+[m[32m      // Récupérer tous les champs requis[m
[32m+[m[32m      const requiredFields = Array.from(document.querySelectorAll('[required]'));[m
[32m+[m
[32m+[m[32m      // Filtrer les champs vides et créer un rapport détaillé[m
[32m+[m[32m      const invalidFields = requiredFields.filter(field => !field.value.trim()).map(field => ({[m
[32m+[m[32m        id: field.id,[m
[32m+[m[32m        name: field.name,[m
[32m+[m[32m        type: field.type,[m
[32m+[m[32m        fieldset: field.closest('fieldset')?.className.split(' ')[0] || 'unknown'[m
[32m+[m[32m      }));[m
[32m+[m[32m  }[m
   async function handleSubmit(e){[m
[32m+[m
     e.preventDefault();[m
     setIsSubmitting(true);[m
[31m-[m
     // Créer un timeout de 10 secondes[m
     const timeout = setTimeout(() => {[m
       setIsSubmitting(false);[m
[31m-    }, 10000);[m
[32m+[m[32m    }, 100000);[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m    // alert('ok')[m
[32m+[m
[32m+[m[32m    // Si on est en mode desktop, "bolobiForm_choices.offsetParent" sera null,[m
[32m+[m[32m    // Seulement alors on simulera le clic sur les boutons de validation[m
[32m+[m[32m    if(!bolobiForm_choices_ul.offsetParent){[m
[32m+[m[32m      const validateButtons = Array.from(bolobiForm.querySelectorAll('section>fieldset button.validate-button'));[m
[32m+[m[41m      [m
[32m+[m[32m      // Créer un tableau de promesses pour chaque clic[m
[32m+[m[32m      const clickPromises = validateButtons.map(button => {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          // Utiliser setTimeout pour permettre au state de se mettre à jour[m
[32m+[m[32m          setTimeout(() => {[m
[32m+[m[32m            button.click();[m
[32m+[m[32m            resolve();[m
[32m+[m[32m          }, 100); // Petit délai entre chaque clic[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[41m    [m
[32m+[m[32m      // Attendre que tous les clics soient traités[m
[32m+[m[32m      await Promise.all(clickPromises);[m
[32m+[m[32m      console.log("Current fieldsetsValidation:", fieldsetsValidationRef.current);[m
[32m+[m[32m    }[m
[32m+[m[32m    console.log(fieldsetsValidation);[m
[32m+[m[32m    // Si tous les fieldsets sont validés, on va au récapitulatif[m
[32m+[m[32m    if(Object.values(fieldsetsValidationRef.current).filter(el=>!!!el).length!==0){[m
[32m+[m[32m      console.log("fieldsetsValidation(3):",fieldsetsValidation);[m
[32m+[m[32m      showFlash("Le formulaire n'est pas complet...", "error");[m
[32m+[m[32m      clearTimeout(timeout); // Annuler le timeout si la réponse arrive avant[m
[32m+[m[32m      setIsSubmitting(false);[m
[32m+[m
[32m+[m[32m      //DFILER POUR LA VERSION DESKTOP[m
[32m+[m[32m      document.querySelector('fieldset.infos').scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[32m      //DFILER POUR LA VERSION MOBILE[m
[32m+[m[32m      bolobiForm_choices_ul.scrollIntoView({ behavior: "smooth", block: "start" })[m
[32m+[m[41m      [m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    ////// GÉRER LES CHAMPS VIDES[m
[32m+[m[32m    // handleEmptyInputsChecking()[m
[32m+[m[41m    [m
[32m+[m
 [m
     const fd = new FormData(e.target)[m
     , fd_ = {[m
[36m@@ -183,8 +411,8 @@[m [mexport default function ReserveForm() {[m
     fd.delete('time-input')[m
     [m
     // Ajouter les dates de début et fin[m
[31m-    fd.set('from', du.value)[m
[31m-    fd.set('to', au.value)[m
[32m+[m[32m    fd.set('from', zero_night.checked? le.value : du.value)[m
[32m+[m[32m    fd.set('to', zero_night.checked? le.value : au.value)[m
     [m
     // Ajouter le tableau de contacts converti en JSON[m
     fd.append('contact', JSON.stringify([contactInfo]))[m
[36m@@ -272,7 +500,7 @@[m [mexport default function ReserveForm() {[m
     [m
     // if(true)return false[m
     try {[m
[31m-      const response = await fetch("/api/reservation", {[m
[32m+[m[32m      const response = await fetch("/api/reservationn", {[m
           method: "POST",[m
           headers: {[m
               'Content-Type': 'application/json',[m
[36m@@ -296,169 +524,213 @@[m [mexport default function ReserveForm() {[m
     } catch (error) {[m
       console.error("Erreur lors de la soumission:", error);[m
       clearTimeout(timeout);[m
[31m-      setIsSubmitting(false);[m
[32m+[m[32m      // setIsSubmitting(false);[m
       // Ici vous pourriez ajouter une gestion d'erreur plus détaillée[m
     }[m
   }[m
[32m+[m[41m  [m
[32m+[m
[32m+[m[32m  return ([m
[32m+[m[32m    <form id="bolobiForm" onSubmit={handleSubmit}>[m
[32m+[m[32m      {flashMessage && ([m
[32m+[m[32m        <FlashMessage[m
[32m+[m[32m          message={flashMessage.message}[m
[32m+[m[32m          type={flashMessage.type}[m
[32m+[m[32m          onClose={clearFlash}[m
[32m+[m[32m        />[m
[32m+[m[32m      )}[m
[32m+[m[32m      <Intro {...{sommaire,titreH3}} />[m
[32m+[m
[32m+[m[32m      {isSubmitting && ([m
[32m+[m[32m        <div className="overlay">[m
[32m+[m[32m          <div className="spinner"></div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {!isFormValidated && ([m
[32m+[m[32m        <>[m
[32m+[m
[32m+[m[32m          <MobileChoices {...{onClickMobileChoices,isActive,fieldsetsValidation}} />[m
[32m+[m
[32m+[m[32m          <section[m
[32m+[m[32m            className = { formNdrToggleImg && "on" }[m
[32m+[m[32m          >[m
[32m+[m[41m            [m
[32m+[m[32m            <FieldsetInfos[m[41m [m
[32m+[m[32m              toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m              handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m            />[m
[32m+[m
[32m+[m[32m            <FieldsetRadioStyled id="type" className="type">[m
[32m+[m[32m              <FieldsetType[m[41m [m
[32m+[m[32m                toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m                handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m              />[m
[32m+[m[32m            </FieldsetRadioStyled>[m
[32m+[m
[32m+[m[32m            <FieldsetDate[m[41m [m
[32m+[m[32m              handleDateChange={handleDateChange}[m
[32m+[m[32m              toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m              dateDiffDuAu={dateDiffDuAu}[m
[32m+[m[32m              handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m            />[m
[32m+[m
[32m+[m[32m            <FieldsetRadioStyled id="location" className="location">[m
[32m+[m[32m              <FieldsetLocation[m
[32m+[m[32m                toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m                onParticipantsChange={handleParticipantsChange}[m
[32m+[m[32m                onIndividualRoomChange={handleIndividualRoomChange}[m
[32m+[m[32m                participants={participants}[m
[32m+[m[32m                individualRoomParticipants={individualRoomParticipants}[m
[32m+[m[32m                handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m              />[m
[32m+[m[41m              [m
[32m+[m[32m              {/* <hr />[m
[32m+[m
[32m+[m[32m              <section>[m
[32m+[m[32m                <label htmlFor="un" className="radioLabel">[m
[32m+[m[32m                  <input id="un" type="radio" name="type_reservation" />[m
[32m+[m[32m                  <span className="radio"></span>[m
[32m+[m[32m                  <span>Chambre Commune <b>(3000Fcfa/personne la nuité)</b></span>[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label htmlFor="deux" className="radioLabel">[m
[32m+[m[32m                  <input id="deux" type="radio" name="type_reservation" />[m
[32m+[m[32m                  <span className="radio"></span>[m
[32m+[m[32m                  <span>Chambre Individuel <b>(10000Fcfa/personne la nuité)</b></span>[m
[32m+[m[32m                </label>[m
[32m+[m[32m                <label htmlFor="trois" className="radioLabel">[m
[32m+[m[32m                  <input id="trois" type="radio" name="type_reservation" />[m
[32m+[m[32m                  <span className="radio"></span>[m
[32m+[m[32m                  <span>Individuel <b>(1500Fcfa/personne)</b></span>[m
[32m+[m[32m                </label>[m
[32m+[m[32m              </section> */}[m
[32m+[m
[32m+[m[32m            </FieldsetRadioStyled>[m
[32m+[m[41m            [m
[32m+[m[32m            <FieldsetMeal[m
[32m+[m[32m              SectionCheckboxStyled={SectionCheckboxStyled}[m
[32m+[m[32m              toggleFormNdrImg={toggleFormNdrImg}[m
[32m+[m[32m              onMealPlanChange={handleMealPlanChange}[m
[32m+[m[32m              onCustomMealChange={handleCustomMealChange}[m
[32m+[m[32m              handleFieldsetValidation={handleFieldsetValidation}[m
[32m+[m[32m            />[m
[32m+[m
[32m+[m[32m            <fieldset>[m
[32m+[m[32m              <h4>Si vous souhaitez passer un message pour cette réservation, nous y tiendrons compte lorsque nous vous rapellons pour confirmer votre réservation: </h4>[m
[32m+[m[32m              <textarea name="message" cols="30" rows="10"></textarea>[m
[32m+[m[32m            </fieldset>[m
[32m+[m
[32m+[m[32m          </section>[m
[32m+[m
[32m+[m[32m          <div[m[41m [m
[32m+[m[32m            id="show_image"[m[41m [m
[32m+[m[32m          />[m
[32m+[m
[32m+[m
[32m+[m[32m          {/* https://github.com/Hacker0x01/react-datepicker/ */}[m
[32m+[m[32m          <Resume {...{dateRange,setDateRange,onChange}} />[m
[32m+[m
[32m+[m
[32m+[m[32m          <fieldset className="submit">[m
[32m+[m[32m            <input id="submit_reservation" type="submit" value="Réserver" />[m
[32m+[m[32m          </fieldset>[m
[32m+[m
 [m
[31m-  return <>[m
[31m-    <Intro {...{sommaire,titreH3}} />[m
[31m-[m
[31m-    {isSubmitting && ([m
[31m-      <div className="overlay">[m
[31m-        <div className="spinner"></div>[m
[31m-      </div>[m
[31m-    )}[m
[31m-[m
[31m-    {!isFormValidated && <form [m
[31m-      onSubmit={handleSubmit} [m
[31m-      id="bolobiForm"[m
[31m-      className={isFormValidated ? 'form-validated' : ''}[m
[31m-    >[m
[31m-      <MobileChoices />[m
[31m-[m
[31m-      <section[m
[31m-        className = { formNdrToggleImg && "on" }[m
[31m-      >[m
[31m-[m
[31m-        <FieldsetDate {...{handleDateChange,toggleFormNdrImg,dateDiffDuAu}} />[m
[31m-[m
[31m-        <FieldsetRadioStyled id="type" className="type">[m
[31m-          <FieldsetType {...{toggleFormNdrImg}} />[m
[31m-        </FieldsetRadioStyled>[m
[31m-[m
[31m-        <FieldsetRadioStyled id="location" className="location">[m
[31m-          <FieldsetLocation [m
[31m-            toggleFormNdrImg={toggleFormNdrImg}[m
[31m-            onParticipantsChange={handleParticipantsChange}[m
[31m-            onIndividualRoomChange={handleIndividualRoomChange}[m
[32m+[m[32m          <FieldsetPayment[m[41m [m
             participants={participants}[m
[31m-            individualRoomParticipants={individualRoomParticipants}[m
[32m+[m[32m            individual_room_participants={individualRoomParticipants}[m
[32m+[m[32m            dateDiffDuAu={dateDiffDuAu}[m
[32m+[m[32m            mealPlan={mealPlan}[m
           />[m
[31m-          [m
[31m-          {/* <hr />[m
[31m-[m
[31m-          <section>[m
[31m-            <label htmlFor="un" className="radioLabel">[m
[31m-              <input id="un" type="radio" name="type_reservation" />[m
[31m-              <span className="radio"></span>[m
[31m-              <span>Chambre Commune <b>(3000Fcfa/personne la nuité)</b></span>[m
[31m-            </label>[m
[31m-            <label htmlFor="deux" className="radioLabel">[m
[31m-              <input id="deux" type="radio" name="type_reservation" />[m
[31m-              <span className="radio"></span>[m
[31m-              <span>Chambre Individuel <b>(10000Fcfa/personne la nuité)</b></span>[m
[31m-            </label>[m
[31m-            <label htmlFor="trois" className="radioLabel">[m
[31m-              <input id="trois" type="radio" name="type_reservation" />[m
[31m-              <span className="radio"></span>[m
[31m-              <span>Individuel <b>(1500Fcfa/personne)</b></span>[m
[31m-            </label>[m
[31m-          </section> */}[m
[31m-[m
[31m-        </FieldsetRadioStyled>[m
[31m-        [m
[31m-        <FieldsetMeal [m
[31m-          SectionCheckboxStyled={SectionCheckboxStyled}[m
[31m-          toggleFormNdrImg={toggleFormNdrImg}[m
[31m-          onMealPlanChange={handleMealPlanChange}[m
[31m-          onCustomMealChange={handleCustomMealChange}[m
[31m-        />[m
[31m-        [m
[31m-        <FieldsetInfos {...{toggleFormNdrImg}} />[m
[31m-[m
[31m-      </section>[m
[31m-[m
[31m-      <div [m
[31m-        id="show_image" [m
[31m-      />[m
[31m-[m
[31m-      {/* https://github.com/Hacker0x01/react-datepicker/ */}[m
[31m-      <Resume {...{dateRange,setDateRange,onChange}} />[m
[31m-[m
[31m-      <fieldset>[m
[31m-        <h4>Si vous souhaitez passer un message pour cette réservation, nous y tiendrons compte lorsque nous vous rapellons pour confirmer votre réservation: </h4>[m
[31m-        <textarea name="message" cols="30" rows="10"></textarea>[m
[31m-      </fieldset>[m
[31m-[m
[31m-      <FieldsetPayment [m
[31m-        participants={participants}[m
[31m-        individual_room_participants={individualRoomParticipants}[m
[31m-        dateDiffDuAu={dateDiffDuAu}[m
[31m-        mealPlan={mealPlan}[m
[31m-      />[m
[31m-[m
[31m-      <fieldset className="submit">[m
[31m-        <input type="submit" value="Réserver" />[m
[31m-      </fieldset>[m
[31m-[m
[31m-[m
[31m-      </form>}[m
[31m-[m
[31m-    {isFormValidated && <section className={`validated ${isFormValidated ? 'show' : ''}`}>[m
[31m-      {isFormValidated && <ValidationSection reservationData={reservationData} />}[m
[31m-    </section>}[m
[31m-[m
[31m-    <style jsx>{`[m
[31m-      .overlay {[m
[31m-        position: fixed;[m
[31m-        top: 0;[m
[31m-        left: 0;[m
[31m-        right: 0;[m
[31m-        bottom: 0;[m
[31m-        background: rgba(255, 255, 255, 0.8);[m
[31m-        display: flex;[m
[31m-        justify-content: center;[m
[31m-        align-items: center;[m
[31m-        z-index: 9998;[m
[31m-      }[m
 [m
[31m-      .form-validate{[m
[31m-        height:0;[m
[31m-      }[m
 [m
[31m-      .spinner {[m
[31m-        width: 50px;[m
[31m-        height: 50px;[m
[31m-        border: 5px solid #f3f3f3;[m
[31m-        border-top: 5px solid #2196f3;[m
[31m-        border-radius: 50%;[m
[31m-        animation: spin 1s linear infinite;[m
[31m-      }[m
[32m+[m[32m        </>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      {isFormValidated && ([m
[32m+[m[32m        <section className={`validated ${isFormValidated ? 'show' : ''}`}>[m
[32m+[m[32m          {isFormValidated && <ValidationSection reservationData={reservationData} />}[m
[32m+[m[32m        </section>[m
[32m+[m[32m      )}[m
[32m+[m
[32m+[m[32m      <style jsx>{`[m
[32m+[m[32m        .overlay {[m
[32m+[m[32m          position: fixed;[m
[32m+[m[32m          top: 0;[m
[32m+[m[32m          left: 0;[m
[32m+[m[32m          right: 0;[m
[32m+[m[32m          bottom: 0;[m
[32m+[m[32m          background: rgba(255, 255, 255, 0.8);[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          justify-content: center;[m
[32m+[m[32m          align-items: center;[m
[32m+[m[32m          z-index: 9998;[m
[32m+[m[32m        }[m
 [m
[31m-      @keyframes spin {[m
[31m-        0% { transform: rotate(0deg); }[m
[31m-        100% { transform: rotate(360deg); }[m
[31m-      }[m
[32m+[m[32m        .form-validate{[m
[32m+[m[32m          height:0;[m
[32m+[m[32m        }[m
 [m
[31m-      form {[m
[31m-        transition: height 0.3s ease-in-out;[m
[31m-        pointer-events: ${isSubmitting ? 'none' : 'auto'};[m
[31m-        opacity: ${isSubmitting ? 0.7 : 1};[m
[31m-      }[m
[31m-      [m
[31m-      form.validated {[m
[31m-        height: 0;[m
[31m-        overflow: hidden;[m
[31m-        padding: 0;[m
[31m-        margin: 0;[m
[31m-      }[m
[32m+[m[32m        .spinner {[m
[32m+[m[32m          width: 50px;[m
[32m+[m[32m          height: 50px;[m
[32m+[m[32m          border: 5px solid #f3f3f3;[m
[32m+[m[32m          border-top: 5px solid #2196f3;[m
[32m+[m[32m          border-radius: 50%;[m
[32m+[m[32m          animation: spin 1s linear infinite;[m
[32m+[m[32m        }[m
 [m
[31m-      section.validated {[m
[31m-        height: auto;[m
[31m-        overflow: hidden;[m
[31m-        padding: 0;[m
[31m-        margin: 0;[m
[31m-        transition: all 0.5s ease-in-out;[m
[31m-        opacity: 0;[m
[31m-        transform: translateY(20px);[m
[31m-      }[m
[32m+[m[32m        @keyframes spin {[m
[32m+[m[32m          0% { transform: rotate(0deg); }[m
[32m+[m[32m          100% { transform: rotate(360deg); }[m
[32m+[m[32m        }[m
 [m
[31m-      section.validated.show {[m
[31m-        opacity: 1;[m
[31m-        transform: translateY(0);[m
[31m-        padding: 2rem;[m
[31m-      }[m
[31m-    `}</style>[m
[31m-  </>[m
[32m+[m[32m        form {[m
[32m+[m[32m          transition: height 0.3s ease-in-out;[m
[32m+[m[32m          pointer-events: ${isSubmitting ? 'none' : 'auto'};[m
[32m+[m[32m          opacity: ${isSubmitting ? 0.3 : 1};[m
[32m+[m[32m          ${isSubmitting && `[m
[32m+[m[32m            &:before {[m
[32m+[m[32m              content: "";[m
[32m+[m[32m              position: fixed;[m
[32m+[m[32m              top: calc(50% - 50px);[m
[32m+[m[32m              left: calc(50% - 50px);[m
[32m+[m[32m              z-index: 9998;[m
[32m+[m[32m              width: 100px;[m
[32m+[m[32m              height: 100px;[m
[32m+[m[32m              border: 15px solid #f3f3f3;[m
[32m+[m[32m              border-top: 15px solid #2196f3;[m
[32m+[m[32m              border-radius: 50%;[m
[32m+[m[32m              animation: spin 1s linear infinite;[m
[32m+[m[32m              background: blue;[m
[32m+[m[32m              box-shadow: 0 0 1em 10px;[m
[32m+[m[32m            }[m
[32m+[m[32m          `}[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        form.validated {[m
[32m+[m[32m          height: 0;[m
[32m+[m[32m          overflow: hidden;[m
[32m+[m[32m          padding: 0;[m
[32m+[m[32m          margin: 0;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        section.validated {[m
[32m+[m[32m          height: auto;[m
[32m+[m[32m          overflow: hidden;[m
[32m+[m[32m          padding: 0;[m
[32m+[m[32m          margin: 0;[m
[32m+[m[32m          transition: all 0.5s ease-in-out;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m          transform: translateY(20px);[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        section.validated.show {[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m          transform: translateY(0);[m
[32m+[m[32m          padding: 2rem;[m
[32m+[m[32m        }[m
[32m+[m[32m      `}</style>[m
[32m+[m[32m    </form>[m
[32m+[m[32m  );[m
 }[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/components/FlashMessage.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/components/FlashMessage.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..8243b83[m
[1m--- /dev/null[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/components/FlashMessage.jsx[m
[36m@@ -0,0 +1,83 @@[m
[32m+[m[32m"use client"[m
[32m+[m
[32m+[m[32mimport React from 'react';[m
[32m+[m
[32m+[m[32mconst FlashMessage = ({ message, type = 'info', onClose }) => {[m
[32m+[m[32m  return ([m
[32m+[m[32m    <div className={`flash-message ${type}`}>[m
[32m+[m[32m      <p>{message}</p>[m
[32m+[m[32m      <button onClick={onClose} className="close-button">&times;</button>[m
[32m+[m[32m      <style jsx>{`[m
[32m+[m[32m        .flash-message {[m
[32m+[m[32m          position: fixed;[m
[32m+[m[32m          top: 20px;[m
[32m+[m[32m          left: 50%;[m
[32m+[m[32m          transform: translateX(-50%);[m
[32m+[m[32m          padding: 15px 25px;[m
[32m+[m[32m          border-radius: 8px;[m
[32m+[m[32m          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m          z-index: 1000;[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          align-items: center;[m
[32m+[m[32m          gap: 10px;[m
[32m+[m[32m          animation: slideIn 0.3s ease-out;[m
[32m+[m[32m          max-width: 90vw;[m
[32m+[m[32m          transition: all 0.3s ease-out;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        @keyframes slideIn {[m
[32m+[m[32m          from {[m
[32m+[m[32m            transform: translate(-50%, -100%);[m
[32m+[m[32m            opacity: 0;[m
[32m+[m[32m          }[m
[32m+[m[32m          to {[m
[32m+[m[32m            transform: translate(-50%, 0);[m
[32m+[m[32m            opacity: 1;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .info {[m
[32m+[m[32m          background-color: #3498db;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .success {[m
[32m+[m[32m          background-color: #2ecc71;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .error {[m
[32m+[m[32m          background-color: #e74c3c;[m
[32m+[m[32m          color: white;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .warning {[m
[32m+[m[32m          background-color: #f1c40f;[m
[32m+[m[32m          color: #2c3e50;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .close-button {[m
[32m+[m[32m          background: none;[m
[32m+[m[32m          border: none;[m
[32m+[m[32m          color: inherit;[m
[32m+[m[32m          font-size: 20px;[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          padding: 0 5px;[m
[32m+[m[32m          opacity: 0.8;[m
[32m+[m[32m          transition: opacity 0.2s;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .close-button:hover {[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        p {[m
[32m+[m[32m          margin: 0;[m
[32m+[m[32m          white-space: pre-line;[m
[32m+[m[32m        }[m
[32m+[m[32m      `}</style>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default FlashMessage;[m
[1mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..3f0d39d[m
[1m--- /dev/null[m
[1m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx[m
[36m@@ -0,0 +1,17 @@[m
[32m+[m[32mconst IntroVideo = () => {[m
[32m+[m[32m    return ([m
[32m+[m[32m        <div className="intro-video-container">[m
[32m+[m[32m            <iframe[m
[32m+[m[32m                // src="https://www.youtube.com/embed/FjO441MnCr8"[m
[32m+[m[32m                src="https://www.youtube.com/embed/cSL0O2KJcWc?si=Hjq0LHhx5ZH9Ia9W"[m
[32m+[m[32m                title="Présentation Librairie Puissance Divine"[m
[32m+[m[32m                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"[m
[32m+[m[32m                allowFullScreen[m
[32m+[m[32m                className="intro-video"[m
[32m+[m[32m                style={{width: "100%","height": "400px"}}[m
[32m+[m[32m            />[m
[32m+[m[32m        </div>[m
[32m+[m[32m    );[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default IntroVideo;[m
[1mdiff --git a/app/test_ai_form/page.jsx b/app/test_ai_form/page.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/app/vente-en-ligne/[id]/page.jsx b/app/vente-en-ligne/[id]/page.jsx[m
[1mdeleted file mode 100644[m
[1mindex dd122e8..0000000[m
[1m--- a/app/vente-en-ligne/[id]/page.jsx[m
[1m+++ /dev/null[m
[36m@@ -1,143 +0,0 @@[m
[31m-'use client'[m
[31m-[m
[31m-import { useEffect, useState } from 'react'[m
[31m-import Image from 'next/image'[m
[31m-import Link from 'next/link'[m
[31m-import * as Ecommerce_articles from "../../../assets/datas/articles.js"[m
[31m-import Ecommerce_articles_OPTIONS from "../../../assets/datas/articles_options.js"[m
[31m-import { handleAddToCart } from "../../../utils/handleEvents.js"[m
[31m-import './style.scss'[m
[31m-[m
[31m-export default function ProductPage({ params }) {[m
[31m-    const [product, setProduct] = useState(null)[m
[31m-    const [option, setOption] = useState(null)[m
[31m-    const [quantity, setQuantity] = useState(1)[m
[31m-    const [cartBox, setCartBox] = useState(false)[m
[31m-[m
[31m-    const myLoader = ({ src }) => src[m
[31m-[m
[31m-    useEffect(() => {[m
[31m-        // Trouver le produit correspondant à l'ID[m
[31m-        const foundProduct = Ecommerce_articles.articles.data.find([m
[31m-            item => item.id_produits.toString() === params.id[m
[31m-        )[m
[31m-        [m
[31m-        if (foundProduct) {[m
[31m-            setProduct(foundProduct)[m
[31m-            // Trouver l'option correspondante[m
[31m-            const foundOption = Ecommerce_articles_OPTIONS.data.find([m
[31m-                el => el.img_article === foundProduct.img && [m
[31m-                (foundProduct.autre === (el.opt_nom||"") || foundProduct.taille === el.taille_||"")[m
[31m-            )[m
[31m-            setOption(foundOption)[m
[31m-        }[m
[31m-    }, [params.id])[m
[31m-[m
[31m-    if (!product) {[m
[31m-        return ([m
[31m-            <main className="product-page">[m
[31m-                <div className="not-found">[m
[31m-                    <h1>Produit non trouvé</h1>[m
[31m-                    <Link href="/ecommerce-chretien-abidjan" className="back-link">[m
[31m-                        Retourner à la boutique[m
[31m-                    </Link>[m
[31m-                </div>[m
[31m-            </main>[m
[31m-        )[m
[31m-    }[m
[31m-[m
[31m-    return ([m
[31m-        <main className="product-page">[m
[31m-            <nav className="breadcrumb">[m
[31m-                <Link href="/ecommerce-chretien-abidjan">Boutique</Link>[m
[31m-                <span> / </span>[m
[31m-                <span>{product.fr}</span>[m
[31m-            </nav>[m
[31m-[m
[31m-            <div className="product-details">[m
[31m-                <div className="product-image">[m
[31m-                    <Image[m
[31m-                        loader={myLoader}[m
[31m-                        src={`/img/vente-religieuse/${Ecommerce_articles.articles_img_table[product.nom]}/${product.img}.webp`}[m
[31m-                        alt={product.fr}[m
[31m-                        width={600}[m
[31m-                        height={600}[m
[31m-                        objectFit="contain"[m
[31m-                        priority[m
[31m-                    />[m
[31m-                </div>[m
[31m-[m
[31m-                <div className="product-info">[m
[31m-                    <h1>{product.fr}</h1>[m
[31m-                    [m
[31m-                    {option && ([m
[31m-                        <div className="product-options">[m
[31m-                            {option.coloris && ([m
[31m-                                <div className="option">[m
[31m-                                    <span className="label">Coloris:</span>[m
[31m-                                    <span className="value">{option.coloris}</span>[m
[31m-                                </div>[m
[31m-                            )}[m
[31m-                            {option.couverture && ([m
[31m-                                <div className="option">[m
[31m-                                    <span className="label">Couverture:</span>[m
[31m-                                    <span className="value">{option.couverture}</span>[m
[31m-                                </div>[m
[31m-                            )}[m
[31m-                            {option.opt_nom && ([m
[31m-                                <div className="option">[m
[31m-                                    <span className="label">Option:</span>[m
[31m-                                    <span className="value">{option.opt_nom}</span>[m
[31m-                                </div>[m
[31m-                            )}[m
[31m-                        </div>[m
[31m-                    )}[m
[31m-[m
[31m-                    <div className="product-description">[m
[31m-                        <p>{product.fr1}</p>[m
[31m-                        {product.dimensions && ([m
[31m-                            <p className="dimensions">[m
[31m-                                <strong>Dimensions:</strong> {product.dimensions}[m
[31m-                            </p>[m
[31m-                        )}[m
[31m-                    </div>[m
[31m-[m
[31m-                    <div className="price-section">[m
[31m-                        <div className="price">{product.prix} €</div>[m
[31m-                        <div className="quantity">[m
[31m-                            <label htmlFor="quantity">Quantité:</label>[m
[31m-                            <input[m
[31m-                                id="quantity"[m
[31m-                                type="number"[m
[31m-                                min="1"[m
[31m-                                max="99"[m
[31m-                                value={quantity}[m
[31m-                                onChange={(e) => setQuantity(Math.min(Math.max(parseInt(e.target.value) || 1, 1), 99))}[m
[31m-                            />[m
[31m-                        </div>[m
[31m-                    </div>[m
[31m-[m
[31m-                    <button[m
[31m-                        className="add-to-cart"[m
[31m-                        onClick={(e) => {[m
[31m-                            const fakeEvent = {[m
[31m-                                target: {[m
[31m-                                    dataset: {[m
[31m-                                        id: product.id_produits,[m
[31m-                                        coloris: option?.coloris || "",[m
[31m-                                        couverture: option?.couverture || "",[m
[31m-                                        option_name: option?.opt_nom || "",[m
[31m-                                        price: product.prix[m
[31m-                                    }[m
[31m-                                }[m
[31m-                            }[m
[31m-                            handleAddToCart(fakeEvent, setCartBox)[m
[31m-                        }}[m
[31m-                    >[m
[31m-                        Ajouter au panier[m
[31m-                    </button>[m
[31m-                </div>[m
[31m-            </div>[m
[31m-        </main>[m
[31m-    )[m
[31m-}[m
[1mdiff --git a/app/vente-en-ligne/[id]/style.scss b/app/vente-en-ligne/[id]/style.scss[m
[1mdeleted file mode 100644[m
[1mindex a7d6ea7..0000000[m
[1m--- a/app/vente-en-ligne/[id]/style.scss[m
[1m+++ /dev/null[m
[36m@@ -1,185 +0,0 @@[m
[31m-.product-page {[m
[31m-    max-width: 1200px;[m
[31m-    margin: 0 auto;[m
[31m-    padding: 2rem;[m
[31m-[m
[31m-    .not-found {[m
[31m-        text-align: center;[m
[31m-        padding: 4rem 2rem;[m
[31m-[m
[31m-        h1 {[m
[31m-            margin-bottom: 2rem;[m
[31m-            color: #333;[m
[31m-        }[m
[31m-[m
[31m-        .back-link {[m
[31m-            display: inline-block;[m
[31m-            padding: 0.8rem 1.5rem;[m
[31m-            background: #007bff;[m
[31m-            color: white;[m
[31m-            text-decoration: none;[m
[31m-            border-radius: 6px;[m
[31m-            transition: all 0.2s;[m
[31m-[m
[31m-            &:hover {[m
[31m-                background: #0056b3;[m
[31m-                transform: translateY(-1px);[m
[31m-            }[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    .breadcrumb {[m
[31m-        margin-bottom: 2rem;[m
[31m-        color: #666;[m
[31m-[m
[31m-        a {[m
[31m-            color: #007bff;[m
[31m-            text-decoration: none;[m
[31m-            [m
[31m-            &:hover {[m
[31m-                text-decoration: underline;[m
[31m-            }[m
[31m-        }[m
[31m-[m
[31m-        span {[m
[31m-            margin: 0 0.5rem;[m
[31m-        }[m
[31m-    }[m
[31m-[m
[31m-    .product-details {[m
[31m-        display: grid;[m
[31m-        grid-template-columns: 1fr 1fr;[m
[31m-        gap: 3rem;[m
[31m-        align-items: start;[m
[31m-[m
[31m-        @media (max-width: 768px) {[m
[31m-            grid-template-columns: 1fr;[m
[31m-        }[m
[31m-[m
[31m-        .product-image {[m
[31m-            position: relative;[m
[31m-            aspect-ratio: 1;[m
[31m-            background: #f8f9fa;[m
[31m-            border-radius: 12px;[m
[31m-            overflow: hidden;[m
[31m-            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);[m
[31m-[m
[31m-            img {[m
[31m-                object-fit: contain !important;[m
[31m-            }[m
[31m-        }[m
[31m-[m
[31m-        .product-info {[m
[31m-            h1 {[m
[31m-                margin: 0 0 1.5rem;[m
[31m-                font-size: 2rem;[m
[31m-                color: #333;[m
[31m-                line-height: 1.2;[m
[31m-            }[m
[31m-[m
[31m-            .product-options {[m
[31m-                margin-bottom: 2rem;[m
[31m-                padding: 1rem;[m
[31m-                background: #f8f9fa;[m
[31m-                border-radius: 8px;[m
[31m-[m
[31m-                .option {[m
[31m-                    display: flex;[m
[31m-                    align-items: center;[m
[31m-                    gap: 0.5rem;[m
[31m-                    margin-bottom: 0.5rem;[m
[31m-                    [m
[31m-                    &:last-child {[m
[31m-                        margin-bottom: 0;[m
[31m-                    }[m
[31m-[m
[31m-                    .label {[m
[31m-                        font-weight: 500;[m
[31m-                        color: #666;[m
[31m-                        min-width: 100px;[m
[31m-                    }[m
[31m-[m
[31m-                    .value {[m
[31m-                        color: #333;[m
[31m-                    }[m
[31m-                }[m
[31m-            }[m
[31m-[m
[31m-            .product-description {[m
[31m-                margin-bottom: 2rem;[m
[31m-                color: #666;[m
[31m-                line-height: 1.6;[m
[31m-[m
[31m-                .dimensions {[m
[31m-                    margin-top: 1rem;[m
[31m-                    padding-top: 1rem;[m
[31m-                    border-top: 1px solid #eee;[m
[31m-                    [m
[31m-                    strong {[m
[31m-                        color: #333;[m
[31m-                    }[m
[31m-                }[m
[31m-            }[m
[31m-[m
[31m-            .price-section {[m
[31m-                display: flex;[m
[31m-                align-items: center;[m
[31m-                gap: 2rem;[m
[31m-                margin-bottom: 2rem;[m
[31m-[m
[31m-                .price {[m
[31m-                    font-size: 2rem;[m
[31m-                    font-weight: 600;[m
[31m-                    color: #333;[m
[31m-                }[m
[31m-[m
[31m-                .quantity {[m
[31m-                    display: flex;[m
[31m-                    align-items: center;[m
[31m-                    gap: 1rem;[m
[31m-[m
[31m-                    label {[m
[31m-                        color: #666;[m
[31m-                    }[m
[31m-[m
[31m-                    input {[m
[31m-                        width: 80px;[m
[31m-                        padding: 0.5rem;[m
[31m-                        border: 2px solid #e0e0e0;[m
[31m-                        border-radius: 6px;[m
[31m-                        text-align: center;[m
[31m-                        font-size: 1rem;[m
[31m-[m
[31m-                        &:focus {[m
[31m-                            outline: none;[m
[31m-                            border-color: #007bff;[m
[31m-                        }[m
[31m-                    }[m
[31m-                }[m
[31m-            }[m
[31m-[m
[31m-            .add-to-cart {[m
[31m-                width: 100%;[m
[31m-                padding: 1rem;[m
[31m-                background: #007bff;[m
[31m-                color: white;[m
[31m-                border: none;[m
[31m-                border-radius: 8px;[m
[31m-                font-size: 1.1rem;[m
[31m-                cursor: pointer;[m
[31m-                transition: all 0.2s;[m
[31m-[m
[31m-                &:hover {[m
[31m-                    background: #0056b3;[m
[31m-                    transform: translateY(-1px);[m
[31m-                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[m
[31m-                }[m
[31m-[m
[31m-                &:active {[m
[31m-                    transform: translateY(0);[m
[31m-                    box-shadow: none;[m
[31m-                }[m
[31m-            }[m
[31m-        }[m
[31m-    }[m
[31m-}[m
[1mdiff --git a/assets/classes.js b/assets/classes.js[m
[1mindex 9e706b0..5200cf9 100644[m
[1m--- a/assets/classes.js[m
[1m+++ b/assets/classes.js[m
[36m@@ -15,7 +15,7 @@[m [mexport const ecole_classes = [[m
     // }[m
     {[m
         id: "1"[m
[31m-        , professeur: ["6808326690dd2d72decf2e87"][m
[32m+[m[32m        , professeur: ["1"][m
         , eleves: ["1","2"][m
         , annee: "2022-2023"[m
         , niveau: "CP1"[m
[1mdiff --git a/assets/scss/admin.scss b/assets/scss/admin.scss[m
[1mindex cb2a2e7..0a028ac 100644[m
[1m--- a/assets/scss/admin.scss[m
[1m+++ b/assets/scss/admin.scss[m
[36m@@ -1,7 +1,3 @@[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
 body{[m
         >header{[m
             background: url(/img/sanctuaire/03.webp) center center no-repeat;[m
[36m@@ -242,42 +238,86 @@[m [mbody{[m
                     }[m
                 }[m
             }[m
[31m-            &.profilContainer{[m
[31m-                .card{[m
[31m-                    &-header{}[m
[31m-                    &-body{[m
[31m-                        .card-body{[m
[31m-                            font-size:1em;[m
[31m-                        }[m
[31m-                    }[m
[31m-                }[m
[31m-            }[m
         }[m
[31m-        >#modal{[m
[31m-            >span.close{}[m
[31m-            .modal{[m
[31m-                &___header{[m
[31m-                }[m
[31m-                &___main{[m
[31m-                    overflow:hidden !important;[m
[31m-                    >form{[m
[31m-                        overflow:scroll;[m
[31m-                        margin: 0 auto;[m
[31m-                        border-radius: 10px;[m
[31m-                        padding: 1em;[m
[31m-                        box-shadow: 0 0 10px 1px;[m
[31m-                        label{[m
[31m-                            display: block;[m
[31m-                        }[m
[31m-                        >div{[m
[31m-                            border: solid;[m
[31m-                            padding: 1em;[m
[31m-                            margin: 1em 0;[m
[31m-                        }[m
[31m-                    }[m
[32m+[m[32m        >footer{}[m
[32m+[m[32m}[m
[32m+[m[32m.ant-modal-close{[m
[32m+[m[32m    background-color: red !important;[m
[32m+[m[32m    transition: background .1s;[m
[32m+[m[32m    &:hover{[m
[32m+[m[32m        background: orangered !important;[m
[32m+[m[32m        color:white !important;[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mbody>div:has(.ant-modal-root){[m
[32m+[m[32m    z-index: 100;[m
[32m+[m[32m}[m
[32m+[m[32m.ant-modal-root{[m
[32m+[m[32m    >.ant-modal-wrap{[m
[32m+[m[32m        margin: 0 2em;[m
[32m+[m[32m        overflow: hidden !important;[m
[32m+[m[32m        top: 0;[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m.ant-modal{[m
[32m+[m[32m    // padding-bottom:10em;[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    width: 100% !important;[m
[32m+[m[32m    top: 0 !important;[m
[32m+[m[32m    >div{[m
[32m+[m[32m        height: 100%;[m
[32m+[m[32m        >.ant-modal-content{[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m            >div{[m
[32m+[m[32m                background: whitesmoke !important;[m
[32m+[m[32m                    box-shadow: 0 0 10px 1px inset;[m
[32m+[m[32m                    padding: 1em;[m
[32m+[m[32m                    display: flex;[m
[32m+[m[32m                    flex-flow: wrap;[m
[32m+[m[32m                    gap: 1em;[m
[32m+[m[32m                    justify-content: center;[m
[32m+[m[32m                &.ant-modal-body{[m
[32m+[m[32m                    height: 80%;[m
[32m+[m[32m                    overflow: scroll;[m
                 }[m
[31m-                &___footer{}[m
             }[m
         }[m
[31m-        >footer{}[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m.reservation-details {[m
[32m+[m[32m  .detail-section {[m
[32m+[m[32m    margin-bottom: 24px;[m
[32m+[m[32m    padding: 16px;[m
[32m+[m[32m    // background-color: #fafafa;[m
[32m+[m[32m    border-radius: 8px;[m
[32m+[m
[32m+[m[32m    &:last-child {[m
[32m+[m[32m      margin-bottom: 0;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    h3 {[m
[32m+[m[32m      margin: 0 0 16px 0;[m
[32m+[m[32m      color: #1890ff;[m
[32m+[m[32m      font-size: 16px;[m
[32m+[m[32m      font-weight: 600;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    p {[m
[32m+[m[32m      margin: 8px 0;[m
[32m+[m[32m      color: rgba(0, 0, 0, 0.85);[m
[32m+[m
[32m+[m[32m      strong {[m
[32m+[m[32m        margin-right: 8px;[m
[32m+[m[32m        color: rgba(0, 0, 0, 0.65);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Style pour rendre les lignes du tableau cliquables[m
[32m+[m[32m.ant-table-tbody > tr {[m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    background-color: #e6f7ff !important;[m
[32m+[m[32m  }[m
 }[m
\ No newline at end of file[m
[1mdiff --git a/assets/scss/admin_ai.scss b/assets/scss/admin_ai.scss[m
[1mdeleted file mode 100644[m
[1mindex f006366..0000000[m
[1m--- a/assets/scss/admin_ai.scss[m
[1m+++ /dev/null[m
[36m@@ -1,324 +0,0 @@[m
[31m-#map{[m
[31m-    height: 300px;[m
[31m-}[m
[31m-[m
[31m-form{[m
[31m-    label{[m
[31m-        &.photo{[m
[31m-            color:red;[m
[31m-            cursor:pointer;[m
[31m-            border:solid;[m
[31m-            padding:.5em;[m
[31m-            &:hover{[m
[31m-                background:red;[m
[31m-                color:#fff;[m
[31m-            }[m
[31m-        }[m
[31m-    }[m
[31m-    div{[m
[31m-        &.scolarity_fees{[m
[31m-            label{[m
[31m-                display: flex !important;[m
[31m-                border: solid;[m
[31m-                padding: .5em;[m
[31m-            }[m
[31m-        }[m
[31m-    }[m
[31m-}[m
[31m-[m
[31m-#school_members {[m
[31m-  display: flex;[m
[31m-  flex-wrap: wrap;[m
[31m-  gap: 1.5rem;[m
[31m-  list-style: none;[m
[31m-  padding: 0;[m
[31m-  margin: 1rem 0;[m
[31m-[m
[31m-  li {[m
[31m-    background-color: #fff;[m
[31m-    border-radius: 12px;[m
[31m-    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);[m
[31m-    overflow: hidden;[m
[31m-    transition: transform 0.3s ease, box-shadow 0.3s ease;[m
[31m-    width: calc(100% / 3 - 1.5rem * 2 / 3);[m
[31m-    min-width: 280px;[m
[31m-    display: flex;[m
[31m-[m
[31m-    &:hover {[m
[31m-      transform: translateY(-5px);[m
[31m-      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);[m
[31m-    }[m
[31m-[m
[31m-    a.member-link { [m
[31m-      display: flex;[m
[31m-      flex-direction: column;[m
[31m-      text-decoration: none;[m
[31m-      color: inherit;[m
[31m-      width: 100%;[m
[31m-[m
[31m-      &:hover img{[m
[31m-        aspect-ratio: 16 / 5;[m
[31m-      }[m
[31m-      figure {[m
[31m-        margin: 0;[m
[31m-        position: relative;[m
[31m-[m
[31m-        img {[m
[31m-          display: block;[m
[31m-          width: 100%;[m
[31m-          aspect-ratio: 16 / 10;[m
[31m-          object-fit: cover;[m
[31m-          background-color: #f0f0f0;[m
[31m-          transition: aspect-ratio 0.3s ease;[m
[31m-        }[m
[31m-[m
[31m-        figcaption {[m
[31m-          background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);[m
[31m-          color: #fff;[m
[31m-          padding: 1rem 1.2rem;[m
[31m-          font-size: 1.05rem;[m
[31m-          font-weight: 600;[m
[31m-          position: absolute;[m
[31m-          bottom: 0;[m
[31m-          left: 0;[m
[31m-          right: 0;[m
[31m-          text-shadow: 1px 1px 3px rgba(0,0,0,0.6);[m
[31m-          display: flex;[m
[31m-          justify-content: space-between;[m
[31m-          position:relative;[m
[31m-          &:before,&:after{position:absolute;top:0;}[m
[31m-          &:before{content:"Nom";left:0;}[m
[31m-          &:after{content:"Prénoms";right:0;}[m
[31m-          >span{[m
[31m-            [m
[31m-          }[m
[31m-        }[m
[31m-      }[m
[31m-[m
[31m-      section {[m
[31m-        padding: 1.2rem;[m
[31m-        flex-grow: 1;[m
[31m-        display: flex;[m
[31m-        flex-direction: column;[m
[31m-        gap: 0.6rem;[m
[31m-[m
[31m-        .indicators {[m
[31m-          display: flex;[m
[31m-          gap: 0.5rem;[m
[31m-          margin-bottom: 0.4rem;[m
[31m-        }[m
[31m-        .isInterne, .doFeesPaid {[m
[31m-            display: inline-block;[m
[31m-            width: 10px;[m
[31m-            height: 10px;[m
[31m-            border-radius: 50%;[m
[31m-            vertical-align: middle;[m
[31m-        }[m
[31m-        .isInterne { background-color: #4CAF50; } [m
[31m-        .doFeesPaid { background-color: #FF9800; }[m
[31m-[m
[31m-        div {[m
[31m-          font-size: 0.9rem;[m
[31m-          color: #666;[m
[31m-          line-height: 1.5;[m
[31m-          display: flex;[m
[31m-          align-items: center;[m
[31m-          gap: 0.4rem;[m
[31m-[m
[31m-          &::before {[m
[31m-            font-size: 1.1em;[m
[31m-            opacity: 0.7;[m
[31m-          }[m
[31m-[m
[31m-          &.birth::before { content: '🎂'; } [m
[31m-          &.address::before { content: '📍'; } [m
[31m-          &.parents::before { content: '👥'; } [m
[31m-[m
[31m-          &.address {[m
[31m-            font-weight: 500;[m
[31m-            color: #333;[m
[31m-          }[m
[31m-          &.parents:empty { [m
[31m-            display: none; [m
[31m-          }[m
[31m-        }[m
[31m-      }[m
[31m-    }[m
[31m-  }[m
[31m-[m
[31m-  @media (max-width: 992px) {[m
[31m-    li {[m
[31m-      width: calc(50% - 1.5rem / 2);[m
[31m-    }[m
[31m-  }[m
[31m-  @media (max-width: 600px) {[m
[31m-    li {[m
[31m-      width: 100%;[m
[31m-    }[m
[31m-  }[m
[31m-}[m
[31m-[m
[31m-/* === Styles merged from app/admin/school/styles/table-classe.css === */[m
[31m-[m
[31m-/* Styles généraux pour le tableau */[m
[31m-.table {[m
[31m-    width: 100%;[m
[31m-    border-collapse: collapse;[m
[31m-    margin: 1rem 0;[m
[31m-}[m
[31m-[m
[31m-/* Styles pour les devoirs */[m
[31m-.homework-list {[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-    gap: 1rem;[m
[31m-}[m
[31m-[m
[31m-.homework-item {[m
[31m-    border: 1px solid #e0e0e0;[m
[31m-    padding: 1rem;[m
[31m-    border-radius: 4px;[m
[31m-    background-color: #f8f9fa;[m
[31m-}[m
[31m-[m
[31m-.homework-date {[m
[31m-    color: #666;[m
[31m-    font-size: 0.9rem;[m
[31m-    margin-bottom: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.homework-content {[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-    gap: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.homework-content strong {[m
[31m-    color: #2c3e50;[m
[31m-}[m
[31m-[m
[31m-.homework-content small {[m
[31m-    color: #e74c3c;[m
[31m-}[m
[31m-[m
[31m-/* Styles pour les compositions */[m
[31m-.compositions-list {[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-    gap: 1.5rem;[m
[31m-}[m
[31m-[m
[31m-.composition-item {[m
[31m-    background-color: #f8f9fa;[m
[31m-    padding: 1rem;[m
[31m-    border-radius: 4px;[m
[31m-    box-shadow: 0 2px 4px rgba(0,0,0,0.1);[m
[31m-}[m
[31m-[m
[31m-.composition-details {[m
[31m-    margin-top: 0.5rem;[m
[31m-    display: grid;[m
[31m-    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));[m
[31m-    gap: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.matiere-note {[m
[31m-    display: flex;[m
[31m-    justify-content: space-between;[m
[31m-    padding: 0.25rem 0;[m
[31m-    border-bottom: 1px dashed #e0e0e0;[m
[31m-}[m
[31m-[m
[31m-/* Styles pour les moyennes trimestrielles */[m
[31m-.moyennes-list {[m
[31m-    display: flex;[m
[31m-    gap: 2rem;[m
[31m-}[m
[31m-[m
[31m-.trimestre-item {[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-    align-items: center;[m
[31m-    gap: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.moyenne {[m
[31m-    font-size: 1.2rem;[m
[31m-    font-weight: bold;[m
[31m-    color: #2c3e50;[m
[31m-    padding: 0.5rem 1rem;[m
[31m-    background-color: #f8f9fa;[m
[31m-    border-radius: 4px;[m
[31m-}[m
[31m-[m
[31m-/* Styles pour les commentaires */[m
[31m-.commentaires-list {[m
[31m-    display: flex;[m
[31m-    flex-direction: column;[m
[31m-    gap: 1rem;[m
[31m-}[m
[31m-[m
[31m-.commentaire-item {[m
[31m-    background-color: #f8f9fa;[m
[31m-    padding: 1rem;[m
[31m-    border-radius: 4px;[m
[31m-    border-left: 4px solid #3498db;[m
[31m-}[m
[31m-[m
[31m-.commentaire-header {[m
[31m-    display: flex;[m
[31m-    justify-content: space-between;[m
[31m-    align-items: center;[m
[31m-    margin-bottom: 0.5rem;[m
[31m-}[m
[31m-[m
[31m-.commentaire-header small {[m
[31m-    color: #666;[m
[31m-}[m
[31m-[m
[31m-.commentaire-item p {[m
[31m-    margin: 0;[m
[31m-    color: #2c3e50;[m
[31m-    line-height: 1.5;[m
[31m-}[m
[31m-[m
[31m-/* Styles pour les liens des membres (Generic - from table-classe.css) */[m
[31m-.member-link {[m
[31m-    display: inline-block;[m
[31m-    margin: 0.25rem;[m
[31m-    /* padding: 0.5rem 1rem; */ [m
[31m-    background-color: #f8f9fa;[m
[31m-    border-radius: 4px;[m
[31m-    color: #2c3e50;[m
[31m-    text-decoration: none;[m
[31m-    transition: all 0.2s ease;[m
[31m-}[m
[31m-[m
[31m-.member-link:hover {[m
[31m-    background-color: #e9ecef;[m
[31m-    transform: translateY(-1px);[m
[31m-    box-shadow: 0 2px 4px rgba(0,0,0,0.1);[m
[31m-}[m
[31m-[m
[31m-.member-link:active {[m
[31m-    transform: translateY(0);[m
[31m-    box-shadow: none;[m
[31m-}[m
[31m-[m
[31m-/* Responsive design (from table-classe.css) */[m
[31m-@media (max-width: 768px) {[m
[31m-    .moyennes-list {[m
[31m-        flex-direction: column;[m
[31m-        gap: 1rem;[m
[31m-    }[m
[31m-[m
[31m-    .composition-details {[m
[31m-        grid-template-columns: 1fr;[m
[31m-    }[m
[31m-[m
[31m-    .commentaire-header {[m
[31m-        flex-direction: column;[m
[31m-        align-items: flex-start;[m
[31m-        gap: 0.25rem;[m
[31m-    }[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/assets/scss/index.scss b/assets/scss/index.scss[m
[1mindex 115dd9f..3f9b095 100644[m
[1m--- a/assets/scss/index.scss[m
[1m+++ b/assets/scss/index.scss[m
[36m@@ -1,8 +1,9 @@[m
 @import "./main.scss";[m
[31m-// @import "./admin.scss";[m
 [m
 @import "../../app/blog/blog.scss";[m
 [m
[32m+[m[32m@import "./style.scss";[m
[32m+[m
 $void_gray: #c9ded6;[m
 [m
 // @font-face {[m
[36m@@ -73,6 +74,10 @@[m [m$void_gray: #c9ded6;[m
   background-size: contain;[m
   // border-radius:10px;[m
 }[m
[32m+[m[32m%endingFormButtons{[m
[32m+[m[32m  background: linear-gradient(145deg, #2196f3, #1976d2);[m
[32m+[m[32m}[m
[32m+[m
 [m
 [m
 input{[m
[36m@@ -309,7 +314,7 @@[m [mbody>div[data-floating-ui-portal]{[m
   }[m
 }[m
 [m
[31m-.card:not(.safe){[m
[32m+[m[32m.card{[m
   @extend .card;[m
   >div:first-child,>h2:first-child,>h3:first-child,>h4:first-child,>h5:first-child,>h6:first-child[m
     {@extend .card-header;width:100%;}[m
[36m@@ -344,6 +349,29 @@[m [mbody>div[data-floating-ui-portal]{[m
     margin-bottom: .5em !important;[m
     &:before{z-index: 0;}[m
   }[m
[32m+[m[32m  >h5{[m
[32m+[m[32m    width:100%;[m
[32m+[m[32m  }[m
[32m+[m[32m  >div.formSignIn{[m
[32m+[m[32m    background: url(/_next/static/media/login.dc5bbd68.webp) center center no-repeat, white;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    width: 100px;[m
[32m+[m[32m    height: calc(100px + 1em);[m
[32m+[m[32m    border:solid;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    background-size: contain;[m
[32m+[m[32m    cursor:pointer;[m
[32m+[m[32m    border-radius: 5px 5px 0 0;[m
[32m+[m[32m    margin: 0 auto;[m
[32m+[m[32m    &:hover{box-shadow:0 0 10px 1px;}[m
[32m+[m[32m    >button{[m
[32m+[m[32m      position: absolute;[m
[32m+[m[32m      bottom: 0;[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m      font-size: .75em;[m
[32m+[m[32m      border:none;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
   .card-body {[m
     padding: 1.5rem;[m
     width: 100%;[m
[36m@@ -413,14 +441,34 @@[m [mbody>div[data-floating-ui-portal]{[m
   }[m
 }[m
 [m
[32m+[m[32m.form_cta_fixed_btns{[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom:0;[m
[32m+[m[32m  right:0;[m
[32m+[m[32m  >button{[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    width:100px;[m
[32m+[m[32m    height:100px;[m
[32m+[m[32m    border-radius: 100px;[m
[32m+[m[32m    &:first-child{[m
[32m+[m[41m      [m
[32m+[m[32m    }[m
[32m+[m[32m    &:last-child{[m
[32m+[m[41m      [m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
 .custom-number-input {[m
[32m+[m[32m    position:relative;[m
     display: flex;[m
     align-items: center;[m
     background-color: #f0f0f0;[m
     border-radius: 25px;[m
     padding: 5px;[m
     width: fit-content;[m
[31m-    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m    border: 1px solid;[m
[32m+[m[32m    box-shadow: 0 0 5px 1px inset;[m
 [m
     input[type="number"] {[m
         -webkit-appearance: textfield;[m
[36m@@ -442,6 +490,7 @@[m [mbody>div[data-floating-ui-portal]{[m
 [m
     button {[m
         background-color: #007bff;[m
[32m+[m[32m        padding-top: 5px;[m
         border: none;[m
         color: white;[m
         font-size: 20px;[m
[36m@@ -462,6 +511,22 @@[m [mbody>div[data-floating-ui-portal]{[m
             background-color: #004085;[m
         }[m
     }[m
[32m+[m
[32m+[m[32m    svg {[m
[32m+[m[32m      position: absolute;[m
[32m+[m[32m      right: -3em;[m
[32m+[m[32m      font-size: 3em;[m
[32m+[m[32m      color: $secondary;[m
[32m+[m[32m      &.fa-bed{[m
[32m+[m[32m        font-size: 1.5em;[m
[32m+[m[32m        right: -2em;[m
[32m+[m[32m        left: unset !important;[m
[32m+[m[32m      }[m
[32m+[m[32m      @include mobile-and-tablette{[m
[32m+[m[32m        bottom: 0em;[m
[32m+[m[32m        left: 2em;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 }[m
 .ant-table-content{>table {[m
     >tbody {[m
[36m@@ -544,6 +609,9 @@[m [mbody{[m
       align-items: center;[m
       text-align: center;[m
       >a{[m
[32m+[m[32m        &#logo{[m
[32m+[m
[32m+[m[32m        }[m
         &:nth-of-type(2):after[m
         ,&:nth-of-type(2):before[m
         {[m
[36m@@ -551,14 +619,14 @@[m [mbody{[m
           z-index: 2;[m
           position: absolute;[m
           top:0;[m
[31m-          left:133px;[m
[32m+[m[32m          left:125px;[m
           width: 88px;[m
           height: 100%;[m
           background: url(../../public/img/ecommerce-chretien-notre-dame-toute-graces_____.webp) top right no-repeat;[m
         }[m
         &:nth-of-type(2):after{[m
           left:unset;[m
[31m-          right:133px;[m
[32m+[m[32m          right:125px;[m
           rotate: 0 1 0 180deg;[m
         }[m
         &:last-of-type{[m
[36m@@ -580,8 +648,8 @@[m [mbody{[m
         // position: absolute;[m
         // top: 0;[m
         >img{[m
[31m-          height: 100%;[m
[31m-          width: 133px;[m
[32m+[m[32m          // height: 100%;[m
[32m+[m[32m          width: 125px;[m
         }[m
         >span{[m
           // margin: 0 auto;[m
[36m@@ -599,16 +667,50 @@[m [mbody{[m
         }[m
         @include mobile-only{[m
           font-size: .8em;[m
[32m+[m[32m          &:not(:first-of-type)>span{display: none;}[m
           >span{[m
[31m-            left: 133px;[m
[31m-            right: 133px;[m
[31m-            font-size: .7em;[m
[32m+[m[32m            left: 125px;[m
[32m+[m[32m            right: 125px;[m
[32m+[m[32m            font-size: 1em;[m
             line-height: .75em;[m
           }[m
         }[m
         &:nth-of-type(1)>span{[m
[32m+[m[32m          font-size:.9em;[m
           color: $secondary;[m
           text-shadow: 0 1px 0px black,.1px 0px 0px black;[m
[32m+[m[32m          >span:nth-of-type(4){display: none;}[m
[32m+[m[32m          @include mobile-only{[m
[32m+[m[32m            // display: flex;[m
[32m+[m[32m            flex-flow: wrap;[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m            position: absolute;[m
[32m+[m[32m            margin-left: -3em;[m
[32m+[m[32m            width: calc(100% - 6em);[m
[32m+[m[32m            >span{[m
[32m+[m[32m              width: 100%;[m
[32m+[m[32m              display: block;[m
[32m+[m[32m              &:nth-child(1){[m
[32m+[m[32m                margin: 1em 0 1em;[m
[32m+[m[32m              }[m
[32m+[m[32m              &:nth-child(2){[m
[32m+[m[32m                line-height: 1em;[m
[32m+[m[32m                margin-bottom: 1em;[m
[32m+[m[32m              }[m
[32m+[m[32m              &:nth-child(3){}[m
[32m+[m[32m              &:nth-of-type(4){[m
[32m+[m[32m                display: block;[m
[32m+[m[32m                font-size: .5em;[m
[32m+[m[32m                position: absolute;[m
[32m+[m[32m                bottom: 0;[m
[32m+[m[32m                letter-spacing: 1.5px;[m
[32m+[m[32m                margin-top: 5em;[m
[32m+[m[32m                font-size: .75em;[m
[32m+[m[32m                letter-spacing: 4px;[m
[32m+[m[32m                background: rgba(255, 255, 255, .5);[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
         }[m
         &:nth-of-type(2)>span{[m
           top:calc(2em + 3px);[m
[36m@@ -642,6 +744,25 @@[m [mbody{[m
       // ???[m
 [m
     }[m
[32m+[m[32m    h2.page_slogan{[m
[32m+[m[32m      // position: absolute;[m
[32m+[m[32m      // bottom: 0;[m
[32m+[m[32m      // left: 0;[m
[32m+[m[32m      // right: 0;[m
[32m+[m[32m      z-index: 1;[m
[32m+[m[32m      @extend %goa_blr;[m
[32m+[m[32m      left: 133px;[m
[32m+[m[32m      right: 133px;[m
[32m+[m[32m      font-size: large;[m
[32m+[m[32m      text-align: center;[m
[32m+[m[32m      background: rgba(0,0,0,.7);[m
[32m+[m[32m      color: white;[m
[32m+[m[32m      margin-bottom: 0;[m
[32m+[m[32m      @include mobile-only{[m
[32m+[m[32m        font-size: .7em;[m
[32m+[m[32m        display:none;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
     >div#blogB{[m
       @extend %menu_elements;[m
       box-sizing: border-box;[m
[36m@@ -743,6 +864,9 @@[m [mbody{[m
               margin-top: 10px;[m
               margin: 1.5em -10px;[m
               display: inline-block;[m
[32m+[m[32m              @include mobile-only{[m
[32m+[m[32m                &:not(:active){display: none;}[m
[32m+[m[32m              }[m
             }[m
           }[m
           a{[m
[36m@@ -806,6 +930,8 @@[m [mbody{[m
             &:not([id="panier"]){[m
               &:not(.homeLink){[m
                 @extend %menu_elements;[m
[32m+[m[32m                border:none;[m
[32m+[m[32m                border-bottom: solid;[m
                 &::before{[m
                   transition: all .5s;[m
                   z-index: -1;[m
[36m@@ -835,12 +961,14 @@[m [mbody{[m
               }[m
               &.homeLink{[m
                 >span{    [m
[32m+[m[32m                  background: url(../../public/home_.webp) center center no-repeat, black;[m
[32m+[m[32m                  &:hover{background: url(../../public/home.webp) center center no-repeat,goldenrod;}[m
[32m+[m[32m                  background-size: contain !important;[m
                   width: 50px;[m
                   height: 50px;[m
                   border-radius: 2em;[m
                   border: 1px solid;[m
[31m-                  box-shadow: 0 0 10px 1px black;[m
[31m-                  background: white;[m
[32m+[m[32m                  // background: white;[m
                   display: flex;[m
                   align-items: center;[m
                   justify-content: center;[m
[36m@@ -850,6 +978,7 @@[m [mbody{[m
                   transition:all .1s;[m
                   &:hover{[m
                     border-width: 3px;[m
[32m+[m[32m                    box-shadow: 0 0 10px 1px black;[m
                   }[m
                 }[m
               }[m
[36m@@ -882,8 +1011,10 @@[m [mbody{[m
       gap:10px;[m
       justify-content: space-between;[m
       @include mobile-only{[m
[31m-        right:0;[m
[31m-        top: -40px;[m
[32m+[m[32m        right: -6px;[m
[32m+[m[32m        top: -50px;[m
[32m+[m[32m        height: 50px;[m
[32m+[m[32m        width: 50px;[m
       }[m
       &.active{[m
         animation: cta_1 1s linear infinite alternate;[m
[36m@@ -898,14 +1029,19 @@[m [mbody{[m
         }[m
       }[m
       >a,button{[m
[32m+[m[32m        background: url(../../public/login.webp) no-repeat;[m
[32m+[m[32m        background: url(../../public/login.webp) center center no-repeat, white;[m
[32m+[m[32m        &:hover{background: url(../../public/login.webp) center center no-repeat, radial-gradient(gold, transparent);}[m
[32m+[m[32m        background-size: contain !important;[m
[32m+[m[32m        transition:background .4;[m
[32m+[m[32m        border-left: 1px solid black;[m
[32m+[m[32m        width: 100%;[m
         padding:1em;[m
         border:none;[m
         // background:transparent;[m
[32m+[m[32m        z-index: 2;[m
         transition:font-size .2s;[m
         &:hover{font-size:1.2em;}[m
[31m-        background: url(../../public/img/login.png) no-repeat;[m
[31m-        background-size: contain;[m
[31m-        z-index: 2;[m
         &:has(*){background: unset;}[m
       }[m
       >form#connexion{[m
[36m@@ -981,7 +1117,6 @@[m [mbody{[m
     >.miniCart{[m
       &:not(:hover) li{display: none;}[m
       transition: height .4s;[m
[31m-      overflow: hidden;[m
       z-index: 1;[m
       position: absolute;[m
       left: 133px;[m
[36m@@ -1001,15 +1136,6 @@[m [mbody{[m
         left: 0;[m
         right: 150px;[m
       }[m
[31m-      &:hover {[m
[31m-        // display: block;[m
[31m-        z-index: 2;[m
[31m-        height: 600px;[m
[31m-        padding: 1.5em 2em;[m
[31m-        box-shadow: 0 0 1em 5px;[m
[31m-        &:before{content:"";}[m
[31m-        li{display: block;}[m
[31m-      }[m
       &:before {[m
         position: absolute;[m
         border-radius: 5px;[m
[36m@@ -1048,24 +1174,6 @@[m [mbody{[m
         }[m
       }[m
     }[m
[31m-    h2.page_slogan{[m
[31m-      // position: absolute;[m
[31m-      // bottom: 0;[m
[31m-      // left: 0;[m
[31m-      // right: 0;[m
[31m-      z-index: 1;[m
[31m-      @extend %goa_blr;[m
[31m-      left: 133px;[m
[31m-      right: 133px;[m
[31m-      font-size: large;[m
[31m-      text-align: center;[m
[31m-      background: rgba(0,0,0,.7);[m
[31m-      color: white;[m
[31m-      margin-bottom: 0;[m
[31m-      @include mobile-only{[m
[31m-        font-size: .7em;[m
[31m-      }[m
[31m-    }[m
     /*[m
     >div#inscription{[m
       height:0;[m
[36m@@ -1206,7 +1314,7 @@[m [mbody{[m
       border-top: 0;[m
       scale:.5;[m
       transition: scale .4s;[m
[31m-      left: 0em;[m
[32m+[m[32m      left: -3em;[m
       bottom:-35px;[m
       border-radius: 0 0 5px 5px;[m
       @include mobile-only{[m
[36m@@ -1920,6 +2028,22 @@[m [mbody{[m
         }[m
       }[m
     }[m
[32m+[m[32m    &.ecommerce{[m
[32m+[m[32m      >article{[m
[32m+[m[32m        &#articles{[m
[32m+[m[41m          [m
[32m+[m[32m          &>figure{display: none;}[m
[32m+[m[32m          &:not(.all){[m
[32m+[m[32m            &.tableau_icone>figure:not(.tableau_icone), &.livret_P_D>figure:not(.livret_P_D), &.bibles>figure:not(.bibles), &.NEI>figure:not(.NEI), &.texte_priere>figure:not(.texte_priere), &.divers>figure:not(.divers), &.croixp>figure:not(.croixp), &.croixm>figure:not(.croixm), &.croix>figure:not(.croix), &.encens>figure:not(.encens), &.statue>figure:not(.statue), &.grotte>figure:not(.grotte), &.chapelet>figure:not(.chapelet)[m
[32m+[m[32m            {display: none !important;}[m
[32m+[m[32m          }[m
[32m+[m[32m          &.publication>figure.publication,&.objet>figure.objet,[m
[32m+[m[32m          &.tableau_icone>figure.tableau_icone, &.livret_P_D>figure.livret_P_D, &.bibles>figure.bibles, &.NEI>figure.NEI, &.texte_priere>figure.texte_priere, &.divers>figure.divers, &.croixp>figure.croixp, &.croixm>figure.croixm, &.croix>figure.croix, &.encens>figure.encens, &.statue>figure.statue, &.grotte>figure.grotte, &.chapelet>figure.chapelet[m
[32m+[m[32m            {display:block;}[m
[32m+[m[32m          // &.all>figure{display: black !important;}[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
 /*[m
     &.ecommerce{[m
       >section{[m
[36m@@ -2173,7 +2297,7 @@[m [mbody{[m
       }[m
     }[m
 */[m
[31m-    &.priere{[m
[32m+[m[32m&.priere{[m
       padding: 2em;[m
       >h4{[m
         font-size: 1.3em;[m
[36m@@ -2209,7 +2333,15 @@[m [mbody{[m
           left: 0;[m
           height: 100%;[m
           opacity: .21;[m
[31m-          z-index: -1;[m
[32m+[m[32m          z-index: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m      #bolobiForm>fieldset{[m
[32m+[m[32m        &.recap,&.payment{[m
[32m+[m[32m          h4{[m
[32m+[m[32m            &:before{z-index: -1;}[m
[32m+[m[32m          }[m
[32m+[m[32m          z-index: 0 !important;[m
         }[m
       }[m
       [m
[36m@@ -2228,8 +2360,8 @@[m [mbody{[m
         }[m
       }[m
       >form h4{[m
[31m-        padding: .5em 1em;[m
[31m-        border-bottom: solid;[m
[32m+[m[32m        padding: .5em 1em !important;[m
[32m+[m[32m        border-bottom: solid !important;[m
       }[m
       >article{[m
         >iframe{[m
[36m@@ -2313,9 +2445,9 @@[m [mbody{[m
                 font-size: .75em;[m
                 padding: 1em;[m
                 margin: 0.5em;[m
[31m-                border-radius: 10px 0 0;[m
[32m+[m[32m                border-radius: 10px 10px 0 0;[m
                 border: 1px solid white;[m
[31m-                box-shadow: -10px -8px 10px 1px white inset;[m
[32m+[m[32m                box-shadow: 3px 3px 10px 1px white inset;[m
                 &::before{[m
                   content:"";[m
                   position:absolute;bottom:0;left:0;width:100%;box-shadow:0 0 10px 1px white;[m
[36m@@ -2346,7 +2478,7 @@[m [mbody{[m
             }[m
             >p{[m
               padding: 0.25em .25em 2em;[m
[31m-              max-height: 70%;[m
[32m+[m[32m              height: 70%;[m
               position: relative;[m
               transition:all .5s .4s, background .2s;[m
               opacity:0;[m
[36m@@ -2801,6 +2933,7 @@[m [mbody{[m
           padding: 1em 1em 1em 7em;[m
           overflow-x: scroll;[m
           background: $secondary_1;[m
[32m+[m[32m          height: 225px;[m
           @include mobile-and-tablette{[m
             display: flex;[m
             justify-content: center;[m
[36m@@ -2809,16 +2942,22 @@[m [mbody{[m
             border-bottom: none;[m
             border-radius: 5px 5px 0 0;[m
             box-shadow: 0 0 10px 1px inset;[m
[32m+[m[32m            flex-flow: nowrap;[m
[32m+[m[32m            position: relative;[m
             &:not(#un):not(#deux){[m
[31m-              padding: 1em !important;[m
[32m+[m[32m              padding: 4em 2em !important;[m
             }[m
           }[m
           >p{[m
[32m+[m[32m            position: absolute;[m
[32m+[m[32m            &:first-of-type{top: 0;}[m
[32m+[m[32m            &:last-of-type{top: 2em;}[m
             width:100%;[m
             text-align: center;[m
             text-decoration: underline;[m
           }[m
           >li{[m
[32m+[m[32m            position: relative;[m
             padding:.5em;[m
             border: 1px solid;[m
             border-radius: 3px;[m
[36m@@ -2828,27 +2967,91 @@[m [mbody{[m
             cursor:pointer;[m
             &:not(:hover):not(.active){[m
               opacity:.7;[m
[32m+[m[32m              span{[m
[32m+[m[32m                // display: none;[m
[32m+[m[32m              }[m
             }[m
             &:hover,&.active{[m
               background: $secondary_2;[m
               border-width: 3px;[m
               border-color: $secondary_1;[m
               box-shadow: 0 0 5px 1px;[m
[31m-              color:black[m
[32m+[m[32m              color:black;[m
[32m+[m[32m              z-index: 2;[m
[32m+[m[32m              box-shadow: 0 0 10px .25em $secondary;[m
[32m+[m
               >a:hover{font-weight: bolder;}[m
[32m+[m[32m              >a{[m
[32m+[m[32m                // width: 150px;[m
[32m+[m[32m                // display: flex;[m
[32m+[m[32m                // justify-content: space-between;[m
[32m+[m[32m                // align-items: center;[m
[32m+[m[32m              }[m
[32m+[m[32m              span{[m
[32m+[m[32m                color: $secondary;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m            &.active {[m
[32m+[m[32m              >a{[m
[32m+[m[32m                font-size: 1.2em;[m
[32m+[m[32m              }[m
[32m+[m[32m              svg{[m
[32m+[m[32m              }[m
[32m+[m[32m              span{[m
[32m+[m[32m                width: 125px;[m
[32m+[m[32m                left: -30px;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m            &.validated:not(.active) {[m
[32m+[m[32m              border-color: springgreen !important;[m
[32m+[m[32m              box-shadow: 0 0 10px 0.25em springgreen !important;[m
[32m+[m[32m              svg{[m
[32m+[m[32m                color: palegreen;[m
[32m+[m[32m              }[m
[32m+[m[32m              span{[m
[32m+[m[32m                background-color: limegreen !important;;[m
[32m+[m[32m                color: white !important;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m            &.invalidated:not(.active) {[m
[32m+[m[32m              span{[m
[32m+[m[32m                background-color: red;[m
[32m+[m[32m              }[m
             }[m
             >a{[m
[31m-              color:white;[m
[31m-              text-shadow: 0 0px 3px $secondary_1;[m
[32m+[m[32m              padding: 0 .5em;[m
[32m+[m[32m              color: black;[m
[32m+[m[32m              font-weight: bold;[m
[32m+[m[32m              // text-shadow: 0 0px 3px $secondary_1;[m
               // &:hover{font-weight: bolder;}[m
               >svg{ [m
                 width: 16px; height: 16px;[m
                 color:$secondary;[m
                 transform:scale(2);[m
[31m-                margin-right:.5em;[m
[32m+[m[32m                // margin-right:.5em;[m
[32m+[m[32m              }[m
[32m+[m[32m              >span{[m
[32m+[m[32m                position: absolute;[m
[32m+[m[32m                bottom: -1.5em;[m
[32m+[m[32m                left: -0.5em;[m
[32m+[m[32m                border: 1px solid;[m
[32m+[m[32m                width: calc(1em + 60px);[m
[32m+[m[32m                text-align: center;[m
[32m+[m[32m                border-radius: 0 0 5px 5px;[m
[32m+[m[32m                background: silver;[m
               }[m
             }[m
           }[m
[32m+[m[32m          >div{[m
[32m+[m[32m            position: absolute;[m
[32m+[m[32m            bottom: 0;[m
[32m+[m[32m            font-size: 1.5em;[m
[32m+[m[32m            white-space: nowrap;[m
[32m+[m[32m            text-transform: uppercase;[m
[32m+[m[32m            letter-spacing: -1px;[m
[32m+[m[32m            color:white;[m
[32m+[m[32m            text-shadow: 0 0 3px black;[m
[32m+[m[32m          }[m
         }[m
         >section{[m
           padding: 1em;[m
[36m@@ -2863,7 +3066,8 @@[m [mbody{[m
             &.on{[m
               width:100%;[m
               &~#show_image{[m
[31m-                width: 0;[m
[32m+[m[32m                // width: 0;[m
[32m+[m[32m                display: none;[m
               }[m
             }[m
           }[m
[36m@@ -2871,7 +3075,7 @@[m [mbody{[m
             width: 100%;[m
             >fieldset{[m
               &:not(.active){[m
[31m-                display:none;[m
[32m+[m[32m                // display:none !important;[m
               }[m
             }[m
             +#show_image{[m
[36m@@ -2887,7 +3091,9 @@[m [mbody{[m
             background: white;[m
             border-bottom-color: $secondary;[m
             transition:all .2s;[m
[32m+[m[32m            padding-bottom: 3em;[m
             // padding-bottom: 4em;[m
[32m+[m[32m            border-radius: .5em;[m
             &:hover{[m
               border: 0 solid $secondary;[m
               border-width: 0 5px;[m
[36m@@ -2898,7 +3104,7 @@[m [mbody{[m
               &.active{[m
                 border: solid $secondary;[m
                 border-width: 0 10px;[m
[31m-                padding-bottom: 4em;[m
[32m+[m[32m                // padding-bottom: 4em;[m
                 &:hover{[m
                   box-shadow: 0 0px 10px 5px $secondary;[m
                   border-radius: 8px;[m
[36m@@ -2924,9 +3130,9 @@[m [mbody{[m
                 border-right: solid;[m
                 box-shadow: 0 0 10px 1px;[m
                 border-top-left-radius: 5px;[m
[32m+[m[32m                width: 100%;[m
[32m+[m[32m                margin-top: 2em;[m
                 @include mobile-and-tablette{[m
[31m-                  width: 100%;[m
[31m-                  margin-top: 2em;[m
                 }[m
                 >p{width:100%;text-align: center;}[m
                 >li{[m
[36m@@ -2935,9 +3141,13 @@[m [mbody{[m
                   cursor: pointer;[m
                   overflow: hidden;[m
                   position: relative;[m
[31m-                  display: flex                ;[m
[32m+[m[32m                  display: flex;[m
                   justify-content: center;[m
                   align-items: center;[m
[32m+[m[32m                  border: solid;[m
[32m+[m[32m                  border-width: 0 3px;[m
[32m+[m[32m                  box-shadow: 0 0 5px .1px;[m
[32m+[m[32m                  overflow: hidden;[m
                   &:hover{[m
                     background: $secondary_2;[m
                     >div{[m
[36m@@ -2988,19 +3198,83 @@[m [mbody{[m
                 padding-top: 0em;[m
                 width: 70%;[m
                 position: relative;[m
[32m+[m[32m                flex-flow: wrap;[m
[32m+[m[32m                width: 100%;[m
                 @include mobile-and-tablette{[m
                   // justify-content: center;[m
[31m-                  flex-flow: wrap;[m
[31m-                  width: 100%;[m
                   >label{[m
                     margin: 0 2em;[m
                   }[m
                 }[m
[32m+[m[32m                &.zero_night_box{[m
[32m+[m[32m                  background:whitesmoke;[m
[32m+[m[32m                  width: 100%;[m
[32m+[m[32m                  border:solid;[m
[32m+[m[32m                  border-radius: 5px;[m
[32m+[m[32m                  margin:.5em;[m
[32m+[m[32m                  padding:1em;[m
[32m+[m[32m                  margin-bottom: 2em;[m
[32m+[m[32m                  box-shadow: 0 0 5px 1px;[m
[32m+[m[32m                  @include desktop-only{[m
[32m+[m[32m                    justify-content: center;[m
[32m+[m[32m                    flex-flow: wrap;[m
[32m+[m[32m                    width: 50%;[m
[32m+[m[32m                    margin: 2em auto;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  >p{[m
[32m+[m[32m                    text-align: center;[m
[32m+[m[32m                    >u{[m
[32m+[m[32m                      &:first-of-type{[m
[32m+[m[32m                        color:blue;[m
[32m+[m[32m                      }[m
[32m+[m[32m                      font-weight: bold;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m[32m                  >div{[m
[32m+[m[32m                    width: 100%;[m
[32m+[m[32m                    // display: flex;[m
[32m+[m[32m                    justify-content: center;[m
[32m+[m[32m                    &:has(input#zero_night:checked){[m
[32m+[m[32m                      +div{[m
[32m+[m[32m                        display: flex;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m[32m                    +div{[m
[32m+[m[32m                      display: none;[m
[32m+[m[32m                      flex-flow: wrap;[m
[32m+[m[32m                      border: 2px solid;[m
[32m+[m[32m                      padding: .5em;[m
[32m+[m[32m                      box-shadow: 0 0 5px 1px blue inset;[m
[32m+[m[32m                      border-radius: 5px;[m
[32m+[m[32m                      >p{[m
[32m+[m[32m                        width: 100%;[m
[32m+[m[32m                        text-align: center;[m
[32m+[m[32m                        margin-bottom: 0;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m[32m                  &:has(input:checked){[m
[32m+[m[32m                    +div,~ul{[m
[32m+[m[32m                      display: none;[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
                 input{[m
[31m-                  position:absolute;[m
[31m-                  width: 0;[m
[31m-                  height: 0;[m
[31m-                  padding: 0;[m
[32m+[m[32m                  &.safe{[m
[32m+[m[32m                    height: 3em !important;[m
[32m+[m[32m                    &#zero_night{[m
[32m+[m[32m                      box-shadow: none;[m
[32m+[m[32m                      &:checked{[m
[32m+[m[32m                        color:red;[m
[32m+[m[32m                      }[m
[32m+[m[32m                    }[m
[32m+[m[32m                  }[m
[32m+[m[32m                  &:not(.safe){[m
[32m+[m[32m                    position:absolute;[m
[32m+[m[32m                    width: 0;[m
[32m+[m[32m                    height: 0;[m
[32m+[m[32m                    padding: 0;[m
[32m+[m[32m                  }[m
                 }[m
                 label{[m
                   position: relative;[m
[36m@@ -3017,6 +3291,7 @@[m [mbody{[m
                     left: -2em;[m
                     border:1px dotted;[m
                   }[m
[32m+[m[32m                  &:has(+input#le):before{content:"LE";}[m
                   &:first-of-type:before{content:"DU";}[m
                   &:last-of-type:before{content:"AU";}[m
                   &:after{[m
[36m@@ -3061,6 +3336,16 @@[m [mbody{[m
               }[m
             }[m
             &.meal{[m
[32m+[m[32m              display: flex;[m
[32m+[m[32m              justify-content: center;[m
[32m+[m[32m              flex-flow: column;[m
[32m+[m[32m              >h4{}[m
[32m+[m[32m              >h5{}[m
[32m+[m[32m              >section{[m
[32m+[m[32m                display: flex !important;[m
[32m+[m[32m                justify-content: center;[m
[32m+[m[32m                >label{overflow: hidden;}[m
[32m+[m[32m              }[m
               >ul{[m
                 width: 100%;[m
                 margin:1em 0;[m
[36m@@ -3086,6 +3371,25 @@[m [mbody{[m
                   }[m
                 }[m
               }[m
[32m+[m[32m              >div{[m
[32m+[m[32m                &.mealPlanOptions{[m
[32m+[m[32m                  @include mobile-and-tablette{[m
[32m+[m[32m                    width: 100%;[m
[32m+[m[32m                  }[m
[32m+[m[32m                  >h5{text-decoration: underline;}[m
[32m+[m[32m                  input.form-check-input{border: 1px solid;}[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
[32m+[m[32m              >p{[m
[32m+[m[32m                >span{[m
[32m+[m[32m                  color: blue;[m
[32m+[m[32m                  text-decoration: underline;[m
[32m+[m[32m                  >span{[m
[32m+[m[32m                    font-size: 2em;[m
[32m+[m[32m                    padding: 0;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
             }[m
             &.location{[m
               >h4{}[m
[36m@@ -3104,76 +3408,93 @@[m [mbody{[m
                 }[m
               }[m
               >section{[m
[31m-                  width: 100%;[m
[31m-                  display: flex;[m
[31m-                  justify-content: center;[m
[31m-                  padding-top:1em;[m
[31m-                  >div{[m
[31m-                      flex-basis: 30%;[m
[31m-                      display:flex;[m
[31m-                      flex-flow: column;[m
[31m-                      padding-bottom: 1em;[m
[31m-                      &.checkApproxim{[m
[32m+[m[32m                width: 100%;[m
[32m+[m[32m                display: flex;[m
[32m+[m[32m                justify-content: center;[m
[32m+[m[32m                padding-top:1em;[m
[32m+[m[32m                >div{[m
[32m+[m[32m                    flex-basis: 30%;[m
[32m+[m[32m                    display:flex;[m
[32m+[m[32m                    flex-flow: column;[m
[32m+[m[32m                    padding-bottom: 1em;[m
[32m+[m[32m                    &.checkApproxim{[m
[32m+[m[32m                      flex-basis:100%;[m
[32m+[m[32m                      >label{[m
[32m+[m[32m                        width: 50%;[m
[32m+[m[32m                        @include mobile-and-tablette{[m
[32m+[m[32m                          width: 100%;[m
[32m+[m[32m                          font-size:large;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        border: solid;[m
[32m+[m[32m                        align-self: center;[m
[32m+[m[32m                        padding: 1em;[m
[32m+[m[32m                        box-shadow: 0 0 10px 1px inset;[m
[32m+[m[32m                        border-radius: 3px;[m
[32m+[m[32m                        >div{[m
[32m+[m[32m                          font-weight: bold;[m
[32m+[m[32m                          >u{[m
[32m+[m[32m                            color: $secondary;[m
[32m+[m[32m                          }[m
[32m+[m[32m                        }[m
[32m+[m[32m                        >input{[m
[32m+[m[32m                          height: 50px;[m
[32m+[m[32m                          box-shadow: none !important;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        >i{[m
[32m+[m[32m                          >b{}[m
[32m+[m[32m                          >strong{color:blue;}[m
[32m+[m[32m                        }[m
[32m+[m[32m                      }[m[41m    [m
[32m+[m[32m                    }[m
[32m+[m[32m                    &.approxim-number-input{[m
[32m+[m[32m                      flex-basis: 55%;[m
[32m+[m[32m                      @include mobile-and-tablette{[m
                         flex-basis:100%;[m
[32m+[m[32m                      }[m
[32m+[m[32m                      >div{[m
                         >label{[m
[31m-                          width: 50%;[m
[31m-                          border: solid;[m
[31m-                          align-self: center;[m
[31m-                          padding: 1em;[m
[31m-                          box-shadow: 0 0 10px 1px inset;[m
[31m-                          border-radius: 3px;[m
[32m+[m[32m                          &:hover{border:solid blue;border-width:0 0 3px 3px;}[m
                           >div{[m
[31m-                            font-weight: bold;[m
[31m-                            >u{[m
[31m-                              color: $secondary;[m
[32m+[m[32m                            >span{[m
[32m+[m[32m                              font-weight: bold;[m
[32m+[m[32m                              font-size:1.2em;[m
                             }[m
                           }[m
                           >input{[m
[31m-                            height: 50px;[m
                             box-shadow: none !important;[m
[31m-                          }[m
[31m-                          >i{[m
[31m-                            >b{}[m
[31m-                            >strong{color:blue;}[m
[31m-                          }[m
[31m-                        }    [m
[31m-                      }[m
[31m-                      &.approxim-number-input{[m
[31m-                        flex-basis: 55%;[m
[31m-                        >div{[m
[31m-                          >label{[m
[31m-                            &:hover{border:solid blue;border-width:0 0 3px 3px;}[m
[31m-                            >div{[m
[31m-                              >span{[m
[31m-                                font-weight: bold;[m
[31m-                                font-size:1.2em;[m
[31m-                              }[m
[31m-                            }[m
[31m-                            >input{[m
[31m-                              box-shadow: none !important;[m
[31m-                              height:100%;[m
[31m-                              font-size: 7em;[m
[31m-                              &:checked+div>span,&:hover+div>span{color:blue;font-size:1.5em;}[m
[31m-                            }  [m
[31m-                          }[m
[32m+[m[32m                            height:100%;[m
[32m+[m[32m                            font-size: 7em;[m
[32m+[m[32m                            &:checked+div>span,&:hover+div>span{color:blue;font-size:1.5em;}[m
[32m+[m[32m                          }[m[41m  [m
                         }[m
                       }[m
[31m-                  }[m
[31m-                  >label{[m
[31m-                    >div{[m
[31m-                      >label{[m
[31m-                      }[m
[31m-                      >input{[m
[31m-                        &#individual_room_participants{[m
[31m-                            width: 3em;[m
[31m-                            font-size: 1em;[m
[31m-                            opacity: 1;[m
[31m-                            height: 100%;[m
[31m-                            position: unset;[m
[31m-                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m                >p{[m
[32m+[m[32m                  // @include mobile-and-tablette{[m
[32m+[m[32m                    margin-bottom: -1em;[m
[32m+[m[32m                    width: 100%;[m
[32m+[m[32m                    text-align: center;[m
[32m+[m[32m                  // }[m
[32m+[m[32m                }[m
[32m+[m[32m                >label{[m
[32m+[m[32m                  // @include mobile-and-tablette{[m
[32m+[m[32m                    margin-top: 0 !important;[m
[32m+[m[32m                  // }[m
[32m+[m[32m                  >div{[m
[32m+[m[32m                    >label{[m
[32m+[m[32m                    }[m
[32m+[m[32m                    >input{[m
[32m+[m[32m                      &#individual_room_participants{[m
[32m+[m[32m                          width: 3em;[m
[32m+[m[32m                          font-size: 1em;[m
[32m+[m[32m                          opacity: 1;[m
[32m+[m[32m                          height: 100%;[m
[32m+[m[32m                          position: unset;[m
                       }[m
                     }[m
                   }[m
[32m+[m[32m                }[m
               }[m
             }[m
 [m
[36m@@ -3251,7 +3572,7 @@[m [mbody{[m
                 >div{[m
                   display: flex;[m
                   position: relative;[m
[31m-                  width: 50%;[m
[32m+[m[32m                  width: 200px;[m
                   margin: 0 auto;[m
                   align-items: center;[m
                   gap: 1em;[m
[36m@@ -3273,7 +3594,7 @@[m [mbody{[m
             >textarea,section>textarea{}[m
           }[m
         }[m
[31m-        >div{[m
[32m+[m[32m        >div:not(.safe):not(.flash-message){[m
           &#show_image{}[m
           position: relative;[m
           width: 50%;[m
[36m@@ -3303,24 +3624,30 @@[m [mbody{[m
           }[m
         }[m
         >fieldset{[m
[31m-          &:last-of-type{[m
[31m-            display: flex;[m
[31m-            width: 100%;[m
[31m-            padding: 1em 3em !important;[m
[31m-            >input{[m
[31m-              background: #1F4EEA;[m
[31m-              color: white;[m
[31m-            }[m
[32m+[m[32m          &.recap,&.payment{[m
[32m+[m[32m            text-align: center;[m
           }[m
[31m-          &.datepicker{[m
[32m+[m[32m          &.recap{[m
             display: flex;[m
             justify-content: center;[m
             gap: 1em;[m
             flex-flow: wrap;[m
             position: relative;[m
             width:100%;[m
[31m-            text-align: center;[m
[31m-            &:not(#pound){@extend %recap;}[m
[32m+[m[32m            &.active{[m
[32m+[m[32m              >h4>button:not(#pound){[m
[32m+[m[32m                @extend %endingFormButtons;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m            &:not(.active){[m
[32m+[m[32m              min-height: auto !important;[m
[32m+[m[32m              margin: 1em 0;[m
[32m+[m[32m              >h4{padding:1em 0 !important;}[m
[32m+[m[32m              >*:not(h4){[m
[32m+[m[32m                display: none;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m            &.active:not(#pound){@extend %recap;}[m
             @include mobile-and-tablette{[m
               justify-content: center;[m
             }[m
[36m@@ -3381,8 +3708,14 @@[m [mbody{[m
             display: flex;[m
             flex-flow: column;[m
             align-items: center;[m
[32m+[m[32m            >h4:has(+.open){[m
[32m+[m[32m              >button{[m
[32m+[m[32m                @extend %endingFormButtons;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
             .payment-details{[m
               @extend %recap;[m
[32m+[m[32m              padding: 2em !important;[m
               width: 100%;[m
             }[m
           }[m
[1mdiff --git a/assets/scss/index_ai.scss b/assets/scss/index_ai.scss[m
[1mnew file mode 100644[m
[1mindex 0000000..e69de29[m
[1mdiff --git a/assets/scss/index_ai_reserveForm.scss b/assets/scss/index_ai_reserveForm.scss[m
[1mnew file mode 100644[m
[1mindex 0000000..3efd09c[m
[1m--- /dev/null[m
[1m+++ b/assets/scss/index_ai_reserveForm.scss[m
[36m@@ -0,0 +1,113 @@[m
[32m+[m[32m.ai-reserve-form__container {[m
[32m+[m[32m  max-width: 480px;[m
[32m+[m[32m  margin: 2rem auto;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 18px;[m
[32m+[m[32m  box-shadow: 0 4px 24px rgba(0,0,0,0.07);[m
[32m+[m[32m  padding: 2rem 1.5rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__title {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  font-size: 2rem;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  margin-bottom: 1.5rem;[m
[32m+[m[32m  color: #2a3d5c;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 1.1rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__row {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 0.4rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__row--dates {[m
[32m+[m[32m  flex-direction: row;[m
[32m+[m[32m  gap: 1rem;[m
[32m+[m[32m}[m
[32m+[m[32m.ai-reserve-form__row--dates > div {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__row--checkbox {[m
[32m+[m[32m  flex-direction: row;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 0.6rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form input,[m
[32m+[m[32m.ai-reserve-form select,[m
[32m+[m[32m.ai-reserve-form textarea {[m
[32m+[m[32m  border: 1px solid #d3dbe7;[m
[32m+[m[32m  border-radius: 6px;[m
[32m+[m[32m  padding: 0.65rem 1rem;[m
[32m+[m[32m  font-size: 1rem;[m
[32m+[m[32m  font-family: inherit;[m
[32m+[m[32m  transition: border-color 0.2s;[m
[32m+[m[32m  background: #f7fafd;[m
[32m+[m[32m}[m
[32m+[m[32m.ai-reserve-form input:focus,[m
[32m+[m[32m.ai-reserve-form select:focus,[m
[32m+[m[32m.ai-reserve-form textarea:focus {[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m  border-color: #6b9cff;[m
[32m+[m[32m}[m
[32m+[m[32m.ai-reserve-form textarea {[m
[32m+[m[32m  min-height: 70px;[m
[32m+[m[32m  resize: vertical;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__submit {[m
[32m+[m[32m  margin-top: 1.2rem;[m
[32m+[m[32m  padding: 0.8rem 0;[m
[32m+[m[32m  background: linear-gradient(90deg,#6b9cff 0%,#2a3d5c 100%);[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  font-size: 1.1rem;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: background 0.2s, box-shadow 0.2s;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(107,156,255,0.08);[m
[32m+[m[32m}[m
[32m+[m[32m.ai-reserve-form__submit:disabled {[m
[32m+[m[32m  opacity: 0.6;[m
[32m+[m[32m  cursor: not-allowed;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__error {[m
[32m+[m[32m  color: #c0392b;[m
[32m+[m[32m  background: #fbeeea;[m
[32m+[m[32m  border-left: 4px solid #c0392b;[m
[32m+[m[32m  padding: 0.5rem 1rem;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  font-size: 0.97rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ai-reserve-form__success {[m
[32m+[m[32m  color: #207d3a;[m
[32m+[m[32m  background: #eafbea;[m
[32m+[m[32m  border-left: 4px solid #207d3a;[m
[32m+[m[32m  padding: 0.5rem 1rem;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  font-size: 0.97rem;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 600px) {[m
[32m+[m[32m  .ai-reserve-form__container {[m
[32m+[m[32m    padding: 1.2rem 0.5rem;[m
[32m+[m[32m  }[m
[32m+[m[32m  .ai-reserve-form__title {[m
[32m+[m[32m    font-size: 1.3rem;[m
[32m+[m[32m  }[m
[32m+[m[32m  .ai-reserve-form__row--dates {[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    gap: 0.5rem;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/assets/scss/index_ecom_ai.scss b/assets/scss/index_ecom_ai.scss[m
[1mnew file mode 100644[m
[1mindex 0000000..1b1793b[m
[1m--- /dev/null[m
[1m+++ b/assets/scss/index_ecom_ai.scss[m
[36m@@ -0,0 +1,357 @@[m
[32m+[m[32m// Tunnel de commande e-commerce religieux[m
[32m+[m[32m.cart-ai-checkout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  background: linear-gradient(135deg, #f7fafc 0%, #e3e9f6 100%);[m
[32m+[m[32m  padding: 3rem 0;[m
[32m+[m[32m  font-family: 'Inter', Arial, sans-serif;[m
[32m+[m[41m  [m
[32m+[m[32m  &__container {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    max-width: 1100px;[m
[32m+[m[32m    margin: 0 auto;[m
[32m+[m[32m    gap: 2.5rem;[m
[32m+[m[32m    align-items: flex-start;[m
[32m+[m[32m    @media (max-width: 900px) {[m
[32m+[m[32m      flex-direction: column;[m
[32m+[m[32m      gap: 1.5rem;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  &__recap {[m
[32m+[m[32m    flex: 1 1 330px;[m
[32m+[m[32m    background: linear-gradient(135deg, #fafdff 0%, #eaf0fb 100%);[m
[32m+[m[32m    border-radius: 1.2rem;[m
[32m+[m[32m    box-shadow: 0 2px 16px #b2b2d840;[m
[32m+[m[32m    padding: 2rem 1.5rem;[m
[32m+[m[32m    min-width: 320px;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    gap: 1.8rem;[m
[32m+[m[32m    border: 1.5px solid #e3e9f6;[m
[32m+[m[32m    @media (max-width: 900px) {[m
[32m+[m[32m      min-width: unset;[m
[32m+[m[32m    }[m
[32m+[m[32m    > section {[m
[32m+[m[32m      background: #fff;[m
[32m+[m[32m      border-radius: 1rem;[m
[32m+[m[32m      box-shadow: 0 1px 6px #b2b2d820;[m
[32m+[m[32m      padding: 1.4rem 1.2rem;[m
[32m+[m[32m      margin-bottom: 0.7rem;[m
[32m+[m[32m      border: 1px solid #e3e9f6;[m
[32m+[m[32m      transition: box-shadow 0.2s, border 0.2s, transform 0.15s;[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        box-shadow: 0 4px 24px #6c63ff18;[m
[32m+[m[32m        border: 1.5px solid #b2b2d8;[m
[32m+[m[32m        transform: translateY(-2px) scale(1.01);[m
[32m+[m[32m      }[m
[32m+[m[32m      h3, h4 {[m
[32m+[m[32m        color: #4c4f6b;[m
[32m+[m[32m        font-weight: 700;[m
[32m+[m[32m        margin-bottom: 0.6rem;[m
[32m+[m[32m        font-size: 1.1rem;[m
[32m+[m[32m        letter-spacing: 0.01em;[m
[32m+[m[32m      }[m
[32m+[m[32m      p, li, span {[m
[32m+[m[32m        color: #2d3154;[m
[32m+[m[32m        font-size: 1rem;[m
[32m+[m[32m        line-height: 1.5;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    ul {[m
[32m+[m[32m      padding-left: 1.2rem;[m
[32m+[m[32m      margin: 0.7rem 0 0.4rem 0;[m
[32m+[m[32m      li {[m
[32m+[m[32m        position: relative;[m
[32m+[m[32m        background: #f8fafd;[m
[32m+[m[32m        border-radius: 0.7rem;[m
[32m+[m[32m        margin-bottom: 0.5rem;[m
[32m+[m[32m        padding: 0.8rem 1.1rem 0.8rem 2.3rem;[m
[32m+[m[32m        box-shadow: 0 1px 4px #b2b2d810;[m
[32m+[m[32m        border: 1px solid #e3e9f6;[m
[32m+[m[32m        transition: box-shadow 0.18s, border 0.18s, background 0.18s, transform 0.13s;[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        flex-flow: column;[m
[32m+[m[32m        align-items: center;[m
[32m+[m[32m        gap: 0.7rem;[m
[32m+[m[32m        font-size: 1rem;[m
[32m+[m[32m        color: #2d3154;[m
[32m+[m[32m        &:hover {[m
[32m+[m[32m          background: #f0f4ff;[m
[32m+[m[32m          border: 1.5px solid #b2b2d8;[m
[32m+[m[32m          box-shadow: 0 2px 12px #6c63ff18;[m
[32m+[m[32m          transform: translateY(-1px) scale(1.01);[m
[32m+[m[32m        }[m
[32m+[m[32m        &::before {[m
[32m+[m[32m          content: "\2713";[m
[32m+[m[32m          position: absolute;[m
[32m+[m[32m          left: 0.8rem;[m
[32m+[m[32m          top: 50%;[m
[32m+[m[32m          transform: translateY(-50%);[m
[32m+[m[32m          color: #6c63ff;[m
[32m+[m[32m          background: #e3e9f6;[m
[32m+[m[32m          border-radius: 50%;[m
[32m+[m[32m          width: 1.3em;[m
[32m+[m[32m          height: 1.3em;[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          align-items: center;[m
[32m+[m[32m          justify-content: center;[m
[32m+[m[32m          font-size: 0.95em;[m
[32m+[m[32m          font-weight: bold;[m
[32m+[m[32m          box-shadow: 0 1px 4px #6c63ff15;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  &__form {[m
[32m+[m[32m    flex: 2 1 480px;[m
[32m+[m[32m    background: #fff;[m
[32m+[m[32m    border-radius: 1.2rem;[m
[32m+[m[32m    box-shadow: 0 2px 16px #b2b2d840;[m
[32m+[m[32m    padding: 2.5rem 2rem 2rem 2rem;[m
[32m+[m[32m    min-width: 320px;[m
[32m+[m[32m    @media (max-width: 900px) {[m
[32m+[m[32m      min-width: unset;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-ai-steps {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 1rem;[m
[32m+[m[32m  margin-bottom: 2.2rem;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  button {[m
[32m+[m[32m    background: #e3e9f6;[m
[32m+[m[32m    color: #4c4f6b;[m
[32m+[m[32m    border: none;[m
[32m+[m[32m    border-radius: 2rem;[m
[32m+[m[32m    padding: 0.6rem 1.5rem;[m
[32m+[m[32m    font-weight: 600;[m
[32m+[m[32m    font-size: 1rem;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    transition: background 0.2s, color 0.2s;[m
[32m+[m[32m    &.active, &:not(:disabled):hover {[m
[32m+[m[32m      background: #4c4f6b;[m
[32m+[m[32m      color: #fff;[m
[32m+[m[32m    }[m
[32m+[m[32m    &:disabled {[m
[32m+[m[32m      opacity: .5;[m
[32m+[m[32m      cursor: not-allowed;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-ai-form {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 1.2rem;[m
[32m+[m[32m  label {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    gap: 0.3rem;[m
[32m+[m[32m    font-weight: 500;[m
[32m+[m[32m    color: #4c4f6b;[m
[32m+[m[32m    margin-bottom: 0.6rem;[m
[32m+[m[32m    input, select, textarea {[m
[32m+[m[32m      margin-top: 0.1rem;[m
[32m+[m[32m      border: 1px solid #d1d5db;[m
[32m+[m[32m      border-radius: 0.5rem;[m
[32m+[m[32m      padding: 0.7rem 1rem;[m
[32m+[m[32m      font-size: 1rem;[m
[32m+[m[32m      background: #f6f9fc;[m
[32m+[m[32m      transition: border 0.2s;[m
[32m+[m[32m      &:focus {[m
[32m+[m[32m        border: 1.5px solid #4c4f6b;[m
[32m+[m[32m        outline: none;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    textarea {[m
[32m+[m[32m      min-height: 60px;[m
[32m+[m[32m      resize: vertical;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-ai-step-content {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 1.2rem;[m
[32m+[m[32m  h2 {[m
[32m+[m[32m    font-size: 1.25rem;[m
[32m+[m[32m    color: #2d3154;[m
[32m+[m[32m    margin-bottom: 0.7rem;[m
[32m+[m[32m    font-weight: 700;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-ai-nav-btns {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 1rem;[m
[32m+[m[32m  margin-top: 1.2rem;[m
[32m+[m[32m  justify-content: flex-end;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.btn-primary {[m
[32m+[m[32m  background: linear-gradient(90deg, #6c63ff 0%, #48b1f3 100%);[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  border-radius: 2rem;[m
[32m+[m[32m  padding: 0.7rem 2.2rem;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  font-size: 1rem;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  box-shadow: 0 2px 8px #6c63ff30;[m
[32m+[m[32m  transition: background 0.2s, box-shadow 0.2s;[m
[32m+[m[32m  &:hover:not(:disabled) {[m
[32m+[m[32m    background: linear-gradient(90deg, #48b1f3 0%, #6c63ff 100%);[m
[32m+[m[32m    box-shadow: 0 4px 16px #6c63ff40;[m
[32m+[m[32m  }[m
[32m+[m[32m  &:disabled {[m
[32m+[m[32m    opacity: .5;[m
[32m+[m[32m    cursor: not-allowed;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.btn-secondary {[m
[32m+[m[32m  background: #e3e9f6;[m
[32m+[m[32m  color: #4c4f6b;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  border-radius: 2rem;[m
[32m+[m[32m  padding: 0.7rem 2.2rem;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  font-size: 1rem;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: background 0.2s;[m
[32m+[m[32m  &:hover:not(:disabled) {[m
[32m+[m[32m    background: #c7d2fe;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// --- MODAL ECOMMERCE ---[m
[32m+[m[32m.modal-overlay {[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  inset: 0;[m
[32m+[m[32m  background: rgba(44, 48, 84, 0.22);[m
[32m+[m[32m  z-index: 2000;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  animation: fadeIn 0.2s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.modal-container {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 1.2rem;[m
[32m+[m[32m  box-shadow: 0 4px 32px #b2b2d870;[m
[32m+[m[32m  padding: 2.2rem 2rem 1.5rem 2rem;[m
[32m+[m[32m  min-width: 330px;[m
[32m+[m[32m  max-width: 95vw;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  max-height: 90vh;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  box-shadow: 0 0 10em 1em;[m
[32m+[m[32m  animation: popIn 0.18s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.modal-close {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 1.1rem;[m
[32m+[m[32m  right: 1.1rem;[m
[32m+[m[32m  background: none;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  font-size: 2.2rem;[m
[32m+[m[32m  color: #b2b2d8;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: color 0.15s;[m
[32m+[m[32m  &:hover { color: #6c63ff; }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ecommerce_form_add {[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  overflow-y: auto;[m
[32m+[m
[32m+[m[32m  label, input, textarea, select {[m
[32m+[m[32m    font-size: 1.08rem;[m
[32m+[m[32m    font-family: inherit;[m
[32m+[m[32m  }[m
[32m+[m[32m  input, textarea, select {[m
[32m+[m[32m    border: 1.5px solid #e3e9f6;[m
[32m+[m[32m    border-radius: 0.6rem;[m
[32m+[m[32m    padding: 0.6rem 0.9rem;[m
[32m+[m[32m    margin-top: 0.18rem;[m
[32m+[m[32m    background: #fafbff;[m
[32m+[m[32m    transition: border 0.16s, box-shadow 0.16s;[m
[32m+[m[32m    &:focus {[m
[32m+[m[32m      border: 1.5px solid #6c63ff;[m
[32m+[m[32m      outline: none;[m
[32m+[m[32m      box-shadow: 0 0 0 2px #6c63ff22;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  textarea {[m
[32m+[m[32m    min-height: 70px;[m
[32m+[m[32m    resize: vertical;[m
[32m+[m[32m  }[m
[32m+[m[32m  button[type="submit"], button[type="button"] {[m
[32m+[m[32m    background: linear-gradient(90deg,#6c63ff 30%,#3b3f7f 100%);[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m    border: none;[m
[32m+[m[32m    border-radius: 0.6rem;[m
[32m+[m[32m    padding: 0.7rem 1.5rem;[m
[32m+[m[32m    font-weight: 600;[m
[32m+[m[32m    font-size: 1.08rem;[m
[32m+[m[32m    margin-top: 0.3rem;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    box-shadow: 0 2px 8px #b2b2d820;[m
[32m+[m[32m    transition: background 0.18s, transform 0.13s;[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      background: linear-gradient(90deg,#3b3f7f 0%,#6c63ff 100%);[m
[32m+[m[32m      transform: translateY(-1px) scale(1.04);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  h2 {[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    font-size: 1.28rem;[m
[32m+[m[32m    color: #4c4f6b;[m
[32m+[m[32m    margin-bottom: 0.7rem;[m
[32m+[m[32m    font-weight: 700;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 600px) {[m
[32m+[m[32m  .modal-container {[m
[32m+[m[32m    padding: 1.1rem 0.3rem 0.7rem 0.3rem;[m
[32m+[m[32m    min-width: unset;[m
[32m+[m[32m    max-width: 99vw;[m
[32m+[m[32m  }[m
[32m+[m[32m  .ecommerce {[m
[32m+[m[32m    padding: 1.1rem 0.5rem 0.7rem 0.5rem;[m
[32m+[m[32m    min-width: unset;[m
[32m+[m[32m    max-width: 99vw;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@keyframes fadeIn {[m
[32m+[m[32m  from { opacity: 0; }[m
[32m+[m[32m  to { opacity: 1; }[m
[32m+[m[32m}[m
[32m+[m[32m@keyframes popIn {[m
[32m+[m[32m  from { transform: scale(0.95); opacity: 0; }[m
[32m+[m[32m  to { transform: scale(1); opacity: 1; }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m// Responsive[m
[32m+[m[32m@media (max-width: 600px) {[m
[32m+[m[32m  .cart-ai-checkout__container {[m
[32m+[m[32m    padding: 0 0.5rem;[m
[32m+[m[32m  }[m
[32m+[m[32m  .cart-ai-checkout__recap, .cart-ai-checkout__form {[m
[32m+[m[32m    padding: 1rem 0.5rem;[m
[32m+[m[32m  }[m
[32m+[m[32m  .cart-ai-steps {[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    gap: 0.5rem;[m
[32m+[m[32m    button {[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/assets/scss/style.scss b/assets/scss/style.scss[m
[1mindex 14abaeb..e8d0cdd 100644[m
[1m--- a/assets/scss/style.scss[m
[1m+++ b/assets/scss/style.scss[m
[36m@@ -1,5 +1,5 @@[m
[31m-@import "./main.scss";[m
[31m-@import "./index.scss";[m
[32m+[m[32m// @import "./main.scss";[m
[32m+[m[32m// @import "./index.scss";[m
 [m
 /*[m
      CE DOCUMENT EST POUR LES PERSONNES QUI DEVRONT COLLABORER AU PROJET, [m
[36m@@ -7,6 +7,148 @@[m
 */[m
 [m
 [m
[32m+[m[32mfieldset.submit{[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  margin: 2em 0;[m
[32m+[m[32m  font-size: 2em;[m
[32m+[m[32m  border: double blue;[m
[32m+[m[32m  border-width: 7px 0;[m
[32m+[m[32m  &:not(#pound){padding: 1em 3em !important;}[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[41m   [m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    border-color: #2196f3;[m
[32m+[m[32m    background-color: rgba(33, 150, 243, 0.05);[m
[32m+[m[32m    transform: scale(1.01);[m
[32m+[m[32m  }[m
[32m+[m[41m   [m
[32m+[m[32m  >input{[m
[32m+[m[32m    @extend %endingFormButtons;[m
[32m+[m[32m    color: white;[m
[32m+[m[32m    transition: all 0.3s ease;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[41m     [m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      transform: translateY(-2px);[m
[32m+[m[32m      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2),[m
[32m+[m[32m                 0 8px 16px rgba(33, 150, 243, 0.25);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    &:active {[m
[32m+[m[32m      transform: translateY(1px);[m
[32m+[m[32m      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15),[m
[32m+[m[32m                 0 2px 6px rgba(33, 150, 243, 0.2);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m#recapitulatif,.payment {[m
[32m+[m[32m  &:not(#pound){padding:0 !important;}[m
[32m+[m[32m  >h4,>div {[m
[32m+[m[32m    text-align: center !important;[m
[32m+[m[32m    &:not(#pound){padding: 1em 0 !important;}[m
[32m+[m[32m    >button,>input {[m
[32m+[m[32m      padding: 0.8em 1.5em;[m
[32m+[m[32m      background: linear-gradient(145deg, silver, gray);[m
[32m+[m[32m      border: none;[m
[32m+[m[32m      border-radius: 8px;[m
[32m+[m[32m      color: white;[m
[32m+[m[32m      font-weight: 500;[m
[32m+[m[32m      letter-spacing: 0.5px;[m
[32m+[m[32m      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1),[m
[32m+[m[32m                  0 4px 8px rgba(33, 150, 243, 0.2);[m
[32m+[m[32m      transition: all 0.3s ease;[m
[32m+[m[32m      cursor: pointer;[m
 [m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        @extend %endingFormButtons;[m
[32m+[m[32m        transform: translateY(-1px);[m
[32m+[m[32m        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15),[m
[32m+[m[32m                    0 8px 16px rgba(33, 150, 243, 0.2);[m
[32m+[m[32m      }[m
 [m
[32m+[m[32m      &:active {[m
[32m+[m[32m        transform: translateY(1px);[m
[32m+[m[32m        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1),[m
[32m+[m[32m                    0 2px 4px rgba(33, 150, 243, 0.2);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
 [m
[32m+[m
[32m+[m
[32m+[m[32m// Style du bouton de validation[m
[32m+[m[32m.validate-button {[m
[32m+[m[32m  display: none; // Caché par défaut sur desktop[m
[32m+[m[32m  box-shadow: 0 0 5px 2px  black !important;[m
[32m+[m[41m  [m
[32m+[m[32m  @include mobile-and-tablette {[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    padding: 0.75rem;[m
[32m+[m[32m    background-color: #007bff;[m
[32m+[m[32m    color: white;[m
[32m+[m[32m    border: none;[m
[32m+[m[32m    border-radius: 5px;[m
[32m+[m[32m    font-size: 1rem;[m
[32m+[m[32m    font-weight: bold;[m
[32m+[m[32m    text-transform: uppercase;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    transition: background-color 0.3s ease;[m
[32m+[m[32m    width: 50%;[m
[32m+[m[32m    margin: 1rem auto;[m
[32m+[m[41m    [m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      background-color: darken(#007bff, 10%);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    &:active {[m
[32m+[m[32m      transform: translateY(1px);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Style du bouton de basculement des informations de paiement[m
[32m+[m[32m.payment-toggle-button {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  padding: 1rem;[m
[32m+[m[32m  background-color: #f8f9fa;[m
[32m+[m[32m  border: 1px solid #dee2e6;[m
[32m+[m[32m  border-radius: 0.25rem;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[41m  [m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    background-color: #e9ecef;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  h4 {[m
[32m+[m[32m    margin: 0;[m
[32m+[m[32m    font-size: 1.2rem;[m
[32m+[m[32m    color: #212529;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .arrow {[m
[32m+[m[32m    font-size: 1rem;[m
[32m+[m[32m    transition: transform 0.3s ease;[m
[32m+[m[41m    [m
[32m+[m[32m    &.open {[m
[32m+[m[32m      transform: rotate(180deg);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.payment-details {[m
[32m+[m[32m  max-height: 0;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  transition: max-height 0.3s ease-out;[m
[32m+[m[41m  [m
[32m+[m[32m  &.open {[m
[32m+[m[32m    max-height: 2000px; // Une valeur suffisamment grande pour contenir tout le contenu[m
[32m+[m[32m    transition: max-height 0.5s ease-in;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/package.json b/package.json[m
[1mindex 3f2b8c6..7f4826b 100644[m
[1m--- a/package.json[m
[1m+++ b/package.json[m
[36m@@ -15,6 +15,7 @@[m
     "@googlemaps/react-wrapper": "^1.1.42",[m
     "antd": "^5.22.2",[m
     "autoprefixer": "^10.4.20",[m
[32m+[m[32m    "axios": "^1.7.9",[m
     "bcrypt": "^5.1.1",[m
     "classnames": "^2.5.1",[m
     "cors": "^2.8.5",[m
[36m@@ -35,7 +36,6 @@[m
     "multer": "1.4.5-lts.1",[m
     "next": "15.0.2",[m
     "nodemailer": "^6.9.16",[m
[31m-    "primereact": "^10.9.2",[m
     "react": "19.0.0-rc-02c0e824-20241028",[m
     "react-datepicker": "^7.5.0",[m
     "react-dom": "19.0.0-rc-02c0e824-20241028",[m
[36m@@ -48,6 +48,7 @@[m
     "remark-html": "^16.0.1",[m
     "sass": "^1.80.6",[m
     "sass-loader": "^16.0.3",[m
[32m+[m[32m    "sharp": "^0.34.2",[m
     "slick-carousel": "^1.8.1",[m
     "style-loader": "^4.0.0",[m
     "styled-components": "^6.1.13",[m
[1mdiff --git a/pages/api/_/controllers/entryController.js b/pages/api/_/controllers/entryController.js[m
[1mindex a9fd699..6daa449 100644[m
[1m--- a/pages/api/_/controllers/entryController.js[m
[1m+++ b/pages/api/_/controllers/entryController.js[m
[36m@@ -14,8 +14,6 @@[m [mconst fs = require('fs')[m
 [m
 [m
 [m
[31m-exports.getEntry = (req, res, next, Model) => {[m
[31m-}[m
 [m
 exports.createEntry = async (req, res, next, Model) => {[m
     // let test = await connectToDatabase.connect();[m
[1mdiff --git a/pages/api/_/controllers/members.js b/pages/api/_/controllers/members.js[m
[1mdeleted file mode 100644[m
[1mindex f04ea2a..0000000[m
[1m--- a/pages/api/_/controllers/members.js[m
[1m+++ /dev/null[m
[36m@@ -1,30 +0,0 @@[m
[31m-const fs = require('fs')[m
[31m-// const { createEntry } = require('./entryController')[m
[31m-const Eleve = require('../models/Eleve')[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
[31m-[m
[31m-export function getStudents(req, res, next) {[m
[31m-  Eleve.find().then([m
[31m-    (eleves) => {[m
[31m-      res.status(200).json(eleves)[m
[31m-    }[m
[31m-  ).catch([m
[31m-    (error) => {[m
[31m-      res.status(400).json({[m
[31m-        error: error[m
[31m-      })[m
[31m-    }[m
[31m-  )[m
[31m-  [m
[31m-  [m
[31m-}[m
[31m-export function getTeachers(req, res, next) {[m
[31m-[m
[31m-  [m
[31m-  [m
[31m-}[m
[31m-[m
[31m-[m
[1mdiff --git a/pages/api/_/models/Articles.js b/pages/api/_/models/Articles.js[m
[1mnew file mode 100644[m
[1mindex 0000000..4bdabda[m
[1m--- /dev/null[m
[1m+++ b/pages/api/_/models/Articles.js[m
[36m@@ -0,0 +1,26 @@[m
[32m+[m[32mimport mongoose from 'mongoose';[m
[32m+[m
[32m+[m[32mconst articlesSchema = new mongoose.Schema({[m
[32m+[m[32m  id_produits: { type: String, required: true },[m
[32m+[m[32m  nom: { type: String, required: true },[m
[32m+[m[32m  user_name: { type: String }, // "objet" ou "publication"[m
[32m+[m[32m  auteur: { type: String },[m
[32m+[m[32m  img: { type: String },[m
[32m+[m[32m  fr: { type: String },[m
[32m+[m[32m  en: { type: String },[m
[32m+[m[32m  es: { type: String },[m
[32m+[m[32m  fr1: { type: String }, // description détaillée[m
[32m+[m[32m  en1: { type: String },[m
[32m+[m[32m  es1: { type: String },[m
[32m+[m[32m  taille: { type: String },[m
[32m+[m[32m  materiaux: { type: String },[m
[32m+[m[32m  autre: { type: String },[m
[32m+[m[32m  prix: { type: String },[m
[32m+[m[32m  stock: { type: Number, default: 5 },[m
[32m+[m[32m  vendus: { type: Number, default: 0 },[m
[32m+[m[32m  alaune: { type: Number, default: 0 },[m
[32m+[m[32m  actif: { type: Boolean, default: true },[m
[32m+[m[32m  code: { type: String }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mexport default mongoose.models.Articles || mongoose.model('Articles', articlesSchema);[m
\ No newline at end of file[m
[1mdiff --git a/pages/api/_/models/ArticlesOptions.js b/pages/api/_/models/ArticlesOptions.js[m
[1mnew file mode 100644[m
[1mindex 0000000..6c208f7[m
[1m--- /dev/null[m
[1m+++ b/pages/api/_/models/ArticlesOptions.js[m
[36m@@ -0,0 +1,17 @@[m
[32m+[m[32mimport mongoose from 'mongoose';[m
[32m+[m
[32m+[m[32mconst articlesOptionsSchema = new mongoose.Schema({[m
[32m+[m[32m  id: { type: String, required: true },[m
[32m+[m[32m  img_article: { type: String, required: true },[m
[32m+[m[32m  stock: { type: String },[m
[32m+[m[32m  vendus: { type: String },[m
[32m+[m[32m  coloris: { type: String, default: null },[m
[32m+[m[32m  couverture: { type: String, default: null },[m
[32m+[m[32m  taille_: { type: String },[m
[32m+[m[32m  opt_nom: { type: String, default: null },[m
[32m+[m[32m  opt_prix: { type: String },[m
[32m+[m[32m  autre: { type: String },[m
[32m+[m[32m  opt_img: { type: String }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mexport default mongoose.models.ArticlesOptions || mongoose.model('ArticlesOptions', articlesOptionsSchema);[m
\ No newline at end of file[m
[1mdiff --git a/pages/api/_/models/Classe.js b/pages/api/_/models/Classe.js[m
[1mindex 4095277..4722766 100644[m
[1m--- a/pages/api/_/models/Classe.js[m
[1m+++ b/pages/api/_/models/Classe.js[m
[36m@@ -15,9 +15,9 @@[m [mlet {schema: schemaEleve} = modelEleves[m
 [m
 const classeSchema = mongoose.Schema({[m
     // professeur: { default: "", type: [ObjectId], ref: Object.keys(schemaTeacher.obj)[0], required: true },[m
[31m-    professeur: { default: [], type: [Object], required: true },[m
[32m+[m[32m    professeur: { default: "", type: [Object], required: true },[m
     // eleves: { default: [], type: [ObjectId], ref: Object.keys(schemaStudent.obj)[0], required: true },[m
[31m-    eleves: { default: [], type: [Object], required: true },[m
[32m+[m[32m    eleves: { default: "", type: [Object], required: true },[m
     annee: { default: "", type: String, required: true },[m
     niveau: { default: "", type: String, required: true },[m
     alias: { default: "", type: String, required: true },[m
[1mdiff --git a/pages/api/_/models/Eleve.js b/pages/api/_/models/Eleve.js[m
[1mindex fbabee0..e03f04f 100644[m
[1m--- a/pages/api/_/models/Eleve.js[m
[1m+++ b/pages/api/_/models/Eleve.js[m
[36m@@ -14,16 +14,16 @@[m [mconst studentSchema = mongoose.Schema({[m
     // current_classe_$_ref_µ_classes: { default: "", type: Object, required: true },[m
     current_classe: { default: "", type: ObjectId, ref: Object.keys(schemaClasseForEleve.obj)[0], required: true },[m
     nom: { default: "", type: String, required: true },[m
[31m-    prenoms: { default: [""], type: [Object], required: true },[m
[32m+[m[32m    prenoms: { default: "", type: String, required: true },[m
     naissance_$_date: { default: "", type: String, required: true },[m
[31m-    adresse_$_map: { default: "", type: String, required: true },[m
[32m+[m[32m    adresse: { default: "", type: String, required: true },[m
     parents: { default: {mere: "", pere: "", phone: ""}, type: Object, required: true },[m
     photo_$_file: { default: "", type: String, required: true },[m
     // photo: {[m
     //   data: Buffer,[m
     //   contentType: String,[m
     // },[m
[31m-    scolarity_fees_$_checkbox: { default: {[currentSchoolYear]: false}, type: Object, required: true }, // => {YYYY: {}}[m
[32m+[m[32m    scolarity_fees_$_checkbox: { default: {[currentSchoolYear]: "checked"}, type: Object, required: true }, // => {YYYY: {}}[m
     bolobi_class_history_$_ref_µ_classes: { default: {[currentSchoolYear]:""}, type: Object, required: true },[m
     school_history: { default: {[currentSchoolYear]:""}, type: Object, required: true },[m
     absences: { default: {}, type: [String], required: true },[m
[1mdiff --git a/pages/api/_/models/School.js b/pages/api/_/models/School.js[m
[1mindex 2d959e8..c5b9347 100644[m
[1m--- a/pages/api/_/models/School.js[m
[1m+++ b/pages/api/_/models/School.js[m
[36m@@ -12,14 +12,14 @@[m [mconst ObjectId = Schema.Types.ObjectId;[m
 [m
 [m
 const classeSchema = mongoose.Schema({[m
[31m-    // professeur_$_ref_µ_teachers: { default: [], type: [ObjectId], ref: Object.keys(schemaTeacher.obj)[0], required: true },[m
[31m-    professeur_$_ref_µ_teachers: { default: [], type: [Object], required: true },[m
[31m-    // eleves_$_ref_µ_eleves: { default: [], type: [ObjectId], ref: Object.keys(schemaStudent.obj)[0], required: true },[m
[31m-    eleves_$_ref_µ_eleves: { default: [], type: [Object], required: true },[m
[31m-    annee: { default: "", type: String, required: true },[m
[32m+[m[32m    // professeur: { default: "", type: [ObjectId], ref: Object.keys(schemaTeacher.obj)[0], required: true },[m
[32m+[m[32m    professeur_$_ref_µ_teachers: { default: "", type: Object, required: true },[m
[32m+[m[32m    // eleves: { default: [], type: [ObjectId], ref: Object.keys(schemaStudent.obj)[0], required: true },[m
[32m+[m[32m    eleves_$_ref_µ_eleves: { default: "", type: Object, required: true },[m
[32m+[m[32m    annee_$_number: { default: "", type: Number, required: true },[m
     niveau: { default: "", type: String, required: true },[m
     alias: { default: "", type: String, required: true },[m
[31m-    photo_$_file: { default: "", type: String, required: true },[m
[32m+[m[32m    photo: { default: "", type: String, required: true },[m
     // photo: {[m
     //   data: Buffer,[m
     //   contentType: String,[m
[36m@@ -29,12 +29,12 @@[m [mconst classeSchema = mongoose.Schema({[m
     compositions: { default: [], type: Object, required: true },[m
     moyenne_trimetriel: {[m
         default: ["", "", ""], type: [String],[m
[31m-        // validate: {[m
[31m-        //     validator: function (eleves) {[m
[31m-        //         return eleves.length === 3;[m
[31m-        //     },[m
[31m-        //     message: 'Le champ "moyenne_trimetriel" doit contenir exactement 3 valeurs.',[m
[31m-        // },[m
[32m+[m[32m        validate: {[m
[32m+[m[32m            validator: function (eleves) {[m
[32m+[m[32m                return eleves.length === 3;[m
[32m+[m[32m            },[m
[32m+[m[32m            message: 'Le champ "moyenne_trimetriel" doit contenir exactement 3 valeurs.',[m
[32m+[m[32m        },[m
     },[m
     commentaires: { default: [], type: [Object], required: true },[m
 [m
[36m@@ -72,19 +72,19 @@[m [mcurrentSchoolYear = (currentSchoolYear.getMonth()+1)<7 ? (currentSchoolYear.getF[m
 let currentSchoolYearField = {[currentSchoolYear]: false}[m
 [m
 const studentSchema = mongoose.Schema({[m
[31m-    // current_classe_$_ref_µ_classes: { default: "", type: ObjectId, ref: Object.keys(classeSchema.obj)[0], required: true },[m
     current_classe_$_ref_µ_classes: { default: "", type: Object, required: true },[m
[32m+[m[32m    // current_classe: { default: "", type: ObjectId, ref: Object.keys(classeSchema.obj)[0], required: true },[m
     nom: { default: "", type: String, required: true },[m
[31m-    prenoms: { default: [], type: [String], required: true },[m
[32m+[m[32m    prenoms: { default: "", type: String, required: true },[m
     naissance_$_date: { default: "", type: String, required: true },[m
[31m-    adresse_$_map: { default: "", type: String, required: true },[m
[32m+[m[32m    adresse: { default: "", type: String, required: true },[m
     parents: { default: {mere: "", pere: "", phone: ""}, type: Object },[m
     photo_$_file: { default: "", type: String },[m
     // photo: {[m
     //   data: Buffer,[m
     //   contentType: String,[m
     // },[m
[31m-    scolarity_fees_$_checkbox: { default: {[currentSchoolYear]: false}, type: Object }, // => {YYYY: {}}[m
[32m+[m[32m    scolarity_fees_$_checkbox: { default: {[currentSchoolYear]: "checked"}, type: Object }, // => {YYYY: {}}[m
     bolobi_class_history_$_ref_µ_classes: { default: {[currentSchoolYear]:""}, type: Object },[m
     school_history: { default: {[currentSchoolYear]:""}, type: Object },[m
     absences: { default: {}, type: Object },[m
[36m@@ -134,15 +134,15 @@[m [melse modelEleves = mongoose.model("Eleves_Ecole_St_Martin")[m
 [m
 [m
 const teacherSchema = mongoose.Schema({[m
[31m-    // current_classes_$_ref_µ_classes: { default: "", type: ObjectId, ref: Object.keys(classeSchema.obj)[0], required:true },[m
[31m-    current_classes_$_ref_µ_classes: { default: "", type: Object, required:true },[m
[32m+[m[32m    current_classes_$_ref_µ_classes: { default: {}, type: Object, required:true },[m
[32m+[m[32m    // current_classes: { default: "", type: ObjectId, ref: Object.keys(classeSchema.obj)[0], required:true },[m
     nom: { default: "", type: String, required:true },[m
[31m-    prenoms: { default: [], type: [String], required:true },[m
[32m+[m[32m    prenoms: { default: "", type: String, required:true },[m
     naissance_$_date: { default: "", type: String, required:true },[m
[31m-    adresse_$_map: { default: "", type: String, required:true },[m
[32m+[m[32m    adresse: { default: "", type: String, required:true },[m
     photo_$_file: { default: "", type: String, required:true },[m
[31m-    phone_$_tel: { default: "+2250102030465", type: String, required:true },[m
[31m-    email_$_email: { default: "email@exemple.com", type: String, required:true },[m
[32m+[m[32m    phone_$_tel: { default: "+2250102030405", type: String, required:true },[m
[32m+[m[32m    email_$_email: { default: "email.exemple.com", type: String, required:true },[m
 })[m
 [m
 [m
[1mdiff --git a/pages/api/_/models/Teacher.js b/pages/api/_/models/Teacher.js[m
[1mindex 337e8c7..c57742f 100644[m
[1m--- a/pages/api/_/models/Teacher.js[m
[1m+++ b/pages/api/_/models/Teacher.js[m
[36m@@ -7,15 +7,14 @@[m [mconsole.log(schema);[m
 [m
 const teacherSchema = mongoose.Schema({[m
     // current_classes: { default: "", type: Object, required:true },[m
[31m-    // current_classes_$_ref_µ_classes: { default: "", type: ObjectId, ref: Object.keys(schema.obj)[0], required:true },[m
     current_classes: { default: "", type: ObjectId, ref: Object.keys(schema.obj)[0], required:true },[m
     nom: { default: "", type: String, required:true },[m
[31m-    prenoms: { default: [], type: [String], required:true },[m
[32m+[m[32m    prenoms: { default: "", type: String, required:true },[m
     naissance_$_date: { default: new Date().getTime(), type: Number, required:true },[m
[31m-    adresse_$_map: { default: "", type: String, required:true },[m
[32m+[m[32m    adresse: { default: "", type: String, required:true },[m
     photo_$_file: { default: "", type: String, required:true },[m
[31m-    phone_$_tel: { default: "+2250102030455", type: String, required:true },[m
[31m-    email_$_email: { default: "email@exemple.com", type: String, required:true },[m
[32m+[m[32m    phone_$_tel: { default: "+2250102030405", type: String, required:true },[m
[32m+[m[32m    email_$_email: { default: "email.exemple.com", type: String, required:true },[m
 })[m
 [m
 [m
[1mdiff --git a/pages/api/_/models/User_lpd.js b/pages/api/_/models/User_lpd.js[m
[1mnew file mode 100644[m
[1mindex 0000000..33dca0c[m
[1m--- /dev/null[m
[1m+++ b/pages/api/_/models/User_lpd.js[m
[36m@@ -0,0 +1,29 @@[m
[32m+[m[32mimport mongoose from 'mongoose';[m
[32m+[m[32mimport uniqueValidator from 'mongoose-unique-validator';[m
[32m+[m
[32m+[m[32mconst userSchema = new mongoose.Schema({[m
[32m+[m[32m  email: { type: String, required: true, unique: true },[m
[32m+[m[32m  fullName: { type: String, required: false },           // nom complet[m
[32m+[m[32m  tel: { type: String, required: false },[m
[32m+[m[32m  // username: { type: String, required: true },[m
[32m+[m[32m  // password: { type: String, required: true },[m
[32m+[m[32m  // role: { type: String, required: true },[m
[32m+[m[32m  // liked: { type: Array, required: true },[m
[32m+[m[32m  options: {[m
[32m+[m[32m    adress: { type: String, required: false },        // adresse postale[m
[32m+[m[32m    ville: { type: String, required: false },[m
[32m+[m[32m    // codePostal: { type: String, required: false },[m
[32m+[m[32m    livraison: { type: String, required: false },     // mode de livraison[m
[32m+[m[32m    paiement: { type: String, required: false },      // mode de paiement[m
[32m+[m[32m    instructions: { type: String, required: false },  // instructions de livraison[m
[32m+[m[32m    age: { type: Number, required: false }[m
[32m+[m[32m  },[m
[32m+[m[32m  commandes: {[m
[32m+[m[32m    sanctuaire: [{ type: Object, required: false }], // historique réservations sanctuaire[m
[32m+[m[32m    ecom: [{ type: Object, required: false }]        // historique commandes ecommerce[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32muserSchema.plugin(uniqueValidator);[m
[32m+[m
[32m+[m[32mexport default mongoose.models.User_lpd || mongoose.model('User_lpd', userSchema);[m
[1mdiff --git a/pages/api/ecom.js b/pages/api/ecom.js[m
[1mnew file mode 100644[m
[1mindex 0000000..0ff0879[m
[1m--- /dev/null[m
[1m+++ b/pages/api/ecom.js[m
[36m@@ -0,0 +1,80 @@[m
[32m+[m[32mimport dbConnect from './lib/dbConnect';[m
[32m+[m[32mimport Articles from './_/models/Articles';[m
[32m+[m[32mimport ArticlesOptions from './_/models/ArticlesOptions';[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[32m  await dbConnect();[m
[32m+[m[32m  if (req.method === 'GET') {[m
[32m+[m[32m    try {[m
[32m+[m[32m      const articles = await Articles.find({});[m
[32m+[m[32m      const options = await ArticlesOptions.find({});[m
[32m+[m[32m      return res.status(200).json({ articles, options });[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      return res.status(500).json({ error: err.message });[m
[32m+[m[32m    }[m
[32m+[m[32m  } else if (req.method === 'POST') {[m
[32m+[m[32m    try {[m
[32m+[m[32m      const { nom, prix, img, fr, fr1, user_name, auteur, taille, materiaux, autre, stock, alaune, actif } = req.body;[m
[32m+[m[32m      if (!nom || !prix) {[m
[32m+[m[32m        return res.status(400).json({ error: 'Champs requis manquants (nom, prix)' });[m
[32m+[m[32m      }[m
[32m+[m[32m      const newArticle = await Articles.create({[m
[32m+[m[32m        nom, prix, img, fr, fr1, user_name, auteur, taille, materiaux, autre, stock, alaune, actif,[m
[32m+[m[32m        id_produits: Date.now().toString(), // simple id unique[m
[32m+[m[32m      });[m
[32m+[m[32m      console.log(req.body);[m
[32m+[m[32m      console.log(newArticle);[m
[32m+[m[32m      console.log(alaune);[m
[32m+[m[41m      [m
[32m+[m[32m      return res.status(201).json({ article: newArticle });[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      return res.status(500).json({ error: err.message });[m
[32m+[m[32m    }[m
[32m+[m[32m  } else if (req.method === 'PATCH') {[m
[32m+[m[32m    try {[m
[32m+[m[32m      const { _id, ...updates } = req.body;[m
[32m+[m[32m      if (!_id) return res.status(400).json({ error: 'ID requis pour la mise à jour' });[m
[32m+[m[32m      const updatedArticle = await Articles.findByIdAndUpdate(_id, updates, { new: true });[m
[32m+[m[32m      if (!updatedArticle) return res.status(404).json({ error: 'Article introuvable' });[m
[32m+[m[32m      return res.status(200).json({ article: updatedArticle });[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      return res.status(500).json({ error: err.message });[m
[32m+[m[32m    }[m
[32m+[m[32m  } else if (req.method === 'DELETE') {[m
[32m+[m[32m    try {[m
[32m+[m[32m      const path = require('path');[m
[32m+[m[32m      const id = req.query.id || req.body.id;[m
[32m+[m[32m      const src = req.query.src || req.body.src;[m
[32m+[m[32m      const src_ = path.join(process.cwd(), "public", src)[m
[32m+[m[32m      const src_min = src_.replace("/min","")[m
[32m+[m[32m      if (!id||!src) return res.status(400).json({ error: 'ID requis; ou src requis' });[m
[32m+[m[32m      const article = await Articles.findByIdAndDelete(id);[m
[32m+[m[32m      if (!article) return res.status(404).json({ error: 'Article introuvable' });[m
[32m+[m[32m      // Suppression des fichiers images[m
[32m+[m[32m      const fs = require('fs');[m
[32m+[m[32m      let errors = [];[m
[32m+[m[32m      if (article.img) {[m
[32m+[m[32m        console.log("lllllllllllllllll");[m
[32m+[m[32m        console.log(src_);[m
[32m+[m[32m        console.log(src_min);[m
[32m+[m[41m        [m
[32m+[m[32m        // img est du type /img/vente-religieuse/[folder]/[file.webp][m
[32m+[m[32m        // const imgPath = path.join(process.cwd(), 'public', 'img', 'vente-religieuse', path.basename(article.img+".webp"));[m
[32m+[m[32m        try { if (fs.existsSync(src_)) fs.unlinkSync(src_); } catch(e){ errors.push(e.message); }[m
[32m+[m[32m        // console.log(imgPath);[m
[32m+[m[32m        // min path[m
[32m+[m[32m        // const minPath = path.join(process.cwd(), 'public', 'img', 'vente-religieuse', 'min', path.basename(article.img+".webp"));[m
[32m+[m[32m        // console.log(minPath);[m
[32m+[m[32m        try { if (fs.existsSync(src_min)) fs.unlinkSync(src_min); } catch(e){ errors.push(e.message); }[m
[32m+[m[32m      }[m
[32m+[m[32m      return res.status(200).json({ success: true, errors });[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      return res.status(500).json({ error: err.message });[m
[32m+[m[32m    }[m
[32m+[m[32m  } else {[m
[32m+[m[32m    console.log("req.method");[m
[32m+[m[32m    console.log(req.method);[m
[32m+[m[41m    [m
[32m+[m[32m    return res.status(405).json({ error: 'Méthode non autorisée: '+req.method });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/pages/api/ecomFixtures.js b/pages/api/ecomFixtures.js[m
[1mnew file mode 100644[m
[1mindex 0000000..cb0017c[m
[1m--- /dev/null[m
[1m+++ b/pages/api/ecomFixtures.js[m
[36m@@ -0,0 +1,34 @@[m
[32m+[m[32mimport dbConnect from './lib/dbConnect';[m
[32m+[m[32mimport Articles from './_/models/Articles';[m
[32m+[m[32mimport ArticlesOptions from './_/models/ArticlesOptions';[m
[32m+[m[32mimport { articles } from '../../assets/datas/articles.js';[m
[32m+[m[32mimport articles_options from '../../assets/datas/articles_options.js';[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[41m    [m
[32m+[m[32m  if (req.method !== 'GET') {[m
[32m+[m[32m    return res.status(405).json({ error: 'Méthode non autorisée' });[m
[32m+[m[32m  }[m
[32m+[m[32m  const { target } = req.query;[m
[32m+[m[32m  if (!target || !['articles', 'options'].includes(target)) {[m
[32m+[m[32m    return res.status(400).json({ error: 'Paramètre target manquant ou invalide (articles|options)' });[m
[32m+[m[32m  }[m
[32m+[m[32m  try {[m
[32m+[m[32m    await dbConnect();[m
[32m+[m[32m    if (target === 'articles') {[m
[32m+[m[32m      await Articles.deleteMany({});[m
[32m+[m[32m      await Articles.insertMany(articles.data);[m
[32m+[m[32m      return res.status(200).json({ success: true, message: 'Import des articles terminé', count: articles.data.length });[m
[32m+[m[32m    //   return res.status(200).send(`<p>Import des articles terminé (${articles.data.length})</p>`);[m
[32m+[m[32m    }[m
[32m+[m[32m    if (target === 'options') {[m
[32m+[m[41m        [m
[32m+[m[32m      await ArticlesOptions.deleteMany({});[m
[32m+[m[32m      await ArticlesOptions.insertMany(articles_options.data);[m
[32m+[m[32m    //   return res.status(200).send(`<p>Import des articles terminé (${articles.data.length})</p>`);[m
[32m+[m[32m      return res.status(200).json({ success: true, message: 'Import des options terminé', count: articles_options.data.length });[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    return res.status(500).json({ error: err.message });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/pages/api/lib/dbConnect.js b/pages/api/lib/dbConnect.js[m
[1mnew file mode 100644[m
[1mindex 0000000..1c9bff4[m
[1m--- /dev/null[m
[1m+++ b/pages/api/lib/dbConnect.js[m
[36m@@ -0,0 +1,32 @@[m
[32m+[m[32mimport mongoose from 'mongoose';[m
[32m+[m
[32m+[m[32mconst MONGODB_URI = process.env.MONGODB_URI || 'mongodb://localhost:27017/lpd';[m
[32m+[m
[32m+[m[32mif (!MONGODB_URI) {[m
[32m+[m[32m  throw new Error('Please define the MONGODB_URI environment variable inside .env.local');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mlet cached = global.mongoose;[m
[32m+[m
[32m+[m[32mif (!cached) {[m
[32m+[m[32m  cached = global.mongoose = { conn: null, promise: null };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32masync function dbConnect() {[m
[32m+[m[32m  if (cached.conn) {[m
[32m+[m[32m    return cached.conn;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (!cached.promise) {[m
[32m+[m[32m    cached.promise = mongoose.connect(MONGODB_URI, {[m
[32m+[m[32m      useNewUrlParser: true,[m
[32m+[m[32m      useUnifiedTopology: true,[m
[32m+[m[32m    }).then((mongoose) => {[m
[32m+[m[32m      return mongoose;[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m  cached.conn = await cached.promise;[m
[32m+[m[32m  return cached.conn;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default dbConnect;[m
[1mdiff --git a/pages/api/media.js b/pages/api/media.js[m
[1mindex 87dd37b..f19b251 100644[m
[1m--- a/pages/api/media.js[m
[1m+++ b/pages/api/media.js[m
[36m@@ -18,7 +18,7 @@[m [mconst readFile = (req, saveLocally) => {[m
     console.log(Object.keys(req));[m
     const options = {}[m
     if(saveLocally){[m
[31m-        options.uploadDir = path.join(process.cwd(), "/public/school/"+req.query.type)[m
[32m+[m[32m        options.uploadDir = path.join(process.cwd(), "/public/images")[m
         options.filename = (name,ext,path,form) => {[m
             console.log(name);[m
             console.log(path);[m
[36m@@ -28,7 +28,6 @@[m [mconst readFile = (req, saveLocally) => {[m
             console.log(name);[m
             console.log(ext);[m
             console.log(name + "_" + form.fields.timestamp[0] + "." + path.originalFilename.split(".").at(-1));[m
[31m-            return req.query.createdFilename + "_" + form.fields.timestamp[0] + "." + path.originalFilename.split(".").at(-1)[m
             return name + "_" + form.fields.timestamp[0] + "." + path.originalFilename.split(".").at(-1)[m
         }[m
     }[m
[36m@@ -55,21 +54,11 @@[m [mconst handler = async (req,res,next) => {[m
     }[m
     if(req.method == "POST" || req.method == "PATCH"){[m
 [m
[31m-        console.log("\n\n\n\nBEING WRITING IMAGES .............");[m
[31m-        console.log(req.url);[m
[31m-        console.log(req.query);[m
[31m-        console.log(req.query.type);[m
[31m-        [m
[31m-        [m
[31m-        [m
[31m-        [m
         try{[m
[31m-            await fs.readdir(path.join(process.cwd()+"/public","/school/"+req.query.type))[m
[32m+[m[32m            await fs.readdir(path.join(process.cwd()+"/public","/images"))[m
         }catch(err){[m
             console.log("ok errorrr");[m
[31m-            await fs.mkdir(path.join(process.cwd(), "/public/school/students"), { recursive: true });[m
[31m-            await fs.mkdir(path.join(process.cwd(), "/public/school/teachers"), { recursive: true });[m
[31m-            await fs.mkdir(path.join(process.cwd(), "/public/school/classes"), { recursive: true });[m
[32m+[m[32m            await fs.mkdir(path.join(process.cwd()+"/public","/images"))[m
         }[m
         await readFile(req,true)[m
         console.log("ok done");[m
[1mdiff --git a/pages/api/members.js b/pages/api/members.js[m
[1mdeleted file mode 100644[m
[1mindex 2500331..0000000[m
[1m--- a/pages/api/members.js[m
[1m+++ /dev/null[m
[36m@@ -1,60 +0,0 @@[m
[31m-// Next.js API route support: https://nextjs.org/docs/api-routes/introduction[m
[31m-const mongoose = require('mongoose')[m
[31m-const {getStudents,getTeachers} = require("./_/controllers/members")[m
[31m-const EleveModel = require('./_/models/Eleve')[m
[31m-const ProfModel = require('./_/models/Teacher')[m
[31m-const ClasseModel = require('./_/models/Classe')[m
[31m-[m
[31m-[m
[31m-export default async function handler(req, res, next) {[m
[31m-    console.log("\n\n\n\n_________je suis dans eleves.js")[m
[31m-    console.log(req.method)[m
[31m-    console.log("\n\n\n\n-----------")[m
[31m-    console.log(req.body)[m
[31m-    console.log("\n\n\n\n??????????")[m
[31m-[m
[31m-    // Connexion à MongoDB si nécessaire[m
[31m-    if (mongoose.connection.readyState !== 1) {[m
[31m-        console.log('API - Connexion à MongoDB...');[m
[31m-        await mongoose.connect(process.env.MONGODB_URI)[m
[31m-        console.log('API - Connecté à MongoDB');[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-[m
[31m-    if(req.method == "GET"){[m
[31m-[m
[31m-        const eleves = await EleveModel.find()[m
[31m-        const profs = await ProfModel.find()[m
[31m-        const school = await ClasseModel.find()[m
[31m-        res.status(200).json({eleves,profs,school})[m
[31m-        // .then((eleves) => {[m
[31m-        //     res.status(200).json(eleves)[m
[31m-        // }).catch((error) => {[m
[31m-        //     res.status(400).json({error: error})[m
[31m-        // })[m
[31m-        [m
[31m-    }[m
[31m-        [m
[31m-    if(req.method == "POST"){[m
[31m-        console.log("i am in POST of eleves api");[m
[31m-        // res.status(201).json({message: "okok"})[m
[31m-    }[m
[31m-[m
[31m-[m
[31m-[m
[31m-//   if (req.method === 'POST') {[m
[31m-//     console.log('......dans donation POST......')[m
[31m-//     mongoose.connect('mongodb+srv://archist:1&Bigcyri@cluster0.61na4.mongodb.net/?retryWrites=true&w=majority',[m
[31m-//       { useNewUrlParser: true,[m
[31m-//         useUnifiedTopology: true [m
[31m-//       }[m
[31m-//     )[m
[31m-//       .then(() => {[m
[31m-//         console.log('Connexion à MongoDB réussie !')[m
[31m-//         createDonation(req,res,next)[m
[31m-//       })[m
[31m-//       .catch((e) => console.log(e,'Connexion à MongoDB échouée !'))[m
[31m-//   }[m
[31m-[m
[31m-}[m
\ No newline at end of file[m
[1mdiff --git a/pages/api/reservation.js b/pages/api/reservation.js[m
[1mindex 88a6d9a..6d9d8de 100755[m
[1m--- a/pages/api/reservation.js[m
[1m+++ b/pages/api/reservation.js[m
[36m@@ -18,7 +18,7 @@[m [mconst transporter = nodemailer.createTransport({[m
   port: 587,[m
   secure: false, // true pour le port 465, false pour les autres ports[m
   auth: {[m
[31m-    user: process.env.EMAIL_USER, // votre adresse gmail[m
[32m+[m[32m    user: process.env.EMAIL_USER_CYR, // votre adresse gmail[m
     pass: process.env.EMAIL_PASS  // votre mot de passe d'application gmail[m
     // LIEN POUR CRÉER UN MOT DE PASSE D'APPLCIATION: [m
     // https://myaccount.google.com/apppasswords?pli=1&rapt=AEjHL4Pv88u1tQAu32DzpYoL5lkR20vdGY_xWV6q_1gJSQViWmNd1fCrNX4CcpKMMyaHUVQEOch66VkCr0TvUj0zk8O6iUXLCMdFf33DWXQ_Ix-izoy1EPE[m
[36m@@ -121,10 +121,10 @@[m [masync function sendConfirmationEmail(reservation) {[m
     const info = await transporter.sendMail({[m
       from: {[m
         name: 'Sanctuaire Notre Dame du Rosaire',[m
[31m-        address: process.env.SMTP2GO_USER[m
[32m+[m[32m        address: process.env.EMAIL_USER_MAM[m
       },[m
       to: reservation.email,[m
[31m-      bcc: "puissancedamour@yahoo.fr",[m
[32m+[m[32m      bcc: process.env.NEXT_PUBLIC_EMAIL_ADMIN,[m
       subject: 'Confirmation de réservation - Sanctuaire Notre Dame du Rosaire',[m
       html: emailContent[m
     });[m
[36m@@ -234,8 +234,9 @@[m [mexport default async function handler(req, res) {[m
           const newReservation = await modelReservation.create(req.body.reservation);[m
           console.log('API - POST - Réservation créée avec succès:', newReservation);[m
           [m
[32m+[m[32m          return res.status(200).json({blablabla: "msg temporaire"});[m
           // Envoyer l'email de confirmation[m
[31m-          await sendConfirmationEmail({[m
[32m+[m[32m          const tmp = await sendConfirmationEmail({[m
             ...newReservation.toObject(),[m
             email: req.body.reservation.email[m
           });[m
[1mdiff --git a/pages/api/reservation_ai.js b/pages/api/reservation_ai.js[m
[1mnew file mode 100755[m
[1mindex 0000000..efeb188[m
[1m--- /dev/null[m
[1m+++ b/pages/api/reservation_ai.js[m
[36m@@ -0,0 +1,50 @@[m
[32m+[m[32m// Next.js API route support: https://nextjs.org/docs/api-routes/introduction[m
[32m+[m[32mimport modelReservation from './_/models/Reservation';[m
[32m+[m[32mimport mongoose from 'mongoose';[m
[32m+[m
[32m+[m[32m// Connexion rapide à MongoDB si nécessaire[m
[32m+[m[32masync function dbConnect() {[m
[32m+[m[32m  if (mongoose.connection.readyState >= 1) return;[m
[32m+[m[32m  const uri = process.env.MONGODB_URI || 'mongodb://localhost:27017/pda';[m
[32m+[m[32m  await mongoose.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[32m  if (req.method !== 'POST') {[m
[32m+[m[32m    return res.status(405).json({ success: false, message: 'Méthode non autorisée' });[m
[32m+[m[32m  }[m
[32m+[m[32m  await dbConnect();[m
[32m+[m[32m  try {[m
[32m+[m[32m    const {[m
[32m+[m[32m      names, phone_number, email, from, to, participants,[m
[32m+[m[32m      individual_room_participants, message, type_reservation, meal_included,[m
[32m+[m[32m      montant_total, montant_avance[m
[32m+[m[32m    } = req.body;[m
[32m+[m[32m    // Validation rapide[m
[32m+[m[32m    if (!names || !phone_number || !from || !to || !participants || !montant_total || !montant_avance) {[m
[32m+[m[32m      return res.status(400).json({ success: false, message: 'Champs obligatoires manquants.' });[m
[32m+[m[32m    }[m
[32m+[m[32m    const reservation = await modelReservation.create({[m
[32m+[m[32m      names,[m
[32m+[m[32m      phone_number,[m
[32m+[m[32m      email,[m
[32m+[m[32m      from: new Date(from),[m
[32m+[m[32m      to: new Date(to),[m
[32m+[m[32m      participants,[m
[32m+[m[32m      individual_room_participants,[m
[32m+[m[32m      message,[m
[32m+[m[32m      type_reservation,[m
[32m+[m[32m      meal_included,[m
[32m+[m[32m      montant_total,[m
[32m+[m[32m      montant_avance,[m
[32m+[m[32m      avance_payee: false,[m
[32m+[m[32m      isValidated: false,[m
[32m+[m[32m      isArchived: false,[m
[32m+[m[32m      deletedAt: null,[m
[32m+[m[32m      community: '0',[m
[32m+[m[32m    });[m
[32m+[m[32m    return res.status(201).json({ success: true, reservation });[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    return res.status(500).json({ success: false, message: err.message });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/pages/api/reservation_simple.js b/pages/api/reservation_simple.js[m
[1mnew file mode 100755[m
[1mindex 0000000..53a843e[m
[1m--- /dev/null[m
[1m+++ b/pages/api/reservation_simple.js[m
[36m@@ -0,0 +1,268 @@[m
[32m+[m[32m// Next.js API route support: https://nextjs.org/docs/api-routes/introduction[m
[32m+[m[32mimport modelReservation from './_/models/Reservation'[m
[32m+[m[32mimport mongoose from 'mongoose'[m
[32m+[m[32mimport nodemailer from 'nodemailer'[m
[32m+[m
[32m+[m[32m// Configurer le transporteur d'email[m
[32m+[m[32m// const transporter = nodemailer.createTransport({[m
[32m+[m[32m//   service: 'gmail',[m
[32m+[m[32m//   auth: {[m
[32m+[m[32m//     user: process.env.EMAIL_USER, // votre adresse gmail[m
[32m+[m[32m//     pass: process.env.EMAIL_PASS  // votre mot de passe d'application gmail[m
[32m+[m[32m//     // LIEN POUR CRÉER UN MOT DE PASSE D'APPLCIATION:[m[41m [m
[32m+[m[32m//     // https://myaccount.google.com/apppasswords?pli=1&rapt=AEjHL4Pv88u1tQAu32DzpYoL5lkR20vdGY_xWV6q_1gJSQViWmNd1fCrNX4CcpKMMyaHUVQEOch66VkCr0TvUj0zk8O6iUXLCMdFf33DWXQ_Ix-izoy1EPE[m
[32m+[m[32m//   }[m
[32m+[m[32m// });[m
[32m+[m[32mconst transporter = nodemailer.createTransport({[m
[32m+[m[32m  host: 'smtp.gmail.com',[m
[32m+[m[32m  port: 587,[m
[32m+[m[32m  secure: false, // true pour le port 465, false pour les autres ports[m
[32m+[m[32m  auth: {[m
[32m+[m[32m    user: process.env.EMAIL_USER_CYR, // votre adresse gmail[m
[32m+[m[32m    pass: process.env.EMAIL_PASS  // votre mot de passe d'application gmail[m
[32m+[m[32m    // LIEN POUR CRÉER UN MOT DE PASSE D'APPLCIATION:[m[41m [m
[32m+[m[32m    // https://myaccount.google.com/apppasswords?pli=1&rapt=AEjHL4Pv88u1tQAu32DzpYoL5lkR20vdGY_xWV6q_1gJSQViWmNd1fCrNX4CcpKMMyaHUVQEOch66VkCr0TvUj0zk8O6iUXLCMdFf33DWXQ_Ix-izoy1EPE[m
[32m+[m[32m  },[m
[32m+[m[32m  tls: {[m
[32m+[m[32m    rejectUnauthorized: false // Attention: à utiliser uniquement en développement[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m[32m// // // Les avantages de SMTP2GO par rapport à Gmail sont :[m
[32m+[m[32m  /*[m
[32m+[m[32m  Pour utiliser SMTP2GO :[m
[32m+[m[32m  - Créez un compte gratuit sur SMTP2GO (https://www.smtp2go.com/)[m
[32m+[m[32m  - Dans votre fichier .env.local, ajoutez ces variables :[m
[32m+[m[32m  SMTP2GO_USER=votre_utilisateur_smtp2go[m
[32m+[m[32m  SMTP2GO_PASS=votre_mot_de_passe_smtp2go[m
[32m+[m[32m  */[m
[32m+[m[32m// const transporter = nodemailer.createTransport({[m
[32m+[m[32m//   host: 'mail.smtp2go.com',[m
[32m+[m[32m//   port: 2525,[m
[32m+[m[32m//   secure: false,[m
[32m+[m[32m//   auth: {[m
[32m+[m[32m//     user: process.env.SMTP2GO_USER,[m
[32m+[m[32m//     pass: process.env.SMTP2GO_PASS[m
[32m+[m[32m//   }[m
[32m+[m[32m// });[m
[32m+[m
[32m+[m[32masync function sendConfirmationEmail(reservation) {[m
[32m+[m[32m  try{[m
[32m+[m[32m    // Préparer le contenu de l'email[m
[32m+[m[32m    const emailContent = `[m
[32m+[m[32m      <h2>Confirmation de réservation - Sanctuaire Notre Dame du Rosaire</h2>[m
[32m+[m[32m      <p>Bonjour,</p>[m
[32m+[m[32m      <p>Votre réservation a été enregistrée avec succès.</p>[m
[32m+[m[41m      [m
[32m+[m[32m      <h3>Détails de la réservation :</h3>[m
[32m+[m[32m      <ul>[m
[32m+[m[32m        <li>Communauté : ${reservation.community}</li>[m
[32m+[m[32m        <li>Nom : ${reservation.names}</li>[m
[32m+[m[32m        <li>N° téléphone : ${reservation.phone_number}</li>[m
[32m+[m[32m        <li>Email : ${reservation.email || "Email non fourni"}</li>[m
[32m+[m[32m        <li>Message : ${reservation.message || "Aucun message associé"}</li>[m
[32m+[m[32m      </ul>[m
[32m+[m
[32m+[m[41m      [m
[32m+[m[32m      <p>Merci de votre confiance !</p>[m
[32m+[m[41m      [m
[32m+[m[32m      <p style="color: #666; font-size: 0.9em;">[m
[32m+[m[32m        Sanctuaire Notre Dame du Rosaire<br>[m
[32m+[m[32m        Bolobi, Adzopé<br>[m
[32m+[m[32m        Côte d'Ivoire[m
[32m+[m[32m      </p>[m
[32m+[m[32m    `;[m
[32m+[m
[32m+[m[32m    // Envoyer l'email[m
[32m+[m[32m    const info = await transporter.sendMail({[m
[32m+[m[32m      from: {[m
[32m+[m[32m        name: 'Sanctuaire Notre Dame du Rosaire',[m
[32m+[m[32m        address: process.env.EMAIL_USER_MAM[m
[32m+[m[32m      },[m
[32m+[m[32m      to: reservation.email,[m
[32m+[m[32m      bcc: process.env.NEXT_PUBLIC_EMAIL_ADMIN,[m
[32m+[m[32m      subject: 'Confirmation de réservation - Sanctuaire Notre Dame du Rosaire',[m
[32m+[m[32m      html: emailContent[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    console.log('Email envoyé avec succès:', info.messageId);[m
[32m+[m[32m    return true;[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('Erreur détaillée lors de l\'envoi de l\'email:', {[m
[32m+[m[32m      code: error.code,[m
[32m+[m[32m      command: error.command,[m
[32m+[m[32m      response: error.response,[m
[32m+[m[32m      responseCode: error.responseCode,[m
[32m+[m[32m      stack: error.stack[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    if (error.code === 'ESOCKET') {[m
[32m+[m[32m      console.error('Erreur de connexion au serveur SMTP. Vérifiez votre connexion Internet et les paramètres du serveur SMTP.');[m
[32m+[m[32m    } else if (error.code === 'EAUTH') {[m
[32m+[m[32m      console.error('Erreur d\'authentification. Vérifiez vos identifiants SMTP2GO_USER et SMTP2GO_PASS.');[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32masync function sendPaymentConfirmationEmail(reservation) {[m
[32m+[m[32m  try {[m
[32m+[m[32m    // Vérifier la connexion SMTP[m
[32m+[m[32m    await transporter.verify();[m
[32m+[m[41m    [m
[32m+[m[32m    // Préparer le contenu de l'email[m
[32m+[m[32m    const emailContent = `[m
[32m+[m[32m      <h2>Confirmation de paiement - Sanctuaire Notre Dame du Rosaire</h2>[m
[32m+[m[32m      <p>Bonjour,</p>[m
[32m+[m[32m      <p>Nous confirmons la réception de votre paiement d'avance de ${reservation.montant_avance} FCFA pour votre réservation.</p>[m
[32m+[m[41m      [m
[32m+[m[32m      <h3>Rappel des détails de la réservation :</h3>[m
[32m+[m[32m      <ul>[m
[32m+[m[32m        <li>Date d'arrivée : ${new Date(reservation.from).toLocaleDateString()}</li>[m
[32m+[m[32m        <li>Date de départ : ${new Date(reservation.to).toLocaleDateString()}</li>[m
[32m+[m[32m        <li>Nombre de participants : ${reservation.participants}</li>[m
[32m+[m[32m      </ul>[m
[32m+[m
[32m+[m[32m      <h3>Paiement :</h3>[m
[32m+[m[32m      <ul>[m
[32m+[m[32m        <li>Montant total : ${reservation.montant_total} FCFA</li>[m
[32m+[m[32m        <li>Avance payée : ${reservation.montant_avance} FCFA</li>[m
[32m+[m[32m        <li>Reste à payer sur place : ${reservation.montant_total - reservation.montant_avance} FCFA</li>[m
[32m+[m[32m      </ul>[m
[32m+[m
[32m+[m[32m      <p>Votre réservation est maintenant <strong>confirmée</strong>.</p>[m
[32m+[m[41m      [m
[32m+[m[32m      <p>Merci de votre confiance !</p>[m
[32m+[m[41m      [m
[32m+[m[32m      <p style="color: #666; font-size: 0.9em;">[m
[32m+[m[32m        Sanctuaire Notre Dame du Rosaire<br>[m
[32m+[m[32m        Bolobi, Adzopé<br>[m
[32m+[m[32m        Côte d'Ivoire[m
[32m+[m[32m      </p>[m
[32m+[m[32m    `;[m
[32m+[m
[32m+[m[32m    // Envoyer l'email[m
[32m+[m[32m    const info = await transporter.sendMail({[m
[32m+[m[32m      from: {[m
[32m+[m[32m        name: 'Sanctuaire Notre Dame du Rosaire',[m
[32m+[m[32m        address: process.env.SMTP2GO_USER[m
[32m+[m[32m      },[m
[32m+[m[32m      to: reservation.email,[m
[32m+[m[32m      subject: 'Confirmation de paiement - Sanctuaire Notre Dame du Rosaire',[m
[32m+[m[32m      html: emailContent[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    console.log('Email de confirmation de paiement envoyé avec succès:', info.messageId);[m
[32m+[m[32m    return true;[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('Erreur lors de l\'envoi de l\'email de confirmation de paiement:', error);[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[32m  console.log('API - Méthode reçue:', req.method);[m
[32m+[m[32m  console.log('API - Corps de la requête:', req.body);[m
[32m+[m
[32m+[m[32m  // Connexion à MongoDB si nécessaire[m
[32m+[m[32m  if (mongoose.connection.readyState !== 1) {[m
[32m+[m[32m    console.log('API - Connexion à MongoDB...');[m
[32m+[m[32m    await mongoose.connect(process.env.MONGODB_URI)[m
[32m+[m[32m    console.log('API - Connecté à MongoDB');[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    switch (req.method) {[m
[32m+[m[32m      case 'GET':[m
[32m+[m[32m        // Récupérer toutes les réservations[m
[32m+[m[32m        console.log('API - GET - Récupération des réservations');[m
[32m+[m[32m        const reservations = await modelReservation.find({})[m
[32m+[m[32m          .sort({ from: -1 }) // Trier par date décroissante[m
[32m+[m[32m        return res.status(200).json(reservations)[m
[32m+[m
[32m+[m[32m      case 'POST':[m
[32m+[m[32m        // Créer une nouvelle réservation[m
[32m+[m[32m        console.log('API - POST - Création d\'une nouvelle réservation');[m
[32m+[m[32m        console.log('API - POST - Données reçues:', req.body);[m
[32m+[m[41m        [m
[32m+[m[32m        try {[m
[32m+[m[41m          [m
[32m+[m[32m          // const newReservation = await modelReservation.create(req.body.reservation);[m
[32m+[m[32m          // console.log('API - POST - Réservation créée avec succès:', newReservation);[m
[32m+[m[32m          console.log('API - POST - Pas de réservation à créer');[m
[32m+[m[41m          [m
[32m+[m[32m          // Envoyer l'email de confirmation[m
[32m+[m[32m          const tmp = await sendConfirmationEmail({[m
[32m+[m[32m            ...req.body.reservation[m
[32m+[m[32m            // ...newReservation.toObject(),[m
[32m+[m[32m            // email: req.body.reservation.email[m
[32m+[m[32m          });[m
[32m+[m[41m          [m
[32m+[m[32m          return res.status(200).json({blablabla: "msg temporaire"});[m
[32m+[m[41m          [m
[32m+[m[32m          return res.status(201).json(newReservation);[m
[32m+[m[32m        } catch (createError) {[m
[32m+[m[32m          console.error('API - POST - Erreur lors de la création:', createError);[m
[32m+[m[32m          return res.status(400).json({[m[41m [m
[32m+[m[32m            message: 'Erreur lors de la création de la réservation',[m
[32m+[m[32m            error: createError.message,[m
[32m+[m[32m            details: createError[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m      case 'PUT':[m
[32m+[m[32m        // Modifier une réservation existante[m
[32m+[m[32m        console.log('API - PUT - Modification d\'une réservation');[m
[32m+[m[32m        const { id } = req.query;[m
[32m+[m[41m        [m
[32m+[m[32m        // Vérifier si c'est une validation de paiement[m
[32m+[m[32m        if (req.body.action === 'validatePayment') {[m
[32m+[m[32m          const reservation = await modelReservation.findById(id);[m
[32m+[m[32m          if (!reservation) {[m
[32m+[m[32m            return res.status(404).json({ message: 'Réservation non trouvée' });[m
[32m+[m[32m          }[m
[32m+[m[41m          [m
[32m+[m[32m          // Mettre à jour le statut de paiement[m
[32m+[m[32m          reservation.avance_payee = true;[m
[32m+[m[32m          reservation.isValidated = true;[m
[32m+[m[41m          [m
[32m+[m[32m          // Envoyer un email de confirmation de paiement[m
[32m+[m[32m          await sendPaymentConfirmationEmail(reservation);[m
[32m+[m[41m          [m
[32m+[m[32m          const updatedReservation = await reservation.save();[m
[32m+[m[32m          return res.status(200).json(updatedReservation);[m
[32m+[m[32m        }[m
[32m+[m[41m        [m
[32m+[m[32m        // Modification normale de la réservation[m
[32m+[m[32m        const updatedReservation = await modelReservation.findByIdAndUpdate([m
[32m+[m[32m          id,[m
[32m+[m[32m          req.body,[m
[32m+[m[32m          { new: true }[m
[32m+[m[32m        );[m
[32m+[m[32m        if (!updatedReservation) {[m
[32m+[m[32m          return res.status(404).json({ message: 'Réservation non trouvée' })[m
[32m+[m[32m        }[m
[32m+[m[32m        return res.status(200).json(updatedReservation)[m
[32m+[m
[32m+[m[32m      case 'DELETE':[m
[32m+[m[32m        // Supprimer une réservation[m
[32m+[m[32m        console.log('API - DELETE - Suppression d\'une réservation');[m
[32m+[m[32m        const deletedReservation = await modelReservation.findByIdAndDelete(req.query.id)[m
[32m+[m[32m        if (!deletedReservation) {[m
[32m+[m[32m          return res.status(404).json({ message: 'Réservation non trouvée' })[m
[32m+[m[32m        }[m
[32m+[m[32m        return res.status(200).json({ message: 'Réservation supprimée avec succès' })[m
[32m+[m
[32m+[m[32m      default:[m
[32m+[m[32m        res.setHeader('Allow', ['GET', 'POST', 'PUT', 'DELETE'])[m
[32m+[m[32m        return res.status(405).json({ message: `Method ${req.method} not allowed` })[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('API - Erreur générale:', error);[m
[32m+[m[32m    return res.status(500).json({[m[41m [m
[32m+[m[32m      message: 'Erreur serveur',[m[41m [m
[32m+[m[32m      error: error.message,[m
[32m+[m[32m      stack: process.env.NODE_ENV === 'development' ? error.stack : undefined[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/pages/api/upload_ecom.js b/pages/api/upload_ecom.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b505a6b[m
[1m--- /dev/null[m
[1m+++ b/pages/api/upload_ecom.js[m
[36m@@ -0,0 +1,81 @@[m
[32m+[m[32mimport { IncomingForm } from 'formidable';[m
[32m+[m[32mimport fs from 'fs';[m
[32m+[m[32mimport path from 'path';[m
[32m+[m
[32m+[m[32mexport const config = {[m
[32m+[m[32m  api: {[m
[32m+[m[32m    bodyParser: false,[m
[32m+[m[32m  },[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[32m  if (req.method !== 'POST') {[m
[32m+[m[32m    return res.status(405).json({ message: 'Method not allowed' });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    const form = new IncomingForm({[m
[32m+[m[32m      keepExtensions: true,[m
[32m+[m[32m      maxFileSize: 10 * 1024 * 1024, // 10MB max[m
[32m+[m[32m      multiples: false,[m
[32m+[m[32m    });[m
[32m+[m
[32m+[m[32m    return new Promise((resolve, reject) => {[m
[32m+[m[32m      form.parse(req, async (err, fields, files) => {[m
[32m+[m[32m        if (err) {[m
[32m+[m[32m          console.error('Erreur lors du téléchargement:', err);[m
[32m+[m[32m          res.status(500).json({ error: 'Erreur lors du téléchargement' });[m
[32m+[m[32m          return resolve();[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        const file = files.image?.[0]; // formidable v4 retourne un tableau[m
[32m+[m[32m        if (!file) {[m
[32m+[m[32m          res.status(400).json({ error: 'Aucun fichier fourni' });[m
[32m+[m[32m          return resolve();[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        try {[m
[32m+[m[32m          // Récupérer les infos du formulaire[m
[32m+[m[32m          const folderLabel = fields.folder?.[0] || 'divers';[m
[32m+[m[32m          const articleNom = fields.articleNom?.[0] || 'article';[m
[32m+[m[32m          const originalName = fields.originalName?.[0] || file.originalFilename;[m
[32m+[m[32m          const imageName = path.parse(originalName).name;[m
[32m+[m[32m          // Dossier cible[m
[32m+[m[32m          const uploadDir = path.join(process.cwd(), 'public', 'img', 'vente-religieuse', folderLabel);[m
[32m+[m[32m          const uploadDir_min = path.join(process.cwd(), 'public', 'img', 'vente-religieuse', "min", folderLabel);[m
[32m+[m[32m          if (!fs.existsSync(uploadDir)) {[m
[32m+[m[32m            fs.mkdirSync(uploadDir, { recursive: true });[m
[32m+[m[32m            fs.mkdirSync(uploadDir_min, { recursive: true });[m
[32m+[m[32m          }[m
[32m+[m[32m          // Nom final[m
[32m+[m[32m          // const finalFilename = `${articleNom}_${imageName}.webp`;[m
[32m+[m[32m          const finalFilename_ = `${imageName}.webp`;[m
[32m+[m[32m          // const finalPath = path.join(uploadDir, finalFilename);[m
[32m+[m[32m          const finalPath = path.join(uploadDir, finalFilename_);[m
[32m+[m[32m          const finalPath_ = path.join(uploadDir_min, finalFilename_);[m
[32m+[m
[32m+[m[32m          // Convertir en webp si possible (sinon juste move)[m
[32m+[m[32m          const sharp = require('sharp');[m
[32m+[m[32m          // Convertir l'image en webp si possible (sinon erreur)[m
[32m+[m[32m          await sharp(file.filepath).webp({ quality: 90 }).toFile(finalPath);[m
[32m+[m[32m          await sharp(file.filepath).webp({ quality: 90 }).toFile(finalPath_);[m
[32m+[m[32m          // Supprimer le fichier temporaire de téléchargement[m
[32m+[m[32m          fs.unlinkSync(file.filepath);[m
[32m+[m
[32m+[m[32m          // Retourner le chemin relatif[m
[32m+[m[32m          // const relativePath = `/img/vente-religieuse/${folderLabel}/${finalFilename}`;[m
[32m+[m[32m          const relativePath_ = `${imageName}`;[m
[32m+[m[32m          res.status(200).json({ url: relativePath_ });[m
[32m+[m[32m          resolve();[m
[32m+[m[32m        } catch (error) {[m
[32m+[m[32m          console.error('Erreur lors du traitement du fichier:', error);[m
[32m+[m[32m          res.status(500).json({ error: 'Erreur lors du traitement du fichier' });[m
[32m+[m[32m          resolve();[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('Erreur:', error);[m
[32m+[m[32m    res.status(500).json({ error: 'Erreur lors du traitement de la requête' });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/pages/api/users.js b/pages/api/users.js[m
[1mnew file mode 100644[m
[1mindex 0000000..b562821[m
[1m--- /dev/null[m
[1m+++ b/pages/api/users.js[m
[36m@@ -0,0 +1,56 @@[m
[32m+[m[32mimport dbConnect from './lib/dbConnect'[m
[32m+[m[32mimport User_lpd from './_/models/User_lpd'[m
[32m+[m
[32m+[m[32masync function handlePost(req, res) {[m
[32m+[m[32m  const { email, fullName, tel, options, commande } = req.body;[m
[32m+[m
[32m+[m[32m  if (!email || !commande) {[m
[32m+[m[32m    return res.status(400).json({ error: 'Email et commande requis' });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // On cherche l'utilisateur par email[m
[32m+[m[32m  let user = await User_lpd.findOne({ email });[m
[32m+[m
[32m+[m[32m  if (user) {[m
[32m+[m[32m    // Ajout à l'historique ecom[m
[32m+[m[32m    user.commandes.ecom.push(commande);[m
[32m+[m[32m    // Optionnel: mettre à jour les infos client si besoin[m
[32m+[m[32m    user.fullName = user.fullName || fullName;[m
[32m+[m[32m    user.tel = user.tel || tel;[m
[32m+[m[32m    user.options = { ...options, ...user.options };[m
[32m+[m[32m    await user.save();[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // Création du user avec la commande ecom dans l'historique[m
[32m+[m[32m    user = new User_lpd({[m
[32m+[m[32m      email,[m
[32m+[m[32m      fullName,[m
[32m+[m[32m      tel,[m
[32m+[m[32m      options,[m
[32m+[m[32m      commandes: {[m
[32m+[m[32m        sanctuaire: [],[m
[32m+[m[32m        ecom: [commande][m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m    await user.save();[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return res.status(200).json({ success: true, user });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default async function handler(req, res) {[m
[32m+[m[32m  await dbConnect();[m
[32m+[m
[32m+[m[32m  if (req.method === 'GET') {[m
[32m+[m[32m    const { email } = req.query;[m
[32m+[m[32m    if (!email) return res.status(400).json({ error: 'Email requis' });[m
[32m+[m[32m    const user = await User_lpd.findOne({ email });[m
[32m+[m[32m    if (!user) return res.status(404).json({ error: 'Utilisateur non trouvé' });[m
[32m+[m[32m    return res.status(200).json({ user });[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (req.method === 'POST') {[m
[32m+[m[32m    return handlePost(req, res);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return res.status(405).end();[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/pnpm-lock.yaml b/pnpm-lock.yaml[m
[1mindex 9b7363a..a34f778 100644[m
[1m--- a/pnpm-lock.yaml[m
[1m+++ b/pnpm-lock.yaml[m
[36m@@ -26,6 +26,9 @@[m [mimporters:[m
       autoprefixer:[m
         specifier: ^10.4.20[m
         version: 10.4.20(postcss@8.4.31)[m
[32m+[m[32m      axios:[m
[32m+[m[32m        specifier: ^1.7.9[m
[32m+[m[32m        version: 1.7.9[m
       bcrypt:[m
         specifier: ^5.1.1[m
         version: 5.1.1[m
[36m@@ -86,9 +89,6 @@[m [mimporters:[m
       nodemailer:[m
         specifier: ^6.9.16[m
         version: 6.9.16[m
[31m-      primereact:[m
[31m-        specifier: ^10.9.2[m
[31m-        version: 10.9.2(@types/react@18.3.12)(react-dom@19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028))(react@19.0.0-rc-02c0e824-20241028)[m
       react:[m
         specifier: 19.0.0-rc-02c0e824-20241028[m
         version: 19.0.0-rc-02c0e824-20241028[m
[36m@@ -125,6 +125,9 @@[m [mimporters:[m
       sass-loader:[m
         specifier: ^16.0.3[m
         version: 16.0.3(sass@1.80.6)(webpack@5.96.1)[m
[32m+[m[32m      sharp:[m
[32m+[m[32m        specifier: ^0.34.2[m
[32m+[m[32m        version: 0.34.2[m
       slick-carousel:[m
         specifier: ^1.8.1[m
         version: 1.8.1(jquery@3.7.1)[m
[36m@@ -237,6 +240,9 @@[m [mpackages:[m
   '@emnapi/runtime@1.3.1':[m
     resolution: {integrity: sha512-kEBmG8KyqtxJZv+ygbEim+KCGtIq1fC22Ms3S4ziXmYKm8uyoLX0MHONVKwp+9opg390VaKRNt4a7A9NwmpNhw==}[m
 [m
[32m+[m[32m  '@emnapi/runtime@1.4.3':[m
[32m+[m[32m    resolution: {integrity: sha512-pBPWdu6MLKROBX05wSNKcNb++m5Er+KQ9QkB+WVM+pW2Kx9hoSrVTnu3BdkI5eBLZoKu/J6mW/B6i6bJB2ytXQ==}[m
[32m+[m
   '@emotion/hash@0.8.0':[m
     resolution: {integrity: sha512-kBJtf7PH6aWwZ6fka3zQ0p6SBYzx4fl1LoZXE2RrnYST9Xljm7WfKJrU4g/Xr3Beg72MLrp1AWNUmuYJTL7Cow==}[m
 [m
[36m@@ -305,105 +311,221 @@[m [mpackages:[m
     cpu: [arm64][m
     os: [darwin][m
 [m
[32m+[m[32m  '@img/sharp-darwin-arm64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-OfXHZPppddivUJnqyKoi5YVeHRkkNE2zUFT2gbpKxp/JZCFYEYubnMg+gOp6lWfasPrTS+KPosKqdI+ELYVDtg==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [darwin][m
[32m+[m
   '@img/sharp-darwin-x64@0.33.5':[m
     resolution: {integrity: sha512-fyHac4jIc1ANYGRDxtiqelIbdWkIuQaI84Mv45KvGRRxSAa7o7d1ZKAOBaYbnepLC1WqxfpimdeWfvqqSGwR2Q==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [x64][m
     os: [darwin][m
 [m
[32m+[m[32m  '@img/sharp-darwin-x64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-dYvWqmjU9VxqXmjEtjmvHnGqF8GrVjM2Epj9rJ6BUIXvk8slvNDJbhGFvIoXzkDhrJC2jUxNLz/GUjjvSzfw+g==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [darwin][m
[32m+[m
   '@img/sharp-libvips-darwin-arm64@1.0.4':[m
     resolution: {integrity: sha512-XblONe153h0O2zuFfTAbQYAX2JhYmDHeWikp1LM9Hul9gVPjFY427k6dFEcOL72O01QxQsWi761svJ/ev9xEDg==}[m
     cpu: [arm64][m
     os: [darwin][m
 [m
[32m+[m[32m  '@img/sharp-libvips-darwin-arm64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-HZ/JUmPwrJSoM4DIQPv/BfNh9yrOA8tlBbqbLz4JZ5uew2+o22Ik+tHQJcih7QJuSa0zo5coHTfD5J8inqj9DA==}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [darwin][m
[32m+[m
   '@img/sharp-libvips-darwin-x64@1.0.4':[m
     resolution: {integrity: sha512-xnGR8YuZYfJGmWPvmlunFaWJsb9T/AO2ykoP3Fz/0X5XV2aoYBPkX6xqCQvUTKKiLddarLaxpzNe+b1hjeWHAQ==}[m
     cpu: [x64][m
     os: [darwin][m
 [m
[32m+[m[32m  '@img/sharp-libvips-darwin-x64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-Xzc2ToEmHN+hfvsl9wja0RlnXEgpKNmftriQp6XzY/RaSfwD9th+MSh0WQKzUreLKKINb3afirxW7A0fz2YWuQ==}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [darwin][m
[32m+[m
   '@img/sharp-libvips-linux-arm64@1.0.4':[m
     resolution: {integrity: sha512-9B+taZ8DlyyqzZQnoeIvDVR/2F4EbMepXMc/NdVbkzsJbzkUjhXv/70GQJ7tdLA4YJgNP25zukcxpX2/SueNrA==}[m
     cpu: [arm64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-arm64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-IVfGJa7gjChDET1dK9SekxFFdflarnUB8PwW8aGwEoF3oAsSDuNUTYS+SKDOyOJxQyDC1aPFMuRYLoDInyV9Ew==}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-libvips-linux-arm@1.0.5':[m
     resolution: {integrity: sha512-gvcC4ACAOPRNATg/ov8/MnbxFDJqf/pDePbBnuBDcjsI8PssmjoKMAz4LtLaVi+OnSb5FK/yIOamqDwGmXW32g==}[m
     cpu: [arm][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-arm@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-s8BAd0lwUIvYCJyRdFqvsj+BJIpDBSxs6ivrOPm/R7piTs5UIwY5OjXrP2bqXC9/moGsyRa37eYWYCOGVXxVrA==}[m
[32m+[m[32m    cpu: [arm][m
[32m+[m[32m    os: [linux][m
[32m+[m
[32m+[m[32m  '@img/sharp-libvips-linux-ppc64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-tiXxFZFbhnkWE2LA8oQj7KYR+bWBkiV2nilRldT7bqoEZ4HiDOcePr9wVDAZPi/Id5fT1oY9iGnDq20cwUz8lQ==}[m
[32m+[m[32m    cpu: [ppc64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-libvips-linux-s390x@1.0.4':[m
     resolution: {integrity: sha512-u7Wz6ntiSSgGSGcjZ55im6uvTrOxSIS8/dgoVMoiGE9I6JAfU50yH5BoDlYA1tcuGS7g/QNtetJnxA6QEsCVTA==}[m
     cpu: [s390x][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-s390x@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-xukSwvhguw7COyzvmjydRb3x/09+21HykyapcZchiCUkTThEQEOMtBj9UhkaBRLuBrgLFzQ2wbxdeCCJW/jgJA==}[m
[32m+[m[32m    cpu: [s390x][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-libvips-linux-x64@1.0.4':[m
     resolution: {integrity: sha512-MmWmQ3iPFZr0Iev+BAgVMb3ZyC4KeFc3jFxnNbEPas60e1cIfevbtuyf9nDGIzOaW9PdnDciJm+wFFaTlj5xYw==}[m
     cpu: [x64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-x64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-yRj2+reB8iMg9W5sULM3S74jVS7zqSzHG3Ol/twnAAkAhnGQnpjj6e4ayUz7V+FpKypwgs82xbRdYtchTTUB+Q==}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-libvips-linuxmusl-arm64@1.0.4':[m
     resolution: {integrity: sha512-9Ti+BbTYDcsbp4wfYib8Ctm1ilkugkA/uscUn6UXK1ldpC1JjiXbLfFZtRlBhjPZ5o1NCLiDbg8fhUPKStHoTA==}[m
     cpu: [arm64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linuxmusl-arm64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-jYZdG+whg0MDK+q2COKbYidaqW/WTz0cc1E+tMAusiDygrM4ypmSCjOJPmFTvHHJ8j/6cAGyeDWZOsK06tP33w==}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-libvips-linuxmusl-x64@1.0.4':[m
     resolution: {integrity: sha512-viYN1KX9m+/hGkJtvYYp+CCLgnJXwiQB39damAO7WMdKWlIhmYTfHjwSbQeUK/20vY154mwezd9HflVFM1wVSw==}[m
     cpu: [x64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-libvips-linuxmusl-x64@1.1.0':[m
[32m+[m[32m    resolution: {integrity: sha512-wK7SBdwrAiycjXdkPnGCPLjYb9lD4l6Ze2gSdAGVZrEL05AOUJESWU2lhlC+Ffn5/G+VKuSm6zzbQSzFX/P65A==}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linux-arm64@0.33.5':[m
     resolution: {integrity: sha512-JMVv+AMRyGOHtO1RFBiJy/MBsgz0x4AWrT6QoEVVTyh1E39TrCUpTRI7mx9VksGX4awWASxqCYLCV4wBZHAYxA==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [arm64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linux-arm64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-D8n8wgWmPDakc83LORcfJepdOSN6MvWNzzz2ux0MnIbOqdieRZwVYY32zxVx+IFUT8er5KPcyU3XXsn+GzG/0Q==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linux-arm@0.33.5':[m
     resolution: {integrity: sha512-JTS1eldqZbJxjvKaAkxhZmBqPRGmxgu+qFKSInv8moZ2AmT5Yib3EQ1c6gp493HvrvV8QgdOXdyaIBrhvFhBMQ==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [arm][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linux-arm@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-0DZzkvuEOqQUP9mo2kjjKNok5AmnOr1jB2XYjkaoNRwpAYMDzRmAqUIa1nRi58S2WswqSfPOWLNOr0FDT3H5RQ==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [arm][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linux-s390x@0.33.5':[m
     resolution: {integrity: sha512-y/5PCd+mP4CA/sPDKl2961b+C9d+vPAveS33s6Z3zfASk2j5upL6fXVPZi7ztePZ5CuH+1kW8JtvxgbuXHRa4Q==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [s390x][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linux-s390x@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-EGZ1xwhBI7dNISwxjChqBGELCWMGDvmxZXKjQRuqMrakhO8QoMgqCrdjnAqJq/CScxfRn+Bb7suXBElKQpPDiw==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [s390x][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linux-x64@0.33.5':[m
     resolution: {integrity: sha512-opC+Ok5pRNAzuvq1AG0ar+1owsu842/Ab+4qvU879ippJBHvyY5n2mxF1izXqkPYlGuP/M556uh53jRLJmzTWA==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [x64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linux-x64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-sD7J+h5nFLMMmOXYH4DD9UtSNBD05tWSSdWAcEyzqW8Cn5UxXvsHAxmxSesYUsTOBmUnjtxghKDl15EvfqLFbQ==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linuxmusl-arm64@0.33.5':[m
     resolution: {integrity: sha512-XrHMZwGQGvJg2V/oRSUfSAfjfPxO+4DkiRh6p2AFjLQztWUuY/o8Mq0eMQVIY7HJ1CDQUJlxGGZRw1a5bqmd1g==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [arm64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linuxmusl-arm64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-NEE2vQ6wcxYav1/A22OOxoSOGiKnNmDzCYFOZ949xFmrWZOVII1Bp3NqVVpvj+3UeHMFyN5eP/V5hzViQ5CZNA==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-linuxmusl-x64@0.33.5':[m
     resolution: {integrity: sha512-WT+d/cgqKkkKySYmqoZ8y3pxx7lx9vVejxW/W4DOFMYVSkErR+w7mf2u8m/y4+xHe7yY9DAXQMWQhpnMuFfScw==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [x64][m
     os: [linux][m
 [m
[32m+[m[32m  '@img/sharp-linuxmusl-x64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-DOYMrDm5E6/8bm/yQLCWyuDJwUnlevR8xtF8bs+gjZ7cyUNYXiSf/E8Kp0Ss5xasIaXSHzb888V1BE4i1hFhAA==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [linux][m
[32m+[m
   '@img/sharp-wasm32@0.33.5':[m
     resolution: {integrity: sha512-ykUW4LVGaMcU9lu9thv85CbRMAwfeadCJHRsg2GmeRa/cJxsVY9Rbd57JcMxBkKHag5U/x7TSBpScF4U8ElVzg==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [wasm32][m
 [m
[32m+[m[32m  '@img/sharp-wasm32@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-/VI4mdlJ9zkaq53MbIG6rZY+QRN3MLbR6usYlgITEzi4Rpx5S6LFKsycOQjkOGmqTNmkIdLjEvooFKwww6OpdQ==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [wasm32][m
[32m+[m
[32m+[m[32m  '@img/sharp-win32-arm64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-cfP/r9FdS63VA5k0xiqaNaEoGxBg9k7uE+RQGzuK9fHt7jib4zAVVseR9LsE4gJcNWgT6APKMNnCcnyOtmSEUQ==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [arm64][m
[32m+[m[32m    os: [win32][m
[32m+[m
   '@img/sharp-win32-ia32@0.33.5':[m
     resolution: {integrity: sha512-T36PblLaTwuVJ/zw/LaH0PdZkRz5rd3SmMHX8GSmR7vtNSP5Z6bQkExdSK7xGWyxLw4sUknBuugTelgw2faBbQ==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [ia32][m
     os: [win32][m
 [m
[32m+[m[32m  '@img/sharp-win32-ia32@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-QLjGGvAbj0X/FXl8n1WbtQ6iVBpWU7JO94u/P2M4a8CFYsvQi4GW2mRy/JqkRx0qpBzaOdKJKw8uc930EX2AHw==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [ia32][m
[32m+[m[32m    os: [win32][m
[32m+[m
   '@img/sharp-win32-x64@0.33.5':[m
     resolution: {integrity: sha512-MpY/o8/8kj+EcnxwvrP4aTJSWw/aZ7JIGR4aBeZkZw5B7/Jn+tY9/VNwtcoGmdT7GfggGIU4kygOMSbYnOrAbg==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
     cpu: [x64][m
     os: [win32][m
 [m
[32m+[m[32m  '@img/sharp-win32-x64@0.34.2':[m
[32m+[m[32m    resolution: {integrity: sha512-aUdT6zEYtDKCaxkofmmJDJYGCf0+pJg3eU9/oBuqvEeoB9dKI6ZLc/1iLJCTuJQDO4ptntAlkUmHgGjyuobZbw==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m[32m    cpu: [x64][m
[32m+[m[32m    os: [win32][m
[32m+[m
   '@isaacs/cliui@8.0.2':[m
     resolution: {integrity: sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==}[m
     engines: {node: '>=12'}[m
[36m@@ -689,11 +811,6 @@[m [mpackages:[m
   '@types/react-dom@18.3.1':[m
     resolution: {integrity: sha512-qW1Mfv8taImTthu4KoXgDfLuk4bydU6Q/TkADnDWWHwi4NX4BR+LWfTp2sVmTqRrsHvyDDTelgelxJ+SsejKKQ==}[m
 [m
[31m-  '@types/react-transition-group@4.4.12':[m
[31m-    resolution: {integrity: sha512-8TV6R3h2j7a91c+1DXdJi3Syo69zzIZbz7Lg5tORM5LEJG7X/E6a1V3drRyBRZq7/utz7A+c4OgYLiLcYGHG6w==}[m
[31m-    peerDependencies:[m
[31m-      '@types/react': '*'[m
[31m-[m
   '@types/react@18.3.12':[m
     resolution: {integrity: sha512-D2wOSq/d6Agt28q7rSI3jhU7G6aiuzljDGZ2hTZHIkrTLUI+AF3WMeKkEZ9nN2fkBAlcktT6vcZjDFiIhMYEQw==}[m
 [m
[36m@@ -842,6 +959,9 @@[m [mpackages:[m
   asap@2.0.6:[m
     resolution: {integrity: sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==}[m
 [m
[32m+[m[32m  asynckit@0.4.0:[m
[32m+[m[32m    resolution: {integrity: sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==}[m
[32m+[m
   autoprefixer@10.4.20:[m
     resolution: {integrity: sha512-XY25y5xSv/wEoqzDyXXME4AFfkZI0P23z6Fs3YgymDnKJkCGOnkL0iTxCa85UTqaSgfcqyf3UA6+c7wUvx/16g==}[m
     engines: {node: ^10 || ^12 || >=14}[m
[36m@@ -849,6 +969,9 @@[m [mpackages:[m
     peerDependencies:[m
       postcss: ^8.1.0[m
 [m
[32m+[m[32m  axios@1.7.9:[m
[32m+[m[32m    resolution: {integrity: sha512-LhLcE7Hbiryz8oMDdDptSrWowmB4Bl6RCt6sIJKpRB4XtVf0iEgewX3au/pJqm+Py1kCASkb/FFKjxQaLtxJvw==}[m
[32m+[m
   bail@2.0.2:[m
     resolution: {integrity: sha512-0xO6mYd7JB2YesxDKplafRpsiOzPt9V02ddPCLbY1xYGPOX24NTyN50qnUxgCPcSoYMhKpAuBTjQoRZCAkUDRw==}[m
 [m
[36m@@ -900,6 +1023,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==}[m
     engines: {node: '>= 0.8'}[m
 [m
[32m+[m[32m  call-bind-apply-helpers@1.0.2:[m
[32m+[m[32m    resolution: {integrity: sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   call-bind@1.0.7:[m
     resolution: {integrity: sha512-GHTSNSYICQ7scH7sZ+M2rFopRoLh8t2bLSW6BbgrtLsahOIB5iyAVJf9GjWK3cYTDaMj4XdBpM1cA6pIS0Kv2w==}[m
     engines: {node: '>= 0.4'}[m
[36m@@ -973,6 +1100,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-1rXeuUUiGGrykh+CeBdu5Ie7OJwinCgQY0bc7GCRxy5xVHy+moaqkpL/jqQq0MtQOeYcrqEz4abc5f0KtU7W4A==}[m
     engines: {node: '>=12.5.0'}[m
 [m
[32m+[m[32m  combined-stream@1.0.8:[m
[32m+[m[32m    resolution: {integrity: sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==}[m
[32m+[m[32m    engines: {node: '>= 0.8'}[m
[32m+[m
   comma-separated-tokens@2.0.3:[m
     resolution: {integrity: sha512-Fu4hJdvzeylCfQPp9SGWidpzrMs7tTrlu6Vb8XGaRGck8QSNZJJp538Wrb60Lax4fPwR64ViY468OIUTbRlGZg==}[m
 [m
[36m@@ -1095,6 +1226,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==}[m
     engines: {node: '>= 0.4'}[m
 [m
[32m+[m[32m  delayed-stream@1.0.0:[m
[32m+[m[32m    resolution: {integrity: sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==}[m
[32m+[m[32m    engines: {node: '>=0.4.0'}[m
[32m+[m
   delegates@1.0.0:[m
     resolution: {integrity: sha512-bd2L678uiWATM6m5Z1VzNCErI3jiGzt6HGY8OVICs40JQq/HALfbyNJmp0UDakEY4pMMaN0Ly5om/B1VI/+xfQ==}[m
 [m
[36m@@ -1119,6 +1254,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-bwy0MGW55bG41VqxxypOsdSdGqLwXPI/focwgTYCFMbdUiBAxLg9CFzG08sz2aqzknwiX7Hkl0bQENjg8iLByw==}[m
     engines: {node: '>=8'}[m
 [m
[32m+[m[32m  detect-libc@2.0.4:[m
[32m+[m[32m    resolution: {integrity: sha512-3UDv+G9CsCKO1WKMGw9fwq/SWJYbI0c5Y7LU1AXYoDdbhE2AHQ6N6Nb34sG8Fj7T5APy8qXDCKuuIHd1BR0tVA==}[m
[32m+[m[32m    engines: {node: '>=8'}[m
[32m+[m
   devlop@1.1.0:[m
     resolution: {integrity: sha512-RWmIqhcFf1lRYBvNmr7qTNuyCt/7/ns2jbpp1+PalgE/rDQcBT0fioSMUpJ93irlUhC5hrg4cYqe6U+0ImW0rA==}[m
 [m
[36m@@ -1131,9 +1270,6 @@[m [mpackages:[m
   dlv@1.1.3:[m
     resolution: {integrity: sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==}[m
 [m
[31m-  dom-helpers@5.2.1:[m
[31m-    resolution: {integrity: sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==}[m
[31m-[m
   dot-case@3.0.4:[m
     resolution: {integrity: sha512-Kv5nKlh6yRrdrGvxeJ2e5y2eRUpkUosIW4A2AS38zwSz27zu7ufDwQPi5Jhs3XAlGNetl3bmnGhQsMtkKJnj3w==}[m
 [m
[36m@@ -1141,6 +1277,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-ZmdL2rui+eB2YwhsWzjInR8LldtZHGDoQ1ugH85ppHKwpUHL7j7rN0Ti9NCnGiQbhaZ11FpR+7ao1dNsmduNUg==}[m
     engines: {node: '>=12'}[m
 [m
[32m+[m[32m  dunder-proto@1.0.1:[m
[32m+[m[32m    resolution: {integrity: sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   eastasianwidth@0.2.0:[m
     resolution: {integrity: sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==}[m
 [m
[36m@@ -1178,6 +1318,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-jxayLKShrEqqzJ0eumQbVhTYQM27CfT1T35+gCgDFoL82JLsXqTJ76zv6A0YLOgEnLUMvLzsDsGIrl8NFpT2gQ==}[m
     engines: {node: '>= 0.4'}[m
 [m
[32m+[m[32m  es-define-property@1.0.1:[m
[32m+[m[32m    resolution: {integrity: sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   es-errors@1.3.0:[m
     resolution: {integrity: sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==}[m
     engines: {node: '>= 0.4'}[m
[36m@@ -1185,6 +1329,14 @@[m [mpackages:[m
   es-module-lexer@1.5.4:[m
     resolution: {integrity: sha512-MVNK56NiMrOwitFB7cqDwq0CQutbw+0BvLshJSse0MUNU+y1FC3bUS/AQg7oUng+/wKrrki7JfmwtVHkVfPLlw==}[m
 [m
[32m+[m[32m  es-object-atoms@1.1.1:[m
[32m+[m[32m    resolution: {integrity: sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
[32m+[m[32m  es-set-tostringtag@2.1.0:[m
[32m+[m[32m    resolution: {integrity: sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   escalade@3.2.0:[m
     resolution: {integrity: sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==}[m
     engines: {node: '>=6'}[m
[36m@@ -1272,10 +1424,23 @@[m [mpackages:[m
     resolution: {integrity: sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==}[m
     engines: {node: '>= 0.8'}[m
 [m
[32m+[m[32m  follow-redirects@1.15.9:[m
[32m+[m[32m    resolution: {integrity: sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==}[m
[32m+[m[32m    engines: {node: '>=4.0'}[m
[32m+[m[32m    peerDependencies:[m
[32m+[m[32m      debug: '*'[m
[32m+[m[32m    peerDependenciesMeta:[m
[32m+[m[32m      debug:[m
[32m+[m[32m        optional: true[m
[32m+[m
   foreground-child@3.3.0:[m
     resolution: {integrity: sha512-Ld2g8rrAyMYFXBhEqMz8ZAHBi4J4uS1i/CxGMDnjyFWddMXLVcDp051DZfu+t7+ab7Wv6SMqpWmyFIj5UbfFvg==}[m
     engines: {node: '>=14'}[m
 [m
[32m+[m[32m  form-data@4.0.2:[m
[32m+[m[32m    resolution: {integrity: sha512-hGfm/slu0ZabnNt4oaRZ6uREyfCj6P4fT/n6A1rGV+Z0VdGXjfOhVUpkn6qVQONHGIFwmveGXyDs75+nr6FM8w==}[m
[32m+[m[32m    engines: {node: '>= 6'}[m
[32m+[m
   formidable@3.5.2:[m
     resolution: {integrity: sha512-Jqc1btCy3QzRbJaICGwKcBfGWuLADRerLzDqi2NwSt/UkXLsHJw2TVResiaoBufHVHy9aSgClOHCeJsSsFLTbg==}[m
 [m
[36m@@ -1317,6 +1482,14 @@[m [mpackages:[m
     resolution: {integrity: sha512-5uYhsJH8VJBTv7oslg4BznJYhDoRI6waYCxMmCdnTrcCrHA/fCFKoTFz2JKKE0HdDFUF7/oQuhzumXJK7paBRQ==}[m
     engines: {node: '>= 0.4'}[m
 [m
[32m+[m[32m  get-intrinsic@1.3.0:[m
[32m+[m[32m    resolution: {integrity: sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
[32m+[m[32m  get-proto@1.0.1:[m
[32m+[m[32m    resolution: {integrity: sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   glob-parent@5.1.2:[m
     resolution: {integrity: sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==}[m
     engines: {node: '>= 6'}[m
[36m@@ -1339,6 +1512,10 @@[m [mpackages:[m
   gopd@1.0.1:[m
     resolution: {integrity: sha512-d65bNlIadxvpb/A2abVdlqKqV563juRnZ1Wtk6s1sIR8uNsXR70xqIzVqxVf1eTqDunwT2MkczEeaezCKTZhwA==}[m
 [m
[32m+[m[32m  gopd@1.2.0:[m
[32m+[m[32m    resolution: {integrity: sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   graceful-fs@4.2.11:[m
     resolution: {integrity: sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==}[m
 [m
[36m@@ -1361,6 +1538,14 @@[m [mpackages:[m
     resolution: {integrity: sha512-l3LCuF6MgDNwTDKkdYGEihYjt5pRPbEg46rtlmnSPlUbgmB8LOIrKJbYYFBSbnPaJexMKtiPO8hmeRjRz2Td+A==}[m
     engines: {node: '>= 0.4'}[m
 [m
[32m+[m[32m  has-symbols@1.1.0:[m
[32m+[m[32m    resolution: {integrity: sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
[32m+[m[32m  has-tostringtag@1.0.2:[m
[32m+[m[32m    resolution: {integrity: sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   has-unicode@2.0.1:[m
     resolution: {integrity: sha512-8Rf9Y83NBReMnx0gFzA8JImQACstCYWUplepDa9xprwwtmgEZUF0h/i5xSA625zB/I37EtrswSST6OXxwaaIJQ==}[m
 [m
[36m@@ -1605,6 +1790,10 @@[m [mpackages:[m
   markdown-table@3.0.4:[m
     resolution: {integrity: sha512-wiYz4+JrLyb/DqW2hkFJxP7Vd7JuTDm77fvbM8VfEQdmSMqcImWeeRbHwZjBjIFki/VaMK2BhFi7oUUZeM5bqw==}[m
 [m
[32m+[m[32m  math-intrinsics@1.1.0:[m
[32m+[m[32m    resolution: {integrity: sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==}[m
[32m+[m[32m    engines: {node: '>= 0.4'}[m
[32m+[m
   mdast-util-find-and-replace@3.0.2:[m
     resolution: {integrity: sha512-Tmd1Vg/m3Xz43afeNxDIhWRtFZgM2VLyaf4vSTYwudTyeuTneoL3qtWMA5jeLyz/O1vDJmmV4QuScFCA2tBPwg==}[m
 [m
[36m@@ -2085,17 +2274,6 @@[m [mpackages:[m
     resolution: {integrity: sha512-56rxCq7G/XfB4EkXq9Egn5GCqugWvDFjafDOThIdMBsI15iqPqR5r15TfSr1YPYeEI19YeaXMCbY6u88Y76GLQ==}[m
     engines: {node: ^10 || ^12 || >=14}[m
 [m
[31m-  primereact@10.9.2:[m
[31m-    resolution: {integrity: sha512-uJTghCPlnPWJc0mvkqYJDj6bl4udROPGrMEfV4CPh7UurMS+E8b+82ABZ+OPWibQOWxnEQl5NXcfG4F/7YRXwA==}[m
[31m-    engines: {node: '>=14.0.0'}[m
[31m-    peerDependencies:[m
[31m-      '@types/react': ^17.0.0 || ^18.0.0 || ^19.0.0[m
[31m-      react: ^17.0.0 || ^18.0.0 || ^19.0.0[m
[31m-      react-dom: ^17.0.0 || ^18.0.0 || ^19.0.0[m
[31m-    peerDependenciesMeta:[m
[31m-      '@types/react':[m
[31m-        optional: true[m
[31m-[m
   process-nextick-args@2.0.1:[m
     resolution: {integrity: sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag==}[m
 [m
[36m@@ -2109,6 +2287,9 @@[m [mpackages:[m
     resolution: {integrity: sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==}[m
     engines: {node: '>= 0.10'}[m
 [m
[32m+[m[32m  proxy-from-env@1.1.0:[m
[32m+[m[32m    resolution: {integrity: sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==}[m
[32m+[m
   punycode@2.3.1:[m
     resolution: {integrity: sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==}[m
     engines: {node: '>=6'}[m
[36m@@ -2400,12 +2581,6 @@[m [mpackages:[m
       react: ^0.14.0 || ^15.0.1 || ^16.0.0 || ^17.0.0 || ^18.0.0[m
       react-dom: ^0.14.0 || ^15.0.1 || ^16.0.0 || ^17.0.0 || ^18.0.0[m
 [m
[31m-  react-transition-group@4.4.5:[m
[31m-    resolution: {integrity: sha512-pZcd1MCJoiKiBR2NRxeCRg13uCXbydPnmB4EOeRrY7480qNWO8IIgQG6zlDkm6uRMsURXPuKq0GWtiM59a5Q6g==}[m
[31m-    peerDependencies:[m
[31m-      react: '>=16.6.0'[m
[31m-      react-dom: '>=16.6.0'[m
[31m-[m
   react@19.0.0-rc-02c0e824-20241028:[m
     resolution: {integrity: sha512-GbZ7hpPHQMiEu53BqEaPQVM/4GG4hARo+mqEEnx4rYporDvNvUjutiAFxYFSbu6sgHwcr7LeFv8htEOwALVA2A==}[m
     engines: {node: '>=0.10.0'}[m
[36m@@ -2526,6 +2701,11 @@[m [mpackages:[m
     engines: {node: '>=10'}[m
     hasBin: true[m
 [m
[32m+[m[32m  semver@7.7.2:[m
[32m+[m[32m    resolution: {integrity: sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==}[m
[32m+[m[32m    engines: {node: '>=10'}[m
[32m+[m[32m    hasBin: true[m
[32m+[m
   send@0.19.0:[m
     resolution: {integrity: sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==}[m
     engines: {node: '>= 0.8.0'}[m
[36m@@ -2557,6 +2737,10 @@[m [mpackages:[m
     resolution: {integrity: sha512-haPVm1EkS9pgvHrQ/F3Xy+hgcuMV0Wm9vfIBSiwZ05k+xgb0PkBQpGsAA/oWdDobNaZTH5ppvHtzCFbnSEwHVw==}[m
     engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
 [m
[32m+[m[32m  sharp@0.34.2:[m
[32m+[m[32m    resolution: {integrity: sha512-lszvBmB9QURERtyKT2bNmsgxXK0ShJrL/fvqlonCo7e6xBF8nT8xU6pW+PMIbLsz0RxQk3rgH9kd8UmvOzlMJg==}[m
[32m+[m[32m    engines: {node: ^18.17.0 || ^20.3.0 || >=21.0.0}[m
[32m+[m
   shebang-command@2.0.0:[m
     resolution: {integrity: sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==}[m
     engines: {node: '>=8'}[m
[36m@@ -3044,6 +3228,11 @@[m [msnapshots:[m
       tslib: 2.8.1[m
     optional: true[m
 [m
[32m+[m[32m  '@emnapi/runtime@1.4.3':[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      tslib: 2.8.1[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@emotion/hash@0.8.0': {}[m
 [m
   '@emotion/is-prop-valid@1.2.2':[m
[36m@@ -3109,76 +3298,157 @@[m [msnapshots:[m
       '@img/sharp-libvips-darwin-arm64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-darwin-arm64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-darwin-arm64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-darwin-x64@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-darwin-x64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-darwin-x64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-darwin-x64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-darwin-arm64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-darwin-arm64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-darwin-x64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-darwin-x64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linux-arm64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-arm64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linux-arm@1.0.5':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-arm@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
[32m+[m[32m  '@img/sharp-libvips-linux-ppc64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linux-s390x@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-s390x@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linux-x64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linux-x64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linuxmusl-arm64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linuxmusl-arm64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-libvips-linuxmusl-x64@1.0.4':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-libvips-linuxmusl-x64@1.1.0':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linux-arm64@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linux-arm64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linux-arm64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linux-arm64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linux-arm@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linux-arm': 1.0.5[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linux-arm@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linux-arm': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linux-s390x@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linux-s390x': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linux-s390x@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linux-s390x': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linux-x64@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linux-x64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linux-x64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linux-x64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linuxmusl-arm64@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linuxmusl-arm64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linuxmusl-arm64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linuxmusl-arm64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-linuxmusl-x64@0.33.5':[m
     optionalDependencies:[m
       '@img/sharp-libvips-linuxmusl-x64': 1.0.4[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-linuxmusl-x64@0.34.2':[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-libvips-linuxmusl-x64': 1.1.0[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-wasm32@0.33.5':[m
     dependencies:[m
       '@emnapi/runtime': 1.3.1[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-wasm32@0.34.2':[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      '@emnapi/runtime': 1.4.3[m
[32m+[m[32m    optional: true[m
[32m+[m
[32m+[m[32m  '@img/sharp-win32-arm64@0.34.2':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-win32-ia32@0.33.5':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-win32-ia32@0.34.2':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@img/sharp-win32-x64@0.33.5':[m
     optional: true[m
 [m
[32m+[m[32m  '@img/sharp-win32-x64@0.34.2':[m
[32m+[m[32m    optional: true[m
[32m+[m
   '@isaacs/cliui@8.0.2':[m
     dependencies:[m
       string-width: 5.1.2[m
[36m@@ -3454,10 +3724,6 @@[m [msnapshots:[m
     dependencies:[m
       '@types/react': 18.3.12[m
 [m
[31m-  '@types/react-transition-group@4.4.12(@types/react@18.3.12)':[m
[31m-    dependencies:[m
[31m-      '@types/react': 18.3.12[m
[31m-[m
   '@types/react@18.3.12':[m
     dependencies:[m
       '@types/prop-types': 15.7.13[m
[36m@@ -3677,6 +3943,8 @@[m [msnapshots:[m
 [m
   asap@2.0.6: {}[m
 [m
[32m+[m[32m  asynckit@0.4.0: {}[m
[32m+[m
   autoprefixer@10.4.20(postcss@8.4.31):[m
     dependencies:[m
       browserslist: 4.24.2[m
[36m@@ -3687,6 +3955,14 @@[m [msnapshots:[m
       postcss: 8.4.31[m
       postcss-value-parser: 4.2.0[m
 [m
[32m+[m[32m  axios@1.7.9:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      follow-redirects: 1.15.9[m
[32m+[m[32m      form-data: 4.0.2[m
[32m+[m[32m      proxy-from-env: 1.1.0[m
[32m+[m[32m    transitivePeerDependencies:[m
[32m+[m[32m      - debug[m
[32m+[m
   bail@2.0.2: {}[m
 [m
   balanced-match@1.0.2: {}[m
[36m@@ -3750,6 +4026,11 @@[m [msnapshots:[m
 [m
   bytes@3.1.2: {}[m
 [m
[32m+[m[32m  call-bind-apply-helpers@1.0.2:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      es-errors: 1.3.0[m
[32m+[m[32m      function-bind: 1.1.2[m
[32m+[m
   call-bind@1.0.7:[m
     dependencies:[m
       es-define-property: 1.0.0[m
[36m@@ -3810,7 +4091,6 @@[m [msnapshots:[m
     dependencies:[m
       color-name: 1.1.4[m
       simple-swizzle: 0.2.2[m
[31m-    optional: true[m
 [m
   color-support@1.1.3: {}[m
 [m
[36m@@ -3818,7 +4098,10 @@[m [msnapshots:[m
     dependencies:[m
       color-convert: 2.0.1[m
       color-string: 1.9.1[m
[31m-    optional: true[m
[32m+[m
[32m+[m[32m  combined-stream@1.0.8:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      delayed-stream: 1.0.0[m
 [m
   comma-separated-tokens@2.0.3: {}[m
 [m
[36m@@ -3921,6 +4204,8 @@[m [msnapshots:[m
       es-errors: 1.3.0[m
       gopd: 1.0.1[m
 [m
[32m+[m[32m  delayed-stream@1.0.0: {}[m
[32m+[m
   delegates@1.0.0: {}[m
 [m
   depd@2.0.0: {}[m
[36m@@ -3934,6 +4219,8 @@[m [msnapshots:[m
 [m
   detect-libc@2.0.3: {}[m
 [m
[32m+[m[32m  detect-libc@2.0.4: {}[m
[32m+[m
   devlop@1.1.0:[m
     dependencies:[m
       dequal: 2.0.3[m
[36m@@ -3947,11 +4234,6 @@[m [msnapshots:[m
 [m
   dlv@1.1.3: {}[m
 [m
[31m-  dom-helpers@5.2.1:[m
[31m-    dependencies:[m
[31m-      '@babel/runtime': 7.26.0[m
[31m-      csstype: 3.1.3[m
[31m-[m
   dot-case@3.0.4:[m
     dependencies:[m
       no-case: 3.0.4[m
[36m@@ -3959,6 +4241,12 @@[m [msnapshots:[m
 [m
   dotenv@16.4.5: {}[m
 [m
[32m+[m[32m  dunder-proto@1.0.1:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      call-bind-apply-helpers: 1.0.2[m
[32m+[m[32m      es-errors: 1.3.0[m
[32m+[m[32m      gopd: 1.2.0[m
[32m+[m
   eastasianwidth@0.2.0: {}[m
 [m
   ecdsa-sig-formatter@1.0.11:[m
[36m@@ -3988,10 +4276,23 @@[m [msnapshots:[m
     dependencies:[m
       get-intrinsic: 1.2.4[m
 [m
[32m+[m[32m  es-define-property@1.0.1: {}[m
[32m+[m
   es-errors@1.3.0: {}[m
 [m
   es-module-lexer@1.5.4: {}[m
 [m
[32m+[m[32m  es-object-atoms@1.1.1:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      es-errors: 1.3.0[m
[32m+[m
[32m+[m[32m  es-set-tostringtag@2.1.0:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      es-errors: 1.3.0[m
[32m+[m[32m      get-intrinsic: 1.3.0[m
[32m+[m[32m      has-tostringtag: 1.0.2[m
[32m+[m[32m      hasown: 2.0.2[m
[32m+[m
   escalade@3.2.0: {}[m
 [m
   escape-html@1.0.3: {}[m
[36m@@ -4101,11 +4402,20 @@[m [msnapshots:[m
     transitivePeerDependencies:[m
       - supports-color[m
 [m
[32m+[m[32m  follow-redirects@1.15.9: {}[m
[32m+[m
   foreground-child@3.3.0:[m
     dependencies:[m
       cross-spawn: 7.0.3[m
       signal-exit: 4.1.0[m
 [m
[32m+[m[32m  form-data@4.0.2:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      asynckit: 0.4.0[m
[32m+[m[32m      combined-stream: 1.0.8[m
[32m+[m[32m      es-set-tostringtag: 2.1.0[m
[32m+[m[32m      mime-types: 2.1.35[m
[32m+[m
   formidable@3.5.2:[m
     dependencies:[m
       dezalgo: 1.0.4[m
[36m@@ -4151,6 +4461,24 @@[m [msnapshots:[m
       has-symbols: 1.0.3[m
       hasown: 2.0.2[m
 [m
[32m+[m[32m  get-intrinsic@1.3.0:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      call-bind-apply-helpers: 1.0.2[m
[32m+[m[32m      es-define-property: 1.0.1[m
[32m+[m[32m      es-errors: 1.3.0[m
[32m+[m[32m      es-object-atoms: 1.1.1[m
[32m+[m[32m      function-bind: 1.1.2[m
[32m+[m[32m      get-proto: 1.0.1[m
[32m+[m[32m      gopd: 1.2.0[m
[32m+[m[32m      has-symbols: 1.1.0[m
[32m+[m[32m      hasown: 2.0.2[m
[32m+[m[32m      math-intrinsics: 1.1.0[m
[32m+[m
[32m+[m[32m  get-proto@1.0.1:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      dunder-proto: 1.0.1[m
[32m+[m[32m      es-object-atoms: 1.1.1[m
[32m+[m
   glob-parent@5.1.2:[m
     dependencies:[m
       is-glob: 4.0.3[m
[36m@@ -4183,6 +4511,8 @@[m [msnapshots:[m
     dependencies:[m
       get-intrinsic: 1.2.4[m
 [m
[32m+[m[32m  gopd@1.2.0: {}[m
[32m+[m
   graceful-fs@4.2.11: {}[m
 [m
   gray-matter@4.0.3:[m
[36m@@ -4202,6 +4532,12 @@[m [msnapshots:[m
 [m
   has-symbols@1.0.3: {}[m
 [m
[32m+[m[32m  has-symbols@1.1.0: {}[m
[32m+[m
[32m+[m[32m  has-tostringtag@1.0.2:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      has-symbols: 1.0.3[m
[32m+[m
   has-unicode@2.0.1: {}[m
 [m
   hasown@2.0.2:[m
[36m@@ -4301,8 +4637,7 @@[m [msnapshots:[m
       is-alphabetical: 2.0.1[m
       is-decimal: 2.0.1[m
 [m
[31m-  is-arrayish@0.3.2:[m
[31m-    optional: true[m
[32m+[m[32m  is-arrayish@0.3.2: {}[m
 [m
   is-binary-path@2.1.0:[m
     dependencies:[m
[36m@@ -4447,6 +4782,8 @@[m [msnapshots:[m
 [m
   markdown-table@3.0.4: {}[m
 [m
[32m+[m[32m  math-intrinsics@1.1.0: {}[m
[32m+[m
   mdast-util-find-and-replace@3.0.2:[m
     dependencies:[m
       '@types/mdast': 4.0.4[m
[36m@@ -5101,15 +5438,6 @@[m [msnapshots:[m
       picocolors: 1.1.1[m
       source-map-js: 1.2.1[m
 [m
[31m-  primereact@10.9.2(@types/react@18.3.12)(react-dom@19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028))(react@19.0.0-rc-02c0e824-20241028):[m
[31m-    dependencies:[m
[31m-      '@types/react-transition-group': 4.4.12(@types/react@18.3.12)[m
[31m-      react: 19.0.0-rc-02c0e824-20241028[m
[31m-      react-dom: 19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028)[m
[31m-      react-transition-group: 4.4.5(react-dom@19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028))(react@19.0.0-rc-02c0e824-20241028)[m
[31m-    optionalDependencies:[m
[31m-      '@types/react': 18.3.12[m
[31m-[m
   process-nextick-args@2.0.1: {}[m
 [m
   prop-types@15.8.1:[m
[36m@@ -5125,6 +5453,8 @@[m [msnapshots:[m
       forwarded: 0.2.0[m
       ipaddr.js: 1.9.1[m
 [m
[32m+[m[32m  proxy-from-env@1.1.0: {}[m
[32m+[m
   punycode@2.3.1: {}[m
 [m
   qs@6.13.0:[m
[36m@@ -5522,15 +5852,6 @@[m [msnapshots:[m
       react-dom: 19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028)[m
       resize-observer-polyfill: 1.5.1[m
 [m
[31m-  react-transition-group@4.4.5(react-dom@19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028))(react@19.0.0-rc-02c0e824-20241028):[m
[31m-    dependencies:[m
[31m-      '@babel/runtime': 7.26.0[m
[31m-      dom-helpers: 5.2.1[m
[31m-      loose-envify: 1.4.0[m
[31m-      prop-types: 15.8.1[m
[31m-      react: 19.0.0-rc-02c0e824-20241028[m
[31m-      react-dom: 19.0.0-rc-02c0e824-20241028(react@19.0.0-rc-02c0e824-20241028)[m
[31m-[m
   react@19.0.0-rc-02c0e824-20241028: {}[m
 [m
   read-cache@1.0.0:[m
[36m@@ -5672,6 +5993,8 @@[m [msnapshots:[m
 [m
   semver@7.6.3: {}[m
 [m
[32m+[m[32m  semver@7.7.2: {}[m
[32m+[m
   send@0.19.0:[m
     dependencies:[m
       debug: 2.6.9[m
[36m@@ -5747,6 +6070,34 @@[m [msnapshots:[m
       '@img/sharp-win32-x64': 0.33.5[m
     optional: true[m
 [m
[32m+[m[32m  sharp@0.34.2:[m
[32m+[m[32m    dependencies:[m
[32m+[m[32m      color: 4.2.3[m
[32m+[m[32m      detect-libc: 2.0.4[m
[32m+[m[32m      semver: 7.7.2[m
[32m+[m[32m    optionalDependencies:[m
[32m+[m[32m      '@img/sharp-darwin-arm64': 0.34.2[m
[32m+[m[32m      '@img/sharp-darwin-x64': 0.34.2[m
[32m+[m[32m      '@img/sharp-libvips-darwin-arm64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-darwin-x64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linux-arm': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linux-arm64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linux-ppc64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linux-s390x': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linux-x64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linuxmusl-arm64': 1.1.0[m
[32m+[m[32m      '@img/sharp-libvips-linuxmusl-x64': 1.1.0[m
[32m+[m[32m      '@img/sharp-linux-arm': 0.34.2[m
[32m+[m[32m      '@img/sharp-linux-arm64': 0.34.2[m
[32m+[m[32m      '@img/sharp-linux-s390x': 0.34.2[m
[32m+[m[32m      '@img/sharp-linux-x64': 0.34.2[m
[32m+[m[32m      '@img/sharp-linuxmusl-arm64': 0.34.2[m
[32m+[m[32m      '@img/sharp-linuxmusl-x64': 0.34.2[m
[32m+[m[32m      '@img/sharp-wasm32': 0.34.2[m
[32m+[m[32m      '@img/sharp-win32-arm64': 0.34.2[m
[32m+[m[32m      '@img/sharp-win32-ia32': 0.34.2[m
[32m+[m[32m      '@img/sharp-win32-x64': 0.34.2[m
[32m+[m
   shebang-command@2.0.0:[m
     dependencies:[m
       shebang-regex: 3.0.0[m
[36m@@ -5769,7 +6120,6 @@[m [msnapshots:[m
   simple-swizzle@0.2.2:[m
     dependencies:[m
       is-arrayish: 0.3.2[m
[31m-    optional: true[m
 [m
   slick-carousel@1.8.1(jquery@3.7.1):[m
     dependencies:[m
[1mdiff --git a/public/home.webp b/public/home.webp[m
[1mnew file mode 100644[m
[1mindex 0000000..d8f4f45[m
Binary files /dev/null and b/public/home.webp differ
[1mdiff --git a/public/home_.webp b/public/home_.webp[m
[1mnew file mode 100644[m
[1mindex 0000000..5ce81cf[m
Binary files /dev/null and b/public/home_.webp differ
[1mdiff --git a/public/images/bsf_emile_flyer_1745365200612.webp b/public/images/bsf_emile_flyer_1745365200612.webp[m
[1mdeleted file mode 100644[m
[1mindex 37afb5f..0000000[m
Binary files a/public/images/bsf_emile_flyer_1745365200612.webp and /dev/null differ
[1mdiff --git a/public/img/vente-religieuse/min/sainte-bible/fb_icon.webp b/public/img/vente-religieuse/min/sainte-bible/fb_icon.webp[m
[1mnew file mode 100644[m
[1mindex 0000000..ca06fe7[m
Binary files /dev/null and b/public/img/vente-religieuse/min/sainte-bible/fb_icon.webp differ
[1mdiff --git a/public/img/vente-religieuse/sainte-bible/fb_icon.webp b/public/img/vente-religieuse/sainte-bible/fb_icon.webp[m
[1mnew file mode 100644[m
[1mindex 0000000..ca06fe7[m
Binary files /dev/null and b/public/img/vente-religieuse/sainte-bible/fb_icon.webp differ
[1mdiff --git a/public/login.webp b/public/login.webp[m
[1mnew file mode 100644[m
[1mindex 0000000..f1dc859[m
Binary files /dev/null and b/public/login.webp differ
[1mdiff --git a/public/school/students/aladin-fabrice-jean/photo.png b/public/school/students/aladin-fabrice-jean/photo.png[m
[1mnew file mode 100644[m
[1mindex 0000000..e5e7b3e[m
Binary files /dev/null and b/public/school/students/aladin-fabrice-jean/photo.png differ
[1mdiff --git a/public/school/students/aladin-fabrice-jeanne/photo.png b/public/school/students/aladin-fabrice-jeanne/photo.png[m
[1mnew file mode 100644[m
[1mindex 0000000..8960227[m
Binary files /dev/null and b/public/school/students/aladin-fabrice-jeanne/photo.png differ
[1mdiff --git a/public/school/students/fees.svg b/public/school/students/fees.svg[m
[1mnew file mode 100644[m
[1mindex 0000000..c8db6a1[m
[1m--- /dev/null[m
[1m+++ b/public/school/students/fees.svg[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32m<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->[m
[32m+[m[32m<svg width="800px" height="800px" viewBox="62.370000000000005 70.49 675.3000000000001 675.3000000000001" xmlns="http://www.w3.org/2000/svg">[m
[32m+[m[32m<g fill="#ee1d52">[m
[32m+[m[32m<path d="M196 498.32l1.64 4.63c-.21-.53-.81-2.15-1.64-4.63zM260.9 393.39c2.88-24.88 12.66-38.81 31.09-53.09 26.37-19.34 59.31-8.4 59.31-8.4V267a135.84 135.84 0 0 1 23.94 1.48V352s-32.93-10.94-59.3 8.41c-18.42 14.27-28.22 28.21-31.09 53.09-.09 13.51 2.34 31.17 13.53 46.44q-4.15-2.22-8.46-5.06c-24.65-17.27-29.14-43.18-29.02-61.49zM511.25 147c-18.14-20.74-25-41.68-27.48-56.39h22.82s-4.55 38.57 28.61 76.5l.46.51A132.76 132.76 0 0 1 511.25 147zM621.18 205.8v81.84s-29.12-1.19-50.67-6.91c-30.09-8-49.43-20.27-49.43-20.27s-13.36-8.75-14.44-9.36v169c0 9.41-2.47 32.91-10 52.51-9.83 25.64-25 42.47-27.79 45.91 0 0-18.45 22.75-51 38.07-29.34 13.82-55.1 13.47-62.8 13.82 0 0-44.53 1.84-84.6-25.33a169.63 169.63 0 0 1-24.16-20.26l.2.15c40.08 27.17 84.6 25.33 84.6 25.33 7.71-.35 33.47 0 62.8-13.82 32.52-15.32 51-38.07 51-38.07 2.76-3.44 18-20.27 27.79-45.92 7.51-19.59 10-43.1 10-52.51V231c1.08.62 14.43 9.37 14.43 9.37s19.35 12.28 49.44 20.27c21.56 5.72 50.67 6.91 50.67 6.91v-64.13c9.96 2.33 18.45 2.96 23.96 2.38z"/>[m
[32m+[m[32m</g>[m
[32m+[m[32m<path d="M597.23 203.42v64.11s-29.11-1.19-50.67-6.91c-30.09-8-49.44-20.27-49.44-20.27s-13.35-8.75-14.43-9.37V400c0 9.41-2.47 32.92-10 52.51-9.83 25.65-25 42.48-27.79 45.92 0 0-18.46 22.75-51 38.07-29.33 13.82-55.09 13.47-62.8 13.82 0 0-44.52 1.84-84.6-25.33l-.2-.15a157.5 157.5 0 0 1-11.93-13.52c-12.79-16.27-20.63-35.51-22.6-41a.24.24 0 0 1 0-.07c-3.17-9.54-9.83-32.45-8.92-54.64 1.61-39.15 14.81-63.18 18.3-69.2A162.84 162.84 0 0 1 256.68 303a148.37 148.37 0 0 1 42.22-25 141.61 141.61 0 0 1 52.4-11v64.9s-32.94-10.9-59.3 8.4c-18.43 14.28-28.21 28.21-31.09 53.09-.12 18.31 4.37 44.22 29 61.5q4.31 2.85 8.46 5.06a65.85 65.85 0 0 0 15.5 15.05c24.06 15.89 44.22 17 70 6.68C401.06 474.78 414 459.23 420 442c3.77-10.76 3.72-21.59 3.72-32.79V90.61h60c2.48 14.71 9.34 35.65 27.48 56.39a132.76 132.76 0 0 0 24.41 20.62c2.64 2.85 16.14 16.94 33.47 25.59a130.62 130.62 0 0 0 28.15 10.21z"/>[m
[32m+[m[32m<path d="M187.89 450.39v.05l1.48 4.21c-.17-.49-.72-1.98-1.48-4.26z" fill="#69c9d0"/>[m
[32m+[m[32m<path d="M298.9 278a148.37 148.37 0 0 0-42.22 25 162.84 162.84 0 0 0-35.52 43.5c-3.49 6-16.69 30.05-18.3 69.2-.91 22.19 5.75 45.1 8.92 54.64a.24.24 0 0 0 0 .07c2 5.44 9.81 24.68 22.6 41a157.5 157.5 0 0 0 11.93 13.52 166.64 166.64 0 0 1-35.88-33.64c-12.68-16.13-20.5-35.17-22.54-40.79a1 1 0 0 1 0-.12v-.07c-3.18-9.53-9.86-32.45-8.93-54.67 1.61-39.15 14.81-63.18 18.3-69.2a162.68 162.68 0 0 1 35.52-43.5 148.13 148.13 0 0 1 42.22-25 144.63 144.63 0 0 1 29.78-8.75 148 148 0 0 1 46.57-.69V267a141.61 141.61 0 0 0-52.45 11z" fill="#69c9d0"/>[m
[32m+[m[32m<path d="M483.77 90.61h-60v318.61c0 11.2 0 22-3.72 32.79-6.06 17.22-18.95 32.77-36.13 39.67-25.79 10.36-45.95 9.21-70-6.68a65.85 65.85 0 0 1-15.54-15c20.49 10.93 38.83 10.74 61.55 1.62 17.17-6.9 30.08-22.45 36.12-39.68 3.78-10.76 3.73-21.59 3.73-32.78V70.49h82.85s-.93 7.92 1.14 20.12zM597.23 185.69v17.73a130.62 130.62 0 0 1-28.1-10.21c-17.33-8.65-30.83-22.74-33.47-25.59a93.69 93.69 0 0 0 9.52 5.48c21.07 10.52 41.82 13.66 52.05 12.59z" fill="#69c9d0"/>[m
[32m+[m[32m<path d="M486.85 701.51a22.75 22.75 0 0 1-1-6.73v-.16a24.53 24.53 0 0 0 1 6.89zM536.44 694.62v.16a23.07 23.07 0 0 1-1 6.73 24.89 24.89 0 0 0 1-6.89z" fill="none"/>[m
[32m+[m[32m<path d="M485.84 694.78a22.75 22.75 0 0 0 1 6.73 2.59 2.59 0 0 0 .14.45 25.28 25.28 0 0 0 24.16 17.8v25.59c-12.46 0-21.38.44-35-7.59-15.44-9.16-24.14-25.91-24.14-43.3 0-17.94 9.74-35.91 26.25-44.57 12-6.28 21.09-6.32 32.92-6.32v25.58a25.31 25.31 0 0 0-25.31 25.31z" fill="#69c9d0"/>[m
[32m+[m[32m<path d="M536.64 694.78a23.07 23.07 0 0 1-1 6.73c0 .15-.09.3-.14.45a25.3 25.3 0 0 1-24.16 17.8v25.59c12.45 0 21.38.44 34.95-7.59 15.49-9.16 24.21-25.91 24.21-43.3 0-17.94-9.74-35.91-26.25-44.57-12-6.28-21.09-6.32-32.91-6.32v25.58a25.31 25.31 0 0 1 25.3 25.31z" fill="#ee1d52"/>[m
[32m+[m[32m<path d="M119.51 620.36h93.71l-8.66 25.78H180v98.67h-30.13v-98.67h-30.36zm248.35 0v25.78h30.36v98.67h30.17v-98.67h24.52l8.66-25.78zm-134.25 29.38A14.6 14.6 0 1 0 219 635.15a14.59 14.59 0 0 0 14.61 14.59zM219 744.81h29.58v-84.75H219zM355 649h-34.6l-29.82 29.82v-58.36h-29.39l-.09 124.35h29.67v-32.4L300 704l28.8 40.77h31.72l-41.72-59.62zm283.77 36.17L674.94 649h-34.59l-29.83 29.82v-58.36h-29.38L581 744.81h29.68v-32.4L620 704l28.8 40.77h31.73zm-76.06 9.27c0 28.1-23.09 50.89-51.57 50.89s-51.57-22.79-51.57-50.89 23.09-50.89 51.57-50.89 51.57 22.8 51.57 50.91zm-26.27 0a25.3 25.3 0 1 0-25.3 25.3 25.3 25.3 0 0 0 25.3-25.28z"/>[m
[32m+[m[32m</svg>[m
\ No newline at end of file[m
[1mdiff --git a/public/school/students/interne.svg b/public/school/students/interne.svg[m
[1mnew file mode 100644[m
[1mindex 0000000..574fd06[m
[1m--- /dev/null[m
[1m+++ b/public/school/students/interne.svg[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32m<?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->[m[41m[m
[32m+[m[32m<svg width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">[m[41m[m
[32m+[m[32m  <defs>[m[41m[m
[32m+[m[32m    <polygon id="cart-a" points="0 0 1 3 11 3 12 0"/>[m[41m[m
[32m+[m[32m    <path id="cart-c" d="M4.01867032,7 L15.8260605,7 C15.8624695,7 15.8984188,7.0019917 15.9338076,7.00587329 L18.2075854,0.659227726 C18.3493483,0.263534454 18.7208253,0 19.1368299,0 L22.0108287,0 C22.5567095,0 22.9992334,0.44771525 22.9992334,1 C22.9992334,1.55228475 22.5567095,2 22.0108287,2 L19.8298966,2 L15.7669004,13.3407723 C15.6251376,13.7364655 15.2536606,14 14.8376559,14 L4.95360962,14 C4.52817021,14 4.15046241,13.7245699 4.01592666,13.3162278 L1.05071278,4.31622777 C0.83737186,3.66869665 1.31375252,3 1.98839574,3 L10.8840374,3 C11.4299182,3 11.872442,3.44771525 11.872442,4 C11.872442,4.55228475 11.4299182,5 10.8840374,5 L3.35973391,5 L4.01867032,7 Z M4.67760674,9 L5.66601137,12 L14.1445893,12 L15.2193828,9 L4.67760674,9 Z M6.93041888,19 C5.83865727,19 4.95360962,18.1045695 4.95360962,17 C4.95360962,15.8954305 5.83865727,15 6.93041888,15 C8.02218048,15 8.90722813,15.8954305 8.90722813,17 C8.90722813,18.1045695 8.02218048,19 6.93041888,19 Z M13.8492513,19 C12.7574897,19 11.872442,18.1045695 11.872442,17 C11.872442,15.8954305 12.7574897,15 13.8492513,15 C14.9410129,15 15.8260605,15.8954305 15.8260605,17 C15.8260605,18.1045695 14.9410129,19 13.8492513,19 Z"/>[m[41m[m
[32m+[m[32m  </defs>[m[41m[m
[32m+[m[32m  <g fill="none" fill-rule="evenodd" transform="translate(0 3)">[m[41m[m
[32m+[m[32m    <g transform="translate(4 10)">[m[41m[m
[32m+[m[32m      <mask id="cart-b" fill="#ffffff">[m[41m[m
[32m+[m[32m        <use xlink:href="#cart-a"/>[m[41m[m
[32m+[m[32m      </mask>[m[41m[m
[32m+[m[32m      <use fill="#D8D8D8" xlink:href="#cart-a"/>[m[41m[m
[32m+[m[32m      <g fill="#FFA0A0" mask="url(#cart-b)">[m[41m[m
[32m+[m[32m        <rect width="24" height="24" transform="translate(-4 -13)"/>[m[41m[m
[32m+[m[32m      </g>[m[41m[m
[32m+[m[32m    </g>[m[41m[m
[32m+[m[32m    <mask id="cart-d" fill="#ffffff">[m[41m[m
[32m+[m[32m      <use xlink:href="#cart-c"/>[m[41m[m
[32m+[m[32m    </mask>[m[41m[m
[32m+[m[32m    <use fill="#000000" fill-rule="nonzero" xlink:href="#cart-c"/>[m[41m[m
[32m+[m[32m    <g fill="#7600FF" mask="url(#cart-d)">[m[41m[m
[32m+[m[32m      <rect width="24" height="24" transform="translate(0 -3)"/>[m[41m[m
[32m+[m[32m    </g>[m[41m[m
[32m+[m[32m  </g>[m[41m[m
[32m+[m[32m</svg>[m
\ No newline at end of file[m
[1mdiff --git a/stores/authContext.js b/stores/authContext.js[m
[1mindex 2523163..3dd2016 100644[m
[1m--- a/stores/authContext.js[m
[1m+++ b/stores/authContext.js[m
[36m@@ -2,10 +2,12 @@[m
 [m
 import { createContext, useEffect, useState } from 'react'[m
 import { useRouter, usePathname } from 'next/navigation'[m
[32m+[m[32mimport * as Ecommerce_articles from "./../assets/datas/articles.js"[m
[32m+[m[32mimport * as CartLS from "../utils/favorisManager.js"[m
 import mongoose from 'mongoose'[m
 [m
 const AuthContext = createContext({})[m
[31m-export default AuthContext [m
[32m+[m[32mexport default AuthContext[m
 [m
 export const AuthContextProvider = ({children}) => {[m
     let router = useRouter()[m
[36m@@ -65,7 +67,7 @@[m [mexport const AuthContextProvider = ({children}) => {[m
             href:"/",[m
             title:"Accueil: Librairie religieuse chrétienne Abidjan, Ecommerce chrétien, centre de retraite spirituelle à Bolobi (entre azaguié et yakasseme, sur route d'Adzopé)",[m
             h2: "DÉCOUVRIR: La Puissance Divine de Côte d'ivoire",[m
[31m-            content:"🏡",[m
[32m+[m[32m            content:"",[m
             tagzone:["librairie","librairie religieuse","librairie religieuse chrétienne", "ecommerce chrétien", "sanctuaire bolobi", "retraites spirituelles"],[m
             titrePage:["Sanctuaire Notre Dame du Rosaire de Bolobi, et la Librairie Puissance Divine, vous souhaitent la bienvenue."],[m
             sns:{"Puissance Divine d'Amour d'Abidjan Cocody 2plateaux rue des jardins":"https://www.facebook.com/genevieve.achi/"},[m
[36m@@ -73,10 +75,12 @@[m [mexport const AuthContextProvider = ({children}) => {[m
         },[m
         // {id:"enseignements",href:"enseignements-spirituels-chretien-catholique",title:"Enseignements spirituels chrétien catholique Puissance Divine, jésus enseigne: l",content:"Enseignements",tagzone:[],titrePage:[],sns:{"librairie puissance divine abidjan rue des jardins": "https://www.facebook.com/abidjan.puissance.divine/","Maria Valtorta": "https://www.facebook.com/LibrairiePuissanceMariaValtorta/"}},[m
         {id:"activites-spirituelles"[m
[31m-            , href:"/sanctuaire-rosaire-bolobi-adzope"[m
[32m+[m[32m            // , href:"/sanctuaire-rosaire-bolobi-adzope"[m
[32m+[m[32m            , href:"/retraites-spirituelles-bolobi"[m
             , title:"Sanctuaire du Rosaire de Bolobi: activités spirituelles religieuses chrétien catholique"[m
             , h2:"RÉSERVER: au Sanctuaire ND Rosaire de BOLOBI"[m
[31m-            , content:"Sanctuaire ND du Rosaire Bolobi"[m
[32m+[m[32m            // , content:"Sanctuaire ND du Rosaire Bolobi"[m
[32m+[m[32m            , content:"Retraites Spirituelles"[m
             , tagzone:["retraites de prières"[m
                 , "activités spirituelles"[m
                 , "lieu de loisir abidjan"[m
[36m@@ -103,7 +107,8 @@[m [mexport const AuthContextProvider = ({children}) => {[m
             , search:"information+sanctuaire++rosaire+bolobi-blog"[m
         },[m
         // {id:"bolobi",href:"/bolobi-ecole-caritative-larve-msn",title:"Bolobi: école gratuite d'Adzopé, culture du poivre, élevage de mouches soldat noire, activités spirituelles religieuses chrétien catholique et protestant",content:"Oeuvres Caritatives",tagzone:["école caritative", "école saint martin de porèz de bolobi"],titrePage:["Les activités religieuses, caritatives, et économiques du sanctuaire de Bolobi, et de l'école St Martin de Porrez"],sns:{"École St Martin de Porèz de Bolobi": "https://www.facebook.com/abidjan.puissance.divine/"},search:"école+primaire+saint+martin+porès+bolobi+azaguié+yakasseme"},[m
[31m-        {id:"ecommerce",href:"/ecommerce-chretien-abidjan",title:"Ecommerce religieux chrétien catholique: icône grottes statues bibles",content:"Ecommerce Chrétien",tagzone:["ecommerce","librarie religieuse","librairie chrétienne","publication chrétiennes","objets de piété","bibles","saintes bibles", "icônes", "croix", "encens", "statue mariale", "grotte chrétienne", "chapelets de prière"],titrePage:["Ecommerce libraire puissance divine d'Amour, Cocody 2plateaux rue des jardins"],sns:{"librairie puissance divine abidjan rue des jardins": "https://www.facebook.com/abidjan.puissance.divine/","Maria Valtorta": "https://www.facebook.com/LibrairiePuissanceMariaValtorta/"},search:"ecommerce+religieux+chrétien+puissance+divine+amour"},[m
[32m+[m[32m        // {id:"ecommerce",href:"/ecommerce-chretien-abidjan",title:"Ecommerce religieux chrétien catholique: icône grottes statues bibles",content:"Ecommerce Chrétien",tagzone:["ecommerce","librarie religieuse","librairie chrétienne","publication chrétiennes","objets de piété","bibles","saintes bibles", "icônes", "croix", "encens", "statue mariale", "grotte chrétienne", "chapelets de prière"],titrePage:["Ecommerce libraire puissance divine d'Amour, Cocody 2plateaux rue des jardins"],sns:{"librairie puissance divine abidjan rue des jardins": "https://www.facebook.com/abidjan.puissance.divine/","Maria Valtorta": "https://www.facebook.com/LibrairiePuissanceMariaValtorta/"},search:"ecommerce+religieux+chrétien+puissance+divine+amour"},[m
[32m+[m[32m        {id:"ecommerce",href:"/ecom",title:"Ecommerce religieux chrétien catholique: icône grottes statues bibles",content:"Ecommerce Chrétien",tagzone:["ecommerce","librarie religieuse","librairie chrétienne","publication chrétiennes","objets de piété","bibles","saintes bibles", "icônes", "croix", "encens", "statue mariale", "grotte chrétienne", "chapelets de prière"],titrePage:["Ecommerce libraire puissance divine d'Amour, Cocody 2plateaux rue des jardins"],sns:{"librairie puissance divine abidjan rue des jardins": "https://www.facebook.com/abidjan.puissance.divine/","Maria Valtorta": "https://www.facebook.com/LibrairiePuissanceMariaValtorta/"},search:"ecommerce+religieux+chrétien+puissance+divine+amour"},[m
     ][m
     , findByIDMainMenu = (data, id) => data.find([m
         (item,i) => item.id == id[m
[1mdiff --git a/stores/ecomContext.js b/stores/ecomContext.js[m
[1mindex de3fc8c..ad8028d 100644[m
[1m--- a/stores/ecomContext.js[m
[1m+++ b/stores/ecomContext.js[m
[36m@@ -16,6 +16,7 @@[m [mexport const EcomContextProvider = ({children}) => {[m
         }[m
         return {};[m
     });[m
[32m+[m[32m    const [cartBox, setCartBox] = useState(false)[m
 [m
     // Fonction pour mettre à jour le panier[m
     const updateCart = useCallback(() => {[m
[36m@@ -86,10 +87,12 @@[m [mexport const EcomContextProvider = ({children}) => {[m
         miniCart,[m
         handleQty,[m
         updateCart,[m
[32m+[m[32m        cartBox,[m[41m [m
[32m+[m[32m        setCartBox,[m
         articles_title_table,[m
         selectOptions,[m
[31m-        setSelectOptions[m
[31m-    }), [cartData, miniCart, handleQty, updateCart, articles_title_table, selectOptions]);[m
[32m+[m[32m        setSelectOptions,[m
[32m+[m[32m    }), [cartData, miniCart, handleQty, updateCart, cartBox, setCartBox, articles_title_table, selectOptions]);[m
 [m
     return ([m
         <EcomContext.Provider value={contextValue}>[m
[1mdiff --git a/stores/formContext.js b/stores/formContext.js[m
[1mindex c195f75..922aeb1 100644[m
[1m--- a/stores/formContext.js[m
[1m+++ b/stores/formContext.js[m
[36m@@ -202,7 +202,7 @@[m [mexport const FormContextProvider = ({children}) => {[m
                     font-family: Arial;[m
                     font-weight: bold;[m
                     text-align: center;[m
[31m-                    width: 66%;[m
[32m+[m[32m                    width: 70%;[m
                     height: 100%;[m
                     background: #0380b3;[m
                     display: block;[m
[36m@@ -213,19 +213,22 @@[m [mexport const FormContextProvider = ({children}) => {[m
                     -ms-transition: margin 0.2s linear;[m
                     -o-transition: margin 0.2s linear;[m
                     transition: margin 0.2s linear;[m
[31m-                    margin-left: -66%;[m
[31m-                    &:first-of-type{line-height: 1.75em;}[m
[32m+[m[32m                    margin-left: -70%;[m
[32m+[m[32m                    &:first-of-type{[m
[32m+[m[32m                        line-height: 1.75em;[m
[32m+[m[32m                        font-size: 1.5em;[m
[32m+[m[32m                    }[m
                     ~span{[m
[31m-                    margin-left: 0;[m
[31m-                    background: none;[m
[31m-                    font-size:.75em;[m
[32m+[m[32m                        margin-left: 0;[m
[32m+[m[32m                        background: none;[m
[32m+[m[32m                        font-size: 1.5em;[m
                     }[m
                 }[m
                 >i.indicator{[m
                     float: left;[m
                     background: #ccc;[m
                     height: 100%;[m
[31m-                    width: 34%;[m
[32m+[m[32m                    width: 30%;[m
                     padding: 8px;[m
                     box-sizing: border-box;[m
                     >svg{[m
[1mdiff --git a/stores/test.txt b/stores/test.txt[m
[1mnew file mode 100644[m
[1mindex 0000000..311538f[m
[1m--- /dev/null[m
[1m+++ b/stores/test.txt[m
[36m@@ -0,0 +1,236 @@[m
[32m+[m[32mdiff --git a/app/_/Gmap.jsx b/app/_/Gmap.jsx[m
[32m+[m[32mindex bdccb01..3ecfece 100644[m
[32m+[m[32m--- a/app/_/Gmap.jsx[m
[32m+[m[32m+++ b/app/_/Gmap.jsx[m
[32m+[m[32m@@ -112,7 +112,7 @@ export default function Gmap() {[m
[32m+[m[32m     };[m
[32m+[m[41m [m
[32m+[m[32m     return <Wrapper[m[41m [m
[32m+[m[32m-        apiKey={"AIzaSyBJcEaaYtL4Y9RmWSDg10UW3dFFpUY6KXc"}[m[41m [m
[32m+[m[32m+        apiKey={"AIzaSyA91x3_pmeeoc1bwFWvj2dehOCBuH0VKcU"}[m[41m [m
[32m+[m[32m         render={render}[m
[32m+[m[32m     >[m
[32m+[m[32m         <Map[m[41m [m
[32m+[m[32mdiff --git a/app/_/Hgroup.jsx b/app/_/Hgroup.jsx[m
[32m+[m[32mindex abd8c25..ade92cb 100644[m
[32m+[m[32m--- a/app/_/Hgroup.jsx[m
[32m+[m[32m+++ b/app/_/Hgroup.jsx[m
[32m+[m[32m@@ -62,7 +62,8 @@ export default function Hgroup() {[m
[32m+[m[32m                         // fill="layout"[m
[32m+[m[32m                     />[m
[32m+[m[32m                     <span>[m
[32m+[m[32m-                        SANCTUAIRE Notre Dame du ROSAIRE de Bolobi[m
[32m+[m[32m+                        <span>SANCTUAIRE</span> <span>Notre Dame du ROSAIRE</span> <span>de Bolobi</span>[m
[32m+[m[32m+                        <span>Abidjan, Côte d'ivoire</span>[m
[32m+[m[32m                         {/* <strong>Évangélisation</strong>, <strong>Prière</strong> et{" "}[m
[32m+[m[32m                         <strong>Assistance spirituelle</strong> */}[m
[32m+[m[32m                     </span>[m
[32m+[m[32mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[32m+[m[32mindex 1b8315f..92b9940 100644[m
[32m+[m[32m--- a/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[32m+[m[32m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/Article.jsx[m
[32m+[m[32m@@ -2,17 +2,20 @@[m
[32m+[m[41m [m
[32m+[m[32m import Link from "next/link";[m
[32m+[m[32m import Cards from "./Cards";[m
[32m+[m[32m+import IntroVideo from './components/IntroVideo'[m
[32m+[m[41m [m
[32m+[m[41m [m
[32m+[m[41m [m
[32m+[m[41m [m
[32m+[m[32m export default function Article() {[m
[32m+[m[32m     return <article>[m
[32m+[m[32m-        <h3 id="firstH3" data-icon="1">Bienvenue au Sanctuaire Notre Dame du Rosaire à Bolobi, Abidjan, Côte d'Ivoire</h3>[m
[32m+[m[32m-[m
[32m+[m[41m [m
[32m+[m[32m+        <h3>Itinéraire vidéo vers le Sanctuaire notre Dame Raosaire Bolobi</h3>[m
[32m+[m[32m+        <p>Situé sur l'<b>axe routier Abidjan-Adzopé</b>, cette vidéo explique <b>comment se rendre au <u>Sanctuaire Notre Dame du Rosaire de Bolobi</u></b>.</p>[m
[32m+[m[32m+        <IntroVideo />[m
[32m+[m[32m         {/* <iframe width="560" height="315" src="https://www.youtube.com/embed/Yv3BHtHt3Pg?si=e2Kepaxuk2NhGbK1" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerPolicy="strict-origin-when-cross-origin" allowFullScreen></iframe> */}[m
[32m+[m[41m [m
[32m+[m[32m+        <h3 id="firstH3" data-icon="1">Bienvenue au Sanctuaire Notre Dame du Rosaire à Bolobi, Abidjan, Côte d'Ivoire</h3>[m
[32m+[m[41m [m
[32m+[m[32m         <p>Si vous êtes à la recherche d'<b>un lieu de paix, de prière et de recueillement au cœur de la nature</b>, le <Link href="#">Sanctuaire Notre Dame du Rosaire à Bolobi</Link> est l'endroit idéal pour vous.</p>[m
[32m+[m[32m         <p>Niché dans les magnifiques collines verdoyantes du <b>diocèse d'Agboville</b>, en périphérie du grand Abidjan sur la <b>route Abidjan-Adzopé</b>, s'étendant sur 18Ha, ce sanctuaire chrétien offre une expérience spirituelle apaisante et unique.</p>[m
[32m+[m[32mdiff --git a/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx b/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx[m
[32m+[m[32mnew file mode 100644[m
[32m+[m[32mindex 0000000..3f0d39d[m
[32m+[m[32m--- /dev/null[m
[32m+[m[32m+++ b/app/sanctuaire-rosaire-bolobi-adzope/_/components/IntroVideo.jsx[m
[32m+[m[32m@@ -0,0 +1,17 @@[m
[32m+[m[32m+const IntroVideo = () => {[m
[32m+[m[32m+    return ([m
[32m+[m[32m+        <div className="intro-video-container">[m
[32m+[m[32m+            <iframe[m
[32m+[m[32m+                // src="https://www.youtube.com/embed/FjO441MnCr8"[m
[32m+[m[32m+                src="https://www.youtube.com/embed/cSL0O2KJcWc?si=Hjq0LHhx5ZH9Ia9W"[m
[32m+[m[32m+                title="Présentation Librairie Puissance Divine"[m
[32m+[m[32m+                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"[m
[32m+[m[32m+                allowFullScreen[m
[32m+[m[32m+                className="intro-video"[m
[32m+[m[32m+                style={{width: "100%","height": "400px"}}[m
[32m+[m[32m+            />[m
[32m+[m[32m+        </div>[m
[32m+[m[32m+    );[m
[32m+[m[32m+};[m
[32m+[m[32m+[m
[32m+[m[32m+export default IntroVideo;[m
[32m+[m[32mdiff --git a/assets/scss/index.scss b/assets/scss/index.scss[m
[32m+[m[32mindex 585317f..3254db4 100644[m
[32m+[m[32m--- a/assets/scss/index.scss[m
[32m+[m[32m+++ b/assets/scss/index.scss[m
[32m+[m[32m@@ -606,7 +606,8 @@ body{[m
[32m+[m[32m         // top: 0;[m
[32m+[m[32m         >img{[m
[32m+[m[32m           height: 100%;[m
[32m+[m[32m-          width: 133px;[m
[32m+[m[32m+          // height: 100%;[m
[32m+[m[32m+          width: 125px;[m
[32m+[m[32m         }[m
[32m+[m[32m         >span{[m
[32m+[m[32m           // margin: 0 auto;[m
[32m+[m[32m@@ -626,15 +627,35 @@ body{[m
[32m+[m[32m           font-size: .8em;[m
[32m+[m[32m           &:not(:first-of-type)>span{display: none;}[m
[32m+[m[32m           >span{[m
[32m+[m[32m-            left: 133px;[m
[32m+[m[32m-            right: 133px;[m
[32m+[m[32m+            left: 125px;[m
[32m+[m[32m+            right: 125px;[m
[32m+[m[32m             font-size: 1em;[m
[32m+[m[32m             line-height: .75em;[m
[32m+[m[32m           }[m
[32m+[m[32m         }[m
[32m+[m[32m         &:nth-of-type(1)>span{[m
[32m+[m[32m+          font-size:.9em;[m
[32m+[m[32m           color: $secondary;[m
[32m+[m[32m           text-shadow: 0 1px 0px black,.1px 0px 0px black;[m
[32m+[m[32m+          @include mobile-only{[m
[32m+[m[32m+            display: flex;[m
[32m+[m[32m+            flex-flow: wrap;[m
[32m+[m[32m+            height: 100%;[m
[32m+[m[32m+            >span{[m
[32m+[m[32m+              width: 100%;[m
[32m+[m[32m+              &:nth-child(1){}[m
[32m+[m[32m+              &:nth-child(2){[m
[32m+[m[32m+                line-height: 1em;[m
[32m+[m[32m+              }[m
[32m+[m[32m+              &:nth-child(3){}[m
[32m+[m[32m+              &:nth-child(4){[m
[32m+[m[32m+                font-size: .5em;[m
[32m+[m[32m+                position: absolute;[m
[32m+[m[32m+                bottom: 0;[m
[32m+[m[32m+                letter-spacing: 1.5px;[m
[32m+[m[32m+              }[m
[32m+[m[32m+            }[m
[32m+[m[32m+          }[m
[32m+[m[32m         }[m
[32m+[m[32m         &:nth-of-type(2)>span{[m
[32m+[m[32m           top:calc(2em + 3px);[m
[32m+[m[32m@@ -861,12 +882,14 @@ body{[m
[32m+[m[32m               }[m
[32m+[m[32m               &.homeLink{[m
[32m+[m[32m                 >span{[m[41m    [m
[32m+[m[32m+                  background: url(../../public/home_.webp) center center no-repeat, black;[m
[32m+[m[32m+                  &:hover{background: url(../../public/home.webp) center center no-repeat,goldenrod;}[m
[32m+[m[32m+                  background-size: contain !important;[m
[32m+[m[32m                   width: 50px;[m
[32m+[m[32m                   height: 50px;[m
[32m+[m[32m                   border-radius: 2em;[m
[32m+[m[32m                   border: 1px solid;[m
[32m+[m[32m-                  box-shadow: 0 0 10px 1px black;[m
[32m+[m[32m-                  background: white;[m
[32m+[m[32m+                  // background: white;[m
[32m+[m[32m                   display: flex;[m
[32m+[m[32m                   align-items: center;[m
[32m+[m[32m                   justify-content: center;[m
[32m+[m[32m@@ -876,6 +899,7 @@ body{[m
[32m+[m[32m                   transition:all .1s;[m
[32m+[m[32m                   &:hover{[m
[32m+[m[32m                     border-width: 3px;[m
[32m+[m[32m+                    box-shadow: 0 0 10px 1px black;[m
[32m+[m[32m                   }[m
[32m+[m[32m                 }[m
[32m+[m[32m               }[m
[32m+[m[32m@@ -929,9 +953,19 @@ body{[m
[32m+[m[32m         // background:transparent;[m
[32m+[m[32m         transition:font-size .2s;[m
[32m+[m[32m         &:hover{font-size:1.2em;}[m
[32m+[m[32m-        background: url(../../public/img/login.png) no-repeat;[m
[32m+[m[32m-        background-size: contain;[m
[32m+[m[32m+        background: url(../../public/img/login.webp) no-repeat;[m
[32m+[m[32m+        background: url(../../public/login.webp) center center no-repeat;[m
[32m+[m[32m+        &:hover{background: url(../../public/login.webp) center center no-repeat, radial-gradient(gold, transparent);}[m
[32m+[m[32m+        background-size: contain !important;[m
[32m+[m[32m+        transition:background .4;[m
[32m+[m[32m+        border-left: 1px solid black;[m
[32m+[m[32m+        width: 100%;[m
[32m+[m[32m+        padding:1em;[m
[32m+[m[32m+        border:none;[m
[32m+[m[32m+        // background:transparent;[m
[32m+[m[32m         z-index: 2;[m
[32m+[m[32m+        transition:font-size .2s;[m
[32m+[m[32m+        &:hover{font-size:1.2em;}[m
[32m+[m[32m         &:has(*){background: unset;}[m
[32m+[m[32m       }[m
[32m+[m[32m       >form#connexion{[m
[32m+[m[32m@@ -1080,6 +1114,7 @@ body{[m
[32m+[m[32m       margin-bottom: 0;[m
[32m+[m[32m       @include mobile-only{[m
[32m+[m[32m         font-size: .7em;[m
[32m+[m[32m+        display:none;[m
[32m+[m[32m       }[m
[32m+[m[32m     }[m
[32m+[m[32m     /*[m
[32m+[m[32m@@ -2330,7 +2365,6 @@ body{[m
[32m+[m[32m                 border-radius: 100px;[m
[32m+[m[32m               }[m
[32m+[m[32m               >p{[m
[32m+[m[32m-                height:72%;[m
[32m+[m[32m                 position: relative;[m
[32m+[m[32m                 opacity: 1;[m
[32m+[m[32m                 font-size: .75em;[m
[32m+[m[32m@@ -2369,7 +2403,7 @@ body{[m
[32m+[m[32m             }[m
[32m+[m[32m             >p{[m
[32m+[m[32m               padding: 0.25em .25em 2em;[m
[32m+[m[32m-              max-height: 70%;[m
[32m+[m[32m+              height: 70%;[m
[32m+[m[32m               position: relative;[m
[32m+[m[32m               transition:all .5s .4s, background .2s;[m
[32m+[m[32m               opacity:0;[m
[32m+[m[32mdiff --git a/public/home.webp b/public/home.webp[m
[32m+[m[32mnew file mode 100644[m
[32m+[m[32mindex 0000000..d8f4f45[m
[32m+[m[32mBinary files /dev/null and b/public/home.webp differ[m
[32m+[m[32mdiff --git a/public/home_.webp b/public/home_.webp[m
[32m+[m[32mnew file mode 100644[m
[32m+[m[32mindex 0000000..5ce81cf[m
[32m+[m[32mBinary files /dev/null and b/public/home_.webp differ[m
[32m+[m[32mdiff --git a/public/login.webp b/public/login.webp[m
[32m+[m[32mnew file mode 100644[m
[32m+[m[32mindex 0000000..f1dc859[m
[32m+[m[32mBinary files /dev/null and b/public/login.webp differ[m
[32m+[m[32mdiff --git a/stores/authContext.js b/stores/authContext.js[m
[32m+[m[32mindex ea7f807..5be35ea 100644[m
[32m+[m[32m--- a/stores/authContext.js[m
[32m+[m[32m+++ b/stores/authContext.js[m
[32m+[m[32m@@ -133,7 +133,7 @@ export const AuthContextProvider = ({children}) => {[m
[32m+[m[32m             href:"/",[m
[32m+[m[32m             title:"Accueil: Librairie religieuse chrétienne Abidjan, Ecommerce chrétien, centre de retraite spirituelle à Bolobi (entre azaguié et yakasseme, sur route d'Adzopé)",[m
[32m+[m[32m             h2: "DÉCOUVRIR: La Puissance Divine de Côte d'ivoire",[m
[32m+[m[32m-            content:"🏡",[m
[32m+[m[32m+            content:"",[m
[32m+[m[32m             tagzone:["librairie","librairie religieuse","librairie religieuse chrétienne", "ecommerce chrétien", "sanctuaire bolobi", "retraites spirituelles"],[m
[32m+[m[32m             titrePage:["Sanctuaire Notre Dame du Rosaire de Bolobi, et la Librairie Puissance Divine, vous souhaitent la bienvenue."],[m
[32m+[m[32m             sns:{"Puissance Divine d'Amour d'Abidjan Cocody 2plateaux rue des jardins":"https://www.facebook.com/genevieve.achi/"},[m
[32m+[m[32m@@ -144,7 +144,8 @@ export const AuthContextProvider = ({children}) => {[m
[32m+[m[32m             , href:"/sanctuaire-rosaire-bolobi-adzope"[m
[32m+[m[32m             , title:"Sanctuaire du Rosaire de Bolobi: activités spirituelles religieuses chrétien catholique"[m
[32m+[m[32m             , h2:"RÉSERVER: au Sanctuaire ND Rosaire de BOLOBI"[m
[32m+[m[32m-            , content:"Sanctuaire ND du Rosaire Bolobi"[m
[32m+[m[32m+            // , content:"Sanctuaire ND du Rosaire Bolobi"[m
[32m+[m[32m+            , content:"Retraites Spirituelles"[m
[32m+[m[32m             , tagzone:["retraites de prières"[m
[32m+[m[32m                 , "activités spirituelles"[m
[32m+[m[32m                 , "lieu de loisir abidjan"[m
\ No newline at end of file[m
[1mdiff --git a/utils/auth/index.jsx b/utils/auth/index.jsx[m
[1mnew file mode 100644[m
[1mindex 0000000..728c13a[m
[1m--- /dev/null[m
[1m+++ b/utils/auth/index.jsx[m
[36m@@ -0,0 +1,29 @@[m
[32m+[m[32mimport React, {useState, useEffect, createContext} from 'react'[m
[32m+[m
[32m+[m[32mexport const AuthContext = createContext({cartBox:null,setCartBox:null})[m
[32m+[m
[32m+[m[32mexport const AuthProvider = ({ children }) => {[m
[32m+[m[32m    const [token, setToken] = useState(false)[m
[32m+[m[32m    , [user, setUser] = useState({})[m
[32m+[m[32m    , [datas, setDatas] = useState(false)[m[41m [m
[32m+[m[32m    let [cartBox, setCartBox] = useState(<div className="miniCart">dsqds</div>)[m
[32m+[m
[32m+[m[32m    /*[m
[32m+[m[32m    useEffect(() => {fetch('http://localhost:3000/api/data')[m
[32m+[m[32m        .then((res) => {[m
[32m+[m[32m            return res.json()[m
[32m+[m[32m        })[m
[32m+[m[32m        .then(contents => {[m
[32m+[m[32m            console.log(contents);[m
[32m+[m[32m            setDatas(contents)[m
[32m+[m[32m        })[m
[32m+[m	[32m}, [])[m
[32m+[m[32m    */[m
[32m+[m
[32m+[m[32m    return ([m
[32m+[m[32m        <AuthContext.Provider value={{ cartBox, setCartBox }}>[m
[32m+[m[32m        {/* <AuthContext.Provider value={{ token, setToken, user, setUser, datas, setDatas }}> */}[m
[32m+[m[32m            {children}[m
[32m+[m[32m        </AuthContext.Provider>[m
[32m+[m[32m    )[m
[32m+[m[32m}[m
[1mdiff --git a/utils/handleEvents.js b/utils/handleEvents.js[m
[1mindex bb6a5b8..1da2b4c 100644[m
[1m--- a/utils/handleEvents.js[m
[1m+++ b/utils/handleEvents.js[m
[36m@@ -44,6 +44,8 @@[m [mlet handleModalShowProduct = (e) => {[m
 [m
 }[m
 , handleProductsDisplay = (e) => { [m
[32m+[m[32m    console.log(e);[m
[32m+[m[41m    [m
     console.log('e.target.parentNode:', e.target.parentNode)[m
     e.target.parentNode.querySelectorAll('button').forEach(el=>{el.classList.remove('active')})[m
     e.target.classList.add('active')[m
[36m@@ -75,7 +77,8 @@[m [mlet handleModalShowProduct = (e) => {[m
     // console.log(setSelectOptions)[m
     if(!e.target.classList.contains('active')){[m
         let tmp = [][m
[31m-        document.querySelectorAll('.ecommerce>section>button').forEach(el => { [m
[32m+[m[32m        document.querySelectorAll('.ecommerce>section>section>button').forEach(el => {[m[41m [m
[32m+[m[32m            // alert('ok')[m
             el.classList.toggle('active')[m
         })[m
         document.querySelector('article#articles').classList.toggle('publication')[m
[36m@@ -86,8 +89,8 @@[m [mlet handleModalShowProduct = (e) => {[m
                 // alert((document.querySelector('main>section>button.active').innerHTML.charAt(0) == "P" && item.charAt(0) == "_")+"\n\n"+(document.querySelector('main>section>button.active').innerHTML.charAt(0) == "O" && item.charAt(0) != "_") )[m
                 [m
                 if( [m
[31m-                    document.querySelector('main>section>button.active').innerHTML.charAt(0) == "P" && item.charAt(0) == "_" [m
[31m-                    || document.querySelector('main>section>button.active').innerHTML.charAt(0) == "O" && item.charAt(0) != "_" [m
[32m+[m[32m                    document.querySelector('main>section>section>button.active').innerHTML.charAt(0) == "P" && item.charAt(0) == "_"[m[41m [m
[32m+[m[32m                    || document.querySelector('main>section>section>button.active').innerHTML.charAt(0) == "O" && item.charAt(0) != "_"[m[41m [m
                 )[m
                     return <option value={item.replace(' ','_').replace('.','_').replace('/','_')} key={"option_"+i}>[m
                         {Ecommerce_articles.articles_title_table[item]}[m
