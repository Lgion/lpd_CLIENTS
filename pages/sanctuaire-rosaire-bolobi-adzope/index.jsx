import { useState, useEffect, useContext } from 'react'
import Image from "next/image"
import Link from "next/link";
import Head from "next/head"
import AuthContext from "../../stores/authContext.js"
import mongoose from 'mongoose'
// import SliderInArticle from '../../components/_/SliderInArticle'
import Carousel from '../../components/_/Carousel'
// import Nav from '../../../components/Nav.jsx'
import { carouselBolobi_ } from "../../assets/carousels.js"
import LocateBolobi from "./_/LocateBolobi";
import ReserveForm from "./_/ReserveForm";
import { getPostsBy } from '../../components/_/Blog/_/lib/api'
import BlogCategory from '../../components/_/Blog/BlogCategory'
import Slider from "../api/_/models/Slider"

let carouselBolobi = carouselBolobi_.filter(elt => elt[Object.keys(elt)[0]] != "ecole-primaire-bolobi")

export default function LieuxActivites({ categoryPosts,diapos }) {
    // let {} = useContext(AuthContext)
    const headings = {
        h3: "CAT√âGORIE: \"SANCTUAIRE NOTRE DAME DU ROSAIRE DE BOLOBI\""
    }
    , [showArticle, setShowArticle] = useState(true)


    console.log(diapos)
    console.log(carouselBolobi)

    return <>
        <Head>
            <title>Create Next Appppp</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/favicon.ico" />
        </Head>

        <main className="sanctuaire_ndr">
            <article>
                <h3 id="un" data-icon="üòé">Bienvenue au Sanctuaire Notre Dame du Rosaire √† Bolobi, Abidjan, C√¥te d'Ivoire</h3>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/zG-Izk2dvy0?si=vClpbpS8Tqc_ecJK" title="YouTube video player" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowFullScreen />
                <p>Si vous √™tes √† la recherche d'<b>un lieu de paix, de pri√®re et de recueillement au c≈ìur de la nature</b>, le <Link href="#">Sanctuaire Notre Dame du Rosaire √† Bolobi</Link> est l'endroit id√©al pour vous.</p>
                <p>Nich√© dans les magnifiques collines verdoyantes du <b>dioc√®se d'Agboville</b>, en p√©riph√©rie du grand Abidjan sur la <b>route Abidjan-Adzop√©</b>, s'√©tendant sur 18Ha, ce sanctuaire chr√©tien offre une exp√©rience spirituelle apaisante et unique.</p>
                <p>Voici les principaux spots et infrastructures du Sanctuare ND du Rosaire de Bolobi: </p>
                <ul>
                    <li className='lieuBeni'>
                        <h4>Le Lieu B√©ni</h4>
                        <p>√âtendu sur 18 hectares d'espace vert, le sanctuaire de Bolobi offre un cadre vallonn√©, serein et rafra√Æchissant. C'est un havre de paix o√π vous pouvez vous retirer du tumulte de la vie quotidienne pour vous connecter avec votre foi et trouver la tranquillit√© int√©rieure.</p>
                    </li>
                    <li className='serenite'>
                        <h4>L'√âglise de S√©r√©nit√©</h4>
                        <p>L'√©glise au sein du sanctuaire peut accueillir jusqu'√† 150 fid√®les assis. De plus, une spacieuse esplanade permet d'accueillir plusieurs centaines de personnes pour des c√©l√©brations en plein air. Cette √©glise a √©t√© d√©dicac√©e le 10 Septembre 2016 par Monseigneur Alexis Touably Youlo, l'√©v√™que du dioc√®se d'Agboville.</p>
                    </li>
                    <li className='grotteMarial'>
                        <h4>La Grotte Mariale</h4>
                        <p>Un joyau spirituel du sanctuaire est la Grotte Mariale d√©di√©e √† Notre Dame du Rosaire. Consacr√©e le 10 Septembre 2016 par Monseigneur Alexis Touably Youlo, cette grotte est situ√©e au c≈ìur d'une vaste plantation de palmiers √† huile. Elle a la capacit√© d'accueillir plusieurs centaines de p√®lerins et de retraitants. De plus, les c√©l√©brations de la messe en plein air peuvent y avoir lieu, cr√©ant une atmosph√®re profond√©ment connect√©e √† la nature.</p>
                    </li>
                    <li className='facilities'>
                        <h4>Facilit√©s d'H√©bergement 1</h4>
                        <p>Si vous souhaitez prolonger votre s√©jour spirituel, le sanctuaire offre un centre d'accueil et d'h√©bergement avec une capacit√© de 150 √† 200 places. Cet espace est ouvert aux organisateurs de retraites spirituelles, de p√®lerinages, de r√©collections, d'excursions, ainsi qu'aux familles, aux personnes seules et aux convalescents. Le cadre paisible du sanctuaire cr√©e un environnement propice √† la r√©flexion et √† la reconnexion avec soi-m√™me.</p>
                    </li>
                    <li className='facilitiesBis'>
                        <h4>Solutions d'H√©bergement 2</h4>
                        <p>Le sanctuaire propose des h√©bergements abordables pour r√©pondre √† vos besoins. Vous avez le choix entre des dortoirs avec salle d'eau ext√©rieure √† seulement 1500 francs CFA par jour et par personne. Des studios avec salle d'eau sont √©galement disponibles; veuillez nous contacter pour plus d'informations sur les tarifs. De plus, le sanctuaire offre des options de restauration pour les p√®lerins et les retraitants qui le souhaitent.</p>
                    </li>
                    <li className='other'>
                        <h4>Activit√©s Inspirantes</h4>
                        <p>Les activit√©s spirituelles abondent au Sanctuaire Notre Dame du Rosaire, y compris des pri√®res quotidiennes, des pri√®res √† l'Esprit Saint et des pri√®res d'intercession. De plus, ne manquez pas la journ√©e nationale du Rosaire, qui est c√©l√©br√©e chaque ann√©e le 14 Ao√ªt √† Bolobi, rassemblant les c≈ìurs et les esprits dans la pri√®re et la m√©ditation.</p>
                    </li>
                </ul>
                <p>encore un peu de blablabla pour pr√©senter les diff√©rents types d'activit√©s possibles au Sanctuaire... Lorem ipsum, dolor sit amet consectetur adipisicing elit. Itaque suscipit, explicabo aperiam, eius eaque ratione, iusto deleniti quos iste quasi non assumenda rem neque quaerat sit in voluptatibus provident sed!</p>
                <Carousel diapos={diapos} titre={"TEST - EXEMPLE: "} />
                {/* <SliderInArticle carousel={carouselBolobi} carouselName="carouselBolobi_spirituel" /> */}
                {/* <button onClick={()=>{setShowArticle(!showArticle)}}>Afficher {!showArticle?"plus":"moins"}...</button> */}
                
            </article>
            <LocateBolobi />
            <ReserveForm />
            <BlogCategory {...{ categoryPosts, headings, className: "sndr" }} />
        </main>
    </>
}


export const getStaticProps = async () => {
    const categoryPosts = await getPostsBy(
        "category"
        , "sanctuaire"
    )

    const db = await mongoose.connect('mongodb+srv://archist:1&Bigcyri@cluster0.61na4.mongodb.net/?retryWrites=true&w=majority',
      {
        useNewUrlParser: true,
        useUnifiedTopology: true
      }
    )
    .then(() => console.log('Connexion √† MongoDB r√©ussie !'))
    .catch(() => console.log('Connexion √† MongoDB √©chou√©e !'))
    // console.log(Object.keys(db));
    // console.log(db.modelNames());
    // console.log(mongoose.modelNames());
    // console.log(mongoose.models);
    // console.log(db);
    let diapos = await mongoose?.model("Diapos_slider")
      ?.find({"identifiant_$_hidden": "home_0"})
      ?.then(r=>{
        console.log("HELOOOOOOOOOOOOOOOOOOO");
        console.log(r)
        return r
      }) || []
    diapos = JSON.parse(JSON.stringify(diapos))

    return {
        props: { categoryPosts, diapos },
    }
}
